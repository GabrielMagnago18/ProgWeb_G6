"use strict";var OX=Object.create;var Hh=Object.defineProperty;var M$=Object.getOwnPropertyDescriptor;var NX=Object.getOwnPropertyNames;var FX=Object.getPrototypeOf,BX=Object.prototype.hasOwnProperty;var UX=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),jX=(t,e)=>{for(var r in e)Hh(t,r,{get:e[r],enumerable:!0})},O$=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of NX(e))!BX.call(t,n)&&n!==r&&Hh(t,n,{get:()=>e[n],enumerable:!(i=M$(e,n))||i.enumerable});return t};var I=(t,e,r)=>(r=t!=null?OX(FX(t)):{},O$(e||!t||!t.__esModule?Hh(r,"default",{value:t,enumerable:!0}):r,t)),qX=t=>O$(Hh({},"__esModule",{value:!0}),t),$=(t,e,r,i)=>{for(var n=i>1?void 0:i?M$(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Hh(e,r,n),n},w=(t,e)=>(r,i)=>e(r,i,t);var Se=v((mAe,q$)=>{"use strict";var WX=Object.create,NH=Object.defineProperty,VX=Object.getOwnPropertyDescriptor,B$=Object.getOwnPropertyNames,GX=Object.getPrototypeOf,KX=Object.prototype.hasOwnProperty,zX=(t,e)=>function(){return e||(0,t[B$(t)[0]])((e={exports:{}}).exports,e),e.exports},XX=(t,e)=>{for(var r in e)NH(t,r,{get:e[r],enumerable:!0})},U$=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of B$(e))!KX.call(t,n)&&n!==r&&NH(t,n,{get:()=>e[n],enumerable:!(i=VX(e,n))||i.enumerable});return t},JX=(t,e,r)=>(r=t!=null?WX(GX(t)):{},U$(e||!t||!t.__esModule?NH(r,"default",{value:t,enumerable:!0}):r,t)),YX=t=>U$(NH({},"__esModule",{value:!0}),t),QX=zX({"node_modules/request-light/lib/node/main.js"(t){(()=>{var e={46:(o,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u,c,{signal:l}={}){return new Promise((p,f)=>{function h(){l==null||l.removeEventListener("abort",h),u.removeListener(c,g),u.removeListener("error",H)}function g(...b){h(),p(b)}function H(b){h(),f(b)}l==null||l.addEventListener("abort",h),u.on(c,g),u.on("error",H)})}},54:function(o,a,u){"use strict";var c=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};let l=u(361),p=c(u(374)),f=c(u(304)),h=p.default("agent-base");function g(){let{stack:b}=new Error;return typeof b=="string"&&b.split(`
`).some(_=>_.indexOf("(https.js:")!==-1||_.indexOf("node:https:")!==-1)}function H(b,_){return new H.Agent(b,_)}(function(b){class _ extends l.EventEmitter{constructor(U,C){super();let L=C;typeof U=="function"?this.callback=U:U&&(L=U),this.timeout=null,L&&typeof L.timeout=="number"&&(this.timeout=L.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:g()?443:80}set defaultPort(U){this.explicitDefaultPort=U}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:g()?"https:":"http:"}set protocol(U){this.explicitProtocol=U}callback(U,C,L){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(U,C){let L=Object.assign({},C);typeof L.secureEndpoint!="boolean"&&(L.secureEndpoint=g()),L.host==null&&(L.host="localhost"),L.port==null&&(L.port=L.secureEndpoint?443:80),L.protocol==null&&(L.protocol=L.secureEndpoint?"https:":"http:"),L.host&&L.path&&delete L.path,delete L.agent,delete L.hostname,delete L._defaultAgent,delete L.defaultPort,delete L.createConnection,U._last=!0,U.shouldKeepAlive=!1;let q=!1,j=null,F=L.timeout||this.timeout,T=O=>{U._hadError||(U.emit("error",O),U._hadError=!0)},N=()=>{j=null,q=!0;let O=new Error(`A "socket" was not created for HTTP request before ${F}ms`);O.code="ETIMEOUT",T(O)},E=O=>{q||(j!==null&&(clearTimeout(j),j=null),T(O))},M=O=>{if(q)return;if(j!=null&&(clearTimeout(j),j=null),z=O,Boolean(z)&&typeof z.addRequest=="function")return h("Callback returned another Agent instance %o",O.constructor.name),void O.addRequest(U,L);var z;if(O)return O.once("free",()=>{this.freeSocket(O,L)}),void U.onSocket(O);let D=new Error(`no Duplex stream was returned to agent-base for \`${U.method} ${U.path}\``);T(D)};if(typeof this.callback=="function"){this.promisifiedCallback||(this.callback.length>=3?(h("Converting legacy callback function to promise"),this.promisifiedCallback=f.default(this.callback)):this.promisifiedCallback=this.callback),typeof F=="number"&&F>0&&(j=setTimeout(N,F)),"port"in L&&typeof L.port!="number"&&(L.port=Number(L.port));try{h("Resolving socket for %o request: %o",L.protocol,`${U.method} ${U.path}`),Promise.resolve(this.promisifiedCallback(U,L)).then(M,E)}catch(O){Promise.reject(O).catch(E)}}else T(new Error("`callback` is not defined"))}freeSocket(U,C){h("Freeing socket %o %o",U.constructor.name,C),U.destroy()}destroy(){h("Destroying agent %o",this.constructor.name)}}b.Agent=_,b.prototype=b.Agent.prototype})(H||(H={})),o.exports=H},304:(o,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u){return function(c,l){return new Promise((p,f)=>{u.call(this,c,l,(h,g)=>{h?f(h):p(g)})})}}},370:function(o,a,u){"use strict";var c=this&&this.__awaiter||function(U,C,L,q){return new(L||(L=Promise))(function(j,F){function T(M){try{E(q.next(M))}catch(O){F(O)}}function N(M){try{E(q.throw(M))}catch(O){F(O)}}function E(M){var O;M.done?j(M.value):(O=M.value,O instanceof L?O:new L(function(z){z(O)})).then(T,N)}E((q=q.apply(U,C||[])).next())})},l=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(a,"__esModule",{value:!0});let p=l(u(808)),f=l(u(404)),h=l(u(310)),g=l(u(374)),H=l(u(46)),b=u(54),_=(0,g.default)("http-proxy-agent");class k extends b.Agent{constructor(C){let L;if(L=typeof C=="string"?h.default.parse(C):C,!L)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");_("Creating new HttpProxyAgent instance: %o",L),super(L);let q=Object.assign({},L);var j;this.secureProxy=L.secureProxy||typeof(j=q.protocol)=="string"&&/^https:?$/i.test(j),q.host=q.hostname||q.host,typeof q.port=="string"&&(q.port=parseInt(q.port,10)),!q.port&&q.host&&(q.port=this.secureProxy?443:80),q.host&&q.path&&(delete q.path,delete q.pathname),this.proxy=q}callback(C,L){return c(this,void 0,void 0,function*(){let{proxy:q,secureProxy:j}=this,F=h.default.parse(C.path),T;if(F.protocol||(F.protocol="http:"),F.hostname||(F.hostname=L.hostname||L.host||null),F.port==null&&(L.port,1)&&(F.port=String(L.port)),F.port==="80"&&(F.port=""),C.path=h.default.format(F),q.auth&&C.setHeader("Proxy-Authorization",`Basic ${Buffer.from(q.auth).toString("base64")}`),j?(_("Creating `tls.Socket`: %o",q),T=f.default.connect(q)):(_("Creating `net.Socket`: %o",q),T=p.default.connect(q)),C._header){let N,E;_("Regenerating stored HTTP header string for request"),C._header=null,C._implicitHeader(),C.output&&C.output.length>0?(_("Patching connection write() output buffer with updated header"),N=C.output[0],E=N.indexOf(`\r
\r
`)+4,C.output[0]=C._header+N.substring(E),_("Output buffer: %o",C.output)):C.outputData&&C.outputData.length>0&&(_("Patching connection write() output buffer with updated header"),N=C.outputData[0].data,E=N.indexOf(`\r
\r
`)+4,C.outputData[0].data=C._header+N.substring(E),_("Output buffer: %o",C.outputData[0].data))}return yield(0,H.default)(T,"connect"),T})}}a.default=k},201:function(o,a,u){"use strict";let c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(u(370));function l(p){return new c.default(p)}(function(p){p.HttpProxyAgent=c.default,p.prototype=c.default.prototype})(l||(l={})),o.exports=l},146:function(o,a,u){"use strict";var c=this&&this.__awaiter||function(L,q,j,F){return new(j||(j=Promise))(function(T,N){function E(z){try{O(F.next(z))}catch(D){N(D)}}function M(z){try{O(F.throw(z))}catch(D){N(D)}}function O(z){var D;z.done?T(z.value):(D=z.value,D instanceof j?D:new j(function(P){P(D)})).then(E,M)}O((F=F.apply(L,q||[])).next())})},l=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(a,"__esModule",{value:!0});let p=l(u(808)),f=l(u(404)),h=l(u(310)),g=l(u(491)),H=l(u(374)),b=u(54),_=l(u(829)),k=H.default("https-proxy-agent:agent");class U extends b.Agent{constructor(q){let j;if(j=typeof q=="string"?h.default.parse(q):q,!j)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");k("creating new HttpsProxyAgent instance: %o",j),super(j);let F=Object.assign({},j);var T;this.secureProxy=j.secureProxy||typeof(T=F.protocol)=="string"&&/^https:?$/i.test(T),F.host=F.hostname||F.host,typeof F.port=="string"&&(F.port=parseInt(F.port,10)),!F.port&&F.host&&(F.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in F)&&(F.ALPNProtocols=["http 1.1"]),F.host&&F.path&&(delete F.path,delete F.pathname),this.proxy=F}callback(q,j){return c(this,void 0,void 0,function*(){let{proxy:F,secureProxy:T}=this,N;T?(k("Creating `tls.Socket`: %o",F),N=f.default.connect(F)):(k("Creating `net.Socket`: %o",F),N=p.default.connect(F));let E=Object.assign({},F.headers),M=`CONNECT ${j.host}:${j.port} HTTP/1.1\r
`;F.auth&&(E["Proxy-Authorization"]=`Basic ${Buffer.from(F.auth).toString("base64")}`);let{host:O,port:z,secureEndpoint:D}=j;(function(J,te){return Boolean(!te&&J===80||te&&J===443)})(z,D)||(O+=`:${z}`),E.Host=O,E.Connection="close";for(let J of Object.keys(E))M+=`${J}: ${E[J]}\r
`;let P=_.default(N);N.write(`${M}\r
`);let{statusCode:ee,buffered:ie}=yield P;if(ee===200){if(q.once("socket",C),j.secureEndpoint){k("Upgrading socket connection to TLS");let J=j.servername||j.host;return f.default.connect(Object.assign(Object.assign({},function(te,...ce){let ae={},he;for(he in te)ce.includes(he)||(ae[he]=te[he]);return ae}(j,"host","hostname","path","port")),{socket:N,servername:J}))}return N}N.destroy();let ne=new p.default.Socket({writable:!1});return ne.readable=!0,q.once("socket",J=>{k("replaying proxy buffer for failed request"),g.default(J.listenerCount("data")>0),J.push(ie),J.push(null)}),ne})}}function C(L){L.resume()}a.default=U},18:function(o,a,u){"use strict";let c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(u(146));function l(p){return new c.default(p)}(function(p){p.HttpsProxyAgent=c.default,p.prototype=c.default.prototype})(l||(l={})),o.exports=l},829:function(o,a,u){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(a,"__esModule",{value:!0});let l=c(u(374)).default("https-proxy-agent:parse-proxy-response");a.default=function(p){return new Promise((f,h)=>{let g=0,H=[];function b(){let U=p.read();U?function(C){H.push(C),g+=C.length;let L=Buffer.concat(H,g);if(L.indexOf(`\r
\r
`)===-1)return l("have not received end of HTTP headers yet..."),void b();let q=L.toString("ascii",0,L.indexOf(`\r
`)),j=+q.split(" ")[1];l("got proxy server response: %o",q),f({statusCode:j,buffered:L})}(U):p.once("readable",b)}function _(U){l("onclose had error %o",U)}function k(){l("onend")}p.on("error",function U(C){p.removeListener("end",k),p.removeListener("error",U),p.removeListener("close",_),p.removeListener("readable",b),l("onerror %o",C),h(C)}),p.on("close",_),p.on("end",k),b()})}},539:function(o,a,u){"use strict";var c,l=this&&this.__extends||(c=function(T,N){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,M){E.__proto__=M}||function(E,M){for(var O in M)Object.prototype.hasOwnProperty.call(M,O)&&(E[O]=M[O])},c(T,N)},function(T,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function E(){this.constructor=T}c(T,N),T.prototype=N===null?Object.create(N):(E.prototype=N.prototype,new E)}),p=this&&this.__assign||function(){return p=Object.assign||function(T){for(var N,E=1,M=arguments.length;E<M;E++)for(var O in N=arguments[E])Object.prototype.hasOwnProperty.call(N,O)&&(T[O]=N[O]);return T},p.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.getErrorStatusDescription=a.xhr=a.configure=void 0;var f=u(685),h=u(687),g=u(310),H=u(472),b=u(796),_=u(201),k=u(18);if(process.env.VSCODE_NLS_CONFIG){var U=process.env.VSCODE_NLS_CONFIG;H.config(JSON.parse(U))}var C=H.loadMessageBundle(),L=void 0,q=!0;function j(T){var N;return new Promise(function(E,M){var O=(0,g.parse)(T.url),z={hostname:O.hostname,agent:!!T.agent&&T.agent,port:O.port?parseInt(O.port):O.protocol==="https:"?443:80,path:O.path,method:T.type||"GET",headers:T.headers,rejectUnauthorized:typeof T.strictSSL!="boolean"||T.strictSSL};T.user&&T.password&&(z.auth=T.user+":"+T.password);var D=function(P){if(P.statusCode>=300&&P.statusCode<400&&T.followRedirects&&T.followRedirects>0&&P.headers.location){var ee=P.headers.location;ee.startsWith("/")&&(ee=(0,g.format)({protocol:O.protocol,hostname:O.hostname,port:O.port,pathname:ee})),E(j(function(ie){for(var ne=[],J=1;J<arguments.length;J++)ne[J-1]=arguments[J];return ne.forEach(function(te){return Object.keys(te).forEach(function(ce){return ie[ce]=te[ce]})}),ie}({},T,{url:ee,followRedirects:T.followRedirects-1})))}else E({req:N,res:P})};(N=O.protocol==="https:"?h.request(z,D):f.request(z,D)).on("error",M),T.timeout&&N.setTimeout(T.timeout),T.data&&N.write(T.data),N.end(),T.token&&(T.token.isCancellationRequested&&N.destroy(new F),T.token.onCancellationRequested(function(){N.destroy(new F)}))})}a.configure=function(T,N){L=T,q=N},a.xhr=function(T){return typeof(T=p({},T)).strictSSL!="boolean"&&(T.strictSSL=q),T.agent||(T.agent=function(N,E){E===void 0&&(E={});var M=(0,g.parse)(N),O=E.proxyUrl||function(P){return P.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:P.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(M);if(!O)return null;var z=(0,g.parse)(O);if(!/^https?:$/.test(z.protocol))return null;var D={host:z.hostname,port:Number(z.port),auth:z.auth,rejectUnauthorized:typeof E.strictSSL!="boolean"||E.strictSSL,protocol:z.protocol};return M.protocol==="http:"?_(D):k(D)}(T.url,{proxyUrl:L,strictSSL:q})),typeof T.followRedirects!="number"&&(T.followRedirects=5),j(T).then(function(N){return new Promise(function(E,M){var O,z,D=N.res,P=D,ee=!1,ie=D.headers&&D.headers["content-encoding"];if(ie&&(O=T.type,z=N.res.statusCode,!(O==="HEAD"||z>=100&&z<200||z===204||z===304))){var ne={flush:b.constants.Z_SYNC_FLUSH,finishFlush:b.constants.Z_SYNC_FLUSH};if(ie==="gzip"){var J=b.createGunzip(ne);D.pipe(J),P=J}else if(ie==="deflate"){var te=b.createInflate(ne);D.pipe(te),P=te}}var ce=[];P.on("data",function(ae){return ce.push(ae)}),P.on("end",function(){if(!ee){if(ee=!0,T.followRedirects>0&&(D.statusCode>=300&&D.statusCode<=303||D.statusCode===307)){var ae=D.headers.location;if(ae.startsWith("/")){var he=(0,g.parse)(T.url);ae=(0,g.format)({protocol:he.protocol,hostname:he.hostname,port:he.port,pathname:ae})}if(ae){var dt={type:T.type,url:ae,user:T.user,password:T.password,headers:T.headers,timeout:T.timeout,followRedirects:T.followRedirects-1,data:T.data,token:T.token};return void(0,a.xhr)(dt).then(E,M)}}var ge=Buffer.concat(ce),Vt={responseText:ge.toString(),body:ge,status:D.statusCode,headers:D.headers||{}};D.statusCode>=200&&D.statusCode<300||D.statusCode===1223?E(Vt):M(Vt)}}),P.on("error",function(ae){var he;he=F.is(ae)?ae:{responseText:C("error","Unable to access {0}. Error: {1}",T.url,ae.message),body:Buffer.concat(ce),status:500,headers:{}},ee=!0,M(he)}),T.token&&(T.token.isCancellationRequested&&P.destroy(new F),T.token.onCancellationRequested(function(){P.destroy(new F)}))})},function(N){var E;return E=F.is(N)?N:{responseText:T.agent?C("error.cannot.connect.proxy","Unable to connect to {0} through a proxy. Error: {1}",T.url,N.message):C("error.cannot.connect","Unable to connect to {0}. Error: {1}",T.url,N.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(E)})},a.getErrorStatusDescription=function(T){if(!(T<400))switch(T){case 400:return C("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return C("status.401","Unauthorized. The server is refusing to respond.");case 403:return C("status.403","Forbidden. The server is refusing to respond.");case 404:return C("status.404","Not Found. The requested location could not be found.");case 405:return C("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return C("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return C("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return C("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return C("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return C("status.410","Gone. The requested page is no longer available.");case 411:return C("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return C("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return C("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return C("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return C("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return C("status.500","Internal Server Error.");case 501:return C("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 503:return C("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return C("status.416","HTTP status code {0}",T)}};var F=function(T){function N(){var E=T.call(this,"The user aborted a request")||this;return E.name="AbortError",Object.setPrototypeOf(E,N.prototype),E}return l(N,T),N.is=function(E){return E instanceof N},N}(Error)},800:(o,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.localize=a.format=a.setPseudo=a.isPseudo=a.isDefined=a.BundleFormat=a.MessageFormat=void 0;var c,l,p,f=u(926);function h(H){return H!==void 0}function g(H,b){return a.isPseudo&&(H="\uFF3B"+H.replace(/[aouei]/g,"$&$&")+"\uFF3D"),b.length===0?H:H.replace(/\{(\d+)\}/g,function(_,k){var U=k[0],C=b[U],L=_;return typeof C=="string"?L=C:typeof C!="number"&&typeof C!="boolean"&&C!=null||(L=String(C)),L})}(p=a.MessageFormat||(a.MessageFormat={})).file="file",p.bundle="bundle",p.both="both",(l=a.BundleFormat||(a.BundleFormat={})).standalone="standalone",l.languagePack="languagePack",function(H){H.is=function(b){var _=b;return _&&h(_.key)&&h(_.comment)}}(c||(c={})),a.isDefined=h,a.isPseudo=!1,a.setPseudo=function(H){a.isPseudo=H},a.format=g,a.localize=function(H,b){for(var _=[],k=2;k<arguments.length;k++)_[k-2]=arguments[k];return g(b,_)},a.loadMessageBundle=function(H){return(0,f.default)().loadMessageBundle(H)},a.config=function(H){return(0,f.default)().config(H)}},926:(o,a)=>{"use strict";var u;function c(){if(u===void 0)throw new Error("No runtime abstraction layer installed");return u}Object.defineProperty(a,"__esModule",{value:!0}),function(l){l.install=function(p){if(p===void 0)throw new Error("No runtime abstraction layer provided");u=p}}(c||(c={})),a.default=c},472:(o,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.BundleFormat=a.MessageFormat=void 0;var c=u(17),l=u(147),p=u(926),f=u(800),h=u(800);Object.defineProperty(a,"MessageFormat",{enumerable:!0,get:function(){return h.MessageFormat}}),Object.defineProperty(a,"BundleFormat",{enumerable:!0,get:function(){return h.BundleFormat}});var g,H,b=Object.prototype.toString;function _(N){return b.call(N)==="[object Number]"}function k(N){return b.call(N)==="[object String]"}function U(N){return JSON.parse(l.readFileSync(N,"utf8"))}function C(N){return function(E,M){for(var O=[],z=2;z<arguments.length;z++)O[z-2]=arguments[z];return _(E)?E>=N.length?void console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack)):(0,f.format)(N[E],O):k(M)?(console.warn("Message ".concat(M," didn't get externalized correctly.")),(0,f.format)(M,O)):void console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}function L(N,E){return g[N]=E,E}function q(N){try{return function(E){var M=U(c.join(E,"nls.metadata.json")),O=Object.create(null);for(var z in M){var D=M[z];O[z]=D.messages}return O}(N)}catch(E){return void console.log("Generating default bundle from meta data failed.",E)}}function j(N,E){var M;if(H.languagePackSupport===!0&&H.cacheRoot!==void 0&&H.languagePackId!==void 0&&H.translationsConfigFile!==void 0&&H.translationsConfig!==void 0)try{M=function(z,D){var P,ee,ie,ne=c.join(H.cacheRoot,"".concat(z.id,"-").concat(z.hash,".json")),J=!1,te=!1;try{return P=JSON.parse(l.readFileSync(ne,{encoding:"utf8",flag:"r"})),ee=ne,ie=new Date,l.utimes(ee,ie,ie,function(){}),P}catch(ce){if(ce.code==="ENOENT")te=!0;else{if(!(ce instanceof SyntaxError))throw ce;console.log("Syntax error parsing message bundle: ".concat(ce.message,".")),l.unlink(ne,function(ae){ae&&console.error("Deleting corrupted bundle ".concat(ne," failed."))}),J=!0}}if(P=function(ce,ae){var he=H.translationsConfig[ce.id];if(he){var dt=U(he).contents,ge=U(c.join(ae,"nls.metadata.json")),Vt=Object.create(null);for(var Br in ge){var Z=ge[Br],Ae=dt["".concat(ce.outDir,"/").concat(Br)];if(Ae){for(var Q=[],be=0;be<Z.keys.length;be++){var ze=Z.keys[be],_t=Ae[k(ze)?ze:ze.key];_t===void 0&&(_t=Z.messages[be]),Q.push(_t)}Vt[Br]=Q}else Vt[Br]=Z.messages}return Vt}}(z,D),!P||J)return P;if(te)try{l.writeFileSync(ne,JSON.stringify(P),{encoding:"utf8",flag:"wx"})}catch(ce){if(ce.code==="EEXIST")return P;throw ce}return P}(N,E)}catch(z){console.log("Load or create bundle failed ",z)}if(!M){if(H.languagePackSupport)return q(E);var O=function(z){for(var D=H.language;D;){var P=c.join(z,"nls.bundle.".concat(D,".json"));if(l.existsSync(P))return P;var ee=D.lastIndexOf("-");D=ee>0?D.substring(0,ee):void 0}if(D===void 0&&(P=c.join(z,"nls.bundle.json"),l.existsSync(P)))return P}(E);if(O)try{return U(O)}catch(z){console.log("Loading in the box message bundle failed.",z)}M=q(E)}return M}function F(N){if(!N)return f.localize;var E=c.extname(N);if(E&&(N=N.substr(0,N.length-E.length)),H.messageFormat===f.MessageFormat.both||H.messageFormat===f.MessageFormat.bundle){var M=function(J){for(var te,ce=c.dirname(J);te=c.join(ce,"nls.metadata.header.json"),!l.existsSync(te);){var ae=c.dirname(ce);if(ae===ce){te=void 0;break}ce=ae}return te}(N);if(M){var O=c.dirname(M),z=g[O];if(z===void 0)try{var D=JSON.parse(l.readFileSync(M,"utf8"));try{var P=j(D,O);z=L(O,P?{header:D,nlsBundle:P}:null)}catch(J){console.error("Failed to load nls bundle",J),z=L(O,null)}}catch(J){console.error("Failed to read header file",J),z=L(O,null)}if(z){var ee=N.substr(O.length+1).replace(/\\/g,"/"),ie=z.nlsBundle[ee];return ie===void 0?(console.error("Messages for file ".concat(N," not found. See console for details.")),function(){return"Messages not found."}):C(ie)}}}if(H.messageFormat===f.MessageFormat.both||H.messageFormat===f.MessageFormat.file)try{var ne=U(function(J){var te;if(!(H.cacheLanguageResolution&&te)){if(f.isPseudo||!H.language)te=".nls.json";else for(var ce=H.language;ce;){var ae=".nls."+ce+".json";if(l.existsSync(J+ae)){te=ae;break}var he=ce.lastIndexOf("-");he>0?ce=ce.substring(0,he):(te=".nls.json",ce=null)}H.cacheLanguageResolution}return J+te}(N));return Array.isArray(ne)?C(ne):(0,f.isDefined)(ne.messages)&&(0,f.isDefined)(ne.keys)?C(ne.messages):(console.error("String bundle '".concat(N,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(J){J.code!=="ENOENT"&&console.error("Failed to load single file bundle",J)}return console.error("Failed to load message bundle for file ".concat(N)),function(){return"Failed to load message bundle. See console for details."}}function T(N){return N&&(k(N.locale)&&(H.locale=N.locale.toLowerCase(),H.language=H.locale,g=Object.create(null)),N.messageFormat!==void 0&&(H.messageFormat=N.messageFormat),N.bundleFormat===f.BundleFormat.standalone&&H.languagePackSupport===!0&&(H.languagePackSupport=!1)),(0,f.setPseudo)(H.locale==="pseudo"),F}(function(){if(H={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:f.MessageFormat.bundle},k(process.env.VSCODE_NLS_CONFIG))try{var N=JSON.parse(process.env.VSCODE_NLS_CONFIG),E=void 0;if(N.availableLanguages){var M=N.availableLanguages["*"];k(M)&&(E=M)}if(k(N.locale)&&(H.locale=N.locale.toLowerCase()),E===void 0?H.language=H.locale:E!=="en"&&(H.language=E),function(z){return z===!0||z===!1}(N._languagePackSupport)&&(H.languagePackSupport=N._languagePackSupport),k(N._cacheRoot)&&(H.cacheRoot=N._cacheRoot),k(N._languagePackId)&&(H.languagePackId=N._languagePackId),k(N._translationsConfigFile)){H.translationsConfigFile=N._translationsConfigFile;try{H.translationsConfig=U(H.translationsConfigFile)}catch{if(N._corruptedFile){var O=c.dirname(N._corruptedFile);l.exists(O,function(D){D&&l.writeFile(N._corruptedFile,"corrupted","utf8",function(P){console.error(P)})})}}}}catch{}(0,f.setPseudo)(H.locale==="pseudo"),g=Object.create(null)})(),a.loadMessageBundle=F,a.config=T,p.default.install(Object.freeze({loadMessageBundle:F,config:T}))},374:(o,a)=>{function u(){}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(c){return u}},491:o=>{"use strict";o.exports=require("assert")},361:o=>{"use strict";o.exports=require("events")},147:o=>{"use strict";o.exports=require("fs")},685:o=>{"use strict";o.exports=require("http")},687:o=>{"use strict";o.exports=require("https")},808:o=>{"use strict";o.exports=require("net")},17:o=>{"use strict";o.exports=require("path")},404:o=>{"use strict";o.exports=require("tls")},310:o=>{"use strict";o.exports=require("url")},796:o=>{"use strict";o.exports=require("zlib")}},r={},i=function o(a){var u=r[a];if(u!==void 0)return u.exports;var c=r[a]={exports:{}};return e[a].call(c.exports,c,c.exports,o),c.exports}(539),n=t;for(var s in i)n[s]=i[s];i.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})()}}),j$={};XX(j$,{config:()=>iJ,t:()=>nJ});q$.exports=YX(j$);var ZX=require("fs"),eJ=require("fs/promises"),N$=JX(QX());async function tJ(t){if(t.protocol==="file:")return await(0,eJ.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:")try{let e=await(0,N$.xhr)({url:t.toString(),followRedirects:5,headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"}});return new TextDecoder().decode(e.body)}catch(e){throw new Error(e.responseText??(0,N$.getErrorStatusDescription)(e.status)??e.toString())}throw new Error("Unsupported protocol")}function rJ(t){return(0,ZX.readFileSync)(t,"utf8")}var Pl;function iJ(t){if("contents"in t){typeof t.contents=="string"?Pl=JSON.parse(t.contents):Pl=t.contents;return}if("fsPath"in t){let e=rJ(t.fsPath),r=JSON.parse(e);Pl=F$(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,i)=>{let n=tJ(e).then(s=>{try{let o=JSON.parse(s);Pl=F$(o)?o.contents.bundle:o}catch(o){i(o)}}).catch(s=>{i(s)});r(n)})}}function nJ(...t){let e=t[0],r,i,n;if(typeof e=="string"?(r=e,i=e,t.splice(0,1),n=!t||typeof t[0]!="object"?t:t[0]):(i=e.message,r=i,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),n=e.args??{}),!Pl)return yh(i,n);let s=Pl[r];return s?typeof s=="string"?yh(s,n):s.comment?yh(s.message,n):yh(i,n):yh(i,n)}var sJ=/{([^}]+)}/g;function yh(t,e){return t.replace(sJ,(r,i)=>e[i]??r)}function F$(t){var e;return typeof((e=t==null?void 0:t.contents)==null?void 0:e.bundle)=="object"&&typeof(t==null?void 0:t.version)=="string"}});var Yu=v(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.findWindowsCandidates=fi.sort=fi.preferredEdgePath=fi.preferredChromePath=fi.escapeRegexSpecialChars=fi.canAccess=void 0;var mJ=require("path");async function JH({access:t},e){if(!e)return!1;try{return await t(e),!0}catch{return!1}}fi.canAccess=JH;var gJ="/\\.?*()^${}|[]+";function HJ(t,e){let r=gJ.split("").filter(n=>!e||e.indexOf(n)<0).join("").replace(/[\\\]]/g,"\\$&"),i=new RegExp(`[${r}]`,"g");return t.replace(i,"\\$&")}fi.escapeRegexSpecialChars=HJ;async function yJ(t,e){if(await JH(t,e.CHROME_PATH))return e.CHROME_PATH}fi.preferredChromePath=yJ;async function vJ(t,e){if(await JH(t,e.EDGE_PATH))return e.EDGE_PATH}fi.preferredEdgePath=vJ;function bJ(t,e){return[...t].filter(i=>!!i).map(i=>{let n=e.find(s=>s.regex.test(i));return n?{path:i,weight:n.weight,quality:n.quality}:{path:i,weight:10,quality:"dev"}}).sort((i,n)=>n.weight-i.weight).map(i=>({path:i.path,quality:i.quality}))}fi.sort=bJ;async function wJ(t,e,r){let i=[t.LOCALAPPDATA,t.PROGRAMFILES,t["PROGRAMFILES(X86)"]].filter(s=>!!s),n=[];for(let s of i)for(let o of r){let a=mJ.win32.join(s,o.name);n.push(JH(e,a).then(u=>u?{path:a,quality:o.type}:void 0))}return(await Promise.all(n)).filter(s=>!!s)}fi.findWindowsCandidates=wJ});var vI=v(YH=>{"use strict";Object.defineProperty(YH,"__esModule",{value:!0});YH.DarwinFinderBase=void 0;var _J=require("path"),HI=Yu(),Z$=/( \(0x[a-f0-9]+\))/,yI=class{constructor(e,r,i){this.env=e,this.fs=r,this.execa=i,this.lsRegisterCommand="/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -dump",this.wellKnownPaths=[]}async findWhere(e){for(let r of this.wellKnownPaths)if(e(r)&&await(0,HI.canAccess)(this.fs,r.path))return r;return(await this.findAll()).find(e)}findAll(){var e;return(e=this.foundAll)!==null&&e!==void 0||(this.foundAll=this.findAllInner()),this.foundAll}async findLaunchRegisteredApps(e,r,i){let{stdout:n}=await this.execa.command(`${this.lsRegisterCommand} | awk 'tolower($0) ~ /${e.toLowerCase()}${Z$.source}?$/ { $1=""; print $0 }'`,{shell:!0,stdio:"pipe"}),s=[...r,...n.split(`
`).map(u=>u.trim().replace(Z$,""))].filter(u=>!!u),o=this.getPreferredPath();o&&s.push(o);let a=new Set;for(let u of s)for(let c of i){let l=_J.posix.join(u.trim(),c);try{await this.fs.access(l),a.add(l)}catch{}}return a}createPriorities(e){let r=this.env.HOME&&(0,HI.escapeRegexSpecialChars)(this.env.HOME),i=this.getPreferredPath(),n=e.reduce((s,o)=>[...s,{regex:new RegExp(`^/Applications/.*${o.name}`),weight:o.weight+100,quality:o.quality},{regex:new RegExp(`^${r}/Applications/.*${o.name}`),weight:o.weight,quality:o.quality},{regex:new RegExp(`^/Volumes/.*${o.name}`),weight:o.weight-100,quality:o.quality}],[]);return i&&n.unshift({regex:new RegExp((0,HI.escapeRegexSpecialChars)(i)),weight:151,quality:"custom"}),n}};YH.DarwinFinderBase=yI});var ek=v(QH=>{"use strict";Object.defineProperty(QH,"__esModule",{value:!0});QH.DarwinChromeBrowserFinder=void 0;var AJ=Yu(),IJ=vI(),bI=class extends IJ.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",quality:"stable"},{path:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",quality:"canary"},{path:"/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta",quality:"beta"},{path:"/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Google Chrome Canary","/Contents/MacOS/Google Chrome Beta","/Contents/MacOS/Google Chrome Dev","/Contents/MacOS/Google Chrome"],r=["/Applications/Google Chrome.app","/Applications/Google Chrome Canary.app"],i=await this.findLaunchRegisteredApps("google chrome[A-Za-z() ]*.app",r,e);return(0,AJ.sort)(i,this.createPriorities([{name:"Chrome.app",weight:0,quality:"stable"},{name:"Chrome Canary.app",weight:1,quality:"canary"},{name:"Chrome Beta.app",weight:2,quality:"beta"},{name:"Chrome Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.CHROME_PATH}};QH.DarwinChromeBrowserFinder=bI});var tk=v(ZH=>{"use strict";Object.defineProperty(ZH,"__esModule",{value:!0});ZH.DarwinEdgeBrowserFinder=void 0;var SJ=Yu(),EJ=vI(),wI=class extends EJ.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",quality:"stable"},{path:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",quality:"canary"},{path:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",quality:"beta"},{path:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Microsoft Edge Canary","/Contents/MacOS/Microsoft Edge Beta","/Contents/MacOS/Microsoft Edge Dev","/Contents/MacOS/Microsoft Edge"],r=["/Applications/Microsoft Edge.app"],i=await this.findLaunchRegisteredApps("Microsoft Edge[A-Za-z ]*.app",r,e);return(0,SJ.sort)(i,this.createPriorities([{name:"Microsoft Edge.app",weight:0,quality:"stable"},{name:"Microsoft Edge Canary.app",weight:1,quality:"canary"},{name:"Microsoft Edge Beta.app",weight:2,quality:"beta"},{name:"Microsoft Edge Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.EDGE_PATH}};ZH.DarwinEdgeBrowserFinder=wI});var II=v(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.LinuxChromeBrowserFinder=void 0;var xJ=require("path"),$l=Yu(),_I=require("child_process"),CJ=require("os"),rk=/\r?\n/,AI=class{constructor(e,r){this.env=e,this.fs=r,this.pathEnvironmentVar="CHROME_PATH",this.priorities=[{regex:/chrome-wrapper$/,weight:54,quality:"custom"},{regex:/google-chrome-dev$/,weight:53,quality:"dev"},{regex:/google-chrome-canary$/,weight:52,quality:"canary"},{regex:/google-chrome-unstable$/,weight:51,quality:"canary"},{regex:/google-chrome-canary$/,weight:51,quality:"canary"},{regex:/google-chrome-stable$/,weight:50,quality:"stable"},{regex:/google-chrome$/,weight:49,quality:"stable"},{regex:/chromium-browser$/,weight:48,quality:"custom"},{regex:/chromium$/,weight:47,quality:"custom"}],this.executablesOnPath=["google-chrome-unstable","google-chrome-dev","google-chrome-beta","google-chrome-canary","google-chrome-stable","google-chrome","chromium-browser","chromium"]}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=new Set,r=this.env[this.pathEnvironmentVar];r&&await(0,$l.canAccess)(this.fs,r)&&e.add(r),[xJ.posix.join((0,CJ.homedir)(),".local/share/applications/"),"/usr/share/applications/","/usr/bin"].forEach(o=>{for(let a in this.findChromeExecutables(o))e.add(a)}),await Promise.all(this.executablesOnPath.map(async o=>{try{let a=(0,_I.execFileSync)("which",[o],{stdio:"pipe"}).toString().split(rk)[0];await(0,$l.canAccess)(this.fs,a)&&e.add(a)}catch{}}));let s=r?[{regex:new RegExp((0,$l.escapeRegexSpecialChars)(r)),weight:101,quality:"custom"}].concat(this.priorities):this.priorities;return(0,$l.sort)(e,s)}async findChromeExecutables(e){let r=/(^[^ ]+).*/,i=`^Exec=/.*/(${this.executablesOnPath.join("|")})-.*`,n=[];if(await(0,$l.canAccess)(this.fs,e)){let s;try{s=(0,_I.execSync)(`grep -ER "${i}" ${e} | awk -F '=' '{print $2}'`)}catch{s=(0,_I.execSync)(`grep -Er "${i}" ${e} | awk -F '=' '{print $2}'`)}let o=s.toString().split(rk).map(a=>a.replace(r,"$1"));await Promise.all(o.map(async a=>{await(0,$l.canAccess)(this.fs,a)&&n.push(a)}))}return n}};ey.LinuxChromeBrowserFinder=AI});var ik=v(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.LinuxEdgeBrowserFinder=void 0;var DJ=II(),SI=class extends DJ.LinuxChromeBrowserFinder{constructor(){super(...arguments),this.pathEnvironmentVar="EDGE_PATH",this.executablesOnPath=["microsoft-edge-dev","microsoft-edge-beta","microsoft-edge-stable","microsoft-edge"],this.priorities=[{regex:/microsoft-edge\-wrapper$/,weight:52,quality:"custom"},{regex:/microsoft-edge\-dev$/,weight:51,quality:"dev"},{regex:/microsoft-edge\-beta$/,weight:51,quality:"beta"},{regex:/microsoft-edge\-stable$/,weight:50,quality:"stable"},{regex:/microsoft-edge$/,weight:49,quality:"stable"}]}};ty.LinuxEdgeBrowserFinder=SI});var sk=v(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});ry.WindowsChromeBrowserFinder=void 0;var PJ=require("path"),nk=Yu(),EI=class{constructor(e,r){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=PJ.win32.sep,r=[{name:`${e}Google${e}Chrome Dev${e}Application${e}chrome.exe`,type:"dev"},{name:`${e}Google${e}Chrome SxS${e}Application${e}chrome.exe`,type:"canary"},{name:`${e}Google${e}Chrome Beta${e}Application${e}chrome.exe`,type:"beta"},{name:`${e}Google${e}Chrome${e}Application${e}chrome.exe`,type:"stable"}],i=await(0,nk.findWindowsCandidates)(this.env,this.fs,r),n=await(0,nk.preferredChromePath)(this.fs,this.env);return n&&i.unshift({path:n,quality:"custom"}),i}};ry.WindowsChromeBrowserFinder=EI});var ak=v(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0});iy.WindowsEdgeBrowserFinder=void 0;var Ur=require("path"),ok=Yu(),xI=class{constructor(e,r){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=[{name:`${Ur.sep}Microsoft${Ur.sep}Edge SxS${Ur.sep}Application${Ur.sep}msedge.exe`,type:"canary"},{name:`${Ur.sep}Microsoft${Ur.sep}Edge Dev${Ur.sep}Application${Ur.sep}msedge.exe`,type:"dev"},{name:`${Ur.sep}Microsoft${Ur.sep}Edge Beta${Ur.sep}Application${Ur.sep}msedge.exe`,type:"beta"},{name:`${Ur.sep}Microsoft${Ur.sep}Edge${Ur.sep}Application${Ur.sep}msedge.exe`,type:"stable"}],r=await(0,ok.findWindowsCandidates)(this.env,this.fs,e),i=await(0,ok.preferredEdgePath)(this.fs,this.env);return i&&r.unshift({path:i,quality:"custom"}),r}};iy.WindowsEdgeBrowserFinder=xI});var CI=v(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.EdgeBrowserFinder=kn.ChromeBrowserFinder=kn.isQuality=kn.allQualities=void 0;var LJ=ek(),TJ=tk(),$J=II(),kJ=ik(),RJ=sk(),MJ=ak(),OJ={canary:null,stable:null,beta:null,dev:null,custom:null};kn.allQualities=new Set(Object.keys(OJ));var NJ=t=>kn.allQualities.has(t);kn.isQuality=NJ;kn.ChromeBrowserFinder=process.platform==="win32"?RJ.WindowsChromeBrowserFinder:process.platform==="darwin"?LJ.DarwinChromeBrowserFinder:$J.LinuxChromeBrowserFinder;kn.EdgeBrowserFinder=process.platform==="win32"?MJ.WindowsEdgeBrowserFinder:process.platform==="darwin"?TJ.DarwinEdgeBrowserFinder:kJ.LinuxEdgeBrowserFinder});var fk=v((LAe,pk)=>{pk.exports=lk;lk.sync=BJ;var uk=require("fs");function FJ(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var i=0;i<r.length;i++){var n=r[i].toLowerCase();if(n&&t.substr(-n.length).toLowerCase()===n)return!0}return!1}function ck(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:FJ(e,r)}function lk(t,e,r){uk.stat(t,function(i,n){r(i,i?!1:ck(n,t,e))})}function BJ(t,e){return ck(uk.statSync(t),t,e)}});var Hk=v((TAe,gk)=>{gk.exports=hk;hk.sync=UJ;var dk=require("fs");function hk(t,e,r){dk.stat(t,function(i,n){r(i,i?!1:mk(n,e))})}function UJ(t,e){return mk(dk.statSync(t),e)}function mk(t,e){return t.isFile()&&jJ(t,e)}function jJ(t,e){var r=t.mode,i=t.uid,n=t.gid,s=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),o=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),u=parseInt("010",8),c=parseInt("001",8),l=a|u,p=r&c||r&u&&n===o||r&a&&i===s||r&l&&s===0;return p}});var PI=v((kAe,yk)=>{var $Ae=require("fs"),ny;process.platform==="win32"||global.TESTING_WINDOWS?ny=fk():ny=Hk();yk.exports=DI;DI.sync=qJ;function DI(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,n){DI(t,e||{},function(s,o){s?n(s):i(o)})})}ny(t,e||{},function(i,n){i&&(i.code==="EACCES"||e&&e.ignoreErrors)&&(i=null,n=!1),r(i,n)})}function qJ(t,e){try{return ny.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var Sk=v((RAe,Ik)=>{var kl=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",vk=require("path"),WJ=kl?";":":",bk=PI(),wk=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),_k=(t,e)=>{let r=e.colon||WJ,i=t.match(/\//)||kl&&t.match(/\\/)?[""]:[...kl?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],n=kl?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=kl?n.split(r):[""];return kl&&t.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:i,pathExt:s,pathExtExe:n}},Ak=(t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:i,pathExt:n,pathExtExe:s}=_k(t,e),o=[],a=c=>new Promise((l,p)=>{if(c===i.length)return e.all&&o.length?l(o):p(wk(t));let f=i[c],h=/^".*"$/.test(f)?f.slice(1,-1):f,g=vk.join(h,t),H=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;l(u(H,c,0))}),u=(c,l,p)=>new Promise((f,h)=>{if(p===n.length)return f(a(l+1));let g=n[p];bk(c+g,{pathExt:s},(H,b)=>{if(!H&&b)if(e.all)o.push(c+g);else return f(c+g);return f(u(c,l,p+1))})});return r?a(0).then(c=>r(null,c),r):a(0)},VJ=(t,e)=>{e=e||{};let{pathEnv:r,pathExt:i,pathExtExe:n}=_k(t,e),s=[];for(let o=0;o<r.length;o++){let a=r[o],u=/^".*"$/.test(a)?a.slice(1,-1):a,c=vk.join(u,t),l=!u&&/^\.[\\\/]/.test(t)?t.slice(0,2)+c:c;for(let p=0;p<i.length;p++){let f=l+i[p];try{if(bk.sync(f,{pathExt:n}))if(e.all)s.push(f);else return f}catch{}}}if(e.all&&s.length)return s;if(e.nothrow)return null;throw wk(t)};Ik.exports=Ak;Ak.sync=VJ});var xk=v((MAe,LI)=>{"use strict";var Ek=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};LI.exports=Ek;LI.exports.default=Ek});var Lk=v((OAe,Pk)=>{"use strict";var Ck=require("path"),GJ=Sk(),KJ=xk();function Dk(t,e){let r=t.options.env||process.env,i=process.cwd(),n=t.options.cwd!=null,s=n&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(t.options.cwd)}catch{}let o;try{o=GJ.sync(t.command,{path:r[KJ({env:r})],pathExt:e?Ck.delimiter:void 0})}catch{}finally{s&&process.chdir(i)}return o&&(o=Ck.resolve(n?t.options.cwd:"",o)),o}function zJ(t){return Dk(t)||Dk(t,!0)}Pk.exports=zJ});var Tk=v((NAe,$I)=>{"use strict";var TI=/([()\][%!^"`<>&|;, *?])/g;function XJ(t){return t=t.replace(TI,"^$1"),t}function JJ(t,e){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(TI,"^$1"),e&&(t=t.replace(TI,"^$1")),t}$I.exports.command=XJ;$I.exports.argument=JJ});var kk=v((FAe,$k)=>{"use strict";$k.exports=/^#!(.*)/});var Mk=v((BAe,Rk)=>{"use strict";var YJ=kk();Rk.exports=(t="")=>{let e=t.match(YJ);if(!e)return null;let[r,i]=e[0].replace(/#! ?/,"").split(" "),n=r.split("/").pop();return n==="env"?i:i?`${n} ${i}`:n}});var Nk=v((UAe,Ok)=>{"use strict";var kI=require("fs"),QJ=Mk();function ZJ(t){let r=Buffer.alloc(150),i;try{i=kI.openSync(t,"r"),kI.readSync(i,r,0,150,0),kI.closeSync(i)}catch{}return QJ(r.toString())}Ok.exports=ZJ});var jk=v((jAe,Uk)=>{"use strict";var eY=require("path"),Fk=Lk(),Bk=Tk(),tY=Nk(),rY=process.platform==="win32",iY=/\.(?:com|exe)$/i,nY=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function sY(t){t.file=Fk(t);let e=t.file&&tY(t.file);return e?(t.args.unshift(t.file),t.command=e,Fk(t)):t.file}function oY(t){if(!rY)return t;let e=sY(t),r=!iY.test(e);if(t.options.forceShell||r){let i=nY.test(e);t.command=eY.normalize(t.command),t.command=Bk.command(t.command),t.args=t.args.map(s=>Bk.argument(s,i));let n=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${n}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function aY(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let i={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?i:oY(i)}Uk.exports=aY});var Vk=v((qAe,Wk)=>{"use strict";var RI=process.platform==="win32";function MI(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function uY(t,e){if(!RI)return;let r=t.emit;t.emit=function(i,n){if(i==="exit"){let s=qk(n,e,"spawn");if(s)return r.call(t,"error",s)}return r.apply(t,arguments)}}function qk(t,e){return RI&&t===1&&!e.file?MI(e.original,"spawn"):null}function cY(t,e){return RI&&t===1&&!e.file?MI(e.original,"spawnSync"):null}Wk.exports={hookChildProcess:uY,verifyENOENT:qk,verifyENOENTSync:cY,notFoundError:MI}});var zk=v((WAe,Rl)=>{"use strict";var Gk=require("child_process"),OI=jk(),NI=Vk();function Kk(t,e,r){let i=OI(t,e,r),n=Gk.spawn(i.command,i.args,i.options);return NI.hookChildProcess(n,i),n}function lY(t,e,r){let i=OI(t,e,r),n=Gk.spawnSync(i.command,i.args,i.options);return n.error=n.error||NI.verifyENOENTSync(n.status,i),n}Rl.exports=Kk;Rl.exports.spawn=Kk;Rl.exports.sync=lY;Rl.exports._parse=OI;Rl.exports._enoent=NI});var Jk=v((VAe,Xk)=>{"use strict";Xk.exports=t=>{let e=typeof t=="string"?`
`:`
`.charCodeAt(),r=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,t.length-1)),t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t}});var Qk=v((GAe,FI)=>{"use strict";var Yk=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};FI.exports=Yk;FI.exports.default=Yk});var t1=v((KAe,Ih)=>{"use strict";var Ah=require("path"),Zk=Qk(),e1=t=>{t={cwd:process.cwd(),path:process.env[Zk()],execPath:process.execPath,...t};let e,r=Ah.resolve(t.cwd),i=[];for(;e!==r;)i.push(Ah.join(r,"node_modules/.bin")),e=r,r=Ah.resolve(r,"..");let n=Ah.resolve(t.cwd,t.execPath,"..");return i.push(n),i.concat(t.path).join(Ah.delimiter)};Ih.exports=e1;Ih.exports.default=e1;Ih.exports.env=t=>{t={env:process.env,...t};let e={...t.env},r=Zk({env:e});return t.path=e[r],e[r]=Ih.exports(t),e}});var i1=v((zAe,BI)=>{"use strict";var r1=(t,e)=>{for(let r of Reflect.ownKeys(e))Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r));return t};BI.exports=r1;BI.exports.default=r1});var s1=v((XAe,oy)=>{"use strict";var pY=i1(),sy=new WeakMap,n1=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let r,i=0,n=t.displayName||t.name||"<anonymous>",s=function(...o){if(sy.set(s,++i),i===1)r=t.apply(this,o),t=null;else if(e.throw===!0)throw new Error(`Function \`${n}\` can only be called once`);return r};return pY(s,t),sy.set(s,i),s};oy.exports=n1;oy.exports.default=n1;oy.exports.callCount=t=>{if(!sy.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return sy.get(t)}});var o1=v(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});ay.SIGNALS=void 0;var fY=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];ay.SIGNALS=fY});var UI=v(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.SIGRTMAX=Ml.getRealtimeSignals=void 0;var dY=function(){let t=u1-a1+1;return Array.from({length:t},hY)};Ml.getRealtimeSignals=dY;var hY=function(t,e){return{name:`SIGRT${e+1}`,number:a1+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},a1=34,u1=64;Ml.SIGRTMAX=u1});var c1=v(uy=>{"use strict";Object.defineProperty(uy,"__esModule",{value:!0});uy.getSignals=void 0;var mY=require("os"),gY=o1(),HY=UI(),yY=function(){let t=(0,HY.getRealtimeSignals)();return[...gY.SIGNALS,...t].map(vY)};uy.getSignals=yY;var vY=function({name:t,number:e,description:r,action:i,forced:n=!1,standard:s}){let{signals:{[t]:o}}=mY.constants,a=o!==void 0;return{name:t,number:a?o:e,description:r,supported:a,action:i,forced:n,standard:s}}});var p1=v(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.signalsByNumber=Ol.signalsByName=void 0;var bY=require("os"),l1=c1(),wY=UI(),_Y=function(){return(0,l1.getSignals)().reduce(AY,{})},AY=function(t,{name:e,number:r,description:i,supported:n,action:s,forced:o,standard:a}){return{...t,[e]:{name:e,number:r,description:i,supported:n,action:s,forced:o,standard:a}}},IY=_Y();Ol.signalsByName=IY;var SY=function(){let t=(0,l1.getSignals)(),e=wY.SIGRTMAX+1,r=Array.from({length:e},(i,n)=>EY(n,t));return Object.assign({},...r)},EY=function(t,e){let r=xY(t,e);if(r===void 0)return{};let{name:i,description:n,supported:s,action:o,forced:a,standard:u}=r;return{[t]:{name:i,number:t,description:n,supported:s,action:o,forced:a,standard:u}}},xY=function(t,e){let r=e.find(({name:i})=>bY.constants.signals[i]===t);return r!==void 0?r:e.find(i=>i.number===t)},CY=SY();Ol.signalsByNumber=CY});var d1=v((eIe,f1)=>{"use strict";var{signalsByName:DY}=p1(),PY=({timedOut:t,timeout:e,errorCode:r,signal:i,signalDescription:n,exitCode:s,isCanceled:o})=>t?`timed out after ${e} milliseconds`:o?"was canceled":r!==void 0?`failed with ${r}`:i!==void 0?`was killed with ${i} (${n})`:s!==void 0?`failed with exit code ${s}`:"failed",LY=({stdout:t,stderr:e,all:r,error:i,signal:n,exitCode:s,command:o,escapedCommand:a,timedOut:u,isCanceled:c,killed:l,parsed:{options:{timeout:p}}})=>{s=s===null?void 0:s,n=n===null?void 0:n;let f=n===void 0?void 0:DY[n].description,h=i&&i.code,H=`Command ${PY({timedOut:u,timeout:p,errorCode:h,signal:n,signalDescription:f,exitCode:s,isCanceled:c})}: ${o}`,b=Object.prototype.toString.call(i)==="[object Error]",_=b?`${H}
${i.message}`:H,k=[_,e,t].filter(Boolean).join(`
`);return b?(i.originalMessage=i.message,i.message=k):i=new Error(k),i.shortMessage=_,i.command=o,i.escapedCommand=a,i.exitCode=s,i.signal=n,i.signalDescription=f,i.stdout=t,i.stderr=e,r!==void 0&&(i.all=r),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=Boolean(u),i.isCanceled=c,i.killed=l&&!u,i};f1.exports=LY});var m1=v((tIe,jI)=>{"use strict";var cy=["stdin","stdout","stderr"],TY=t=>cy.some(e=>t[e]!==void 0),h1=t=>{if(!t)return;let{stdio:e}=t;if(e===void 0)return cy.map(i=>t[i]);if(TY(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${cy.map(i=>`\`${i}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,cy.length);return Array.from({length:r},(i,n)=>e[n])};jI.exports=h1;jI.exports.node=t=>{let e=h1(t);return e==="ipc"?"ipc":e===void 0||typeof e=="string"?[e,e,e,"ipc"]:e.includes("ipc")?e:[...e,"ipc"]}});var g1=v((rIe,ly)=>{ly.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&ly.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&ly.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var v1=v((iIe,xh)=>{var $Y=require("assert"),Sh=g1(),kY=/^win/i.test(process.platform),py=require("events");typeof py!="function"&&(py=py.EventEmitter);var Ir;process.__signal_exit_emitter__?Ir=process.__signal_exit_emitter__:(Ir=process.__signal_exit_emitter__=new py,Ir.count=0,Ir.emitted={});Ir.infinite||(Ir.setMaxListeners(1/0),Ir.infinite=!0);xh.exports=function(t,e){$Y.equal(typeof t,"function","a callback must be provided for exit handler"),Eh===!1&&H1();var r="exit";e&&e.alwaysLast&&(r="afterexit");var i=function(){Ir.removeListener(r,t),Ir.listeners("exit").length===0&&Ir.listeners("afterexit").length===0&&WI()};return Ir.on(r,t),i};xh.exports.unload=WI;function WI(){Eh&&(Eh=!1,Sh.forEach(function(t){try{process.removeListener(t,VI[t])}catch{}}),process.emit=qI,process.reallyExit=y1,Ir.count-=1)}function Nl(t,e,r){Ir.emitted[t]||(Ir.emitted[t]=!0,Ir.emit(t,e,r))}var VI={};Sh.forEach(function(t){VI[t]=function(){var r=process.listeners(t);r.length===Ir.count&&(WI(),Nl("exit",null,t),Nl("afterexit",null,t),kY&&t==="SIGHUP"&&(t="SIGINT"),process.kill(process.pid,t))}});xh.exports.signals=function(){return Sh};xh.exports.load=H1;var Eh=!1;function H1(){Eh||(Eh=!0,Ir.count+=1,Sh=Sh.filter(function(t){try{return process.on(t,VI[t]),!0}catch{return!1}}),process.emit=MY,process.reallyExit=RY)}var y1=process.reallyExit;function RY(t){process.exitCode=t||0,Nl("exit",process.exitCode,null),Nl("afterexit",process.exitCode,null),y1.call(process,process.exitCode)}var qI=process.emit;function MY(t,e){if(t==="exit"){e!==void 0&&(process.exitCode=e);var r=qI.apply(this,arguments);return Nl("exit",process.exitCode,null),Nl("afterexit",process.exitCode,null),r}else return qI.apply(this,arguments)}});var w1=v((nIe,b1)=>{"use strict";var OY=require("os"),NY=v1(),FY=1e3*5,BY=(t,e="SIGTERM",r={})=>{let i=t(e);return UY(t,e,r,i),i},UY=(t,e,r,i)=>{if(!jY(e,r,i))return;let n=WY(r),s=setTimeout(()=>{t("SIGKILL")},n);s.unref&&s.unref()},jY=(t,{forceKillAfterTimeout:e},r)=>qY(t)&&e!==!1&&r,qY=t=>t===OY.constants.signals.SIGTERM||typeof t=="string"&&t.toUpperCase()==="SIGTERM",WY=({forceKillAfterTimeout:t=!0})=>{if(t===!0)return FY;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},VY=(t,e)=>{t.kill()&&(e.isCanceled=!0)},GY=(t,e,r)=>{t.kill(e),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},KY=(t,{timeout:e,killSignal:r="SIGTERM"},i)=>{if(e===0||e===void 0)return i;let n,s=new Promise((a,u)=>{n=setTimeout(()=>{GY(t,r,u)},e)}),o=i.finally(()=>{clearTimeout(n)});return Promise.race([s,o])},zY=({timeout:t})=>{if(t!==void 0&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)},XY=async(t,{cleanup:e,detached:r},i)=>{if(!e||r)return i;let n=NY(()=>{t.kill()});return i.finally(()=>{n()})};b1.exports={spawnedKill:BY,spawnedCancel:VY,setupTimeout:KY,validateTimeout:zY,setExitHandler:XY}});var A1=v((sIe,_1)=>{"use strict";var cs=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";cs.writable=t=>cs(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";cs.readable=t=>cs(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";cs.duplex=t=>cs.writable(t)&&cs.readable(t);cs.transform=t=>cs.duplex(t)&&typeof t._transform=="function"&&typeof t._transformState=="object";_1.exports=cs});var S1=v((oIe,I1)=>{"use strict";var{PassThrough:JY}=require("stream");I1.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,i=r==="buffer",n=!1;e?n=!(r||i):r=r||"utf8",i&&(r=null);let s=new JY({objectMode:n});r&&s.setEncoding(r);let o=0,a=[];return s.on("data",u=>{a.push(u),n?o=a.length:o+=u.length}),s.getBufferedValue=()=>e?a:i?Buffer.concat(a,o):a.join(""),s.getBufferedLength=()=>o,s}});var E1=v((aIe,Ch)=>{"use strict";var{constants:YY}=require("buffer"),QY=require("stream"),{promisify:ZY}=require("util"),eQ=S1(),tQ=ZY(QY.pipeline),fy=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function GI(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,i=eQ(e);return await new Promise((n,s)=>{let o=a=>{a&&i.getBufferedLength()<=YY.MAX_LENGTH&&(a.bufferedData=i.getBufferedValue()),s(a)};(async()=>{try{await tQ(t,i),n()}catch(a){o(a)}})(),i.on("data",()=>{i.getBufferedLength()>r&&o(new fy)})}),i.getBufferedValue()}Ch.exports=GI;Ch.exports.buffer=(t,e)=>GI(t,{...e,encoding:"buffer"});Ch.exports.array=(t,e)=>GI(t,{...e,array:!0});Ch.exports.MaxBufferError=fy});var C1=v((uIe,x1)=>{"use strict";var{PassThrough:rQ}=require("stream");x1.exports=function(){var t=[],e=new rQ({objectMode:!0});return e.setMaxListeners(0),e.add=r,e.isEmpty=i,e.on("unpipe",n),Array.prototype.slice.call(arguments).forEach(r),e;function r(s){return Array.isArray(s)?(s.forEach(r),this):(t.push(s),s.once("end",n.bind(null,s)),s.once("error",e.emit.bind(e,"error")),s.pipe(e,{end:!1}),this)}function i(){return t.length==0}function n(s){t=t.filter(function(o){return o!==s}),!t.length&&e.readable&&e.end()}}});var T1=v((cIe,L1)=>{"use strict";var P1=A1(),D1=E1(),iQ=C1(),nQ=(t,e)=>{e===void 0||t.stdin===void 0||(P1(e)?e.pipe(t.stdin):t.stdin.end(e))},sQ=(t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;let r=iQ();return t.stdout&&r.add(t.stdout),t.stderr&&r.add(t.stderr),r},KI=async(t,e)=>{if(t){t.destroy();try{return await e}catch(r){return r.bufferedData}}},zI=(t,{encoding:e,buffer:r,maxBuffer:i})=>{if(!(!t||!r))return e?D1(t,{encoding:e,maxBuffer:i}):D1.buffer(t,{maxBuffer:i})},oQ=async({stdout:t,stderr:e,all:r},{encoding:i,buffer:n,maxBuffer:s},o)=>{let a=zI(t,{encoding:i,buffer:n,maxBuffer:s}),u=zI(e,{encoding:i,buffer:n,maxBuffer:s}),c=zI(r,{encoding:i,buffer:n,maxBuffer:s*2});try{return await Promise.all([o,a,u,c])}catch(l){return Promise.all([{error:l,signal:l.signal,timedOut:l.timedOut},KI(t,a),KI(e,u),KI(r,c)])}},aQ=({input:t})=>{if(P1(t))throw new TypeError("The `input` option cannot be a stream in sync mode")};L1.exports={handleInput:nQ,makeAllStream:sQ,getSpawnedResult:oQ,validateInputSync:aQ}});var k1=v((lIe,$1)=>{"use strict";var uQ=(async()=>{})().constructor.prototype,cQ=["then","catch","finally"].map(t=>[t,Reflect.getOwnPropertyDescriptor(uQ,t)]),lQ=(t,e)=>{for(let[r,i]of cQ){let n=typeof e=="function"?(...s)=>Reflect.apply(i.value,e(),s):i.value.bind(e);Reflect.defineProperty(t,r,{...i,value:n})}return t},pQ=t=>new Promise((e,r)=>{t.on("exit",(i,n)=>{e({exitCode:i,signal:n})}),t.on("error",i=>{r(i)}),t.stdin&&t.stdin.on("error",i=>{r(i)})});$1.exports={mergePromise:lQ,getSpawnedPromise:pQ}});var O1=v((pIe,M1)=>{"use strict";var R1=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],fQ=/^[\w.-]+$/,dQ=/"/g,hQ=t=>typeof t!="string"||fQ.test(t)?t:`"${t.replace(dQ,'\\"')}"`,mQ=(t,e)=>R1(t,e).join(" "),gQ=(t,e)=>R1(t,e).map(r=>hQ(r)).join(" "),HQ=/ +/g,yQ=t=>{let e=[];for(let r of t.trim().split(HQ)){let i=e[e.length-1];i&&i.endsWith("\\")?e[e.length-1]=`${i.slice(0,-1)} ${r}`:e.push(r)}return e};M1.exports={joinCommand:mQ,getEscapedCommand:gQ,parseCommand:yQ}});var JI=v((fIe,Fl)=>{"use strict";var vQ=require("path"),XI=require("child_process"),bQ=zk(),wQ=Jk(),_Q=t1(),AQ=s1(),dy=d1(),F1=m1(),{spawnedKill:IQ,spawnedCancel:SQ,setupTimeout:EQ,validateTimeout:xQ,setExitHandler:CQ}=w1(),{handleInput:DQ,getSpawnedResult:PQ,makeAllStream:LQ,validateInputSync:TQ}=T1(),{mergePromise:N1,getSpawnedPromise:$Q}=k1(),{joinCommand:B1,parseCommand:U1,getEscapedCommand:j1}=O1(),kQ=1e3*1e3*100,RQ=({env:t,extendEnv:e,preferLocal:r,localDir:i,execPath:n})=>{let s=e?{...process.env,...t}:t;return r?_Q.env({env:s,cwd:i,execPath:n}):s},q1=(t,e,r={})=>{let i=bQ._parse(t,e,r);return t=i.command,e=i.args,r=i.options,r={maxBuffer:kQ,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=RQ(r),r.stdio=F1(r),process.platform==="win32"&&vQ.basename(t,".exe")==="cmd"&&e.unshift("/q"),{file:t,args:e,options:r,parsed:i}},Dh=(t,e,r)=>typeof e!="string"&&!Buffer.isBuffer(e)?r===void 0?void 0:"":t.stripFinalNewline?wQ(e):e,hy=(t,e,r)=>{let i=q1(t,e,r),n=B1(t,e),s=j1(t,e);xQ(i.options);let o;try{o=XI.spawn(i.file,i.args,i.options)}catch(h){let g=new XI.ChildProcess,H=Promise.reject(dy({error:h,stdout:"",stderr:"",all:"",command:n,escapedCommand:s,parsed:i,timedOut:!1,isCanceled:!1,killed:!1}));return N1(g,H)}let a=$Q(o),u=EQ(o,i.options,a),c=CQ(o,i.options,u),l={isCanceled:!1};o.kill=IQ.bind(null,o.kill.bind(o)),o.cancel=SQ.bind(null,o,l);let f=AQ(async()=>{let[{error:h,exitCode:g,signal:H,timedOut:b},_,k,U]=await PQ(o,i.options,c),C=Dh(i.options,_),L=Dh(i.options,k),q=Dh(i.options,U);if(h||g!==0||H!==null){let j=dy({error:h,exitCode:g,signal:H,stdout:C,stderr:L,all:q,command:n,escapedCommand:s,parsed:i,timedOut:b,isCanceled:l.isCanceled,killed:o.killed});if(!i.options.reject)return j;throw j}return{command:n,escapedCommand:s,exitCode:0,stdout:C,stderr:L,all:q,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return DQ(o,i.options.input),o.all=LQ(o,i.options),N1(o,f)};Fl.exports=hy;Fl.exports.sync=(t,e,r)=>{let i=q1(t,e,r),n=B1(t,e),s=j1(t,e);TQ(i.options);let o;try{o=XI.spawnSync(i.file,i.args,i.options)}catch(c){throw dy({error:c,stdout:"",stderr:"",all:"",command:n,escapedCommand:s,parsed:i,timedOut:!1,isCanceled:!1,killed:!1})}let a=Dh(i.options,o.stdout,o.error),u=Dh(i.options,o.stderr,o.error);if(o.error||o.status!==0||o.signal!==null){let c=dy({stdout:a,stderr:u,error:o.error,signal:o.signal,exitCode:o.status,command:n,escapedCommand:s,parsed:i,timedOut:o.error&&o.error.code==="ETIMEDOUT",isCanceled:!1,killed:o.signal!==null});if(!i.options.reject)return c;throw c}return{command:n,escapedCommand:s,exitCode:0,stdout:a,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};Fl.exports.command=(t,e)=>{let[r,...i]=U1(t);return hy(r,i,e)};Fl.exports.commandSync=(t,e)=>{let[r,...i]=U1(t);return hy.sync(r,i,e)};Fl.exports.node=(t,e,r={})=>{e&&!Array.isArray(e)&&typeof e=="object"&&(r=e,e=[]);let i=F1.node(r),n=process.execArgv.filter(a=>!a.startsWith("--inspect")),{nodePath:s=process.execPath,nodeOptions:o=n}=r;return hy(s,[...o,t,...Array.isArray(e)?e:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:i,shell:!1})}});var Gt=v(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.NON_CUSTOM_TAG_KEYS=Oe.PRE_DESTROY=Oe.POST_CONSTRUCT=Oe.DESIGN_PARAM_TYPES=Oe.PARAM_TYPES=Oe.TAGGED_PROP=Oe.TAGGED=Oe.MULTI_INJECT_TAG=Oe.INJECT_TAG=Oe.OPTIONAL_TAG=Oe.UNMANAGED_TAG=Oe.NAME_TAG=Oe.NAMED_TAG=void 0;Oe.NAMED_TAG="named";Oe.NAME_TAG="name";Oe.UNMANAGED_TAG="unmanaged";Oe.OPTIONAL_TAG="optional";Oe.INJECT_TAG="inject";Oe.MULTI_INJECT_TAG="multi_inject";Oe.TAGGED="inversify:tagged";Oe.TAGGED_PROP="inversify:tagged_props";Oe.PARAM_TYPES="inversify:paramtypes";Oe.DESIGN_PARAM_TYPES="design:paramtypes";Oe.POST_CONSTRUCT="post_construct";Oe.PRE_DESTROY="pre_destroy";function MQ(){return[Oe.INJECT_TAG,Oe.MULTI_INJECT_TAG,Oe.NAME_TAG,Oe.UNMANAGED_TAG,Oe.NAMED_TAG,Oe.OPTIONAL_TAG]}Oe.NON_CUSTOM_TAG_KEYS=MQ()});var Rn=v(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.TargetTypeEnum=ma.BindingTypeEnum=ma.BindingScopeEnum=void 0;var OQ={Request:"Request",Singleton:"Singleton",Transient:"Transient"};ma.BindingScopeEnum=OQ;var NQ={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};ma.BindingTypeEnum=NQ;var FQ={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};ma.TargetTypeEnum=FQ});var ga=v(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});my.id=void 0;var BQ=0;function UQ(){return BQ++}my.id=UQ});var V1=v(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});gy.Binding=void 0;var W1=Rn(),jQ=ga(),qQ=function(){function t(e,r){this.id=(0,jQ.id)(),this.activated=!1,this.serviceIdentifier=e,this.scope=r,this.type=W1.BindingTypeEnum.Invalid,this.constraint=function(i){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===W1.BindingScopeEnum.Singleton?this.activated:!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}();gy.Binding=qQ});var jr=v(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.STACK_OVERFLOW=pe.CIRCULAR_DEPENDENCY_IN_FACTORY=pe.ON_DEACTIVATION_ERROR=pe.PRE_DESTROY_ERROR=pe.POST_CONSTRUCT_ERROR=pe.ASYNC_UNBIND_REQUIRED=pe.MULTIPLE_POST_CONSTRUCT_METHODS=pe.MULTIPLE_PRE_DESTROY_METHODS=pe.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=pe.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=pe.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=pe.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=pe.ARGUMENTS_LENGTH_MISMATCH=pe.INVALID_DECORATOR_OPERATION=pe.INVALID_TO_SELF_VALUE=pe.LAZY_IN_SYNC=pe.INVALID_FUNCTION_BINDING=pe.INVALID_MIDDLEWARE_RETURN=pe.NO_MORE_SNAPSHOTS_AVAILABLE=pe.INVALID_BINDING_TYPE=pe.NOT_IMPLEMENTED=pe.CIRCULAR_DEPENDENCY=pe.UNDEFINED_INJECT_ANNOTATION=pe.MISSING_INJECT_ANNOTATION=pe.MISSING_INJECTABLE_ANNOTATION=pe.NOT_REGISTERED=pe.CANNOT_UNBIND=pe.AMBIGUOUS_MATCH=pe.KEY_NOT_FOUND=pe.NULL_ARGUMENT=pe.DUPLICATED_METADATA=pe.DUPLICATED_INJECTABLE_DECORATOR=void 0;pe.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.";pe.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:";pe.NULL_ARGUMENT="NULL argument";pe.KEY_NOT_FOUND="Key Not Found";pe.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:";pe.CANNOT_UNBIND="Could not unbind serviceIdentifier:";pe.NOT_REGISTERED="No matching bindings found for serviceIdentifier:";pe.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:";pe.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var WQ=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};pe.UNDEFINED_INJECT_ANNOTATION=WQ;pe.CIRCULAR_DEPENDENCY="Circular dependency found:";pe.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.";pe.INVALID_BINDING_TYPE="Invalid binding type:";pe.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.";pe.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!";pe.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!";var VQ=function(t){return"You are attempting to construct '"+t+`' in a synchronous way
 but it has asynchronous dependencies.`};pe.LAZY_IN_SYNC=VQ;pe.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier";pe.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var GQ=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+(t[0]+" must be >= than the number of constructor arguments of its base class.")};pe.ARGUMENTS_LENGTH_MISMATCH=GQ;pe.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.";pe.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').";pe.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean";pe.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean";pe.MULTIPLE_PRE_DESTROY_METHODS="Cannot apply @preDestroy decorator multiple times in the same class";pe.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";pe.ASYNC_UNBIND_REQUIRED="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)";var KQ=function(t,e){return"@postConstruct error in class "+t+": "+e};pe.POST_CONSTRUCT_ERROR=KQ;var zQ=function(t,e){return"@preDestroy error in class "+t+": "+e};pe.PRE_DESTROY_ERROR=zQ;var XQ=function(t,e){return"onDeactivation() error in class "+t+": "+e};pe.ON_DEACTIVATION_ERROR=XQ;var JQ=function(t,e){return"It looks like there is a circular dependency in one of the '"+t+"' bindings. Please investigate bindings with"+("service identifier '"+e+"'.")};pe.CIRCULAR_DEPENDENCY_IN_FACTORY=JQ;pe.STACK_OVERFLOW="Maximum call stack size exceeded"});var QI=v(ls=>{"use strict";var YQ=ls&&ls.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),QQ=ls&&ls.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ZQ=ls&&ls.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YQ(e,t,r);return QQ(e,t),e};Object.defineProperty(ls,"__esModule",{value:!0});ls.MetadataReader=void 0;var YI=ZQ(Gt()),eZ=function(){function t(){}return t.prototype.getConstructorMetadata=function(e){var r=Reflect.getMetadata(YI.PARAM_TYPES,e),i=Reflect.getMetadata(YI.TAGGED,e);return{compilerGeneratedMetadata:r,userGeneratedMetadata:i||{}}},t.prototype.getPropertiesMetadata=function(e){var r=Reflect.getMetadata(YI.TAGGED_PROP,e)||[];return r},t}();ls.MetadataReader=eZ});var G1=v(Hy=>{"use strict";Object.defineProperty(Hy,"__esModule",{value:!0});Hy.BindingCount=void 0;var tZ={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};Hy.BindingCount=tZ});var ZI=v(tn=>{"use strict";var rZ=tn&&tn.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),iZ=tn&&tn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nZ=tn&&tn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&rZ(e,t,r);return iZ(e,t),e};Object.defineProperty(tn,"__esModule",{value:!0});tn.tryAndThrowErrorIfStackOverflow=tn.isStackOverflowExeption=void 0;var sZ=nZ(jr());function K1(t){return t instanceof RangeError||t.message===sZ.STACK_OVERFLOW}tn.isStackOverflowExeption=K1;var oZ=function(t,e){try{return t()}catch(r){throw K1(r)&&(r=e()),r}};tn.tryAndThrowErrorIfStackOverflow=oZ});var Bl=v(Kt=>{"use strict";var aZ=Kt&&Kt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),uZ=Kt&&Kt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cZ=Kt&&Kt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&aZ(e,t,r);return uZ(e,t),e};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.getSymbolDescription=Kt.circularDependencyToException=Kt.listMetadataForTarget=Kt.listRegisteredBindingsForServiceIdentifier=Kt.getServiceIdentifierAsString=Kt.getFunctionName=void 0;var lZ=cZ(jr());function z1(t){if(typeof t=="function"){var e=t;return e.name}else{if(typeof t=="symbol")return t.toString();var e=t;return e}}Kt.getServiceIdentifierAsString=z1;function pZ(t,e,r){var i="",n=r(t,e);return n.length!==0&&(i=`
Registered bindings:`,n.forEach(function(s){var o="Object";s.implementationType!==null&&(o=Y1(s.implementationType)),i=i+`
 `+o,s.constraint.metaData&&(i=i+" - "+s.constraint.metaData)})),i}Kt.listRegisteredBindingsForServiceIdentifier=pZ;function X1(t,e){return t.parentRequest===null?!1:t.parentRequest.serviceIdentifier===e?!0:X1(t.parentRequest,e)}function fZ(t){function e(i,n){n===void 0&&(n=[]);var s=z1(i.serviceIdentifier);return n.push(s),i.parentRequest!==null?e(i.parentRequest,n):n}var r=e(t);return r.reverse().join(" --> ")}function J1(t){t.childRequests.forEach(function(e){if(X1(e,e.serviceIdentifier)){var r=fZ(e);throw new Error(lZ.CIRCULAR_DEPENDENCY+" "+r)}else J1(e)})}Kt.circularDependencyToException=J1;function dZ(t,e){if(e.isTagged()||e.isNamed()){var r="",i=e.getNamedTag(),n=e.getCustomTags();return i!==null&&(r+=i.toString()+`
`),n!==null&&n.forEach(function(s){r+=s.toString()+`
`})," "+t+`
 `+t+" - "+r}else return" "+t}Kt.listMetadataForTarget=dZ;function Y1(t){if(t.name)return t.name;var e=t.toString(),r=e.match(/^function\s*([^\s(]+)/);return r?r[1]:"Anonymous function: "+e}Kt.getFunctionName=Y1;function hZ(t){return t.toString().slice(7,-1)}Kt.getSymbolDescription=hZ});var Q1=v(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});yy.Context=void 0;var mZ=ga(),gZ=function(){function t(e){this.id=(0,mZ.id)(),this.container=e}return t.prototype.addPlan=function(e){this.plan=e},t.prototype.setCurrentRequest=function(e){this.currentRequest=e},t}();yy.Context=gZ});var Mn=v(ps=>{"use strict";var HZ=ps&&ps.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),yZ=ps&&ps.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vZ=ps&&ps.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&HZ(e,t,r);return yZ(e,t),e};Object.defineProperty(ps,"__esModule",{value:!0});ps.Metadata=void 0;var bZ=vZ(Gt()),wZ=function(){function t(e,r){this.key=e,this.value=r}return t.prototype.toString=function(){return this.key===bZ.NAMED_TAG?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},t}();ps.Metadata=wZ});var Z1=v(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});vy.Plan=void 0;var _Z=function(){function t(e,r){this.parentContext=e,this.rootRequest=r}return t}();vy.Plan=_Z});var eS=v(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});by.LazyServiceIdentifer=void 0;var AZ=function(){function t(e){this._cb=e}return t.prototype.unwrap=function(){return this._cb()},t}();by.LazyServiceIdentifer=AZ});var eR=v(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});wy.QueryableString=void 0;var IZ=function(){function t(e){this.str=e}return t.prototype.startsWith=function(e){return this.str.indexOf(e)===0},t.prototype.endsWith=function(e){var r="",i=e.split("").reverse().join("");return r=this.str.split("").reverse().join(""),this.startsWith.call({str:r},i)},t.prototype.contains=function(e){return this.str.indexOf(e)!==-1},t.prototype.equals=function(e){return this.str===e},t.prototype.value=function(){return this.str},t}();wy.QueryableString=IZ});var tS=v(fs=>{"use strict";var SZ=fs&&fs.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),EZ=fs&&fs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xZ=fs&&fs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SZ(e,t,r);return EZ(e,t),e};Object.defineProperty(fs,"__esModule",{value:!0});fs.Target=void 0;var go=xZ(Gt()),CZ=ga(),DZ=Bl(),tR=Mn(),PZ=eR(),LZ=function(){function t(e,r,i,n){this.id=(0,CZ.id)(),this.type=e,this.serviceIdentifier=i;var s=typeof r=="symbol"?(0,DZ.getSymbolDescription)(r):r;this.name=new PZ.QueryableString(s||""),this.identifier=r,this.metadata=new Array;var o=null;typeof n=="string"?o=new tR.Metadata(go.NAMED_TAG,n):n instanceof tR.Metadata&&(o=n),o!==null&&this.metadata.push(o)}return t.prototype.hasTag=function(e){for(var r=0,i=this.metadata;r<i.length;r++){var n=i[r];if(n.key===e)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(go.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(e){return this.matchesTag(go.MULTI_INJECT_TAG)(e)},t.prototype.isNamed=function(){return this.hasTag(go.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(e){return go.NON_CUSTOM_TAG_KEYS.every(function(r){return e.key!==r})})},t.prototype.isOptional=function(){return this.matchesTag(go.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===go.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return go.NON_CUSTOM_TAG_KEYS.every(function(r){return e.key!==r})}):null},t.prototype.matchesNamedTag=function(e){return this.matchesTag(go.NAMED_TAG)(e)},t.prototype.matchesTag=function(e){var r=this;return function(i){for(var n=0,s=r.metadata;n<s.length;n++){var o=s[n];if(o.key===e&&o.value===i)return!0}return!1}},t}();fs.Target=LZ});var cR=v(qr=>{"use strict";var TZ=qr&&qr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),$Z=qr&&qr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rR=qr&&qr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&TZ(e,t,r);return $Z(e,t),e},_y=qr&&qr.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(qr,"__esModule",{value:!0});qr.getFunctionName=qr.getBaseClassDependencyCount=qr.getDependencies=void 0;var kZ=eS(),rS=rR(jr()),iR=Rn(),Ph=rR(Gt()),iS=Bl();Object.defineProperty(qr,"getFunctionName",{enumerable:!0,get:function(){return iS.getFunctionName}});var nR=tS();function RZ(t,e){var r=(0,iS.getFunctionName)(e);return sR(t,r,e,!1)}qr.getDependencies=RZ;function sR(t,e,r,i){var n=t.getConstructorMetadata(r),s=n.compilerGeneratedMetadata;if(s===void 0){var o=rS.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(o)}var a=n.userGeneratedMetadata,u=Object.keys(a),c=r.length===0&&u.length>0,l=u.length>r.length,p=c||l?u.length:r.length,f=OZ(i,e,s,a,p),h=oR(t,r,e),g=_y(_y([],f,!0),h,!0);return g}function MZ(t,e,r,i,n){var s=n[t.toString()]||[],o=uR(s),a=o.unmanaged!==!0,u=i[t],c=o.inject||o.multiInject;if(u=c||u,u instanceof kZ.LazyServiceIdentifer&&(u=u.unwrap()),a){var l=u===Object,p=u===Function,f=u===void 0,h=l||p||f;if(!e&&h){var g=rS.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+r+".";throw new Error(g)}var H=new nR.Target(iR.TargetTypeEnum.ConstructorArgument,o.targetName,u);return H.metadata=s,H}return null}function OZ(t,e,r,i,n){for(var s=[],o=0;o<n;o++){var a=o,u=MZ(a,t,e,r,i);u!==null&&s.push(u)}return s}function NZ(t,e,r,i){var n=t||e;if(n===void 0){var s=rS.MISSING_INJECTABLE_ANNOTATION+" for property "+String(r)+" in class "+i+".";throw new Error(s)}return n}function oR(t,e,r){for(var i=t.getPropertiesMetadata(e),n=[],s=Object.getOwnPropertySymbols(i),o=Object.keys(i),a=o.concat(s),u=0,c=a;u<c.length;u++){var l=c[u],p=i[l],f=uR(p),h=f.targetName||l,g=NZ(f.inject,f.multiInject,l,r),H=new nR.Target(iR.TargetTypeEnum.ClassProperty,h,g);H.metadata=p,n.push(H)}var b=Object.getPrototypeOf(e.prototype).constructor;if(b!==Object){var _=oR(t,b,r);n=_y(_y([],n,!0),_,!0)}return n}function aR(t,e){var r=Object.getPrototypeOf(e.prototype).constructor;if(r!==Object){var i=(0,iS.getFunctionName)(r),n=sR(t,i,r,!0),s=n.map(function(u){return u.metadata.filter(function(c){return c.key===Ph.UNMANAGED_TAG})}),o=[].concat.apply([],s).length,a=n.length-o;return a>0?a:aR(t,r)}else return 0}qr.getBaseClassDependencyCount=aR;function uR(t){var e={};return t.forEach(function(r){e[r.key.toString()]=r.value}),{inject:e[Ph.INJECT_TAG],multiInject:e[Ph.MULTI_INJECT_TAG],targetName:e[Ph.NAME_TAG],unmanaged:e[Ph.UNMANAGED_TAG]}}});var lR=v(Ay=>{"use strict";Object.defineProperty(Ay,"__esModule",{value:!0});Ay.Request=void 0;var FZ=ga(),BZ=function(){function t(e,r,i,n,s){this.id=(0,FZ.id)(),this.serviceIdentifier=e,this.parentContext=r,this.parentRequest=i,this.target=s,this.childRequests=[],this.bindings=Array.isArray(n)?n:[n],this.requestScope=i===null?new Map:null}return t.prototype.addChildRequest=function(e,r,i){var n=new t(e,this.parentContext,this,r,i);return this.childRequests.push(n),n},t}();Ay.Request=BZ});var uS=v(di=>{"use strict";var UZ=di&&di.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),jZ=di&&di.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dR=di&&di.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&UZ(e,t,r);return jZ(e,t),e};Object.defineProperty(di,"__esModule",{value:!0});di.getBindingDictionary=di.createMockRequest=di.plan=void 0;var Iy=G1(),sS=dR(jr()),hR=Rn(),pR=dR(Gt()),qZ=ZI(),Ul=Bl(),mR=Q1(),oS=Mn(),WZ=Z1(),nS=cR(),aS=lR(),gR=tS();function HR(t){return t._bindingDictionary}di.getBindingDictionary=HR;function VZ(t,e,r,i,n,s){var o=t?pR.MULTI_INJECT_TAG:pR.INJECT_TAG,a=new oS.Metadata(o,r),u=new gR.Target(e,i,r,a);if(n!==void 0){var c=new oS.Metadata(n,s);u.metadata.push(c)}return u}function fR(t,e,r,i,n){var s=Lh(r.container,n.serviceIdentifier),o=[];return s.length===Iy.BindingCount.NoBindingsAvailable&&r.container.options.autoBindInjectable&&typeof n.serviceIdentifier=="function"&&t.getConstructorMetadata(n.serviceIdentifier).compilerGeneratedMetadata&&(r.container.bind(n.serviceIdentifier).toSelf(),s=Lh(r.container,n.serviceIdentifier)),e?o=s:o=s.filter(function(a){var u=new aS.Request(a.serviceIdentifier,r,i,a,n);return a.constraint(u)}),GZ(n.serviceIdentifier,o,n,r.container),o}function GZ(t,e,r,i){switch(e.length){case Iy.BindingCount.NoBindingsAvailable:if(r.isOptional())return e;var n=(0,Ul.getServiceIdentifierAsString)(t),s=sS.NOT_REGISTERED;throw s+=(0,Ul.listMetadataForTarget)(n,r),s+=(0,Ul.listRegisteredBindingsForServiceIdentifier)(i,n,Lh),new Error(s);case Iy.BindingCount.OnlyOneBindingAvailable:return e;case Iy.BindingCount.MultipleBindingsAvailable:default:if(r.isArray())return e;var n=(0,Ul.getServiceIdentifierAsString)(t),s=sS.AMBIGUOUS_MATCH+" "+n;throw s+=(0,Ul.listRegisteredBindingsForServiceIdentifier)(i,n,Lh),new Error(s)}}function yR(t,e,r,i,n,s){var o,a;if(n===null){o=fR(t,e,i,null,s),a=new aS.Request(r,i,null,o,s);var u=new WZ.Plan(i,a);i.addPlan(u)}else o=fR(t,e,i,n,s),a=n.addChildRequest(s.serviceIdentifier,o,s);o.forEach(function(c){var l=null;if(s.isArray())l=a.addChildRequest(c.serviceIdentifier,c,s);else{if(c.cache)return;l=a}if(c.type===hR.BindingTypeEnum.Instance&&c.implementationType!==null){var p=(0,nS.getDependencies)(t,c.implementationType);if(!i.container.options.skipBaseClassChecks){var f=(0,nS.getBaseClassDependencyCount)(t,c.implementationType);if(p.length<f){var h=sS.ARGUMENTS_LENGTH_MISMATCH((0,nS.getFunctionName)(c.implementationType));throw new Error(h)}}p.forEach(function(g){yR(t,!1,g.serviceIdentifier,i,l,g)})}})}function Lh(t,e){var r=[],i=HR(t);return i.hasKey(e)?r=i.get(e):t.parent!==null&&(r=Lh(t.parent,e)),r}function KZ(t,e,r,i,n,s,o,a){a===void 0&&(a=!1);var u=new mR.Context(e),c=VZ(r,i,n,"",s,o);try{return yR(t,a,n,u,null,c),u}catch(l){throw(0,qZ.isStackOverflowExeption)(l)&&(0,Ul.circularDependencyToException)(u.plan.rootRequest),l}}di.plan=KZ;function zZ(t,e,r,i){var n=new gR.Target(hR.TargetTypeEnum.Variable,"",e,new oS.Metadata(r,i)),s=new mR.Context(t),o=new aS.Request(e,s,null,[],n);return o}di.createMockRequest=zZ});var Th=v(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.isPromiseOrContainsPromise=jl.isPromise=void 0;function cS(t){var e=typeof t=="object"&&t!==null||typeof t=="function";return e&&typeof t.then=="function"}jl.isPromise=cS;function XZ(t){return cS(t)?!0:Array.isArray(t)&&t.some(cS)}jl.isPromiseOrContainsPromise=XZ});var vR=v(ds=>{"use strict";var JZ=ds&&ds.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(i.next(l))}catch(p){o(p)}}function u(l){try{c(i.throw(l))}catch(p){o(p)}}function c(l){l.done?s(l.value):n(l.value).then(a,u)}c((i=i.apply(t,e||[])).next())})},YZ=ds&&ds.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ds,"__esModule",{value:!0});ds.saveToScope=ds.tryGetFromScope=void 0;var Sy=Y(),QZ=Th(),ZZ=function(t,e){return e.scope===Sy.BindingScopeEnum.Singleton&&e.activated?e.cache:e.scope===Sy.BindingScopeEnum.Request&&t.has(e.id)?t.get(e.id):null};ds.tryGetFromScope=ZZ;var eee=function(t,e,r){e.scope===Sy.BindingScopeEnum.Singleton&&ree(e,r),e.scope===Sy.BindingScopeEnum.Request&&tee(t,e,r)};ds.saveToScope=eee;var tee=function(t,e,r){t.has(e.id)||t.set(e.id,r)},ree=function(t,e){t.cache=e,t.activated=!0,(0,QZ.isPromise)(e)&&iee(t,e)},iee=function(t,e){return JZ(void 0,void 0,void 0,function(){var r,i;return YZ(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e];case 1:return r=n.sent(),t.cache=r,[3,3];case 2:throw i=n.sent(),t.cache=null,t.activated=!1,i;case 3:return[2]}})})}});var bR=v($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.FactoryType=void 0;var nee;(function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"})(nee=$h.FactoryType||($h.FactoryType={}))});var pS=v(hi=>{"use strict";var see=hi&&hi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),oee=hi&&hi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aee=hi&&hi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&see(e,t,r);return oee(e,t),e};Object.defineProperty(hi,"__esModule",{value:!0});hi.getFactoryDetails=hi.ensureFullyBound=hi.multiBindToService=void 0;var uee=Y(),cee=aee(jr()),hs=Rn(),lS=bR(),lee=function(t){return function(e){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.forEach(function(n){return t.bind(n).toService(e)})}}};hi.multiBindToService=lee;var pee=function(t){var e=null;switch(t.type){case hs.BindingTypeEnum.ConstantValue:case hs.BindingTypeEnum.Function:e=t.cache;break;case hs.BindingTypeEnum.Constructor:case hs.BindingTypeEnum.Instance:e=t.implementationType;break;case hs.BindingTypeEnum.DynamicValue:e=t.dynamicValue;break;case hs.BindingTypeEnum.Provider:e=t.provider;break;case hs.BindingTypeEnum.Factory:e=t.factory;break}if(e===null){var r=(0,uee.getServiceIdentifierAsString)(t.serviceIdentifier);throw new Error(cee.INVALID_BINDING_TYPE+" "+r)}};hi.ensureFullyBound=pee;var fee=function(t){switch(t.type){case hs.BindingTypeEnum.Factory:return{factory:t.factory,factoryType:lS.FactoryType.Factory};case hs.BindingTypeEnum.Provider:return{factory:t.provider,factoryType:lS.FactoryType.Provider};case hs.BindingTypeEnum.DynamicValue:return{factory:t.dynamicValue,factoryType:lS.FactoryType.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}};hi.getFactoryDetails=fee});var ER=v(lr=>{"use strict";var ql=lr&&lr.__assign||function(){return ql=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},ql.apply(this,arguments)},dee=lr&&lr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),hee=lr&&lr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mee=lr&&lr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dee(e,t,r);return hee(e,t),e},AR=lr&&lr.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(i.next(l))}catch(p){o(p)}}function u(l){try{c(i.throw(l))}catch(p){o(p)}}function c(l){l.done?s(l.value):n(l.value).then(a,u)}c((i=i.apply(t,e||[])).next())})},IR=lr&&lr.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},gee=lr&&lr.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(lr,"__esModule",{value:!0});lr.resolveInstance=void 0;var fS=jr(),hS=Rn(),dS=mee(Gt()),mS=Th();function Hee(t,e){return t.reduce(function(r,i){var n=e(i),s=i.target.type;return s===hS.TargetTypeEnum.ConstructorArgument?r.constructorInjections.push(n):(r.propertyRequests.push(i),r.propertyInjections.push(n)),r.isAsync||(r.isAsync=(0,mS.isPromiseOrContainsPromise)(n)),r},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function yee(t,e,r){var i;if(e.length>0){var n=Hee(e,r),s=ql(ql({},n),{constr:t});n.isAsync?i=vee(s):i=SR(s)}else i=new t;return i}function SR(t){var e,r=new((e=t.constr).bind.apply(e,gee([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach(function(i,n){var s=i.target.identifier,o=t.propertyInjections[n];r[s]=o}),r}function vee(t){return AR(this,void 0,void 0,function(){var e,r;return IR(this,function(i){switch(i.label){case 0:return[4,wR(t.constructorInjections)];case 1:return e=i.sent(),[4,wR(t.propertyInjections)];case 2:return r=i.sent(),[2,SR(ql(ql({},t),{constructorInjections:e,propertyInjections:r}))]}})})}function wR(t){return AR(this,void 0,void 0,function(){var e,r,i,n;return IR(this,function(s){for(e=[],r=0,i=t;r<i.length;r++)n=i[r],Array.isArray(n)?e.push(Promise.all(n)):e.push(n);return[2,Promise.all(e)]})})}function _R(t,e){var r=bee(t,e);return(0,mS.isPromise)(r)?r.then(function(){return e}):e}function bee(t,e){var r,i;if(Reflect.hasMetadata(dS.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(dS.POST_CONSTRUCT,t);try{return(i=(r=e)[n.value])===null||i===void 0?void 0:i.call(r)}catch(s){throw new Error((0,fS.POST_CONSTRUCT_ERROR)(t.name,s.message))}}}function wee(t,e){t.scope!==hS.BindingScopeEnum.Singleton&&_ee(t,e)}function _ee(t,e){var r="Class cannot be instantiated in "+(t.scope===hS.BindingScopeEnum.Request?"request":"transient")+" scope.";if(typeof t.onDeactivation=="function")throw new Error((0,fS.ON_DEACTIVATION_ERROR)(e.name,r));if(Reflect.hasMetadata(dS.PRE_DESTROY,e))throw new Error((0,fS.PRE_DESTROY_ERROR)(e.name,r))}function Aee(t,e,r,i){wee(t,e);var n=yee(e,r,i);return(0,mS.isPromise)(n)?n.then(function(s){return _R(e,s)}):_R(e,n)}lr.resolveInstance=Aee});var LR=v(mi=>{"use strict";var Iee=mi&&mi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),See=mi&&mi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Eee=mi&&mi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Iee(e,t,r);return See(e,t),e},xee=mi&&mi.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(i.next(l))}catch(p){o(p)}}function u(l){try{c(i.throw(l))}catch(p){o(p)}}function c(l){l.done?s(l.value):n(l.value).then(a,u)}c((i=i.apply(t,e||[])).next())})},Cee=mi&&mi.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(mi,"__esModule",{value:!0});mi.resolve=void 0;var Dee=Eee(jr()),Ey=Rn(),Pee=uS(),xR=vR(),gS=Th(),DR=pS(),Lee=ZI(),Tee=ER(),HS=function(t){return function(e){e.parentContext.setCurrentRequest(e);var r=e.bindings,i=e.childRequests,n=e.target&&e.target.isArray(),s=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(n&&s)return i.map(function(a){var u=HS(t);return u(a)});if(e.target.isOptional()&&r.length===0)return;var o=r[0];return Mee(t,e,o)}},$ee=function(t,e){var r=(0,DR.getFactoryDetails)(t);return(0,Lee.tryAndThrowErrorIfStackOverflow)(function(){return r.factory.bind(t)(e)},function(){return new Error(Dee.CIRCULAR_DEPENDENCY_IN_FACTORY(r.factoryType,e.currentRequest.serviceIdentifier.toString()))})},kee=function(t,e,r){var i,n=e.childRequests;switch((0,DR.ensureFullyBound)(r),r.type){case Ey.BindingTypeEnum.ConstantValue:case Ey.BindingTypeEnum.Function:i=r.cache;break;case Ey.BindingTypeEnum.Constructor:i=r.implementationType;break;case Ey.BindingTypeEnum.Instance:i=(0,Tee.resolveInstance)(r,r.implementationType,n,HS(t));break;default:i=$ee(r,e.parentContext)}return i},Ree=function(t,e,r){var i=(0,xR.tryGetFromScope)(t,e);return i!==null||(i=r(),(0,xR.saveToScope)(t,e,i)),i},Mee=function(t,e,r){return Ree(t,r,function(){var i=kee(t,e,r);return(0,gS.isPromise)(i)?i=i.then(function(n){return CR(e,r,n)}):i=CR(e,r,i),i})};function CR(t,e,r){var i=Oee(t.parentContext,e,r),n=Bee(t.parentContext.container),s,o=n.next();do{s=o.value;var a=t.parentContext,u=t.serviceIdentifier,c=Fee(s,u);(0,gS.isPromise)(i)?i=PR(c,a,i):i=Nee(c,a,i),o=n.next()}while(o.done!==!0&&!(0,Pee.getBindingDictionary)(s).hasKey(t.serviceIdentifier));return i}var Oee=function(t,e,r){var i;return typeof e.onActivation=="function"?i=e.onActivation(t,r):i=r,i},Nee=function(t,e,r){for(var i=t.next();!i.done;){if(r=i.value(e,r),(0,gS.isPromise)(r))return PR(t,e,r);i=t.next()}return r},PR=function(t,e,r){return xee(void 0,void 0,void 0,function(){var i,n;return Cee(this,function(s){switch(s.label){case 0:return[4,r];case 1:i=s.sent(),n=t.next(),s.label=2;case 2:return n.done?[3,4]:[4,n.value(e,i)];case 3:return i=s.sent(),n=t.next(),[3,2];case 4:return[2,i]}})})},Fee=function(t,e){var r=t._activations;return r.hasKey(e)?r.get(e).values():[].values()},Bee=function(t){for(var e=[t],r=t.parent;r!==null;)e.push(r),r=r.parent;var i=function(){var s=e.pop();return s!==void 0?{done:!1,value:s}:{done:!0,value:void 0}},n={next:i};return n};function Uee(t){var e=HS(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}mi.resolve=Uee});var yS=v(Wr=>{"use strict";var jee=Wr&&Wr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),qee=Wr&&Wr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Wee=Wr&&Wr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jee(e,t,r);return qee(e,t),e};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.typeConstraint=Wr.namedConstraint=Wr.taggedConstraint=Wr.traverseAncerstors=void 0;var Vee=Wee(Gt()),Gee=Mn(),TR=function(t,e){var r=t.parentRequest;return r!==null?e(r)?!0:TR(r,e):!1};Wr.traverseAncerstors=TR;var $R=function(t){return function(e){var r=function(i){return i!==null&&i.target!==null&&i.target.matchesTag(t)(e)};return r.metaData=new Gee.Metadata(t,e),r}};Wr.taggedConstraint=$R;var Kee=$R(Vee.NAMED_TAG);Wr.namedConstraint=Kee;var zee=function(t){return function(e){var r=null;if(e!==null)if(r=e.bindings[0],typeof t=="string"){var i=r.serviceIdentifier;return i===t}else{var n=e.bindings[0].implementationType;return t===n}return!1}};Wr.typeConstraint=zee});var Cy=v(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});xy.BindingWhenSyntax=void 0;var ei=Dy(),tr=yS(),Xee=function(){function t(e){this._binding=e}return t.prototype.when=function(e){return this._binding.constraint=e,new ei.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(e){return this._binding.constraint=(0,tr.namedConstraint)(e),new ei.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){if(e===null)return!1;var r=e.target!==null&&!e.target.isNamed()&&!e.target.isTagged();return r},new ei.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(e,r){return this._binding.constraint=(0,tr.taggedConstraint)(e)(r),new ei.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(r){return r!==null&&(0,tr.typeConstraint)(e)(r.parentRequest)},new ei.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(e){return this._binding.constraint=function(r){return r!==null&&(0,tr.namedConstraint)(e)(r.parentRequest)},new ei.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(e,r){return this._binding.constraint=function(i){return i!==null&&(0,tr.taggedConstraint)(e)(r)(i.parentRequest)},new ei.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(r){return r!==null&&(0,tr.traverseAncerstors)(r,(0,tr.typeConstraint)(e))},new ei.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,tr.traverseAncerstors)(r,(0,tr.typeConstraint)(e))},new ei.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(r){return r!==null&&(0,tr.traverseAncerstors)(r,(0,tr.namedConstraint)(e))},new ei.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,tr.traverseAncerstors)(r,(0,tr.namedConstraint)(e))},new ei.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._binding.constraint=function(i){return i!==null&&(0,tr.traverseAncerstors)(i,(0,tr.taggedConstraint)(e)(r))},new ei.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(e,r){return this._binding.constraint=function(i){return i!==null&&!(0,tr.traverseAncerstors)(i,(0,tr.taggedConstraint)(e)(r))},new ei.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(r){return r!==null&&(0,tr.traverseAncerstors)(r,e)},new ei.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,tr.traverseAncerstors)(r,e)},new ei.BindingOnSyntax(this._binding)},t}();xy.BindingWhenSyntax=Xee});var Dy=v(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0});Py.BindingOnSyntax=void 0;var kR=Cy(),Jee=function(){function t(e){this._binding=e}return t.prototype.onActivation=function(e){return this._binding.onActivation=e,new kR.BindingWhenSyntax(this._binding)},t.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new kR.BindingWhenSyntax(this._binding)},t}();Py.BindingOnSyntax=Jee});var vS=v(Ly=>{"use strict";Object.defineProperty(Ly,"__esModule",{value:!0});Ly.BindingWhenOnSyntax=void 0;var Yee=Dy(),Qee=Cy(),Zee=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new Qee.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Yee.BindingOnSyntax(this._binding)}return t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,r){return this._bindingWhenSyntax.whenTargetTagged(e,r)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,r){return this._bindingWhenSyntax.whenParentTagged(e,r)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,r)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenNoAncestorTagged(e,r)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}();Ly.BindingWhenOnSyntax=Zee});var RR=v(Ty=>{"use strict";Object.defineProperty(Ty,"__esModule",{value:!0});Ty.BindingInSyntax=void 0;var bS=Rn(),wS=vS(),ete=function(){function t(e){this._binding=e}return t.prototype.inRequestScope=function(){return this._binding.scope=bS.BindingScopeEnum.Request,new wS.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=bS.BindingScopeEnum.Singleton,new wS.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=bS.BindingScopeEnum.Transient,new wS.BindingWhenOnSyntax(this._binding)},t}();Ty.BindingInSyntax=ete});var MR=v($y=>{"use strict";Object.defineProperty($y,"__esModule",{value:!0});$y.BindingInWhenOnSyntax=void 0;var tte=RR(),rte=Dy(),ite=Cy(),nte=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new ite.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new rte.BindingOnSyntax(this._binding),this._bindingInSyntax=new tte.BindingInSyntax(e)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,r){return this._bindingWhenSyntax.whenTargetTagged(e,r)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,r){return this._bindingWhenSyntax.whenParentTagged(e,r)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,r)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenNoAncestorTagged(e,r)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}();$y.BindingInWhenOnSyntax=nte});var FR=v(ms=>{"use strict";var ste=ms&&ms.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),ote=ms&&ms.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ate=ms&&ms.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ste(e,t,r);return ote(e,t),e};Object.defineProperty(ms,"__esModule",{value:!0});ms.BindingToSyntax=void 0;var OR=ate(jr()),ti=Rn(),NR=MR(),Wl=vS(),ute=function(){function t(e){this._binding=e}return t.prototype.to=function(e){return this._binding.type=ti.BindingTypeEnum.Instance,this._binding.implementationType=e,new NR.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+OR.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},t.prototype.toConstantValue=function(e){return this._binding.type=ti.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=ti.BindingScopeEnum.Singleton,new Wl.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(e){return this._binding.type=ti.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new NR.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(e){return this._binding.type=ti.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=ti.BindingScopeEnum.Singleton,new Wl.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(e){return this._binding.type=ti.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=ti.BindingScopeEnum.Singleton,new Wl.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(e){if(typeof e!="function")throw new Error(OR.INVALID_FUNCTION_BINDING);var r=this.toConstantValue(e);return this._binding.type=ti.BindingTypeEnum.Function,this._binding.scope=ti.BindingScopeEnum.Singleton,r},t.prototype.toAutoFactory=function(e){return this._binding.type=ti.BindingTypeEnum.Factory,this._binding.factory=function(r){var i=function(){return r.container.get(e)};return i},this._binding.scope=ti.BindingScopeEnum.Singleton,new Wl.BindingWhenOnSyntax(this._binding)},t.prototype.toAutoNamedFactory=function(e){return this._binding.type=ti.BindingTypeEnum.Factory,this._binding.factory=function(r){return function(i){return r.container.getNamed(e,i)}},new Wl.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(e){return this._binding.type=ti.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=ti.BindingScopeEnum.Singleton,new Wl.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(e){this.toDynamicValue(function(r){return r.container.get(e)})},t}();ms.BindingToSyntax=ute});var BR=v(ky=>{"use strict";Object.defineProperty(ky,"__esModule",{value:!0});ky.ContainerSnapshot=void 0;var cte=function(){function t(){}return t.of=function(e,r,i,n,s){var o=new t;return o.bindings=e,o.middleware=r,o.deactivations=n,o.activations=i,o.moduleActivationStore=s,o},t}();ky.ContainerSnapshot=cte});var UR=v(Ry=>{"use strict";Object.defineProperty(Ry,"__esModule",{value:!0});Ry.isClonable=void 0;function lte(t){return typeof t=="object"&&t!==null&&"clone"in t&&typeof t.clone=="function"}Ry.isClonable=lte});var _S=v(gs=>{"use strict";var pte=gs&&gs.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),fte=gs&&gs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dte=gs&&gs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pte(e,t,r);return fte(e,t),e};Object.defineProperty(gs,"__esModule",{value:!0});gs.Lookup=void 0;var Qu=dte(jr()),hte=UR(),mte=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(e,r){if(e==null)throw new Error(Qu.NULL_ARGUMENT);if(r==null)throw new Error(Qu.NULL_ARGUMENT);var i=this._map.get(e);i!==void 0?i.push(r):this._map.set(e,[r])},t.prototype.get=function(e){if(e==null)throw new Error(Qu.NULL_ARGUMENT);var r=this._map.get(e);if(r!==void 0)return r;throw new Error(Qu.KEY_NOT_FOUND)},t.prototype.remove=function(e){if(e==null)throw new Error(Qu.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(Qu.KEY_NOT_FOUND)},t.prototype.removeIntersection=function(e){var r=this;this.traverse(function(i,n){var s=e.hasKey(i)?e.get(i):void 0;if(s!==void 0){var o=n.filter(function(a){return!s.some(function(u){return a===u})});r._setValue(i,o)}})},t.prototype.removeByCondition=function(e){var r=this,i=[];return this._map.forEach(function(n,s){for(var o=[],a=0,u=n;a<u.length;a++){var c=u[a],l=e(c);l?i.push(c):o.push(c)}r._setValue(s,o)}),i},t.prototype.hasKey=function(e){if(e==null)throw new Error(Qu.NULL_ARGUMENT);return this._map.has(e)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(r,i){r.forEach(function(n){return e.add(i,(0,hte.isClonable)(n)?n.clone():n)})}),e},t.prototype.traverse=function(e){this._map.forEach(function(r,i){e(i,r)})},t.prototype._setValue=function(e,r){r.length>0?this._map.set(e,r):this._map.delete(e)},t}();gs.Lookup=mte});var qR=v(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});My.ModuleActivationStore=void 0;var jR=_S(),gte=function(){function t(){this._map=new Map}return t.prototype.remove=function(e){if(this._map.has(e)){var r=this._map.get(e);return this._map.delete(e),r}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(e,r,i){this._getModuleActivationHandlers(e).onDeactivations.add(r,i)},t.prototype.addActivation=function(e,r,i){this._getModuleActivationHandlers(e).onActivations.add(r,i)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(r,i){e._map.set(i,{onActivations:r.onActivations.clone(),onDeactivations:r.onDeactivations.clone()})}),e},t.prototype._getModuleActivationHandlers=function(e){var r=this._map.get(e);return r===void 0&&(r=this._getEmptyHandlersStore(),this._map.set(e,r)),r},t.prototype._getEmptyHandlersStore=function(){var e={onActivations:new jR.Lookup,onDeactivations:new jR.Lookup};return e},t}();My.ModuleActivationStore=gte});var VR=v(pr=>{"use strict";var Ny=pr&&pr.__assign||function(){return Ny=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Ny.apply(this,arguments)},Hte=pr&&pr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),yte=pr&&pr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WR=pr&&pr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Hte(e,t,r);return yte(e,t),e},rn=pr&&pr.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(i.next(l))}catch(p){o(p)}}function u(l){try{c(i.throw(l))}catch(p){o(p)}}function c(l){l.done?s(l.value):n(l.value).then(a,u)}c((i=i.apply(t,e||[])).next())})},nn=pr&&pr.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},vte=pr&&pr.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(pr,"__esModule",{value:!0});pr.Container=void 0;var bte=V1(),On=WR(jr()),Vl=Rn(),Zu=WR(Gt()),wte=QI(),Oy=uS(),_te=LR(),Ate=FR(),ec=Th(),Ite=ga(),Ste=Bl(),Ete=BR(),kh=_S(),xte=qR(),Cte=function(){function t(e){var r=e||{};if(typeof r!="object")throw new Error(""+On.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(r.defaultScope===void 0)r.defaultScope=Vl.BindingScopeEnum.Transient;else if(r.defaultScope!==Vl.BindingScopeEnum.Singleton&&r.defaultScope!==Vl.BindingScopeEnum.Transient&&r.defaultScope!==Vl.BindingScopeEnum.Request)throw new Error(""+On.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(r.autoBindInjectable===void 0)r.autoBindInjectable=!1;else if(typeof r.autoBindInjectable!="boolean")throw new Error(""+On.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(r.skipBaseClassChecks===void 0)r.skipBaseClassChecks=!1;else if(typeof r.skipBaseClassChecks!="boolean")throw new Error(""+On.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:r.autoBindInjectable,defaultScope:r.defaultScope,skipBaseClassChecks:r.skipBaseClassChecks},this.id=(0,Ite.id)(),this._bindingDictionary=new kh.Lookup,this._snapshots=[],this._middleware=null,this._activations=new kh.Lookup,this._deactivations=new kh.Lookup,this.parent=null,this._metadataReader=new wte.MetadataReader,this._moduleActivationStore=new xte.ModuleActivationStore}return t.merge=function(e,r){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var s=new t,o=vte([e,r],i,!0).map(function(c){return(0,Oy.getBindingDictionary)(c)}),a=(0,Oy.getBindingDictionary)(s);function u(c,l){c.traverse(function(p,f){f.forEach(function(h){l.add(h.serviceIdentifier,h.clone())})})}return o.forEach(function(c){u(c,a)}),s},t.prototype.load=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=this._getContainerModuleHelpersFactory(),n=0,s=e;n<s.length;n++){var o=s[n],a=i(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return rn(this,void 0,void 0,function(){var i,n,s,o,a;return nn(this,function(u){switch(u.label){case 0:i=this._getContainerModuleHelpersFactory(),n=0,s=e,u.label=1;case 1:return n<s.length?(o=s[n],a=i(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)]):[3,4];case 2:u.sent(),u.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(n){var s=e._removeModuleBindings(n.id);e._deactivateSingletons(s),e._removeModuleHandlers(n.id)})},t.prototype.unloadAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return rn(this,void 0,void 0,function(){var i,n,s,o;return nn(this,function(a){switch(a.label){case 0:i=0,n=e,a.label=1;case 1:return i<n.length?(s=n[i],o=this._removeModuleBindings(s.id),[4,this._deactivateSingletonsAsync(o)]):[3,4];case 2:a.sent(),this._removeModuleHandlers(s.id),a.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.bind=function(e){var r=this.options.defaultScope||Vl.BindingScopeEnum.Transient,i=new bte.Binding(e,r);return this._bindingDictionary.add(e,i),new Ate.BindingToSyntax(i)},t.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},t.prototype.rebindAsync=function(e){return rn(this,void 0,void 0,function(){return nn(this,function(r){switch(r.label){case 0:return[4,this.unbindAsync(e)];case 1:return r.sent(),[2,this.bind(e)]}})})},t.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var r=this._bindingDictionary.get(e);this._deactivateSingletons(r)}this._removeServiceFromDictionary(e)},t.prototype.unbindAsync=function(e){return rn(this,void 0,void 0,function(){var r;return nn(this,function(i){switch(i.label){case 0:return this._bindingDictionary.hasKey(e)?(r=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(r)]):[3,2];case 1:i.sent(),i.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}})})},t.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse(function(r,i){e._deactivateSingletons(i)}),this._bindingDictionary=new kh.Lookup},t.prototype.unbindAllAsync=function(){return rn(this,void 0,void 0,function(){var e,r=this;return nn(this,function(i){switch(i.label){case 0:return e=[],this._bindingDictionary.traverse(function(n,s){e.push(r._deactivateSingletonsAsync(s))}),[4,Promise.all(e)];case 1:return i.sent(),this._bindingDictionary=new kh.Lookup,[2]}})})},t.prototype.onActivation=function(e,r){this._activations.add(e,r)},t.prototype.onDeactivation=function(e,r){this._deactivations.add(e,r)},t.prototype.isBound=function(e){var r=this._bindingDictionary.hasKey(e);return!r&&this.parent&&(r=this.parent.isBound(e)),r},t.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},t.prototype.isBoundNamed=function(e,r){return this.isBoundTagged(e,Zu.NAMED_TAG,r)},t.prototype.isBoundTagged=function(e,r,i){var n=!1;if(this._bindingDictionary.hasKey(e)){var s=this._bindingDictionary.get(e),o=(0,Oy.createMockRequest)(this,e,r,i);n=s.some(function(a){return a.constraint(o)})}return!n&&this.parent&&(n=this.parent.isBoundTagged(e,r,i)),n},t.prototype.snapshot=function(){this._snapshots.push(Ete.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var e=this._snapshots.pop();if(e===void 0)throw new Error(On.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},t.prototype.createChild=function(e){var r=new t(e||this.options);return r.parent=this,r},t.prototype.applyMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(n,s){return s(n)},i)},t.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},t.prototype.get=function(e){var r=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(r)},t.prototype.getAsync=function(e){return rn(this,void 0,void 0,function(){var r;return nn(this,function(i){return r=this._getNotAllArgs(e,!1),[2,this._get(r)]})})},t.prototype.getTagged=function(e,r,i){var n=this._getNotAllArgs(e,!1,r,i);return this._getButThrowIfAsync(n)},t.prototype.getTaggedAsync=function(e,r,i){return rn(this,void 0,void 0,function(){var n;return nn(this,function(s){return n=this._getNotAllArgs(e,!1,r,i),[2,this._get(n)]})})},t.prototype.getNamed=function(e,r){return this.getTagged(e,Zu.NAMED_TAG,r)},t.prototype.getNamedAsync=function(e,r){return this.getTaggedAsync(e,Zu.NAMED_TAG,r)},t.prototype.getAll=function(e){var r=this._getAllArgs(e);return this._getButThrowIfAsync(r)},t.prototype.getAllAsync=function(e){var r=this._getAllArgs(e);return this._getAll(r)},t.prototype.getAllTagged=function(e,r,i){var n=this._getNotAllArgs(e,!0,r,i);return this._getButThrowIfAsync(n)},t.prototype.getAllTaggedAsync=function(e,r,i){var n=this._getNotAllArgs(e,!0,r,i);return this._getAll(n)},t.prototype.getAllNamed=function(e,r){return this.getAllTagged(e,Zu.NAMED_TAG,r)},t.prototype.getAllNamedAsync=function(e,r){return this.getAllTaggedAsync(e,Zu.NAMED_TAG,r)},t.prototype.resolve=function(e){var r=this.isBound(e);r||this.bind(e).toSelf();var i=this.get(e);return r||this.unbind(e),i},t.prototype._preDestroy=function(e,r){if(Reflect.hasMetadata(Zu.PRE_DESTROY,e)){var i=Reflect.getMetadata(Zu.PRE_DESTROY,e);return r[i.value]()}},t.prototype._removeModuleHandlers=function(e){var r=this._moduleActivationStore.remove(e);this._activations.removeIntersection(r.onActivations),this._deactivations.removeIntersection(r.onDeactivations)},t.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition(function(r){return r.moduleId===e})},t.prototype._deactivate=function(e,r){var i=this,n=Object.getPrototypeOf(r).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var s=this._deactivateContainer(r,this._deactivations.get(e.serviceIdentifier).values());if((0,ec.isPromise)(s))return this._handleDeactivationError(s.then(function(){return i._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,r,n)}),n)}var o=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,r,n);if((0,ec.isPromise)(o))return this._handleDeactivationError(o,n)}catch(a){throw new Error(On.ON_DEACTIVATION_ERROR(n.name,a.message))}},t.prototype._handleDeactivationError=function(e,r){return rn(this,void 0,void 0,function(){var i;return nn(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e];case 1:return n.sent(),[3,3];case 2:throw i=n.sent(),new Error(On.ON_DEACTIVATION_ERROR(r.name,i.message));case 3:return[2]}})})},t.prototype._deactivateContainer=function(e,r){for(var i=this,n=r.next();n.value;){var s=n.value(e);if((0,ec.isPromise)(s))return s.then(function(){return i._deactivateContainerAsync(e,r)});n=r.next()}},t.prototype._deactivateContainerAsync=function(e,r){return rn(this,void 0,void 0,function(){var i;return nn(this,function(n){switch(n.label){case 0:i=r.next(),n.label=1;case 1:return i.value?[4,i.value(e)]:[3,3];case 2:return n.sent(),i=r.next(),[3,1];case 3:return[2]}})})},t.prototype._getContainerModuleHelpersFactory=function(){var e=this,r=function(l,p){l._binding.moduleId=p},i=function(l){return function(p){var f=e.bind(p);return r(f,l),f}},n=function(){return function(l){return e.unbind(l)}},s=function(){return function(l){return e.unbindAsync(l)}},o=function(){return function(l){return e.isBound(l)}},a=function(l){return function(p){var f=e.rebind(p);return r(f,l),f}},u=function(l){return function(p,f){e._moduleActivationStore.addActivation(l,p,f),e.onActivation(p,f)}},c=function(l){return function(p,f){e._moduleActivationStore.addDeactivation(l,p,f),e.onDeactivation(p,f)}};return function(l){return{bindFunction:i(l),isboundFunction:o(),onActivationFunction:u(l),onDeactivationFunction:c(l),rebindFunction:a(l),unbindFunction:n(),unbindAsyncFunction:s()}}},t.prototype._getAll=function(e){return Promise.all(this._get(e))},t.prototype._get=function(e){var r=Ny(Ny({},e),{contextInterceptor:function(n){return n},targetType:Vl.TargetTypeEnum.Variable});if(this._middleware){var i=this._middleware(r);if(i==null)throw new Error(On.INVALID_MIDDLEWARE_RETURN);return i}return this._planAndResolve()(r)},t.prototype._getButThrowIfAsync=function(e){var r=this._get(e);if((0,ec.isPromiseOrContainsPromise)(r))throw new Error(On.LAZY_IN_SYNC(e.serviceIdentifier));return r},t.prototype._getAllArgs=function(e){var r={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e};return r},t.prototype._getNotAllArgs=function(e,r,i,n){var s={avoidConstraints:!1,isMultiInject:r,serviceIdentifier:e,key:i,value:n};return s},t.prototype._planAndResolve=function(){var e=this;return function(r){var i=(0,Oy.plan)(e._metadataReader,e,r.isMultiInject,r.targetType,r.serviceIdentifier,r.key,r.value,r.avoidConstraints);i=r.contextInterceptor(i);var n=(0,_te.resolve)(i);return n}},t.prototype._deactivateIfSingleton=function(e){var r=this;if(e.activated)return(0,ec.isPromise)(e.cache)?e.cache.then(function(i){return r._deactivate(e,i)}):this._deactivate(e,e.cache)},t.prototype._deactivateSingletons=function(e){for(var r=0,i=e;r<i.length;r++){var n=i[r],s=this._deactivateIfSingleton(n);if((0,ec.isPromise)(s))throw new Error(On.ASYNC_UNBIND_REQUIRED)}},t.prototype._deactivateSingletonsAsync=function(e){return rn(this,void 0,void 0,function(){var r=this;return nn(this,function(i){switch(i.label){case 0:return[4,Promise.all(e.map(function(n){return r._deactivateIfSingleton(n)}))];case 1:return i.sent(),[2]}})})},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,r,i){return this.parent?this._deactivate.bind(this.parent)(e,r):this._bindingDeactivationAndPreDestroy(e,r,i)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,r,i){return rn(this,void 0,void 0,function(){return nn(this,function(n){switch(n.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,r)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,r,i)];case 3:n.sent(),n.label=4;case 4:return[2]}})})},t.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch{throw new Error(On.CANNOT_UNBIND+" "+(0,Ste.getServiceIdentifierAsString)(e))}},t.prototype._bindingDeactivationAndPreDestroy=function(e,r,i){var n=this;if(typeof e.onDeactivation=="function"){var s=e.onDeactivation(r);if((0,ec.isPromise)(s))return s.then(function(){return n._preDestroy(i,r)})}return this._preDestroy(i,r)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(e,r,i){return rn(this,void 0,void 0,function(){return nn(this,function(n){switch(n.label){case 0:return typeof e.onDeactivation!="function"?[3,2]:[4,e.onDeactivation(r)];case 1:n.sent(),n.label=2;case 2:return[4,this._preDestroy(i,r)];case 3:return n.sent(),[2]}})})},t}();pr.Container=Cte});var KR=v(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.AsyncContainerModule=Gl.ContainerModule=void 0;var GR=ga(),Dte=function(){function t(e){this.id=(0,GR.id)(),this.registry=e}return t}();Gl.ContainerModule=Dte;var Pte=function(){function t(e){this.id=(0,GR.id)(),this.registry=e}return t}();Gl.AsyncContainerModule=Pte});var zR=v(Fy=>{"use strict";Object.defineProperty(Fy,"__esModule",{value:!0});Fy.getFirstArrayDuplicate=void 0;function Lte(t){for(var e=new Set,r=0,i=t;r<i.length;r++){var n=i[r];if(e.has(n))return n;e.add(n)}}Fy.getFirstArrayDuplicate=Lte});var Ho=v(Vr=>{"use strict";var Tte=Vr&&Vr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),$te=Vr&&Vr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JR=Vr&&Vr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Tte(e,t,r);return $te(e,t),e};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.createTaggedDecorator=Vr.tagProperty=Vr.tagParameter=Vr.decorate=void 0;var By=JR(jr()),YR=JR(Gt()),kte=zR();function Rte(t){return t.prototype!==void 0}function Mte(t){if(t!==void 0)throw new Error(By.INVALID_DECORATOR_OPERATION)}function QR(t,e,r,i){Mte(e),eM(YR.TAGGED,t,r.toString(),i)}Vr.tagParameter=QR;function ZR(t,e,r){if(Rte(t))throw new Error(By.INVALID_DECORATOR_OPERATION);eM(YR.TAGGED_PROP,t.constructor,e,r)}Vr.tagProperty=ZR;function Ote(t){var e=[];if(Array.isArray(t)){e=t;var r=(0,kte.getFirstArrayDuplicate)(e.map(function(i){return i.key}));if(r!==void 0)throw new Error(By.DUPLICATED_METADATA+" "+r.toString())}else e=[t];return e}function eM(t,e,r,i){var n=Ote(i),s={};Reflect.hasOwnMetadata(t,e)&&(s=Reflect.getMetadata(t,e));var o=s[r];if(o===void 0)o=[];else for(var a=function(p){if(n.some(function(f){return f.key===p.key}))throw new Error(By.DUPLICATED_METADATA+" "+p.key.toString())},u=0,c=o;u<c.length;u++){var l=c[u];a(l)}o.push.apply(o,n),s[r]=o,Reflect.defineMetadata(t,s,e)}function Nte(t){return function(e,r,i){typeof i=="number"?QR(e,r,i,t):ZR(e,r,t)}}Vr.createTaggedDecorator=Nte;function XR(t,e){Reflect.decorate(t,e)}function Fte(t,e){return function(r,i){e(r,i,t)}}function Bte(t,e,r){typeof r=="number"?XR([Fte(r,t)],e):typeof r=="string"?Reflect.decorate([t],e,r):XR([t],e)}Vr.decorate=Bte});var rM=v(Hs=>{"use strict";var Ute=Hs&&Hs.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),jte=Hs&&Hs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tM=Hs&&Hs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ute(e,t,r);return jte(e,t),e};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.injectable=void 0;var qte=tM(jr()),AS=tM(Gt());function Wte(){return function(t){if(Reflect.hasOwnMetadata(AS.PARAM_TYPES,t))throw new Error(qte.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(AS.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(AS.PARAM_TYPES,e,t),t}}Hs.injectable=Wte});var iM=v(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0});Uy.tagged=void 0;var Vte=Mn(),Gte=Ho();function Kte(t,e){return(0,Gte.createTaggedDecorator)(new Vte.Metadata(t,e))}Uy.tagged=Kte});var nM=v(ys=>{"use strict";var zte=ys&&ys.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Xte=ys&&ys.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jte=ys&&ys.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zte(e,t,r);return Xte(e,t),e};Object.defineProperty(ys,"__esModule",{value:!0});ys.named=void 0;var Yte=Jte(Gt()),Qte=Mn(),Zte=Ho();function ere(t){return(0,Zte.createTaggedDecorator)(new Qte.Metadata(Yte.NAMED_TAG,t))}ys.named=ere});var IS=v(jy=>{"use strict";Object.defineProperty(jy,"__esModule",{value:!0});jy.injectBase=void 0;var tre=jr(),rre=Mn(),ire=Ho();function nre(t){return function(e){return function(r,i,n){if(e===void 0){var s=typeof r=="function"?r.name:r.constructor.name;throw new Error((0,tre.UNDEFINED_INJECT_ANNOTATION)(s))}return(0,ire.createTaggedDecorator)(new rre.Metadata(t,e))(r,i,n)}}}jy.injectBase=nre});var sM=v(vs=>{"use strict";var sre=vs&&vs.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),ore=vs&&vs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),are=vs&&vs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sre(e,t,r);return ore(e,t),e};Object.defineProperty(vs,"__esModule",{value:!0});vs.inject=void 0;var ure=are(Gt()),cre=IS(),lre=(0,cre.injectBase)(ure.INJECT_TAG);vs.inject=lre});var oM=v(bs=>{"use strict";var pre=bs&&bs.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),fre=bs&&bs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dre=bs&&bs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pre(e,t,r);return fre(e,t),e};Object.defineProperty(bs,"__esModule",{value:!0});bs.optional=void 0;var hre=dre(Gt()),mre=Mn(),gre=Ho();function Hre(){return(0,gre.createTaggedDecorator)(new mre.Metadata(hre.OPTIONAL_TAG,!0))}bs.optional=Hre});var aM=v(ws=>{"use strict";var yre=ws&&ws.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),vre=ws&&ws.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bre=ws&&ws.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yre(e,t,r);return vre(e,t),e};Object.defineProperty(ws,"__esModule",{value:!0});ws.unmanaged=void 0;var wre=bre(Gt()),_re=Mn(),Are=Ho();function Ire(){return function(t,e,r){var i=new _re.Metadata(wre.UNMANAGED_TAG,!0);(0,Are.tagParameter)(t,e,r,i)}}ws.unmanaged=Ire});var uM=v(_s=>{"use strict";var Sre=_s&&_s.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Ere=_s&&_s.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xre=_s&&_s.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Sre(e,t,r);return Ere(e,t),e};Object.defineProperty(_s,"__esModule",{value:!0});_s.multiInject=void 0;var Cre=xre(Gt()),Dre=IS(),Pre=(0,Dre.injectBase)(Cre.MULTI_INJECT_TAG);_s.multiInject=Pre});var cM=v(As=>{"use strict";var Lre=As&&As.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Tre=As&&As.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$re=As&&As.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Lre(e,t,r);return Tre(e,t),e};Object.defineProperty(As,"__esModule",{value:!0});As.targetName=void 0;var kre=$re(Gt()),Rre=Mn(),Mre=Ho();function Ore(t){return function(e,r,i){var n=new Rre.Metadata(kre.NAME_TAG,t);(0,Mre.tagParameter)(e,r,i,n)}}As.targetName=Ore});var SS=v(qy=>{"use strict";Object.defineProperty(qy,"__esModule",{value:!0});qy.propertyEventDecorator=void 0;var Nre=Mn();function Fre(t,e){return function(){return function(r,i){var n=new Nre.Metadata(t,i);if(Reflect.hasOwnMetadata(t,r.constructor))throw new Error(e);Reflect.defineMetadata(t,n,r.constructor)}}}qy.propertyEventDecorator=Fre});var pM=v(Is=>{"use strict";var Bre=Is&&Is.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Ure=Is&&Is.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lM=Is&&Is.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Bre(e,t,r);return Ure(e,t),e};Object.defineProperty(Is,"__esModule",{value:!0});Is.postConstruct=void 0;var jre=lM(jr()),qre=lM(Gt()),Wre=SS(),Vre=(0,Wre.propertyEventDecorator)(qre.POST_CONSTRUCT,jre.MULTIPLE_POST_CONSTRUCT_METHODS);Is.postConstruct=Vre});var dM=v(Ss=>{"use strict";var Gre=Ss&&Ss.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Kre=Ss&&Ss.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fM=Ss&&Ss.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gre(e,t,r);return Kre(e,t),e};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.preDestroy=void 0;var zre=fM(jr()),Xre=fM(Gt()),Jre=SS(),Yre=(0,Jre.propertyEventDecorator)(Xre.PRE_DESTROY,zre.MULTIPLE_PRE_DESTROY_METHODS);Ss.preDestroy=Yre});var hM=v(Wy=>{"use strict";Object.defineProperty(Wy,"__esModule",{value:!0});Wy.interfaces=void 0;var ES;(function(t){})(ES||(ES={}));Wy.interfaces=ES});var Y=v(fe=>{"use strict";var Qre=fe&&fe.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Zre=fe&&fe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eie=fe&&fe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Qre(e,t,r);return Zre(e,t),e};Object.defineProperty(fe,"__esModule",{value:!0});fe.multiBindToService=fe.getServiceIdentifierAsString=fe.typeConstraint=fe.namedConstraint=fe.taggedConstraint=fe.traverseAncerstors=fe.decorate=fe.interfaces=fe.id=fe.MetadataReader=fe.preDestroy=fe.postConstruct=fe.targetName=fe.multiInject=fe.unmanaged=fe.optional=fe.LazyServiceIdentifer=fe.inject=fe.named=fe.tagged=fe.injectable=fe.createTaggedDecorator=fe.ContainerModule=fe.AsyncContainerModule=fe.TargetTypeEnum=fe.BindingTypeEnum=fe.BindingScopeEnum=fe.Container=fe.METADATA_KEY=void 0;var tie=eie(Gt());fe.METADATA_KEY=tie;var rie=VR();Object.defineProperty(fe,"Container",{enumerable:!0,get:function(){return rie.Container}});var xS=Rn();Object.defineProperty(fe,"BindingScopeEnum",{enumerable:!0,get:function(){return xS.BindingScopeEnum}});Object.defineProperty(fe,"BindingTypeEnum",{enumerable:!0,get:function(){return xS.BindingTypeEnum}});Object.defineProperty(fe,"TargetTypeEnum",{enumerable:!0,get:function(){return xS.TargetTypeEnum}});var mM=KR();Object.defineProperty(fe,"AsyncContainerModule",{enumerable:!0,get:function(){return mM.AsyncContainerModule}});Object.defineProperty(fe,"ContainerModule",{enumerable:!0,get:function(){return mM.ContainerModule}});var iie=Ho();Object.defineProperty(fe,"createTaggedDecorator",{enumerable:!0,get:function(){return iie.createTaggedDecorator}});var nie=rM();Object.defineProperty(fe,"injectable",{enumerable:!0,get:function(){return nie.injectable}});var sie=iM();Object.defineProperty(fe,"tagged",{enumerable:!0,get:function(){return sie.tagged}});var oie=nM();Object.defineProperty(fe,"named",{enumerable:!0,get:function(){return oie.named}});var aie=sM();Object.defineProperty(fe,"inject",{enumerable:!0,get:function(){return aie.inject}});var uie=eS();Object.defineProperty(fe,"LazyServiceIdentifer",{enumerable:!0,get:function(){return uie.LazyServiceIdentifer}});var cie=oM();Object.defineProperty(fe,"optional",{enumerable:!0,get:function(){return cie.optional}});var lie=aM();Object.defineProperty(fe,"unmanaged",{enumerable:!0,get:function(){return lie.unmanaged}});var pie=uM();Object.defineProperty(fe,"multiInject",{enumerable:!0,get:function(){return pie.multiInject}});var fie=cM();Object.defineProperty(fe,"targetName",{enumerable:!0,get:function(){return fie.targetName}});var die=pM();Object.defineProperty(fe,"postConstruct",{enumerable:!0,get:function(){return die.postConstruct}});var hie=dM();Object.defineProperty(fe,"preDestroy",{enumerable:!0,get:function(){return hie.preDestroy}});var mie=QI();Object.defineProperty(fe,"MetadataReader",{enumerable:!0,get:function(){return mie.MetadataReader}});var gie=ga();Object.defineProperty(fe,"id",{enumerable:!0,get:function(){return gie.id}});var Hie=hM();Object.defineProperty(fe,"interfaces",{enumerable:!0,get:function(){return Hie.interfaces}});var yie=Ho();Object.defineProperty(fe,"decorate",{enumerable:!0,get:function(){return yie.decorate}});var Vy=yS();Object.defineProperty(fe,"traverseAncerstors",{enumerable:!0,get:function(){return Vy.traverseAncerstors}});Object.defineProperty(fe,"taggedConstraint",{enumerable:!0,get:function(){return Vy.taggedConstraint}});Object.defineProperty(fe,"namedConstraint",{enumerable:!0,get:function(){return Vy.namedConstraint}});Object.defineProperty(fe,"typeConstraint",{enumerable:!0,get:function(){return Vy.typeConstraint}});var vie=Bl();Object.defineProperty(fe,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return vie.getServiceIdentifierAsString}});var bie=pS();Object.defineProperty(fe,"multiBindToService",{enumerable:!0,get:function(){return bie.multiBindToService}})});var $M=v(TM=>{var LM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");TM.encode=function(t){if(0<=t&&t<LM.length)return LM[t];throw new TypeError("Must be between 0 and 63: "+t)}});var kS=v(MM=>{var xie=$M(),kM=5,RM=1<<kM,Cie=RM-1,Die=RM;function Pie(t){return t<0?(-t<<1)+1:(t<<1)+0}MM.encode=function(e){let r="",i,n=Pie(e);do i=n&Cie,n>>>=kM,n>0&&(i|=Die),r+=xie.encode(i);while(n>0);return r}});var NM=v((DSe,OM)=>{"use strict";OM.exports=typeof URL=="function"?URL:require("url").URL});var jh=v(xs=>{var va=NM();function Lie(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}xs.getArg=Lie;var BM=function(){return!("__proto__"in Object.create(null))}();function UM(t){return t}function Tie(t){return jM(t)?"$"+t:t}xs.toSetString=BM?UM:Tie;function $ie(t){return jM(t)?t.slice(1):t}xs.fromSetString=BM?UM:$ie;function jM(t){if(!t)return!1;let e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(let r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function FM(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function kie(t,e){let r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=FM(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:FM(t.name,e.name)}xs.compareByGeneratedPositionsInflated=kie;function Rie(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}xs.parseSourceMapInput=Rie;var MS="http:",Bh=`${MS}//host`;function OS(t){return e=>{let r=zl(e),i=NS(e),n=new va(e,i);t(n);let s=n.toString();return r==="absolute"?s:r==="scheme-relative"?s.slice(MS.length):r==="path-absolute"?s.slice(Bh.length):FS(i,s)}}function ya(t,e){return new va(t,e).toString()}function Mie(t,e){let r=0;do{let i=t+r++;if(e.indexOf(i)===-1)return i}while(!0)}function NS(t){let e=t.split("..").length-1,r=Mie("p",t),i=`${Bh}/`;for(let n=0;n<e;n++)i+=`${r}/`;return i}var Oie=/^[A-Za-z0-9\+\-\.]+:/;function zl(t){return t[0]==="/"?t[1]==="/"?"scheme-relative":"path-absolute":Oie.test(t)?"absolute":"path-relative"}function FS(t,e){typeof t=="string"&&(t=new va(t)),typeof e=="string"&&(e=new va(e));let r=e.pathname.split("/"),i=t.pathname.split("/");for(i.length>0&&!i[i.length-1]&&i.pop();r.length>0&&i.length>0&&r[0]===i[0];)r.shift(),i.shift();return i.map(()=>"..").concat(r).join("/")+e.search+e.hash}var Nie=OS(t=>{t.pathname=t.pathname.replace(/\/?$/,"/")}),Fie=OS(t=>{t.href=new va(".",t.toString()).toString()}),Uh=OS(t=>{});xs.normalize=Uh;function RS(t,e){let r=zl(e),i=zl(t);if(t=Nie(t),r==="absolute")return ya(e,void 0);if(i==="absolute")return ya(e,t);if(r==="scheme-relative")return Uh(e);if(i==="scheme-relative")return ya(e,ya(t,Bh)).slice(MS.length);if(r==="path-absolute")return Uh(e);if(i==="path-absolute")return ya(e,ya(t,Bh)).slice(Bh.length);let n=NS(e+t),s=ya(e,ya(t,n));return FS(n,s)}xs.join=RS;function Bie(t,e){let r=Uie(t,e);return typeof r=="string"?r:Uh(e)}xs.relative=Bie;function Uie(t,e){if(zl(t)!==zl(e))return null;let i=NS(t+e),n=new va(t,i),s=new va(e,i);try{new va("",s.toString())}catch{return null}return s.protocol!==n.protocol||s.user!==n.user||s.password!==n.password||s.hostname!==n.hostname||s.port!==n.port?null:FS(n,s)}function jie(t,e,r){t&&zl(e)==="path-absolute"&&(e=e.replace(/^\//,""));let i=Uh(e||"");return t&&(i=RS(t,i)),r&&(i=RS(Fie(r),i)),i}xs.computeSourceURL=jie});var BS=v(qM=>{var qh=class{constructor(){this._array=[],this._set=new Map}static fromArray(e,r){let i=new qh;for(let n=0,s=e.length;n<s;n++)i.add(e[n],r);return i}size(){return this._set.size}add(e,r){let i=this.has(e),n=this._array.length;(!i||r)&&this._array.push(e),i||this._set.set(e,n)}has(e){return this._set.has(e)}indexOf(e){let r=this._set.get(e);if(r>=0)return r;throw new Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)}toArray(){return this._array.slice()}};qM.ArraySet=qh});var GM=v(VM=>{var WM=jh();function qie(t,e){let r=t.generatedLine,i=e.generatedLine,n=t.generatedColumn,s=e.generatedColumn;return i>r||i==r&&s>=n||WM.compareByGeneratedPositionsInflated(t,e)<=0}var US=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,r){this._array.forEach(e,r)}add(e){qie(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))}toArray(){return this._sorted||(this._array.sort(WM.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};VM.MappingList=US});var jS=v(KM=>{var Wh=kS(),zt=jh(),tv=BS().ArraySet,Wie=GM().MappingList,Xl=class{constructor(e){e||(e={}),this._file=zt.getArg(e,"file",null),this._sourceRoot=zt.getArg(e,"sourceRoot",null),this._skipValidation=zt.getArg(e,"skipValidation",!1),this._sources=new tv,this._names=new tv,this._mappings=new Wie,this._sourcesContents=null}static fromSourceMap(e){let r=e.sourceRoot,i=new Xl({file:e.file,sourceRoot:r});return e.eachMapping(function(n){let s={generated:{line:n.generatedLine,column:n.generatedColumn}};n.source!=null&&(s.source=n.source,r!=null&&(s.source=zt.relative(r,s.source)),s.original={line:n.originalLine,column:n.originalColumn},n.name!=null&&(s.name=n.name)),i.addMapping(s)}),e.sources.forEach(function(n){let s=n;r!==null&&(s=zt.relative(r,n)),i._sources.has(s)||i._sources.add(s);let o=e.sourceContentFor(n);o!=null&&i.setSourceContent(n,o)}),i}addMapping(e){let r=zt.getArg(e,"generated"),i=zt.getArg(e,"original",null),n=zt.getArg(e,"source",null),s=zt.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,i,n,s),n!=null&&(n=String(n),this._sources.has(n)||this._sources.add(n)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:i!=null&&i.line,originalColumn:i!=null&&i.column,source:n,name:s})}setSourceContent(e,r){let i=e;this._sourceRoot!=null&&(i=zt.relative(this._sourceRoot,i)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[zt.toSetString(i)]=r):this._sourcesContents&&(delete this._sourcesContents[zt.toSetString(i)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(e,r,i){let n=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);n=e.file}let s=this._sourceRoot;s!=null&&(n=zt.relative(s,n));let o=this._mappings.toArray().length>0?new tv:this._sources,a=new tv;this._mappings.unsortedForEach(function(u){if(u.source===n&&u.originalLine!=null){let p=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});p.source!=null&&(u.source=p.source,i!=null&&(u.source=zt.join(i,u.source)),s!=null&&(u.source=zt.relative(s,u.source)),u.originalLine=p.line,u.originalColumn=p.column,p.name!=null&&(u.name=p.name))}let c=u.source;c!=null&&!o.has(c)&&o.add(c);let l=u.name;l!=null&&!a.has(l)&&a.add(l)},this),this._sources=o,this._names=a,e.sources.forEach(function(u){let c=e.sourceContentFor(u);c!=null&&(i!=null&&(u=zt.join(i,u)),s!=null&&(u=zt.relative(s,u)),this.setSourceContent(u,c))},this)}_validateMapping(e,r,i,n){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!i&&!n)){if(!(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&i))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:i,original:r,name:n}))}}_serializeMappings(){let e=0,r=1,i=0,n=0,s=0,o=0,a="",u,c,l,p,f=this._mappings.toArray();for(let h=0,g=f.length;h<g;h++){if(c=f[h],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(h>0){if(!zt.compareByGeneratedPositionsInflated(c,f[h-1]))continue;u+=","}u+=Wh.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(p=this._sources.indexOf(c.source),u+=Wh.encode(p-o),o=p,u+=Wh.encode(c.originalLine-1-n),n=c.originalLine-1,u+=Wh.encode(c.originalColumn-i),i=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=Wh.encode(l-s),s=l)),a+=u}return a}_generateSourcesContent(e,r){return e.map(function(i){if(!this._sourcesContents)return null;r!=null&&(i=zt.relative(r,i));let n=zt.toSetString(i);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)}toJSON(){let e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}};Xl.prototype._version=3;KM.SourceMapGenerator=Xl});var zM=v(ic=>{ic.GREATEST_LOWER_BOUND=1;ic.LEAST_UPPER_BOUND=2;function qS(t,e,r,i,n,s){let o=Math.floor((e-t)/2)+t,a=n(r,i[o],!0);return a===0?o:a>0?e-o>1?qS(o,e,r,i,n,s):s==ic.LEAST_UPPER_BOUND?e<i.length?e:-1:o:o-t>1?qS(t,o,r,i,n,s):s==ic.LEAST_UPPER_BOUND?o:t<0?-1:t}ic.search=function(e,r,i,n){if(r.length===0)return-1;let s=qS(-1,r.length,e,r,i,n||ic.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&i(r[s],r[s-1],!0)===0;)--s;return s}});var VS=v((RSe,WS)=>{"use strict";var Vie=require("fs"),Gie=require("path");WS.exports=function(){return new Promise((e,r)=>{let i=Gie.join(__dirname,"mappings.wasm");Vie.readFile(i,null,(n,s)=>{if(n){r(n);return}e(s.buffer)})})};WS.exports.initialize=t=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")}});var JM=v((MSe,XM)=>{var Kie=VS();function zie(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}var Vh=null;XM.exports=function(){if(Vh)return Vh;let e=[];return Vh=Kie().then(r=>WebAssembly.instantiate(r,{env:{mapping_callback(i,n,s,o,a,u,c,l,p,f){let h=new zie;h.generatedLine=i+1,h.generatedColumn=n,s&&(h.lastGeneratedColumn=o-1),a&&(h.source=u,h.originalLine=c+1,h.originalColumn=l,p&&(h.name=f)),e[e.length-1](h)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(r=>({exports:r.instance.exports,withMappingCallback:(i,n)=>{e.push(i);try{n()}finally{e.pop()}}})).then(null,r=>{throw Vh=null,r}),Vh}});var YM=v(iv=>{var Pe=jh(),Xie=zM(),GS=BS().ArraySet,OSe=kS(),Jie=VS(),Yie=JM(),KS=Symbol("smcInternal"),Bt=class{constructor(e,r){return e==KS?Promise.resolve(this):Qie(e,r)}static initialize(e){Jie.initialize(e["lib/mappings.wasm"])}static fromSourceMap(e,r){return Zie(e,r)}static async with(e,r,i){let n=await new Bt(e,r);try{return await i(n)}finally{n.destroy()}}eachMapping(e,r,i){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(e){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}};Bt.prototype._version=3;Bt.GENERATED_ORDER=1;Bt.ORIGINAL_ORDER=2;Bt.GREATEST_LOWER_BOUND=1;Bt.LEAST_UPPER_BOUND=2;iv.SourceMapConsumer=Bt;var ba=class extends Bt{constructor(e,r){return super(KS).then(i=>{let n=e;typeof e=="string"&&(n=Pe.parseSourceMapInput(e));let s=Pe.getArg(n,"version"),o=Pe.getArg(n,"sources").map(String),a=Pe.getArg(n,"names",[]),u=Pe.getArg(n,"sourceRoot",null),c=Pe.getArg(n,"sourcesContent",null),l=Pe.getArg(n,"mappings"),p=Pe.getArg(n,"file",null);if(s!=i._version)throw new Error("Unsupported version: "+s);return i._sourceLookupCache=new Map,i._names=GS.fromArray(a.map(String),!0),i._sources=GS.fromArray(o,!0),i._absoluteSources=GS.fromArray(i._sources.toArray().map(function(f){return Pe.computeSourceURL(u,f,r)}),!0),i.sourceRoot=u,i.sourcesContent=c,i._mappings=l,i._sourceMapURL=r,i.file=p,i._computedColumnSpans=!1,i._mappingsPtr=0,i._wasm=null,Yie().then(f=>(i._wasm=f,i))})}_findSourceIndex(e){let r=this._sourceLookupCache.get(e);if(typeof r=="number")return r;let i=Pe.computeSourceURL(null,e,this._sourceMapURL);if(this._absoluteSources.has(i)){let s=this._absoluteSources.indexOf(i);return this._sourceLookupCache.set(e,s),s}let n=Pe.computeSourceURL(this.sourceRoot,e,this._sourceMapURL);if(this._absoluteSources.has(n)){let s=this._absoluteSources.indexOf(n);return this._sourceLookupCache.set(e,s),s}return-1}static fromSourceMap(e,r){return new ba(e.toString())}get sources(){return this._absoluteSources.toArray()}_getMappingsPtr(){return this._mappingsPtr===0&&this._parseMappings(),this._mappingsPtr}_parseMappings(){let e=this._mappings,r=e.length,i=this._wasm.exports.allocate_mappings(r),n=new Uint8Array(this._wasm.exports.memory.buffer,i,r);for(let o=0;o<r;o++)n[o]=e.charCodeAt(o);let s=this._wasm.exports.parse_mappings(i);if(!s){let o=this._wasm.exports.get_last_error(),a=`Error parsing mappings (code ${o}): `;switch(o){case 1:a+="the mappings contained a negative line, column, source index, or name index";break;case 2:a+="the mappings contained a number larger than 2**32";break;case 3:a+="reached EOF while in the middle of parsing a VLQ";break;case 4:a+="invalid base 64 character while parsing a VLQ";break;default:a+="unknown error code";break}throw new Error(a)}this._mappingsPtr=s}eachMapping(e,r,i){let n=r||null,s=i||Bt.GENERATED_ORDER;this._wasm.withMappingCallback(o=>{o.source!==null&&(o.source=this._absoluteSources.at(o.source),o.name!==null&&(o.name=this._names.at(o.name))),this._computedColumnSpans&&o.lastGeneratedColumn===null&&(o.lastGeneratedColumn=1/0),e.call(n,o)},()=>{switch(s){case Bt.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case Bt.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(e){let r=Pe.getArg(e,"source"),i=Pe.getArg(e,"line"),n=e.column||0;if(r=this._findSourceIndex(r),r<0)return[];if(i<1)throw new Error("Line numbers must be >= 1");if(n<0)throw new Error("Column numbers must be >= 0");let s=[];return this._wasm.withMappingCallback(o=>{let a=o.lastGeneratedColumn;this._computedColumnSpans&&a===null&&(a=1/0),s.push({line:o.generatedLine,column:o.generatedColumn,lastColumn:a})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),r,i-1,"column"in e,n)}),s}destroy(){this._mappingsPtr!==0&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(e){let r={generatedLine:Pe.getArg(e,"line"),generatedColumn:Pe.getArg(e,"column")};if(r.generatedLine<1)throw new Error("Line numbers must be >= 1");if(r.generatedColumn<0)throw new Error("Column numbers must be >= 0");let i=Pe.getArg(e,"bias",Bt.GREATEST_LOWER_BOUND);i==null&&(i=Bt.GREATEST_LOWER_BOUND);let n;if(this._wasm.withMappingCallback(s=>n=s,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),r.generatedLine-1,r.generatedColumn,i)}),n&&n.generatedLine===r.generatedLine){let s=Pe.getArg(n,"source",null);s!==null&&(s=this._absoluteSources.at(s));let o=Pe.getArg(n,"name",null);return o!==null&&(o=this._names.at(o)),{source:s,line:Pe.getArg(n,"originalLine",null),column:Pe.getArg(n,"originalColumn",null),name:o}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1}sourceContentFor(e,r){if(!this.sourcesContent)return null;let i=this._findSourceIndex(e);if(i>=0)return this.sourcesContent[i];if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')}generatedPositionFor(e){let r=Pe.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};let i={source:r,originalLine:Pe.getArg(e,"line"),originalColumn:Pe.getArg(e,"column")};if(i.originalLine<1)throw new Error("Line numbers must be >= 1");if(i.originalColumn<0)throw new Error("Column numbers must be >= 0");let n=Pe.getArg(e,"bias",Bt.GREATEST_LOWER_BOUND);n==null&&(n=Bt.GREATEST_LOWER_BOUND);let s;if(this._wasm.withMappingCallback(o=>s=o,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),i.source,i.originalLine-1,i.originalColumn,n)}),s&&s.source===i.source){let o=s.lastGeneratedColumn;return this._computedColumnSpans&&o===null&&(o=1/0),{line:Pe.getArg(s,"generatedLine",null),column:Pe.getArg(s,"generatedColumn",null),lastColumn:o}}return{line:null,column:null,lastColumn:null}}};ba.prototype.consumer=Bt;iv.BasicSourceMapConsumer=ba;var rv=class extends Bt{constructor(e,r){return super(KS).then(i=>{let n=e;typeof e=="string"&&(n=Pe.parseSourceMapInput(e));let s=Pe.getArg(n,"version"),o=Pe.getArg(n,"sections");if(s!=i._version)throw new Error("Unsupported version: "+s);let a={line:-1,column:0};return Promise.all(o.map(u=>{if(u.url)throw new Error("Support for url field in sections not implemented.");let c=Pe.getArg(u,"offset"),l=Pe.getArg(c,"line"),p=Pe.getArg(c,"column");if(l<a.line||l===a.line&&p<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=c,new Bt(Pe.getArg(u,"map"),r).then(h=>({generatedOffset:{generatedLine:l+1,generatedColumn:p+1},consumer:h}))})).then(u=>(i._sections=u,i))})}get sources(){let e=[];for(let r=0;r<this._sections.length;r++)for(let i=0;i<this._sections[r].consumer.sources.length;i++)e.push(this._sections[r].consumer.sources[i]);return e}originalPositionFor(e){let r={generatedLine:Pe.getArg(e,"line"),generatedColumn:Pe.getArg(e,"column")},i=Xie.search(r,this._sections,function(s,o){let a=s.generatedLine-o.generatedOffset.generatedLine;return a||s.generatedColumn-o.generatedOffset.generatedColumn}),n=this._sections[i];return n?n.consumer.originalPositionFor({line:r.generatedLine-(n.generatedOffset.generatedLine-1),column:r.generatedColumn-(n.generatedOffset.generatedLine===r.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})}sourceContentFor(e,r){for(let i=0;i<this._sections.length;i++){let s=this._sections[i].consumer.sourceContentFor(e,!0);if(s)return s}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')}_findSectionIndex(e){for(let r=0;r<this._sections.length;r++){let{consumer:i}=this._sections[r];if(i._findSourceIndex(e)!==-1)return r}return-1}generatedPositionFor(e){let r=this._findSectionIndex(Pe.getArg(e,"source")),i=r>=0?this._sections[r]:null,n=r>=0&&r+1<this._sections.length?this._sections[r+1]:null,s=i&&i.consumer.generatedPositionFor(e);if(s&&s.line!==null){let o=i.generatedOffset.generatedLine-1,a=i.generatedOffset.generatedColumn-1;return s.line===1&&(s.column+=a,typeof s.lastColumn=="number"&&(s.lastColumn+=a)),s.lastColumn===1/0&&n&&s.line===n.generatedOffset.generatedLine&&(s.lastColumn=n.generatedOffset.generatedColumn-2),s.line+=o,s}return{line:null,column:null,lastColumn:null}}allGeneratedPositionsFor(e){let r=this._findSectionIndex(Pe.getArg(e,"source")),i=r>=0?this._sections[r]:null,n=r>=0&&r+1<this._sections.length?this._sections[r+1]:null;return i?i.consumer.allGeneratedPositionsFor(e).map(s=>{let o=i.generatedOffset.generatedLine-1,a=i.generatedOffset.generatedColumn-1;return s.line===1&&(s.column+=a,typeof s.lastColumn=="number"&&(s.lastColumn+=a)),s.lastColumn===1/0&&n&&s.line===n.generatedOffset.generatedLine&&(s.lastColumn=n.generatedOffset.generatedColumn-2),s.line+=o,s}):[]}eachMapping(e,r,i){this._sections.forEach((n,s)=>{let o=s+1<this._sections.length?this._sections[s+1]:null,{generatedOffset:a}=n,u=a.generatedLine-1,c=a.generatedColumn-1;n.consumer.eachMapping(function(l){l.generatedLine===1&&(l.generatedColumn+=c,typeof l.lastGeneratedColumn=="number"&&(l.lastGeneratedColumn+=c)),l.lastGeneratedColumn===1/0&&o&&l.generatedLine===o.generatedOffset.generatedLine&&(l.lastGeneratedColumn=o.generatedOffset.generatedColumn-2),l.generatedLine+=u,e.call(this,l)},r,i)})}computeColumnSpans(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.computeColumnSpans()}destroy(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.destroy()}};iv.IndexedSourceMapConsumer=rv;function Qie(t,e){let r=t;typeof t=="string"&&(r=Pe.parseSourceMapInput(t));let i=r.sections!=null?new rv(r,e):new ba(r,e);return Promise.resolve(i)}function Zie(t,e){return ba.fromSourceMap(t,e)}});var ZM=v(QM=>{var ene=jS().SourceMapGenerator,nv=jh(),tne=/(\r?\n)/,rne=10,Jl="$$$isSourceNode$$$",Yl=class{constructor(e,r,i,n,s){this.children=[],this.sourceContents={},this.line=e??null,this.column=r??null,this.source=i??null,this.name=s??null,this[Jl]=!0,n!=null&&this.add(n)}static fromStringWithSourceMap(e,r,i){let n=new Yl,s=e.split(tne),o=0,a=function(){let h=H(),g=H()||"";return h+g;function H(){return o<s.length?s[o++]:void 0}},u=1,c=0,l=null,p;return r.eachMapping(function(h){if(l!==null)if(u<h.generatedLine)f(l,a()),u++,c=0;else{p=s[o]||"";let g=p.substr(0,h.generatedColumn-c);s[o]=p.substr(h.generatedColumn-c),c=h.generatedColumn,f(l,g),l=h;return}for(;u<h.generatedLine;)n.add(a()),u++;c<h.generatedColumn&&(p=s[o]||"",n.add(p.substr(0,h.generatedColumn)),s[o]=p.substr(h.generatedColumn),c=h.generatedColumn),l=h},this),o<s.length&&(l&&f(l,a()),n.add(s.splice(o).join(""))),r.sources.forEach(function(h){let g=r.sourceContentFor(h);g!=null&&(i!=null&&(h=nv.join(i,h)),n.setSourceContent(h,g))}),n;function f(h,g){if(h===null||h.source===void 0)n.add(g);else{let H=i?nv.join(i,h.source):h.source;n.add(new Yl(h.originalLine,h.originalColumn,H,g,h.name))}}}add(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Jl]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}prepend(e){if(Array.isArray(e))for(let r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Jl]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}walk(e){let r;for(let i=0,n=this.children.length;i<n;i++)r=this.children[i],r[Jl]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let r,i,n=this.children.length;if(n>0){for(r=[],i=0;i<n-1;i++)r.push(this.children[i]),r.push(e);r.push(this.children[i]),this.children=r}return this}replaceRight(e,r){let i=this.children[this.children.length-1];return i[Jl]?i.replaceRight(e,r):typeof i=="string"?this.children[this.children.length-1]=i.replace(e,r):this.children.push("".replace(e,r)),this}setSourceContent(e,r){this.sourceContents[nv.toSetString(e)]=r}walkSourceContents(e){for(let i=0,n=this.children.length;i<n;i++)this.children[i][Jl]&&this.children[i].walkSourceContents(e);let r=Object.keys(this.sourceContents);for(let i=0,n=r.length;i<n;i++)e(nv.fromSetString(r[i]),this.sourceContents[r[i]])}toString(){let e="";return this.walk(function(r){e+=r}),e}toStringWithSourceMap(e){let r={code:"",line:1,column:0},i=new ene(e),n=!1,s=null,o=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((s!==l.source||o!==l.line||a!==l.column||u!==l.name)&&i.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),s=l.source,o=l.line,a=l.column,u=l.name,n=!0):n&&(i.addMapping({generated:{line:r.line,column:r.column}}),s=null,n=!1);for(let p=0,f=c.length;p<f;p++)c.charCodeAt(p)===rne?(r.line++,r.column=0,p+1===f?(s=null,n=!1):n&&i.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){i.setSourceContent(c,l)}),{code:r.code,map:i}}};QM.SourceNode=Yl});var ov=v(sv=>{sv.SourceMapGenerator=jS().SourceMapGenerator;sv.SourceMapConsumer=YM().SourceMapConsumer;sv.SourceNode=ZM().SourceNode});var Sv=v(cN=>{(function t(e){"use strict";var r,i,n,s,o,a;function u(C){var L={},q,j;for(q in C)C.hasOwnProperty(q)&&(j=C[q],typeof j=="object"&&j!==null?L[q]=u(j):L[q]=j);return L}function c(C,L){var q,j,F,T;for(j=C.length,F=0;j;)q=j>>>1,T=F+q,L(C[T])?j=q:(F=T+1,j-=q+1);return F}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},n={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},s={},o={},a={},i={Break:s,Skip:o,Remove:a};function l(C,L){this.parent=C,this.key=L}l.prototype.replace=function(L){this.parent[this.key]=L},l.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function p(C,L,q,j){this.node=C,this.path=L,this.wrap=q,this.ref=j}function f(){}f.prototype.path=function(){var L,q,j,F,T,N;function E(M,O){if(Array.isArray(O))for(j=0,F=O.length;j<F;++j)M.push(O[j]);else M.push(O)}if(!this.__current.path)return null;for(T=[],L=2,q=this.__leavelist.length;L<q;++L)N=this.__leavelist[L],E(T,N.path);return E(T,this.__current.path),T},f.prototype.type=function(){var C=this.current();return C.type||this.__current.wrap},f.prototype.parents=function(){var L,q,j;for(j=[],L=1,q=this.__leavelist.length;L<q;++L)j.push(this.__leavelist[L].node);return j},f.prototype.current=function(){return this.__current.node},f.prototype.__execute=function(L,q){var j,F;return F=void 0,j=this.__current,this.__current=q,this.__state=null,L&&(F=L.call(this,q.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=j,F},f.prototype.notify=function(L){this.__state=L},f.prototype.skip=function(){this.notify(o)},f.prototype.break=function(){this.notify(s)},f.prototype.remove=function(){this.notify(a)},f.prototype.__initialize=function(C,L){this.visitor=L,this.root=C,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,L.fallback==="iteration"?this.__fallback=Object.keys:typeof L.fallback=="function"&&(this.__fallback=L.fallback),this.__keys=n,L.keys&&(this.__keys=Object.assign(Object.create(this.__keys),L.keys))};function h(C){return C==null?!1:typeof C=="object"&&typeof C.type=="string"}function g(C,L){return(C===r.ObjectExpression||C===r.ObjectPattern)&&L==="properties"}function H(C,L){for(var q=C.length-1;q>=0;--q)if(C[q].node===L)return!0;return!1}f.prototype.traverse=function(L,q){var j,F,T,N,E,M,O,z,D,P,ee,ie;for(this.__initialize(L,q),ie={},j=this.__worklist,F=this.__leavelist,j.push(new p(L,null,null,null)),F.push(new p(null,null,null,null));j.length;){if(T=j.pop(),T===ie){if(T=F.pop(),M=this.__execute(q.leave,T),this.__state===s||M===s)return;continue}if(T.node){if(M=this.__execute(q.enter,T),this.__state===s||M===s)return;if(j.push(ie),F.push(T),this.__state===o||M===o)continue;if(N=T.node,E=N.type||T.wrap,P=this.__keys[E],!P)if(this.__fallback)P=this.__fallback(N);else throw new Error("Unknown node type "+E+".");for(z=P.length;(z-=1)>=0;)if(O=P[z],ee=N[O],!!ee){if(Array.isArray(ee)){for(D=ee.length;(D-=1)>=0;)if(ee[D]&&!H(F,ee[D])){if(g(E,P[z]))T=new p(ee[D],[O,D],"Property",null);else if(h(ee[D]))T=new p(ee[D],[O,D],null,null);else continue;j.push(T)}}else if(h(ee)){if(H(F,ee))continue;j.push(new p(ee,O,null,null))}}}}},f.prototype.replace=function(L,q){var j,F,T,N,E,M,O,z,D,P,ee,ie,ne;function J(te){var ce,ae,he,dt;if(te.ref.remove()){for(ae=te.ref.key,dt=te.ref.parent,ce=j.length;ce--;)if(he=j[ce],he.ref&&he.ref.parent===dt){if(he.ref.key<ae)break;--he.ref.key}}}for(this.__initialize(L,q),ee={},j=this.__worklist,F=this.__leavelist,ie={root:L},M=new p(L,null,null,new l(ie,"root")),j.push(M),F.push(M);j.length;){if(M=j.pop(),M===ee){if(M=F.pop(),E=this.__execute(q.leave,M),E!==void 0&&E!==s&&E!==o&&E!==a&&M.ref.replace(E),(this.__state===a||E===a)&&J(M),this.__state===s||E===s)return ie.root;continue}if(E=this.__execute(q.enter,M),E!==void 0&&E!==s&&E!==o&&E!==a&&(M.ref.replace(E),M.node=E),(this.__state===a||E===a)&&(J(M),M.node=null),this.__state===s||E===s)return ie.root;if(T=M.node,!!T&&(j.push(ee),F.push(M),!(this.__state===o||E===o))){if(N=T.type||M.wrap,D=this.__keys[N],!D)if(this.__fallback)D=this.__fallback(T);else throw new Error("Unknown node type "+N+".");for(O=D.length;(O-=1)>=0;)if(ne=D[O],P=T[ne],!!P)if(Array.isArray(P)){for(z=P.length;(z-=1)>=0;)if(P[z]){if(g(N,D[O]))M=new p(P[z],[ne,z],"Property",new l(P,z));else if(h(P[z]))M=new p(P[z],[ne,z],null,new l(P,z));else continue;j.push(M)}}else h(P)&&j.push(new p(P,ne,null,new l(T,ne)))}}return ie.root};function b(C,L){var q=new f;return q.traverse(C,L)}function _(C,L){var q=new f;return q.replace(C,L)}function k(C,L){var q;return q=c(L,function(F){return F.range[0]>C.range[0]}),C.extendedRange=[C.range[0],C.range[1]],q!==L.length&&(C.extendedRange[1]=L[q].range[0]),q-=1,q>=0&&(C.extendedRange[0]=L[q].range[1]),C}function U(C,L,q){var j=[],F,T,N,E;if(!C.range)throw new Error("attachComments needs range information");if(!q.length){if(L.length){for(N=0,T=L.length;N<T;N+=1)F=u(L[N]),F.extendedRange=[0,C.range[0]],j.push(F);C.leadingComments=j}return C}for(N=0,T=L.length;N<T;N+=1)j.push(k(u(L[N]),q));return E=0,b(C,{enter:function(M){for(var O;E<j.length&&(O=j[E],!(O.extendedRange[1]>M.range[0]));)O.extendedRange[1]===M.range[0]?(M.leadingComments||(M.leadingComments=[]),M.leadingComments.push(O),j.splice(E,1)):E+=1;if(E===j.length)return i.Break;if(j[E].extendedRange[0]>M.range[1])return i.Skip}}),E=0,b(C,{leave:function(M){for(var O;E<j.length&&(O=j[E],!(M.range[1]<O.extendedRange[0]));)M.range[1]===O.extendedRange[0]?(M.trailingComments||(M.trailingComments=[]),M.trailingComments.push(O),j.splice(E,1)):E+=1;if(E===j.length)return i.Break;if(j[E].extendedRange[0]>M.range[1])return i.Skip}}),C}return e.Syntax=r,e.traverse=b,e.replace=_,e.attachComments=U,e.VisitorKeys=n,e.VisitorOption=i,e.Controller=f,e.cloneEnvironment=function(){return t({})},e})(cN)});var jN=v((xxe,lm)=>{var BN={};BN.__wbindgen_placeholder__=lm.exports;var jn,{TextDecoder:rse}=require("util"),UN=new rse("utf-8",{ignoreBOM:!0,fatal:!0});UN.decode();var qv=null;function CE(){return(qv===null||qv.buffer!==jn.memory.buffer)&&(qv=new Uint8Array(jn.memory.buffer)),qv}function ise(t,e){return UN.decode(CE().subarray(t,t+e))}var xE=0;function FN(t,e){let r=e(t.length*1);return CE().set(t,r/1),xE=t.length,r}var Hp=class{static __wrap(e){let r=Object.create(Hp.prototype);return r.ptr=e,r}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();jn.__wbg_hasher_free(e)}constructor(){var e=jn.hasher_new();return Hp.__wrap(e)}update(e){var r=FN(e,jn.__wbindgen_malloc),i=xE;jn.hasher_update(this.ptr,r,i)}digest(e){try{var r=FN(e,jn.__wbindgen_malloc),i=xE;jn.hasher_digest(this.ptr,r,i)}finally{e.set(CE().subarray(r/1,r/1+i)),jn.__wbindgen_free(r,i*1)}}};lm.exports.Hasher=Hp;lm.exports.__wbindgen_throw=function(t,e){throw new Error(ise(t,e))};var nse=require("path").join(__dirname,"chromehash_bg.wasm"),sse=require("fs").readFileSync(nse),ose=new WebAssembly.Module(sse),ase=new WebAssembly.Instance(ose,BN);jn=ase.exports;lm.exports.__wasm=jn});var zN=v(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.shaHashFile=Ms.hashFile=Ms.shaHash=Ms.hash=void 0;var VN=jN(),GN=require("fs"),qN=require("string_decoder"),KN=require("crypto"),Vv=Buffer.alloc(4*5),use=t=>{let e=new VN.Hasher;return e.update(fse(t)),e.digest(Vv),e.free(),Vv.toString("hex")};Ms.hash=use;var cse=t=>{let e=(0,KN.createHash)("sha256");return e.update(dse(t)),e.digest("hex")};Ms.shaHash=cse;var lse=async(t,e=4096)=>{e%2===1&&e++;let r=Buffer.alloc(e),i=new VN.Hasher,n;try{n=await GN.promises.open(t,"r");let s=await n.read(r,0,r.length,null),o=r.slice(0,s.bytesRead);if(Kv(o))for(i.update(o.slice(2));s.bytesRead===r.length;)s=await n.read(r,0,r.length,null),i.update(r.slice(0,s.bytesRead));else if(zv(o))for(i.update(o.slice(2).swap16());s.bytesRead===r.length;)s=await n.read(r,0,r.length,null),i.update(r.slice(0,s.bytesRead).swap16());else if(Gv(o)){let a=new qN.StringDecoder("utf8");for(i.update(Buffer.from(a.write(o.slice(3)),"utf16le"));s.bytesRead===r.length;)s=await n.read(r,0,r.length,null),i.update(Buffer.from(a.write(r.slice(0,s.bytesRead)),"utf16le"))}else{let a=new qN.StringDecoder("utf8");for(i.update(Buffer.from(a.write(o),"utf16le"));s.bytesRead===r.length;)s=await n.read(r,0,r.length,null),i.update(Buffer.from(a.write(r.slice(0,s.bytesRead)),"utf16le"))}return i.digest(Vv),Vv.toString("hex")}finally{i.free(),n!==void 0&&await n.close()}};Ms.hashFile=lse;var Wv={stream:!0},pse=async(t,e=4096)=>{e%2===1&&e++;let r=Buffer.alloc(e),i=(0,KN.createHash)("sha256"),n;try{n=await GN.promises.open(t,"r");let s=await n.read(r,0,r.length,null),o=r.slice(0,s.bytesRead);if(Kv(o)){let a=new TextDecoder("utf-16le");for(i.update(a.decode(o.slice(2),Wv));s.bytesRead>0;)s=await n.read(r,0,r.length,null),i.update(a.decode(r.slice(0,s.bytesRead),Wv))}else if(zv(o)){let a=new TextDecoder("utf-16be");for(i.update(a.decode(o.slice(2),Wv));s.bytesRead>0;)s=await n.read(r,0,r.length,null),i.update(a.decode(r.slice(0,s.bytesRead),Wv))}else if(Gv(o))for(i.update(o.slice(3));s.bytesRead>0;)s=await n.read(r,0,r.length,null),i.update(r.slice(0,s.bytesRead));else for(i.update(o);s.bytesRead>0;)s=await n.read(r,0,r.length,null),i.update(r.slice(0,s.bytesRead));return i.digest("hex")}finally{await(n==null?void 0:n.close())}};Ms.shaHashFile=pse;var Gv=t=>t.length>=3&&t[0]===239&&t[1]===187&&t[2]===191,Kv=t=>t.length>=2&&t[0]===255&&t[1]===254,zv=t=>t.length>=2&&t[0]===254&&t[1]===255,fse=t=>Gv(t)?WN(t.slice(3)):Kv(t)?t.slice(2):zv(t)?t.slice(2).swap16():WN(t),dse=t=>Gv(t)?t.slice(3):Kv(t)?new TextEncoder().encode(new TextDecoder("utf-16le").decode(t.slice(2))):zv(t)?new TextEncoder().encode(new TextDecoder("utf-16be").decode(t.slice(2))):t,WN=t=>Buffer.from(t.toString("utf8"),"utf16le")});var nb=v(fn=>{"use strict";fn.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;fn.find=(t,e)=>t.nodes.find(r=>r.type===e);fn.exceedsLimit=(t,e,r=1,i)=>i===!1||!fn.isInteger(t)||!fn.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=i;fn.escapeNode=(t,e=0,r)=>{let i=t.nodes[e];i&&(r&&i.type===r||i.type==="open"||i.type==="close")&&i.escaped!==!0&&(i.value="\\"+i.value,i.escaped=!0)};fn.encloseBrace=t=>t.type!=="brace"||t.commas>>0+t.ranges>>0?!1:(t.invalid=!0,!0);fn.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:!(t.commas>>0+t.ranges>>0)||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;fn.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;fn.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);fn.flatten=(...t)=>{let e=[],r=i=>{for(let n=0;n<i.length;n++){let s=i[n];Array.isArray(s)?r(s,e):s!==void 0&&e.push(s)}return e};return r(t),e}});var sb=v((dDe,HF)=>{"use strict";var gF=nb();HF.exports=(t,e={})=>{let r=(i,n={})=>{let s=e.escapeInvalid&&gF.isInvalidBrace(n),o=i.invalid===!0&&e.escapeInvalid===!0,a="";if(i.value)return(s||o)&&gF.isOpenOrClose(i)?"\\"+i.value:i.value;if(i.value)return i.value;if(i.nodes)for(let u of i.nodes)a+=r(u);return a};return r(t)}});var vF=v((hDe,yF)=>{"use strict";yF.exports=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}});var CF=v((mDe,xF)=>{"use strict";var bF=vF(),vc=(t,e,r)=>{if(bF(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(bF(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...r};typeof i.strictZeros=="boolean"&&(i.relaxZeros=i.strictZeros===!1);let n=String(i.relaxZeros),s=String(i.shorthand),o=String(i.capture),a=String(i.wrap),u=t+":"+e+"="+n+s+o+a;if(vc.cache.hasOwnProperty(u))return vc.cache[u].result;let c=Math.min(t,e),l=Math.max(t,e);if(Math.abs(c-l)===1){let H=t+"|"+e;return i.capture?`(${H})`:i.wrap===!1?H:`(?:${H})`}let p=EF(t)||EF(e),f={min:t,max:e,a:c,b:l},h=[],g=[];if(p&&(f.isPadded=p,f.maxLen=String(f.max).length),c<0){let H=l<0?Math.abs(l):1;g=wF(H,Math.abs(c),f,i),c=f.a=0}return l>=0&&(h=wF(c,l,f,i)),f.negatives=g,f.positives=h,f.result=Pse(g,h,i),i.capture===!0?f.result=`(${f.result})`:i.wrap!==!1&&h.length+g.length>1&&(f.result=`(?:${f.result})`),vc.cache[u]=f,f.result};function Pse(t,e,r){let i=kE(t,e,"-",!1,r)||[],n=kE(e,t,"",!1,r)||[],s=kE(t,e,"-?",!0,r)||[];return i.concat(s).concat(n).join("|")}function Lse(t,e){let r=1,i=1,n=AF(t,r),s=new Set([e]);for(;t<=n&&n<=e;)s.add(n),r+=1,n=AF(t,r);for(n=IF(e+1,i)-1;t<n&&n<=e;)s.add(n),i+=1,n=IF(e+1,i)-1;return s=[...s],s.sort(kse),s}function Tse(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let i=$se(t,e),n=i.length,s="",o=0;for(let a=0;a<n;a++){let[u,c]=i[a];u===c?s+=u:u!=="0"||c!=="9"?s+=Rse(u,c,r):o++}return o&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[o],digits:n}}function wF(t,e,r,i){let n=Lse(t,e),s=[],o=t,a;for(let u=0;u<n.length;u++){let c=n[u],l=Tse(String(o),String(c),i),p="";if(!r.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+SF(a.count),o=c+1;continue}r.isPadded&&(p=Mse(c,r,i)),l.string=p+l.pattern+SF(l.count),s.push(l),o=c+1,a=l}return s}function kE(t,e,r,i,n){let s=[];for(let o of t){let{string:a}=o;!i&&!_F(e,"string",a)&&s.push(r+a),i&&_F(e,"string",a)&&s.push(r+a)}return s}function $se(t,e){let r=[];for(let i=0;i<t.length;i++)r.push([t[i],e[i]]);return r}function kse(t,e){return t>e?1:e>t?-1:0}function _F(t,e,r){return t.some(i=>i[e]===r)}function AF(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function IF(t,e){return t-t%Math.pow(10,e)}function SF(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function Rse(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function EF(t){return/^-?(0+)\d/.test(t)}function Mse(t,e,r){if(!e.isPadded)return t;let i=Math.abs(e.maxLen-String(t).length),n=r.relaxZeros!==!1;switch(i){case 0:return"";case 1:return n?"0?":"0";case 2:return n?"0{0,2}":"00";default:return n?`0{0,${i}}`:`0{${i}}`}}vc.cache={};vc.clearCache=()=>vc.cache={};xF.exports=vc});var OE=v((gDe,MF)=>{"use strict";var Ose=require("util"),LF=CF(),DF=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),Nse=t=>e=>t===!0?Number(e):String(e),RE=t=>typeof t=="number"||typeof t=="string"&&t!=="",hm=t=>Number.isInteger(+t),ME=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},Fse=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,Bse=(t,e,r)=>{if(e>0){let i=t[0]==="-"?"-":"";i&&(t=t.slice(1)),t=i+t.padStart(i?e-1:e,"0")}return r===!1?String(t):t},PF=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},Use=(t,e)=>{t.negatives.sort((o,a)=>o<a?-1:o>a?1:0),t.positives.sort((o,a)=>o<a?-1:o>a?1:0);let r=e.capture?"":"?:",i="",n="",s;return t.positives.length&&(i=t.positives.join("|")),t.negatives.length&&(n=`-(${r}${t.negatives.join("|")})`),i&&n?s=`${i}|${n}`:s=i||n,e.wrap?`(${r}${s})`:s},TF=(t,e,r,i)=>{if(r)return LF(t,e,{wrap:!1,...i});let n=String.fromCharCode(t);if(t===e)return n;let s=String.fromCharCode(e);return`[${n}-${s}]`},$F=(t,e,r)=>{if(Array.isArray(t)){let i=r.wrap===!0,n=r.capture?"":"?:";return i?`(${n}${t.join("|")})`:t.join("|")}return LF(t,e,r)},kF=(...t)=>new RangeError("Invalid range arguments: "+Ose.inspect(...t)),RF=(t,e,r)=>{if(r.strictRanges===!0)throw kF([t,e]);return[]},jse=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},qse=(t,e,r=1,i={})=>{let n=Number(t),s=Number(e);if(!Number.isInteger(n)||!Number.isInteger(s)){if(i.strictRanges===!0)throw kF([t,e]);return[]}n===0&&(n=0),s===0&&(s=0);let o=n>s,a=String(t),u=String(e),c=String(r);r=Math.max(Math.abs(r),1);let l=ME(a)||ME(u)||ME(c),p=l?Math.max(a.length,u.length,c.length):0,f=l===!1&&Fse(t,e,i)===!1,h=i.transform||Nse(f);if(i.toRegex&&r===1)return TF(PF(t,p),PF(e,p),!0,i);let g={negatives:[],positives:[]},H=k=>g[k<0?"negatives":"positives"].push(Math.abs(k)),b=[],_=0;for(;o?n>=s:n<=s;)i.toRegex===!0&&r>1?H(n):b.push(Bse(h(n,_),p,f)),n=o?n-r:n+r,_++;return i.toRegex===!0?r>1?Use(g,i):$F(b,null,{wrap:!1,...i}):b},Wse=(t,e,r=1,i={})=>{if(!hm(t)&&t.length>1||!hm(e)&&e.length>1)return RF(t,e,i);let n=i.transform||(f=>String.fromCharCode(f)),s=`${t}`.charCodeAt(0),o=`${e}`.charCodeAt(0),a=s>o,u=Math.min(s,o),c=Math.max(s,o);if(i.toRegex&&r===1)return TF(u,c,!1,i);let l=[],p=0;for(;a?s>=o:s<=o;)l.push(n(s,p)),s=a?s-r:s+r,p++;return i.toRegex===!0?$F(l,null,{wrap:!1,options:i}):l},ob=(t,e,r,i={})=>{if(e==null&&RE(t))return[t];if(!RE(t)||!RE(e))return RF(t,e,i);if(typeof r=="function")return ob(t,e,1,{transform:r});if(DF(r))return ob(t,e,0,r);let n={...i};return n.capture===!0&&(n.wrap=!0),r=r||n.step||1,hm(r)?hm(t)&&hm(e)?qse(t,e,r,n):Wse(t,e,Math.max(Math.abs(r),1),n):r!=null&&!DF(r)?jse(r,n):ob(t,e,1,r)};MF.exports=ob});var FF=v((HDe,NF)=>{"use strict";var Vse=OE(),OF=nb(),Gse=(t,e={})=>{let r=(i,n={})=>{let s=OF.isInvalidBrace(n),o=i.invalid===!0&&e.escapeInvalid===!0,a=s===!0||o===!0,u=e.escapeInvalid===!0?"\\":"",c="";if(i.isOpen===!0||i.isClose===!0)return u+i.value;if(i.type==="open")return a?u+i.value:"(";if(i.type==="close")return a?u+i.value:")";if(i.type==="comma")return i.prev.type==="comma"?"":a?i.value:"|";if(i.value)return i.value;if(i.nodes&&i.ranges>0){let l=OF.reduce(i.nodes),p=Vse(...l,{...e,wrap:!1,toRegex:!0});if(p.length!==0)return l.length>1&&p.length>1?`(${p})`:p}if(i.nodes)for(let l of i.nodes)c+=r(l,i);return c};return r(t)};NF.exports=Gse});var jF=v((yDe,UF)=>{"use strict";var Kse=OE(),BF=sb(),Sp=nb(),bc=(t="",e="",r=!1)=>{let i=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Sp.flatten(e).map(n=>`{${n}}`):e;for(let n of t)if(Array.isArray(n))for(let s of n)i.push(bc(s,e,r));else for(let s of e)r===!0&&typeof s=="string"&&(s=`{${s}}`),i.push(Array.isArray(s)?bc(n,s,r):n+s);return Sp.flatten(i)},zse=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,i=(n,s={})=>{n.queue=[];let o=s,a=s.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(n.invalid||n.dollar){a.push(bc(a.pop(),BF(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){a.push(bc(a.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let p=Sp.reduce(n.nodes);if(Sp.exceedsLimit(...p,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=Kse(...p,e);f.length===0&&(f=BF(n,e)),a.push(bc(a.pop(),f)),n.nodes=[];return}let u=Sp.encloseBrace(n),c=n.queue,l=n;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,c=l.queue;for(let p=0;p<n.nodes.length;p++){let f=n.nodes[p];if(f.type==="comma"&&n.type==="brace"){p===1&&c.push(""),c.push("");continue}if(f.type==="close"){a.push(bc(a.pop(),c,u));continue}if(f.value&&f.type!=="open"){c.push(bc(c.pop(),f.value));continue}f.nodes&&i(f,n)}return c};return Sp.flatten(i(t))};UF.exports=zse});var WF=v((vDe,qF)=>{"use strict";qF.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var XF=v((bDe,zF)=>{"use strict";var Xse=sb(),{MAX_LENGTH:VF,CHAR_BACKSLASH:NE,CHAR_BACKTICK:Jse,CHAR_COMMA:Yse,CHAR_DOT:Qse,CHAR_LEFT_PARENTHESES:Zse,CHAR_RIGHT_PARENTHESES:eoe,CHAR_LEFT_CURLY_BRACE:toe,CHAR_RIGHT_CURLY_BRACE:roe,CHAR_LEFT_SQUARE_BRACKET:GF,CHAR_RIGHT_SQUARE_BRACKET:KF,CHAR_DOUBLE_QUOTE:ioe,CHAR_SINGLE_QUOTE:noe,CHAR_NO_BREAK_SPACE:soe,CHAR_ZERO_WIDTH_NOBREAK_SPACE:ooe}=WF(),aoe=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},i=typeof r.maxLength=="number"?Math.min(VF,r.maxLength):VF;if(t.length>i)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${i})`);let n={type:"root",input:t,nodes:[]},s=[n],o=n,a=n,u=0,c=t.length,l=0,p=0,f,h={},g=()=>t[l++],H=b=>{if(b.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&b.type==="text"){a.value+=b.value;return}return o.nodes.push(b),b.parent=o,b.prev=a,a=b,b};for(H({type:"bos"});l<c;)if(o=s[s.length-1],f=g(),!(f===ooe||f===soe)){if(f===NE){H({type:"text",value:(e.keepEscaping?f:"")+g()});continue}if(f===KF){H({type:"text",value:"\\"+f});continue}if(f===GF){u++;let b=!0,_;for(;l<c&&(_=g());){if(f+=_,_===GF){u++;continue}if(_===NE){f+=g();continue}if(_===KF&&(u--,u===0))break}H({type:"text",value:f});continue}if(f===Zse){o=H({type:"paren",nodes:[]}),s.push(o),H({type:"text",value:f});continue}if(f===eoe){if(o.type!=="paren"){H({type:"text",value:f});continue}o=s.pop(),H({type:"text",value:f}),o=s[s.length-1];continue}if(f===ioe||f===noe||f===Jse){let b=f,_;for(e.keepQuotes!==!0&&(f="");l<c&&(_=g());){if(_===NE){f+=_+g();continue}if(_===b){e.keepQuotes===!0&&(f+=_);break}f+=_}H({type:"text",value:f});continue}if(f===toe){p++;let _={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:p,commas:0,ranges:0,nodes:[]};o=H(_),s.push(o),H({type:"open",value:f});continue}if(f===roe){if(o.type!=="brace"){H({type:"text",value:f});continue}let b="close";o=s.pop(),o.close=!0,H({type:b,value:f}),p--,o=s[s.length-1];continue}if(f===Yse&&p>0){if(o.ranges>0){o.ranges=0;let b=o.nodes.shift();o.nodes=[b,{type:"text",value:Xse(o)}]}H({type:"comma",value:f}),o.commas++;continue}if(f===Qse&&p>0&&o.commas===0){let b=o.nodes;if(p===0||b.length===0){H({type:"text",value:f});continue}if(a.type==="dot"){if(o.range=[],a.value+=f,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){b.pop();let _=b[b.length-1];_.value+=a.value+f,a=_,o.ranges--;continue}H({type:"dot",value:f});continue}H({type:"text",value:f})}do if(o=s.pop(),o.type!=="root"){o.nodes.forEach(k=>{k.nodes||(k.type==="open"&&(k.isOpen=!0),k.type==="close"&&(k.isClose=!0),k.nodes||(k.type="text"),k.invalid=!0)});let b=s[s.length-1],_=b.nodes.indexOf(o);b.nodes.splice(_,1,...o.nodes)}while(s.length>0);return H({type:"eos"}),n};zF.exports=aoe});var QF=v((wDe,YF)=>{"use strict";var JF=sb(),uoe=FF(),coe=jF(),loe=XF(),Ni=(t,e={})=>{let r=[];if(Array.isArray(t))for(let i of t){let n=Ni.create(i,e);Array.isArray(n)?r.push(...n):r.push(n)}else r=[].concat(Ni.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};Ni.parse=(t,e={})=>loe(t,e);Ni.stringify=(t,e={})=>JF(typeof t=="string"?Ni.parse(t,e):t,e);Ni.compile=(t,e={})=>(typeof t=="string"&&(t=Ni.parse(t,e)),uoe(t,e));Ni.expand=(t,e={})=>{typeof t=="string"&&(t=Ni.parse(t,e));let r=coe(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};Ni.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Ni.compile(t,e):Ni.expand(t,e);YF.exports=Ni});var mm=v((_De,iB)=>{"use strict";var poe=require("path"),Os="\\\\/",ZF=`[^${Os}]`,xo="\\.",foe="\\+",doe="\\?",ab="\\/",hoe="(?=.)",eB="[^/]",FE=`(?:${ab}|$)`,tB=`(?:^|${ab})`,BE=`${xo}{1,2}${FE}`,moe=`(?!${xo})`,goe=`(?!${tB}${BE})`,Hoe=`(?!${xo}{0,1}${FE})`,yoe=`(?!${BE})`,voe=`[^.${ab}]`,boe=`${eB}*?`,rB={DOT_LITERAL:xo,PLUS_LITERAL:foe,QMARK_LITERAL:doe,SLASH_LITERAL:ab,ONE_CHAR:hoe,QMARK:eB,END_ANCHOR:FE,DOTS_SLASH:BE,NO_DOT:moe,NO_DOTS:goe,NO_DOT_SLASH:Hoe,NO_DOTS_SLASH:yoe,QMARK_NO_DOT:voe,STAR:boe,START_ANCHOR:tB},woe={...rB,SLASH_LITERAL:`[${Os}]`,QMARK:ZF,STAR:`${ZF}*?`,DOTS_SLASH:`${xo}{1,2}(?:[${Os}]|$)`,NO_DOT:`(?!${xo})`,NO_DOTS:`(?!(?:^|[${Os}])${xo}{1,2}(?:[${Os}]|$))`,NO_DOT_SLASH:`(?!${xo}{0,1}(?:[${Os}]|$))`,NO_DOTS_SLASH:`(?!${xo}{1,2}(?:[${Os}]|$))`,QMARK_NO_DOT:`[^.${Os}]`,START_ANCHOR:`(?:^|[${Os}])`,END_ANCHOR:`(?:[${Os}]|$)`},_oe={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};iB.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:_oe,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:poe.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?woe:rB}}});var gm=v(wi=>{"use strict";var Aoe=require("path"),Ioe=process.platform==="win32",{REGEX_BACKSLASH:Soe,REGEX_REMOVE_BACKSLASH:Eoe,REGEX_SPECIAL_CHARS:xoe,REGEX_SPECIAL_CHARS_GLOBAL:Coe}=mm();wi.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);wi.hasRegexChars=t=>xoe.test(t);wi.isRegexChar=t=>t.length===1&&wi.hasRegexChars(t);wi.escapeRegex=t=>t.replace(Coe,"\\$1");wi.toPosixSlashes=t=>t.replace(Soe,"/");wi.removeBackslashes=t=>t.replace(Eoe,e=>e==="\\"?"":e);wi.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};wi.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:Ioe===!0||Aoe.sep==="\\";wi.escapeLast=(t,e,r)=>{let i=t.lastIndexOf(e,r);return i===-1?t:t[i-1]==="\\"?wi.escapeLast(t,e,i-1):`${t.slice(0,i)}\\${t.slice(i)}`};wi.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};wi.wrapOutput=(t,e={},r={})=>{let i=r.contains?"":"^",n=r.contains?"":"$",s=`${i}(?:${t})${n}`;return e.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var pB=v((IDe,lB)=>{"use strict";var nB=gm(),{CHAR_ASTERISK:UE,CHAR_AT:Doe,CHAR_BACKWARD_SLASH:Hm,CHAR_COMMA:Poe,CHAR_DOT:jE,CHAR_EXCLAMATION_MARK:qE,CHAR_FORWARD_SLASH:cB,CHAR_LEFT_CURLY_BRACE:WE,CHAR_LEFT_PARENTHESES:VE,CHAR_LEFT_SQUARE_BRACKET:Loe,CHAR_PLUS:Toe,CHAR_QUESTION_MARK:sB,CHAR_RIGHT_CURLY_BRACE:$oe,CHAR_RIGHT_PARENTHESES:oB,CHAR_RIGHT_SQUARE_BRACKET:koe}=mm(),aB=t=>t===cB||t===Hm,uB=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},Roe=(t,e)=>{let r=e||{},i=t.length-1,n=r.parts===!0||r.scanToEnd===!0,s=[],o=[],a=[],u=t,c=-1,l=0,p=0,f=!1,h=!1,g=!1,H=!1,b=!1,_=!1,k=!1,U=!1,C=!1,L=!1,q=0,j,F,T={value:"",depth:0,isGlob:!1},N=()=>c>=i,E=()=>u.charCodeAt(c+1),M=()=>(j=F,u.charCodeAt(++c));for(;c<i;){F=M();let ee;if(F===Hm){k=T.backslashes=!0,F=M(),F===WE&&(_=!0);continue}if(_===!0||F===WE){for(q++;N()!==!0&&(F=M());){if(F===Hm){k=T.backslashes=!0,M();continue}if(F===WE){q++;continue}if(_!==!0&&F===jE&&(F=M())===jE){if(f=T.isBrace=!0,g=T.isGlob=!0,L=!0,n===!0)continue;break}if(_!==!0&&F===Poe){if(f=T.isBrace=!0,g=T.isGlob=!0,L=!0,n===!0)continue;break}if(F===$oe&&(q--,q===0)){_=!1,f=T.isBrace=!0,L=!0;break}}if(n===!0)continue;break}if(F===cB){if(s.push(c),o.push(T),T={value:"",depth:0,isGlob:!1},L===!0)continue;if(j===jE&&c===l+1){l+=2;continue}p=c+1;continue}if(r.noext!==!0&&(F===Toe||F===Doe||F===UE||F===sB||F===qE)===!0&&E()===VE){if(g=T.isGlob=!0,H=T.isExtglob=!0,L=!0,F===qE&&c===l&&(C=!0),n===!0){for(;N()!==!0&&(F=M());){if(F===Hm){k=T.backslashes=!0,F=M();continue}if(F===oB){g=T.isGlob=!0,L=!0;break}}continue}break}if(F===UE){if(j===UE&&(b=T.isGlobstar=!0),g=T.isGlob=!0,L=!0,n===!0)continue;break}if(F===sB){if(g=T.isGlob=!0,L=!0,n===!0)continue;break}if(F===Loe){for(;N()!==!0&&(ee=M());){if(ee===Hm){k=T.backslashes=!0,M();continue}if(ee===koe){h=T.isBracket=!0,g=T.isGlob=!0,L=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&F===qE&&c===l){U=T.negated=!0,l++;continue}if(r.noparen!==!0&&F===VE){if(g=T.isGlob=!0,n===!0){for(;N()!==!0&&(F=M());){if(F===VE){k=T.backslashes=!0,F=M();continue}if(F===oB){L=!0;break}}continue}break}if(g===!0){if(L=!0,n===!0)continue;break}}r.noext===!0&&(H=!1,g=!1);let O=u,z="",D="";l>0&&(z=u.slice(0,l),u=u.slice(l),p-=l),O&&g===!0&&p>0?(O=u.slice(0,p),D=u.slice(p)):g===!0?(O="",D=u):O=u,O&&O!==""&&O!=="/"&&O!==u&&aB(O.charCodeAt(O.length-1))&&(O=O.slice(0,-1)),r.unescape===!0&&(D&&(D=nB.removeBackslashes(D)),O&&k===!0&&(O=nB.removeBackslashes(O)));let P={prefix:z,input:t,start:l,base:O,glob:D,isBrace:f,isBracket:h,isGlob:g,isExtglob:H,isGlobstar:b,negated:U,negatedExtglob:C};if(r.tokens===!0&&(P.maxDepth=0,aB(F)||o.push(T),P.tokens=o),r.parts===!0||r.tokens===!0){let ee;for(let ie=0;ie<s.length;ie++){let ne=ee?ee+1:l,J=s[ie],te=t.slice(ne,J);r.tokens&&(ie===0&&l!==0?(o[ie].isPrefix=!0,o[ie].value=z):o[ie].value=te,uB(o[ie]),P.maxDepth+=o[ie].depth),(ie!==0||te!=="")&&a.push(te),ee=J}if(ee&&ee+1<t.length){let ie=t.slice(ee+1);a.push(ie),r.tokens&&(o[o.length-1].value=ie,uB(o[o.length-1]),P.maxDepth+=o[o.length-1].depth)}P.slashes=s,P.parts=a}return P};lB.exports=Roe});var hB=v((SDe,dB)=>{"use strict";var ub=mm(),Fi=gm(),{MAX_LENGTH:cb,POSIX_REGEX_SOURCE:Moe,REGEX_NON_SPECIAL_CHARS:Ooe,REGEX_SPECIAL_CHARS_BACKREF:Noe,REPLACEMENTS:fB}=ub,Foe=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(n=>Fi.escapeRegex(n)).join("..")}return r},Ep=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,GE=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=fB[t]||t;let r={...e},i=typeof r.maxLength=="number"?Math.min(cb,r.maxLength):cb,n=t.length;if(n>i)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${i}`);let s={type:"bos",value:"",output:r.prepend||""},o=[s],a=r.capture?"":"?:",u=Fi.isWindows(e),c=ub.globChars(u),l=ub.extglobChars(c),{DOT_LITERAL:p,PLUS_LITERAL:f,SLASH_LITERAL:h,ONE_CHAR:g,DOTS_SLASH:H,NO_DOT:b,NO_DOT_SLASH:_,NO_DOTS_SLASH:k,QMARK:U,QMARK_NO_DOT:C,STAR:L,START_ANCHOR:q}=c,j=Z=>`(${a}(?:(?!${q}${Z.dot?H:p}).)*?)`,F=r.dot?"":b,T=r.dot?U:C,N=r.bash===!0?j(r):L;r.capture&&(N=`(${N})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let E={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};t=Fi.removePrefix(t,E),n=t.length;let M=[],O=[],z=[],D=s,P,ee=()=>E.index===n-1,ie=E.peek=(Z=1)=>t[E.index+Z],ne=E.advance=()=>t[++E.index]||"",J=()=>t.slice(E.index+1),te=(Z="",Ae=0)=>{E.consumed+=Z,E.index+=Ae},ce=Z=>{E.output+=Z.output!=null?Z.output:Z.value,te(Z.value)},ae=()=>{let Z=1;for(;ie()==="!"&&(ie(2)!=="("||ie(3)==="?");)ne(),E.start++,Z++;return Z%2===0?!1:(E.negated=!0,E.start++,!0)},he=Z=>{E[Z]++,z.push(Z)},dt=Z=>{E[Z]--,z.pop()},ge=Z=>{if(D.type==="globstar"){let Ae=E.braces>0&&(Z.type==="comma"||Z.type==="brace"),Q=Z.extglob===!0||M.length&&(Z.type==="pipe"||Z.type==="paren");Z.type!=="slash"&&Z.type!=="paren"&&!Ae&&!Q&&(E.output=E.output.slice(0,-D.output.length),D.type="star",D.value="*",D.output=N,E.output+=D.output)}if(M.length&&Z.type!=="paren"&&(M[M.length-1].inner+=Z.value),(Z.value||Z.output)&&ce(Z),D&&D.type==="text"&&Z.type==="text"){D.value+=Z.value,D.output=(D.output||"")+Z.value;return}Z.prev=D,o.push(Z),D=Z},Vt=(Z,Ae)=>{let Q={...l[Ae],conditions:1,inner:""};Q.prev=D,Q.parens=E.parens,Q.output=E.output;let be=(r.capture?"(":"")+Q.open;he("parens"),ge({type:Z,value:Ae,output:E.output?"":g}),ge({type:"paren",extglob:!0,value:ne(),output:be}),M.push(Q)},Br=Z=>{let Ae=Z.close+(r.capture?")":""),Q;if(Z.type==="negate"){let be=N;if(Z.inner&&Z.inner.length>1&&Z.inner.includes("/")&&(be=j(r)),(be!==N||ee()||/^\)+$/.test(J()))&&(Ae=Z.close=`)$))${be}`),Z.inner.includes("*")&&(Q=J())&&/^\.[^\\/.]+$/.test(Q)){let ze=GE(Q,{...e,fastpaths:!1}).output;Ae=Z.close=`)${ze})${be})`}Z.prev.type==="bos"&&(E.negatedExtglob=!0)}ge({type:"paren",extglob:!0,value:P,output:Ae}),dt("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let Z=!1,Ae=t.replace(Noe,(Q,be,ze,_t,Ct,pa)=>_t==="\\"?(Z=!0,Q):_t==="?"?be?be+_t+(Ct?U.repeat(Ct.length):""):pa===0?T+(Ct?U.repeat(Ct.length):""):U.repeat(ze.length):_t==="."?p.repeat(ze.length):_t==="*"?be?be+_t+(Ct?N:""):N:be?Q:`\\${Q}`);return Z===!0&&(r.unescape===!0?Ae=Ae.replace(/\\/g,""):Ae=Ae.replace(/\\+/g,Q=>Q.length%2===0?"\\\\":Q?"\\":"")),Ae===t&&r.contains===!0?(E.output=t,E):(E.output=Fi.wrapOutput(Ae,E,e),E)}for(;!ee();){if(P=ne(),P==="\0")continue;if(P==="\\"){let Q=ie();if(Q==="/"&&r.bash!==!0||Q==="."||Q===";")continue;if(!Q){P+="\\",ge({type:"text",value:P});continue}let be=/^\\+/.exec(J()),ze=0;if(be&&be[0].length>2&&(ze=be[0].length,E.index+=ze,ze%2!==0&&(P+="\\")),r.unescape===!0?P=ne():P+=ne(),E.brackets===0){ge({type:"text",value:P});continue}}if(E.brackets>0&&(P!=="]"||D.value==="["||D.value==="[^")){if(r.posix!==!1&&P===":"){let Q=D.value.slice(1);if(Q.includes("[")&&(D.posix=!0,Q.includes(":"))){let be=D.value.lastIndexOf("["),ze=D.value.slice(0,be),_t=D.value.slice(be+2),Ct=Moe[_t];if(Ct){D.value=ze+Ct,E.backtrack=!0,ne(),!s.output&&o.indexOf(D)===1&&(s.output=g);continue}}}(P==="["&&ie()!==":"||P==="-"&&ie()==="]")&&(P=`\\${P}`),P==="]"&&(D.value==="["||D.value==="[^")&&(P=`\\${P}`),r.posix===!0&&P==="!"&&D.value==="["&&(P="^"),D.value+=P,ce({value:P});continue}if(E.quotes===1&&P!=='"'){P=Fi.escapeRegex(P),D.value+=P,ce({value:P});continue}if(P==='"'){E.quotes=E.quotes===1?0:1,r.keepQuotes===!0&&ge({type:"text",value:P});continue}if(P==="("){he("parens"),ge({type:"paren",value:P});continue}if(P===")"){if(E.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Ep("opening","("));let Q=M[M.length-1];if(Q&&E.parens===Q.parens+1){Br(M.pop());continue}ge({type:"paren",value:P,output:E.parens?")":"\\)"}),dt("parens");continue}if(P==="["){if(r.nobracket===!0||!J().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Ep("closing","]"));P=`\\${P}`}else he("brackets");ge({type:"bracket",value:P});continue}if(P==="]"){if(r.nobracket===!0||D&&D.type==="bracket"&&D.value.length===1){ge({type:"text",value:P,output:`\\${P}`});continue}if(E.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Ep("opening","["));ge({type:"text",value:P,output:`\\${P}`});continue}dt("brackets");let Q=D.value.slice(1);if(D.posix!==!0&&Q[0]==="^"&&!Q.includes("/")&&(P=`/${P}`),D.value+=P,ce({value:P}),r.literalBrackets===!1||Fi.hasRegexChars(Q))continue;let be=Fi.escapeRegex(D.value);if(E.output=E.output.slice(0,-D.value.length),r.literalBrackets===!0){E.output+=be,D.value=be;continue}D.value=`(${a}${be}|${D.value})`,E.output+=D.value;continue}if(P==="{"&&r.nobrace!==!0){he("braces");let Q={type:"brace",value:P,output:"(",outputIndex:E.output.length,tokensIndex:E.tokens.length};O.push(Q),ge(Q);continue}if(P==="}"){let Q=O[O.length-1];if(r.nobrace===!0||!Q){ge({type:"text",value:P,output:P});continue}let be=")";if(Q.dots===!0){let ze=o.slice(),_t=[];for(let Ct=ze.length-1;Ct>=0&&(o.pop(),ze[Ct].type!=="brace");Ct--)ze[Ct].type!=="dots"&&_t.unshift(ze[Ct].value);be=Foe(_t,r),E.backtrack=!0}if(Q.comma!==!0&&Q.dots!==!0){let ze=E.output.slice(0,Q.outputIndex),_t=E.tokens.slice(Q.tokensIndex);Q.value=Q.output="\\{",P=be="\\}",E.output=ze;for(let Ct of _t)E.output+=Ct.output||Ct.value}ge({type:"brace",value:P,output:be}),dt("braces"),O.pop();continue}if(P==="|"){M.length>0&&M[M.length-1].conditions++,ge({type:"text",value:P});continue}if(P===","){let Q=P,be=O[O.length-1];be&&z[z.length-1]==="braces"&&(be.comma=!0,Q="|"),ge({type:"comma",value:P,output:Q});continue}if(P==="/"){if(D.type==="dot"&&E.index===E.start+1){E.start=E.index+1,E.consumed="",E.output="",o.pop(),D=s;continue}ge({type:"slash",value:P,output:h});continue}if(P==="."){if(E.braces>0&&D.type==="dot"){D.value==="."&&(D.output=p);let Q=O[O.length-1];D.type="dots",D.output+=P,D.value+=P,Q.dots=!0;continue}if(E.braces+E.parens===0&&D.type!=="bos"&&D.type!=="slash"){ge({type:"text",value:P,output:p});continue}ge({type:"dot",value:P,output:p});continue}if(P==="?"){if(!(D&&D.value==="(")&&r.noextglob!==!0&&ie()==="("&&ie(2)!=="?"){Vt("qmark",P);continue}if(D&&D.type==="paren"){let be=ie(),ze=P;if(be==="<"&&!Fi.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(D.value==="("&&!/[!=<:]/.test(be)||be==="<"&&!/<([!=]|\w+>)/.test(J()))&&(ze=`\\${P}`),ge({type:"text",value:P,output:ze});continue}if(r.dot!==!0&&(D.type==="slash"||D.type==="bos")){ge({type:"qmark",value:P,output:C});continue}ge({type:"qmark",value:P,output:U});continue}if(P==="!"){if(r.noextglob!==!0&&ie()==="("&&(ie(2)!=="?"||!/[!=<:]/.test(ie(3)))){Vt("negate",P);continue}if(r.nonegate!==!0&&E.index===0){ae();continue}}if(P==="+"){if(r.noextglob!==!0&&ie()==="("&&ie(2)!=="?"){Vt("plus",P);continue}if(D&&D.value==="("||r.regex===!1){ge({type:"plus",value:P,output:f});continue}if(D&&(D.type==="bracket"||D.type==="paren"||D.type==="brace")||E.parens>0){ge({type:"plus",value:P});continue}ge({type:"plus",value:f});continue}if(P==="@"){if(r.noextglob!==!0&&ie()==="("&&ie(2)!=="?"){ge({type:"at",extglob:!0,value:P,output:""});continue}ge({type:"text",value:P});continue}if(P!=="*"){(P==="$"||P==="^")&&(P=`\\${P}`);let Q=Ooe.exec(J());Q&&(P+=Q[0],E.index+=Q[0].length),ge({type:"text",value:P});continue}if(D&&(D.type==="globstar"||D.star===!0)){D.type="star",D.star=!0,D.value+=P,D.output=N,E.backtrack=!0,E.globstar=!0,te(P);continue}let Z=J();if(r.noextglob!==!0&&/^\([^?]/.test(Z)){Vt("star",P);continue}if(D.type==="star"){if(r.noglobstar===!0){te(P);continue}let Q=D.prev,be=Q.prev,ze=Q.type==="slash"||Q.type==="bos",_t=be&&(be.type==="star"||be.type==="globstar");if(r.bash===!0&&(!ze||Z[0]&&Z[0]!=="/")){ge({type:"star",value:P,output:""});continue}let Ct=E.braces>0&&(Q.type==="comma"||Q.type==="brace"),pa=M.length&&(Q.type==="pipe"||Q.type==="paren");if(!ze&&Q.type!=="paren"&&!Ct&&!pa){ge({type:"star",value:P,output:""});continue}for(;Z.slice(0,3)==="/**";){let fa=t[E.index+4];if(fa&&fa!=="/")break;Z=Z.slice(3),te("/**",3)}if(Q.type==="bos"&&ee()){D.type="globstar",D.value+=P,D.output=j(r),E.output=D.output,E.globstar=!0,te(P);continue}if(Q.type==="slash"&&Q.prev.type!=="bos"&&!_t&&ee()){E.output=E.output.slice(0,-(Q.output+D.output).length),Q.output=`(?:${Q.output}`,D.type="globstar",D.output=j(r)+(r.strictSlashes?")":"|$)"),D.value+=P,E.globstar=!0,E.output+=Q.output+D.output,te(P);continue}if(Q.type==="slash"&&Q.prev.type!=="bos"&&Z[0]==="/"){let fa=Z[1]!==void 0?"|$":"";E.output=E.output.slice(0,-(Q.output+D.output).length),Q.output=`(?:${Q.output}`,D.type="globstar",D.output=`${j(r)}${h}|${h}${fa})`,D.value+=P,E.output+=Q.output+D.output,E.globstar=!0,te(P+ne()),ge({type:"slash",value:"/",output:""});continue}if(Q.type==="bos"&&Z[0]==="/"){D.type="globstar",D.value+=P,D.output=`(?:^|${h}|${j(r)}${h})`,E.output=D.output,E.globstar=!0,te(P+ne()),ge({type:"slash",value:"/",output:""});continue}E.output=E.output.slice(0,-D.output.length),D.type="globstar",D.output=j(r),D.value+=P,E.output+=D.output,E.globstar=!0,te(P);continue}let Ae={type:"star",value:P,output:N};if(r.bash===!0){Ae.output=".*?",(D.type==="bos"||D.type==="slash")&&(Ae.output=F+Ae.output),ge(Ae);continue}if(D&&(D.type==="bracket"||D.type==="paren")&&r.regex===!0){Ae.output=P,ge(Ae);continue}(E.index===E.start||D.type==="slash"||D.type==="dot")&&(D.type==="dot"?(E.output+=_,D.output+=_):r.dot===!0?(E.output+=k,D.output+=k):(E.output+=F,D.output+=F),ie()!=="*"&&(E.output+=g,D.output+=g)),ge(Ae)}for(;E.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ep("closing","]"));E.output=Fi.escapeLast(E.output,"["),dt("brackets")}for(;E.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ep("closing",")"));E.output=Fi.escapeLast(E.output,"("),dt("parens")}for(;E.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ep("closing","}"));E.output=Fi.escapeLast(E.output,"{"),dt("braces")}if(r.strictSlashes!==!0&&(D.type==="star"||D.type==="bracket")&&ge({type:"maybe_slash",value:"",output:`${h}?`}),E.backtrack===!0){E.output="";for(let Z of E.tokens)E.output+=Z.output!=null?Z.output:Z.value,Z.suffix&&(E.output+=Z.suffix)}return E};GE.fastpaths=(t,e)=>{let r={...e},i=typeof r.maxLength=="number"?Math.min(cb,r.maxLength):cb,n=t.length;if(n>i)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${i}`);t=fB[t]||t;let s=Fi.isWindows(e),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:l,NO_DOTS:p,NO_DOTS_SLASH:f,STAR:h,START_ANCHOR:g}=ub.globChars(s),H=r.dot?p:l,b=r.dot?f:l,_=r.capture?"":"?:",k={negated:!1,prefix:""},U=r.bash===!0?".*?":h;r.capture&&(U=`(${U})`);let C=F=>F.noglobstar===!0?U:`(${_}(?:(?!${g}${F.dot?c:o}).)*?)`,L=F=>{switch(F){case"*":return`${H}${u}${U}`;case".*":return`${o}${u}${U}`;case"*.*":return`${H}${U}${o}${u}${U}`;case"*/*":return`${H}${U}${a}${u}${b}${U}`;case"**":return H+C(r);case"**/*":return`(?:${H}${C(r)}${a})?${b}${u}${U}`;case"**/*.*":return`(?:${H}${C(r)}${a})?${b}${U}${o}${u}${U}`;case"**/.*":return`(?:${H}${C(r)}${a})?${o}${u}${U}`;default:{let T=/^(.*?)\.(\w+)$/.exec(F);if(!T)return;let N=L(T[1]);return N?N+o+T[2]:void 0}}},q=Fi.removePrefix(t,k),j=L(q);return j&&r.strictSlashes!==!0&&(j+=`${a}?`),j};dB.exports=GE});var gB=v((EDe,mB)=>{"use strict";var Boe=require("path"),Uoe=pB(),KE=hB(),zE=gm(),joe=mm(),qoe=t=>t&&typeof t=="object"&&!Array.isArray(t),jt=(t,e,r=!1)=>{if(Array.isArray(t)){let l=t.map(f=>jt(f,e,r));return f=>{for(let h of l){let g=h(f);if(g)return g}return!1}}let i=qoe(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!i)throw new TypeError("Expected pattern to be a non-empty string");let n=e||{},s=zE.isWindows(e),o=i?jt.compileRe(t,e):jt.makeRe(t,e,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(n.ignore){let l={...e,ignore:null,onMatch:null,onResult:null};u=jt(n.ignore,l,r)}let c=(l,p=!1)=>{let{isMatch:f,match:h,output:g}=jt.test(l,o,e,{glob:t,posix:s}),H={glob:t,state:a,regex:o,posix:s,input:l,output:g,match:h,isMatch:f};return typeof n.onResult=="function"&&n.onResult(H),f===!1?(H.isMatch=!1,p?H:!1):u(l)?(typeof n.onIgnore=="function"&&n.onIgnore(H),H.isMatch=!1,p?H:!1):(typeof n.onMatch=="function"&&n.onMatch(H),p?H:!0)};return r&&(c.state=a),c};jt.test=(t,e,r,{glob:i,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let s=r||{},o=s.format||(n?zE.toPosixSlashes:null),a=t===i,u=a&&o?o(t):t;return a===!1&&(u=o?o(t):t,a=u===i),(a===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?a=jt.matchBase(t,e,r,n):a=e.exec(u)),{isMatch:Boolean(a),match:a,output:u}};jt.matchBase=(t,e,r,i=zE.isWindows(r))=>(e instanceof RegExp?e:jt.makeRe(e,r)).test(Boe.basename(t));jt.isMatch=(t,e,r)=>jt(e,r)(t);jt.parse=(t,e)=>Array.isArray(t)?t.map(r=>jt.parse(r,e)):KE(t,{...e,fastpaths:!1});jt.scan=(t,e)=>Uoe(t,e);jt.compileRe=(t,e,r=!1,i=!1)=>{if(r===!0)return t.output;let n=e||{},s=n.contains?"":"^",o=n.contains?"":"$",a=`${s}(?:${t.output})${o}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let u=jt.toRegex(a,e);return i===!0&&(u.state=t),u};jt.makeRe=(t,e={},r=!1,i=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=KE.fastpaths(t,e)),n.output||(n=KE(t,e)),jt.compileRe(n,e,r,i)};jt.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};jt.constants=joe;mB.exports=jt});var yB=v((xDe,HB)=>{"use strict";HB.exports=gB()});var ym=v((CDe,_B)=>{"use strict";var bB=require("util"),wB=QF(),Ns=yB(),XE=gm(),vB=t=>t===""||t==="./",Et=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let i=new Set,n=new Set,s=new Set,o=0,a=l=>{s.add(l.output),r&&r.onResult&&r.onResult(l)};for(let l=0;l<e.length;l++){let p=Ns(String(e[l]),{...r,onResult:a},!0),f=p.state.negated||p.state.negatedExtglob;f&&o++;for(let h of t){let g=p(h,!0);(f?!g.isMatch:g.isMatch)&&(f?i.add(g.output):(i.delete(g.output),n.add(g.output)))}}let c=(o===e.length?[...s]:[...n]).filter(l=>!i.has(l));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(l=>l.replace(/\\/g,"")):e}return c};Et.match=Et;Et.matcher=(t,e)=>Ns(t,e);Et.isMatch=(t,e,r)=>Ns(e,r)(t);Et.any=Et.isMatch;Et.not=(t,e,r={})=>{e=[].concat(e).map(String);let i=new Set,n=[],s=a=>{r.onResult&&r.onResult(a),n.push(a.output)},o=new Set(Et(t,e,{...r,onResult:s}));for(let a of n)o.has(a)||i.add(a);return[...i]};Et.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${bB.inspect(t)}"`);if(Array.isArray(e))return e.some(i=>Et.contains(t,i,r));if(typeof e=="string"){if(vB(t)||vB(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return Et.isMatch(t,e,{...r,contains:!0})};Et.matchKeys=(t,e,r)=>{if(!XE.isObject(t))throw new TypeError("Expected the first argument to be an object");let i=Et(Object.keys(t),e,r),n={};for(let s of i)n[s]=t[s];return n};Et.some=(t,e,r)=>{let i=[].concat(t);for(let n of[].concat(e)){let s=Ns(String(n),r);if(i.some(o=>s(o)))return!0}return!1};Et.every=(t,e,r)=>{let i=[].concat(t);for(let n of[].concat(e)){let s=Ns(String(n),r);if(!i.every(o=>s(o)))return!1}return!0};Et.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${bB.inspect(t)}"`);return[].concat(e).every(i=>Ns(i,r)(t))};Et.capture=(t,e,r)=>{let i=XE.isWindows(r),s=Ns.makeRe(String(t),{...r,capture:!0}).exec(i?XE.toPosixSlashes(e):e);if(s)return s.slice(1).map(o=>o===void 0?"":o)};Et.makeRe=(...t)=>Ns.makeRe(...t);Et.scan=(...t)=>Ns.scan(...t);Et.parse=(t,e)=>{let r=[];for(let i of[].concat(t||[]))for(let n of wB(String(i),e))r.push(Ns.parse(n,e));return r};Et.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(t)?[t]:wB(t,e)};Et.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return Et.braces(t,{...e,expand:!0})};_B.exports=Et});var EB=v(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});function Koe(t){let e=[],r=new Array(4),i=[0,192,224,240],n=[127,63,63,63],s=[0,128,128,128];for(let o of t){let a=r,u=o.codePointAt(0),c=0-(-(u&4294967168)>>31)-(-(u&4294965248)>>31)-(-(u&4294901760)>>31),l=n[c],p=s[c];a[3]=p|u&l,a[2]=p|u>>>6&l,a[1]=p|u>>>12&l,a[0]=p|u>>>18&l;let f=3-c;a[f]|=i[c],Array.prototype.push.apply(e,a.slice(f))}return new Uint8Array(e)}Fa.toUtf8_1=Koe;function zoe(t){let e=[];for(let r of t){let i=r.codePointAt(0);i<128?e.push(i):i<2048?e.push(192|i>>6&31,128|i&63):i<65536?e.push(224|i>>12&15,128|i>>6&63,128|i&63):e.push(240|i>>18&7,128|i>>12&63,128|i>>6&63,128|i&63)}return new Uint8Array(e)}Fa.toUtf8_2=zoe;function SB(t){let e=[];for(let r=0,i=t.length;r<i;++r){let n=t.charCodeAt(r);if(n<128)e.push(n);else if(n<2048)e.push(192|n>>6,128|n&63);else if(n<55296||n>=57344)e.push(224|n>>12,128|n>>6&63,128|n&63);else{let s=65536+((n&1023)<<10|t.charCodeAt(++r)&1023);e.push(240|s>>18&7,128|s>>12&63,128|s>>6&63,128|s&63)}}return new Uint8Array(e)}Fa.toUtf8_3=SB;Fa.toUtf8=SB;Fa.default=Fa.toUtf8});var DB=v(JE=>{"use strict";Object.defineProperty(JE,"__esModule",{value:!0});var Xoe=EB(),Lp=2654435761,Tp=2246822519,lb=3266489917,xB=668265263,CB=374761393;function Joe(t,e=0){t=typeof t=="string"?Xoe.default(t):t;let r=t,i=e+CB&4294967295,n=0;if(r.length>=16){let o=[e+Lp+Tp&4294967295,e+Tp&4294967295,e+0&4294967295,e-Lp&4294967295],a=t,u=a.length-16,c=0;for(n=0;(n&4294967280)<=u;n+=4){let l=n,p=a[l+0]+(a[l+1]<<8),f=a[l+2]+(a[l+3]<<8),h=p*Tp+(f*Tp<<16),g=o[c]+h&4294967295;g=g<<13|g>>>19;let H=g&65535,b=g>>>16;o[c]=H*Lp+(b*Lp<<16)&4294967295,c=c+1&3}i=(o[0]<<1|o[0]>>>31)+(o[1]<<7|o[1]>>>25)+(o[2]<<12|o[2]>>>20)+(o[3]<<18|o[3]>>>14)&4294967295}i=i+t.length&4294967295;let s=t.length-4;for(;n<=s;n+=4){let o=n,a=r[o+0]+(r[o+1]<<8),u=r[o+2]+(r[o+3]<<8),c=a*lb+(u*lb<<16);i=i+c&4294967295,i=i<<17|i>>>15,i=(i&65535)*xB+((i>>>16)*xB<<16)&4294967295}for(;n<r.length;++n){let o=r[n];i=i+o*CB,i=i<<11|i>>>21,i=(i&65535)*Lp+((i>>>16)*Lp<<16)&4294967295}return i=i^i>>>15,i=((i&65535)*Tp&4294967295)+((i>>>16)*Tp<<16),i=i^i>>>13,i=((i&65535)*lb&4294967295)+((i>>>16)*lb<<16),i=i^i>>>16,i<0?i+4294967296:i}JE.xxHash32=Joe});var PB=v(pb=>{"use strict";function Yoe(t){for(var e in t)pb.hasOwnProperty(e)||(pb[e]=t[e])}Object.defineProperty(pb,"__esModule",{value:!0});Yoe(DB())});var XB=v((ELe,zB)=>{"use strict";var{Duplex:iae}=require("stream");function GB(t){t.emit("close")}function nae(){!this.destroyed&&this._writableState.finished&&this.destroy()}function KB(t){this.removeListener("error",KB),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function sae(t,e){let r=!0,i=new iae({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let a=!o&&i._readableState.objectMode?s.toString():s;i.push(a)||t.pause()}),t.once("error",function(s){i.destroyed||(r=!1,i.destroy(s))}),t.once("close",function(){i.destroyed||i.push(null)}),i._destroy=function(n,s){if(t.readyState===t.CLOSED){s(n),process.nextTick(GB,i);return}let o=!1;t.once("error",function(u){o=!0,s(u)}),t.once("close",function(){o||s(n),process.nextTick(GB,i)}),r&&t.terminate()},i._final=function(n){if(t.readyState===t.CONNECTING){t.once("open",function(){i._final(n)});return}t._socket!==null&&(t._socket._writableState.finished?(n(),i._readableState.endEmitted&&i.destroy()):(t._socket.once("finish",function(){n()}),t.close()))},i._read=function(){t.isPaused&&t.resume()},i._write=function(n,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){i._write(n,s,o)});return}t.send(n,o)},i.on("end",nae),i.on("error",KB),i}zB.exports=sae});var Ua=v((xLe,JB)=>{"use strict";JB.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Im=v((CLe,Hb)=>{"use strict";var{EMPTY_BUFFER:oae}=Ua(),nx=Buffer[Symbol.species];function aae(t,e){if(t.length===0)return oae;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),i=0;for(let n=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return i<e?new nx(r.buffer,r.byteOffset,i):r}function YB(t,e,r,i,n){for(let s=0;s<n;s++)r[i+s]=t[s]^e[s&3]}function QB(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function uae(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function sx(t){if(sx.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new nx(t):ArrayBuffer.isView(t)?e=new nx(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),sx.readOnly=!1),e}Hb.exports={concat:aae,mask:YB,toArrayBuffer:uae,toBuffer:sx,unmask:QB};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");Hb.exports.mask=function(e,r,i,n,s){s<48?YB(e,r,i,n,s):t.mask(e,r,i,n,s)},Hb.exports.unmask=function(e,r){e.length<32?QB(e,r):t.unmask(e,r)}}catch{}});var t2=v((DLe,e2)=>{"use strict";var ZB=Symbol("kDone"),ox=Symbol("kRun"),ax=class{constructor(e){this[ZB]=()=>{this.pending--,this[ox]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[ox]()}[ox](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[ZB])}}};e2.exports=ax});var xm=v((PLe,s2)=>{"use strict";var Sm=require("zlib"),r2=Im(),cae=t2(),{kStatusCode:i2}=Ua(),lae=Buffer[Symbol.species],pae=Buffer.from([0,0,255,255]),bb=Symbol("permessage-deflate"),Do=Symbol("total-length"),Em=Symbol("callback"),ja=Symbol("buffers"),vb=Symbol("error"),yb,ux=class{constructor(e,r,i){if(this._maxPayload=i|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!yb){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;yb=new cae(n)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Em];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,i=e.find(n=>!(r.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>n.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!i)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(i.server_no_context_takeover=!0),r.clientNoContextTakeover&&(i.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(i.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?i.client_max_window_bits=r.clientMaxWindowBits:(i.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete i.client_max_window_bits,i}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(i=>{let n=r[i];if(n.length>1)throw new Error(`Parameter "${i}" must have only a single value`);if(n=n[0],i==="client_max_window_bits"){if(n!==!0){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else if(i==="server_max_window_bits"){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=s}else if(i==="client_no_context_takeover"||i==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else throw new Error(`Unknown parameter "${i}"`);r[i]=n})}),e}decompress(e,r,i){yb.add(n=>{this._decompress(e,r,(s,o)=>{n(),i(s,o)})})}compress(e,r,i){yb.add(n=>{this._compress(e,r,(s,o)=>{n(),i(s,o)})})}_decompress(e,r,i){let n=this._isServer?"client":"server";if(!this._inflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?Sm.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=Sm.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[bb]=this,this._inflate[Do]=0,this._inflate[ja]=[],this._inflate.on("error",dae),this._inflate.on("data",n2)}this._inflate[Em]=i,this._inflate.write(e),r&&this._inflate.write(pae),this._inflate.flush(()=>{let s=this._inflate[vb];if(s){this._inflate.close(),this._inflate=null,i(s);return}let o=r2.concat(this._inflate[ja],this._inflate[Do]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Do]=0,this._inflate[ja]=[],r&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),i(null,o)})}_compress(e,r,i){let n=this._isServer?"server":"client";if(!this._deflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?Sm.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=Sm.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Do]=0,this._deflate[ja]=[],this._deflate.on("data",fae)}this._deflate[Em]=i,this._deflate.write(e),this._deflate.flush(Sm.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=r2.concat(this._deflate[ja],this._deflate[Do]);r&&(s=new lae(s.buffer,s.byteOffset,s.length-4)),this._deflate[Em]=null,this._deflate[Do]=0,this._deflate[ja]=[],r&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),i(null,s)})}};s2.exports=ux;function fae(t){this[ja].push(t),this[Do]+=t.length}function n2(t){if(this[Do]+=t.length,this[bb]._maxPayload<1||this[Do]<=this[bb]._maxPayload){this[ja].push(t);return}this[vb]=new RangeError("Max payload size exceeded"),this[vb].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[vb][i2]=1009,this.removeListener("data",n2),this.reset()}function dae(t){this[bb]._inflate=null,t[i2]=1007,this[Em](t)}});var Cm=v((LLe,wb)=>{"use strict";var{isUtf8:o2}=require("buffer"),hae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function mae(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function cx(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}wb.exports={isValidStatusCode:mae,isValidUTF8:cx,tokenChars:hae};if(o2)wb.exports.isValidUTF8=function(t){return t.length<24?cx(t):o2(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");wb.exports.isValidUTF8=function(e){return e.length<32?cx(e):t(e)}}catch{}});var hx=v((TLe,h2)=>{"use strict";var{Writable:gae}=require("stream"),a2=xm(),{BINARY_TYPES:Hae,EMPTY_BUFFER:u2,kStatusCode:yae,kWebSocket:vae}=Ua(),{concat:lx,toArrayBuffer:bae,unmask:wae}=Im(),{isValidStatusCode:_ae,isValidUTF8:c2}=Cm(),_b=Buffer[Symbol.species],Aae=Promise.resolve(),Iae=typeof queueMicrotask=="function"?queueMicrotask:Sae,Np=0,l2=1,p2=2,f2=3,px=4,d2=5,fx=6,dx=class extends gae{constructor(e={}){super(),this._binaryType=e.binaryType||Hae[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[vae]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=Np,this._loop=!1}_write(e,r,i){if(this._opcode===8&&this._state==Np)return i();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(i)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let i=this._buffers[0];return this._buffers[0]=new _b(i.buffer,i.byteOffset+e,i.length-e),new _b(i.buffer,i.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let i=this._buffers[0],n=r.length-e;e>=i.length?r.set(this._buffers.shift(),n):(r.set(new Uint8Array(i.buffer,i.byteOffset,e),n),this._buffers[0]=new _b(i.buffer,i.byteOffset+e,i.length-e)),e-=i.length}while(e>0);return r}startLoop(e){let r;this._loop=!0;do switch(this._state){case Np:r=this.getInfo();break;case l2:r=this.getPayloadLength16();break;case p2:r=this.getPayloadLength64();break;case f2:this.getMask();break;case px:r=this.getData(e);break;case d2:this._loop=!1;return;default:this._loop=!1,Iae(()=>{this._state=Np,this.startLoop(e)});return}while(this._loop);e(r)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,Hr(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let r=(e[0]&64)===64;if(r&&!this._extensions[a2.extensionName])return this._loop=!1,Hr(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(r)return this._loop=!1,Hr(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,Hr(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,Hr(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,Hr(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(r)return this._loop=!1,Hr(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1)return this._loop=!1,Hr(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,Hr(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,Hr(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,Hr(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=l2;else if(this._payloadLength===127)this._state=p2;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),r=e.readUInt32BE(0);return r>Math.pow(2,53-32)-1?(this._loop=!1,Hr(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,Hr(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=f2:this._state=px}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=px}getData(e){let r=u2;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&wae(r,this._mask)}if(this._opcode>7)return this.controlMessage(r);if(this._compressed){this._state=d2,this.decompress(r,e);return}return r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage()}decompress(e,r){this._extensions[a2.extensionName].decompress(e,this._fin,(n,s)=>{if(n)return r(n);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return r(Hr(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}let o=this.dataMessage();if(o)return r(o);this.startLoop(r)})}dataMessage(){if(this._fin){let e=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=lx(r,e):this._binaryType==="arraybuffer"?i=bae(lx(r,e)):i=r,this.emit("message",i,!0)}else{let i=lx(r,e);if(!this._skipUTF8Validation&&!c2(i))return this._loop=!1,Hr(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",i,!1)}}this._state=fx}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,u2),this.end(),this._state=Np;else{let r=e.readUInt16BE(0);if(!_ae(r))return Hr(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let i=new _b(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!c2(i))return Hr(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",r,i),this.end(),this._state=Np}else this._opcode===9?(this.emit("ping",e),this._state=fx):(this.emit("pong",e),this._state=fx)}};h2.exports=dx;function Hr(t,e,r,i,n){let s=new t(r?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(s,Hr),s.code=n,s[yae]=i,s}function Sae(t){Aae.then(t).catch(xae)}function Eae(t){throw t}function xae(t){process.nextTick(Eae,t)}});var mx=v((kLe,H2)=>{"use strict";var{Duplex:$Le}=require("stream"),{randomFillSync:Cae}=require("crypto"),m2=xm(),{EMPTY_BUFFER:Dae}=Ua(),{isValidStatusCode:Pae}=Cm(),{mask:g2,toBuffer:Fp}=Im(),Wn=Symbol("kByteLength"),Lae=Buffer.alloc(4),qs=class{constructor(e,r,i){this._extensions=r||{},i&&(this._generateMask=i,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,r){let i,n=!1,s=2,o=!1;r.mask&&(i=r.maskBuffer||Lae,r.generateMask?r.generateMask(i):Cae(i,0,4),o=(i[0]|i[1]|i[2]|i[3])===0,s=6);let a;typeof e=="string"?(!r.mask||o)&&r[Wn]!==void 0?a=r[Wn]:(e=Buffer.from(e),a=e.length):(a=e.length,n=r.mask&&r.readOnly&&!o);let u=a;a>=65536?(s+=8,u=127):a>125&&(s+=2,u=126);let c=Buffer.allocUnsafe(n?a+s:s);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=u,u===126?c.writeUInt16BE(a,2):u===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[s-4]=i[0],c[s-3]=i[1],c[s-2]=i[2],c[s-1]=i[3],o?[c,e]:n?(g2(e,i,c,s,a),[c]):(g2(e,i,e,0,a),[c,e])):[c,e]}close(e,r,i,n){let s;if(e===void 0)s=Dae;else{if(typeof e!="number"||!Pae(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}let o={[Wn]:s.length,fin:!0,generateMask:this._generateMask,mask:i,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,s,!1,o,n]):this.sendFrame(qs.frame(s,o),n)}ping(e,r,i){let n,s;if(typeof e=="string"?(n=Buffer.byteLength(e),s=!1):(e=Fp(e),n=e.length,s=Fp.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Wn]:n,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,i]):this.sendFrame(qs.frame(e,o),i)}pong(e,r,i){let n,s;if(typeof e=="string"?(n=Buffer.byteLength(e),s=!1):(e=Fp(e),n=e.length,s=Fp.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Wn]:n,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,i]):this.sendFrame(qs.frame(e,o),i)}send(e,r,i){let n=this._extensions[m2.extensionName],s=r.binary?2:1,o=r.compress,a,u;if(typeof e=="string"?(a=Buffer.byteLength(e),u=!1):(e=Fp(e),a=e.length,u=Fp.readOnly),this._firstFragment?(this._firstFragment=!1,o&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=n._threshold),this._compress=o):(o=!1,s=0),r.fin&&(this._firstFragment=!0),n){let c={[Wn]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:u,rsv1:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,c,i]):this.dispatch(e,this._compress,c,i)}else this.sendFrame(qs.frame(e,{[Wn]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:u,rsv1:!1}),i)}dispatch(e,r,i,n){if(!r){this.sendFrame(qs.frame(e,i),n);return}let s=this._extensions[m2.extensionName];this._bufferedBytes+=i[Wn],this._deflating=!0,s.compress(e,i.fin,(o,a)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");typeof n=="function"&&n(u);for(let c=0;c<this._queue.length;c++){let l=this._queue[c],p=l[l.length-1];typeof p=="function"&&p(u)}return}this._bufferedBytes-=i[Wn],this._deflating=!1,i.readOnly=!1,this.sendFrame(qs.frame(a,i),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Wn],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Wn],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};H2.exports=qs});var E2=v((RLe,S2)=>{"use strict";var{kForOnEventAttribute:Dm,kListener:gx}=Ua(),y2=Symbol("kCode"),v2=Symbol("kData"),b2=Symbol("kError"),w2=Symbol("kMessage"),_2=Symbol("kReason"),Bp=Symbol("kTarget"),A2=Symbol("kType"),I2=Symbol("kWasClean"),Po=class{constructor(e){this[Bp]=null,this[A2]=e}get target(){return this[Bp]}get type(){return this[A2]}};Object.defineProperty(Po.prototype,"target",{enumerable:!0});Object.defineProperty(Po.prototype,"type",{enumerable:!0});var Ic=class extends Po{constructor(e,r={}){super(e),this[y2]=r.code===void 0?0:r.code,this[_2]=r.reason===void 0?"":r.reason,this[I2]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[y2]}get reason(){return this[_2]}get wasClean(){return this[I2]}};Object.defineProperty(Ic.prototype,"code",{enumerable:!0});Object.defineProperty(Ic.prototype,"reason",{enumerable:!0});Object.defineProperty(Ic.prototype,"wasClean",{enumerable:!0});var Up=class extends Po{constructor(e,r={}){super(e),this[b2]=r.error===void 0?null:r.error,this[w2]=r.message===void 0?"":r.message}get error(){return this[b2]}get message(){return this[w2]}};Object.defineProperty(Up.prototype,"error",{enumerable:!0});Object.defineProperty(Up.prototype,"message",{enumerable:!0});var Pm=class extends Po{constructor(e,r={}){super(e),this[v2]=r.data===void 0?null:r.data}get data(){return this[v2]}};Object.defineProperty(Pm.prototype,"data",{enumerable:!0});var Tae={addEventListener(t,e,r={}){for(let n of this.listeners(t))if(!r[Dm]&&n[gx]===e&&!n[Dm])return;let i;if(t==="message")i=function(s,o){let a=new Pm("message",{data:o?s:s.toString()});a[Bp]=this,Ab(e,this,a)};else if(t==="close")i=function(s,o){let a=new Ic("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Bp]=this,Ab(e,this,a)};else if(t==="error")i=function(s){let o=new Up("error",{error:s,message:s.message});o[Bp]=this,Ab(e,this,o)};else if(t==="open")i=function(){let s=new Po("open");s[Bp]=this,Ab(e,this,s)};else return;i[Dm]=!!r[Dm],i[gx]=e,r.once?this.once(t,i):this.on(t,i)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[gx]===e&&!r[Dm]){this.removeListener(t,r);break}}};S2.exports={CloseEvent:Ic,ErrorEvent:Up,Event:Po,EventTarget:Tae,MessageEvent:Pm};function Ab(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var Hx=v((MLe,x2)=>{"use strict";var{tokenChars:Lm}=Cm();function Ws(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function $ae(t){let e=Object.create(null),r=Object.create(null),i=!1,n=!1,s=!1,o,a,u=-1,c=-1,l=-1,p=0;for(;p<t.length;p++)if(c=t.charCodeAt(p),o===void 0)if(l===-1&&Lm[c]===1)u===-1&&(u=p);else if(p!==0&&(c===32||c===9))l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let h=t.slice(u,l);c===44?(Ws(e,h,r),r=Object.create(null)):o=h,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(a===void 0)if(l===-1&&Lm[c]===1)u===-1&&(u=p);else if(c===32||c===9)l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p),Ws(r,t.slice(u,l),!0),c===44&&(Ws(e,o,r),r=Object.create(null),o=void 0),u=l=-1}else if(c===61&&u!==-1&&l===-1)a=t.slice(u,p),u=l=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(n){if(Lm[c]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);u===-1?u=p:i||(i=!0),n=!1}else if(s)if(Lm[c]===1)u===-1&&(u=p);else if(c===34&&u!==-1)s=!1,l=p;else if(c===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(c===34&&t.charCodeAt(p-1)===61)s=!0;else if(l===-1&&Lm[c]===1)u===-1&&(u=p);else if(u!==-1&&(c===32||c===9))l===-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let h=t.slice(u,l);i&&(h=h.replace(/\\/g,""),i=!1),Ws(r,a,h),c===44&&(Ws(e,o,r),r=Object.create(null),o=void 0),a=void 0,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(u===-1||s||c===32||c===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=p);let f=t.slice(u,l);return o===void 0?Ws(e,f,r):(a===void 0?Ws(r,f,!0):i?Ws(r,a,f.replace(/\\/g,"")):Ws(r,a,f),Ws(e,o,r)),e}function kae(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(i=>[e].concat(Object.keys(i).map(n=>{let s=i[n];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?n:`${n}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}x2.exports={format:kae,parse:$ae}});var _x=v((FLe,N2)=>{"use strict";var Rae=require("events"),Mae=require("https"),Oae=require("http"),P2=require("net"),Nae=require("tls"),{randomBytes:Fae,createHash:Bae}=require("crypto"),{Duplex:OLe,Readable:NLe}=require("stream"),{URL:yx}=require("url"),qa=xm(),Uae=hx(),jae=mx(),{BINARY_TYPES:C2,EMPTY_BUFFER:Ib,GUID:qae,kForOnEventAttribute:vx,kListener:Wae,kStatusCode:Vae,kWebSocket:zr,NOOP:L2}=Ua(),{EventTarget:{addEventListener:Gae,removeEventListener:Kae}}=E2(),{format:zae,parse:Xae}=Hx(),{toBuffer:Jae}=Im(),Yae=30*1e3,T2=Symbol("kAborted"),bx=[8,13],Lo=["CONNECTING","OPEN","CLOSING","CLOSED"],Qae=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,xe=class extends Rae{constructor(e,r,i){super(),this._binaryType=C2[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Ib,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=xe.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(i=r,r=[]):r=[r]),$2(this,e,r,i)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){C2.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,i){let n=new Uae({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation});this._sender=new jae(e,this._extensions,i.generateMask),this._receiver=n,this._socket=e,n[zr]=this,e[zr]=this,n.on("conclude",tue),n.on("drain",rue),n.on("error",iue),n.on("message",nue),n.on("ping",sue),n.on("pong",oue),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",R2),e.on("data",Eb),e.on("end",M2),e.on("error",O2),this._readyState=xe.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=xe.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[qa.extensionName]&&this._extensions[qa.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=xe.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==xe.CLOSED){if(this.readyState===xe.CONNECTING){let i="WebSocket was closed before the connection was established";Bi(this,this._req,i);return}if(this.readyState===xe.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=xe.CLOSING,this._sender.close(e,r,!this._isServer,i=>{i||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),Yae)}}pause(){this.readyState===xe.CONNECTING||this.readyState===xe.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,i){if(this.readyState===xe.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=r=void 0):typeof r=="function"&&(i=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==xe.OPEN){wx(this,e,i);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||Ib,r,i)}pong(e,r,i){if(this.readyState===xe.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=r=void 0):typeof r=="function"&&(i=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==xe.OPEN){wx(this,e,i);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||Ib,r,i)}resume(){this.readyState===xe.CONNECTING||this.readyState===xe.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,i){if(this.readyState===xe.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(i=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==xe.OPEN){wx(this,e,i);return}let n={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[qa.extensionName]||(n.compress=!1),this._sender.send(e||Ib,n,i)}terminate(){if(this.readyState!==xe.CLOSED){if(this.readyState===xe.CONNECTING){let e="WebSocket was closed before the connection was established";Bi(this,this._req,e);return}this._socket&&(this._readyState=xe.CLOSING,this._socket.destroy())}}};Object.defineProperty(xe,"CONNECTING",{enumerable:!0,value:Lo.indexOf("CONNECTING")});Object.defineProperty(xe.prototype,"CONNECTING",{enumerable:!0,value:Lo.indexOf("CONNECTING")});Object.defineProperty(xe,"OPEN",{enumerable:!0,value:Lo.indexOf("OPEN")});Object.defineProperty(xe.prototype,"OPEN",{enumerable:!0,value:Lo.indexOf("OPEN")});Object.defineProperty(xe,"CLOSING",{enumerable:!0,value:Lo.indexOf("CLOSING")});Object.defineProperty(xe.prototype,"CLOSING",{enumerable:!0,value:Lo.indexOf("CLOSING")});Object.defineProperty(xe,"CLOSED",{enumerable:!0,value:Lo.indexOf("CLOSED")});Object.defineProperty(xe.prototype,"CLOSED",{enumerable:!0,value:Lo.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(xe.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(xe.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[vx])return e[Wae];return null},set(e){for(let r of this.listeners(t))if(r[vx]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[vx]:!0})}})});xe.prototype.addEventListener=Gae;xe.prototype.removeEventListener=Kae;N2.exports=xe;function $2(t,e,r,i){let n={protocolVersion:bx[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!bx.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${bx.join(", ")})`);let s;if(e instanceof yx)s=e;else try{s=new yx(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),t._url=s.href;let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",u;if(s.protocol!=="ws:"&&!o&&!a?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!s.pathname?u="The URL's pathname is empty":s.hash&&(u="The URL contains a fragment identifier"),u){let H=new SyntaxError(u);if(t._redirects===0)throw H;Sb(t,H);return}let c=o?443:80,l=Fae(16).toString("base64"),p=o?Mae.request:Oae.request,f=new Set,h;if(n.createConnection=o?eue:Zae,n.defaultPort=n.defaultPort||c,n.port=s.port||c,n.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,n.headers={...n.headers,"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},n.path=s.pathname+s.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(h=new qa(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=zae({[qa.extensionName]:h.offer()})),r.length){for(let H of r){if(typeof H!="string"||!Qae.test(H)||f.has(H))throw new SyntaxError("An invalid or duplicated subprotocol was specified");f.add(H)}n.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(s.username||s.password)&&(n.auth=`${s.username}:${s.password}`),a){let H=n.path.split(":");n.socketPath=H[0],n.path=H[1]}let g;if(n.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?n.socketPath:s.host;let H=i&&i.headers;if(i={...i,headers:{}},H)for(let[b,_]of Object.entries(H))i.headers[b.toLowerCase()]=_}else if(t.listenerCount("redirect")===0){let H=a?t._originalIpc?n.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!H||t._originalSecure&&!o)&&(delete n.headers.authorization,delete n.headers.cookie,H||delete n.headers.host,n.auth=void 0)}n.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),g=t._req=p(n),t._redirects&&t.emit("redirect",t.url,g)}else g=t._req=p(n);n.timeout&&g.on("timeout",()=>{Bi(t,g,"Opening handshake has timed out")}),g.on("error",H=>{g===null||g[T2]||(g=t._req=null,Sb(t,H))}),g.on("response",H=>{let b=H.headers.location,_=H.statusCode;if(b&&n.followRedirects&&_>=300&&_<400){if(++t._redirects>n.maxRedirects){Bi(t,g,"Maximum redirects exceeded");return}g.abort();let k;try{k=new yx(b,e)}catch{let C=new SyntaxError(`Invalid URL: ${b}`);Sb(t,C);return}$2(t,k,r,i)}else t.emit("unexpected-response",g,H)||Bi(t,g,`Unexpected server response: ${H.statusCode}`)}),g.on("upgrade",(H,b,_)=>{if(t.emit("upgrade",H),t.readyState!==xe.CONNECTING)return;if(g=t._req=null,H.headers.upgrade.toLowerCase()!=="websocket"){Bi(t,b,"Invalid Upgrade header");return}let k=Bae("sha1").update(l+qae).digest("base64");if(H.headers["sec-websocket-accept"]!==k){Bi(t,b,"Invalid Sec-WebSocket-Accept header");return}let U=H.headers["sec-websocket-protocol"],C;if(U!==void 0?f.size?f.has(U)||(C="Server sent an invalid subprotocol"):C="Server sent a subprotocol but none was requested":f.size&&(C="Server sent no subprotocol"),C){Bi(t,b,C);return}U&&(t._protocol=U);let L=H.headers["sec-websocket-extensions"];if(L!==void 0){if(!h){Bi(t,b,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let q;try{q=Xae(L)}catch{Bi(t,b,"Invalid Sec-WebSocket-Extensions header");return}let j=Object.keys(q);if(j.length!==1||j[0]!==qa.extensionName){Bi(t,b,"Server indicated an extension that was not requested");return}try{h.accept(q[qa.extensionName])}catch{Bi(t,b,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[qa.extensionName]=h}t.setSocket(b,_,{generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})}),n.finishRequest?n.finishRequest(g,t):g.end()}function Sb(t,e){t._readyState=xe.CLOSING,t.emit("error",e),t.emitClose()}function Zae(t){return t.path=t.socketPath,P2.connect(t)}function eue(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=P2.isIP(t.host)?"":t.host),Nae.connect(t)}function Bi(t,e,r){t._readyState=xe.CLOSING;let i=new Error(r);Error.captureStackTrace(i,Bi),e.setHeader?(e[T2]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Sb,t,i)):(e.destroy(i),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function wx(t,e,r){if(e){let i=Jae(e).length;t._socket?t._sender._bufferedBytes+=i:t._bufferedAmount+=i}if(r){let i=new Error(`WebSocket is not open: readyState ${t.readyState} (${Lo[t.readyState]})`);process.nextTick(r,i)}}function tue(t,e){let r=this[zr];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[zr]!==void 0&&(r._socket.removeListener("data",Eb),process.nextTick(k2,r._socket),t===1005?r.close():r.close(t,e))}function rue(){let t=this[zr];t.isPaused||t._socket.resume()}function iue(t){let e=this[zr];e._socket[zr]!==void 0&&(e._socket.removeListener("data",Eb),process.nextTick(k2,e._socket),e.close(t[Vae])),e.emit("error",t)}function D2(){this[zr].emitClose()}function nue(t,e){this[zr].emit("message",t,e)}function sue(t){let e=this[zr];e.pong(t,!e._isServer,L2),e.emit("ping",t)}function oue(t){this[zr].emit("pong",t)}function k2(t){t.resume()}function R2(){let t=this[zr];this.removeListener("close",R2),this.removeListener("data",Eb),this.removeListener("end",M2),t._readyState=xe.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[zr]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",D2),t._receiver.on("finish",D2))}function Eb(t){this[zr]._receiver.write(t)||this.pause()}function M2(){let t=this[zr];t._readyState=xe.CLOSING,t._receiver.end(),this.end()}function O2(){let t=this[zr];this.removeListener("error",O2),this.on("error",L2),t&&(t._readyState=xe.CLOSING,this.destroy())}});var B2=v((BLe,F2)=>{"use strict";var{tokenChars:aue}=Cm();function uue(t){let e=new Set,r=-1,i=-1,n=0;for(n;n<t.length;n++){let o=t.charCodeAt(n);if(i===-1&&aue[o]===1)r===-1&&(r=n);else if(n!==0&&(o===32||o===9))i===-1&&r!==-1&&(i=n);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${n}`);i===-1&&(i=n);let a=t.slice(r,i);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=i=-1}else throw new SyntaxError(`Unexpected character at index ${n}`)}if(r===-1||i!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(r,n);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}F2.exports={parse:uue}});var K2=v((jLe,G2)=>{"use strict";var cue=require("events"),xb=require("http"),{Duplex:ULe}=require("stream"),{createHash:lue}=require("crypto"),U2=Hx(),Sc=xm(),pue=B2(),fue=_x(),{GUID:due,kWebSocket:hue}=Ua(),mue=/^[+/0-9A-Za-z]{22}==$/,j2=0,q2=1,V2=2,Ax=class extends cue{constructor(e,r){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:fue,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=xb.createServer((i,n)=>{let s=xb.STATUS_CODES[426];n.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),n.end(s)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let i=this.emit.bind(this,"connection");this._removeListeners=gue(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,s,o)=>{this.handleUpgrade(n,s,o,i)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=j2}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===V2){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Tm,this);return}if(e&&this.once("close",e),this._state!==q2)if(this._state=q2,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Tm,this):process.nextTick(Tm,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Tm(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,i,n){r.on("error",W2);let s=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Ec(this,e,r,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){Ec(this,e,r,400,"Invalid Upgrade header");return}if(!s||!mue.test(s)){Ec(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(o!==8&&o!==13){Ec(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){$m(r,400);return}let a=e.headers["sec-websocket-protocol"],u=new Set;if(a!==void 0)try{u=pue.parse(a)}catch{Ec(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let c=e.headers["sec-websocket-extensions"],l={};if(this.options.perMessageDeflate&&c!==void 0){let p=new Sc(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=U2.parse(c);f[Sc.extensionName]&&(p.accept(f[Sc.extensionName]),l[Sc.extensionName]=p)}catch{Ec(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let p={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(f,h,g,H)=>{if(!f)return $m(r,h||401,g,H);this.completeUpgrade(l,s,u,e,r,i,n)});return}if(!this.options.verifyClient(p))return $m(r,401)}this.completeUpgrade(l,s,u,e,r,i,n)}completeUpgrade(e,r,i,n,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[hue])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>j2)return $m(s,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${lue("sha1").update(r+due).digest("base64")}`],l=new this.options.WebSocket(null);if(i.size){let p=this.options.handleProtocols?this.options.handleProtocols(i,n):i.values().next().value;p&&(c.push(`Sec-WebSocket-Protocol: ${p}`),l._protocol=p)}if(e[Sc.extensionName]){let p=e[Sc.extensionName].params,f=U2.format({[Sc.extensionName]:[p]});c.push(`Sec-WebSocket-Extensions: ${f}`),l._extensions=e}this.emit("headers",c,n),s.write(c.concat(`\r
`).join(`\r
`)),s.removeListener("error",W2),l.setSocket(s,o,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Tm,this)})),a(l,n)}};G2.exports=Ax;function gue(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let i of Object.keys(e))t.removeListener(i,e[i])}}function Tm(t){t._state=V2,t.emit("close")}function W2(){this.destroy()}function $m(t,e,r,i){r=r||xb.STATUS_CODES[e],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${xb.STATUS_CODES[e]}\r
`+Object.keys(i).map(n=>`${n}: ${i[n]}`).join(`\r
`)+`\r
\r
`+r)}function Ec(t,e,r,i,n){if(t.listenerCount("wsClientError")){let s=new Error(n);Error.captureStackTrace(s,Ec),t.emit("wsClientError",s,r,e)}else $m(r,i,n)}});var u3=v((_Te,a3)=>{"use strict";a3.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var l3=v((ATe,c3)=>{c3.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var d3=v((ITe,f3)=>{"use strict";var Sue=l3(),Eue=Array.prototype.concat,xue=Array.prototype.slice,p3=f3.exports=function(e){for(var r=[],i=0,n=e.length;i<n;i++){var s=e[i];Sue(s)?r=Eue.call(r,xue.call(s)):r.push(s)}return r};p3.wrap=function(t){return function(){return t(p3(arguments))}}});var H3=v((STe,g3)=>{var Rm=u3(),Mm=d3(),h3=Object.hasOwnProperty,m3={};for($b in Rm)h3.call(Rm,$b)&&(m3[Rm[$b]]=$b);var $b,Ui=g3.exports={to:{},get:{}};Ui.get=function(t){var e=t.substring(0,3).toLowerCase(),r,i;switch(e){case"hsl":r=Ui.get.hsl(t),i="hsl";break;case"hwb":r=Ui.get.hwb(t),i="hwb";break;default:r=Ui.get.rgb(t),i="rgb";break}return r?{model:i,value:r}:null};Ui.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,n=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,u,c;if(a=t.match(r)){for(c=a[2],a=a[1],u=0;u<3;u++){var l=u*2;o[u]=parseInt(a.slice(l,l+2),16)}c&&(o[3]=parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],u=0;u<3;u++)o[u]=parseInt(a[u]+a[u],16);c&&(o[3]=parseInt(c+c,16)/255)}else if(a=t.match(i)){for(u=0;u<3;u++)o[u]=parseInt(a[u+1],0);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else if(a=t.match(n)){for(u=0;u<3;u++)o[u]=Math.round(parseFloat(a[u+1])*2.55);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:h3.call(Rm,a[1])?(o=Rm[a[1]],o[3]=1,o):null:null;for(u=0;u<3;u++)o[u]=Va(o[u],0,255);return o[3]=Va(o[3],0,1),o};Ui.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var i=parseFloat(r[4]),n=(parseFloat(r[1])%360+360)%360,s=Va(parseFloat(r[2]),0,100),o=Va(parseFloat(r[3]),0,100),a=Va(isNaN(i)?1:i,0,1);return[n,s,o,a]}return null};Ui.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var i=parseFloat(r[4]),n=(parseFloat(r[1])%360+360)%360,s=Va(parseFloat(r[2]),0,100),o=Va(parseFloat(r[3]),0,100),a=Va(isNaN(i)?1:i,0,1);return[n,s,o,a]}return null};Ui.to.hex=function(){var t=Mm(arguments);return"#"+kb(t[0])+kb(t[1])+kb(t[2])+(t[3]<1?kb(Math.round(t[3]*255)):"")};Ui.to.rgb=function(){var t=Mm(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Ui.to.rgb.percent=function(){var t=Mm(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+i+"%)":"rgba("+e+"%, "+r+"%, "+i+"%, "+t[3]+")"};Ui.to.hsl=function(){var t=Mm(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Ui.to.hwb=function(){var t=Mm(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Ui.to.keyword=function(t){return m3[t.slice(0,3)]};function Va(t,e,r){return Math.min(Math.max(e,t),r)}function kb(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}});var v3=v((ETe,y3)=>{"use strict";y3.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Dx=v((xTe,w3)=>{var Om=v3(),b3={};for(let t of Object.keys(Om))b3[Om[t]]=t;var me={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};w3.exports=me;for(let t of Object.keys(me)){if(!("channels"in me[t]))throw new Error("missing channels property: "+t);if(!("labels"in me[t]))throw new Error("missing channel labels property: "+t);if(me[t].labels.length!==me[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=me[t];delete me[t].channels,delete me[t].labels,Object.defineProperty(me[t],"channels",{value:e}),Object.defineProperty(me[t],"labels",{value:r})}me.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,i=t[2]/255,n=Math.min(e,r,i),s=Math.max(e,r,i),o=s-n,a,u;s===n?a=0:e===s?a=(r-i)/o:r===s?a=2+(i-e)/o:i===s&&(a=4+(e-r)/o),a=Math.min(a*60,360),a<0&&(a+=360);let c=(n+s)/2;return s===n?u=0:c<=.5?u=o/(s+n):u=o/(2-s-n),[a,u*100,c*100]};me.rgb.hsv=function(t){let e,r,i,n,s,o=t[0]/255,a=t[1]/255,u=t[2]/255,c=Math.max(o,a,u),l=c-Math.min(o,a,u),p=function(f){return(c-f)/6/l+1/2};return l===0?(n=0,s=0):(s=l/c,e=p(o),r=p(a),i=p(u),o===c?n=i-r:a===c?n=1/3+e-i:u===c&&(n=2/3+r-e),n<0?n+=1:n>1&&(n-=1)),[n*360,s*100,c*100]};me.rgb.hwb=function(t){let e=t[0],r=t[1],i=t[2],n=me.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,i));return i=1-1/255*Math.max(e,Math.max(r,i)),[n,s*100,i*100]};me.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,i=t[2]/255,n=Math.min(1-e,1-r,1-i),s=(1-e-n)/(1-n)||0,o=(1-r-n)/(1-n)||0,a=(1-i-n)/(1-n)||0;return[s*100,o*100,a*100,n*100]};function Cue(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}me.rgb.keyword=function(t){let e=b3[t];if(e)return e;let r=1/0,i;for(let n of Object.keys(Om)){let s=Om[n],o=Cue(t,s);o<r&&(r=o,i=n)}return i};me.keyword.rgb=function(t){return Om[t]};me.rgb.xyz=function(t){let e=t[0]/255,r=t[1]/255,i=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;let n=e*.4124+r*.3576+i*.1805,s=e*.2126+r*.7152+i*.0722,o=e*.0193+r*.1192+i*.9505;return[n*100,s*100,o*100]};me.rgb.lab=function(t){let e=me.rgb.xyz(t),r=e[0],i=e[1],n=e[2];r/=95.047,i/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let s=116*i-16,o=500*(r-i),a=200*(i-n);return[s,o,a]};me.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,i=t[2]/100,n,s,o;if(r===0)return o=i*255,[o,o,o];i<.5?n=i*(1+r):n=i+r-i*r;let a=2*i-n,u=[0,0,0];for(let c=0;c<3;c++)s=e+1/3*-(c-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(n-a)*6*s:2*s<1?o=n:3*s<2?o=a+(n-a)*(2/3-s)*6:o=a,u[c]=o*255;return u};me.hsl.hsv=function(t){let e=t[0],r=t[1]/100,i=t[2]/100,n=r,s=Math.max(i,.01);i*=2,r*=i<=1?i:2-i,n*=s<=1?s:2-s;let o=(i+r)/2,a=i===0?2*n/(s+n):2*r/(i+r);return[e,a*100,o*100]};me.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,i=t[2]/100,n=Math.floor(e)%6,s=e-Math.floor(e),o=255*i*(1-r),a=255*i*(1-r*s),u=255*i*(1-r*(1-s));switch(i*=255,n){case 0:return[i,u,o];case 1:return[a,i,o];case 2:return[o,i,u];case 3:return[o,a,i];case 4:return[u,o,i];case 5:return[i,o,a]}};me.hsv.hsl=function(t){let e=t[0],r=t[1]/100,i=t[2]/100,n=Math.max(i,.01),s,o;o=(2-r)*i;let a=(2-r)*n;return s=r*n,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};me.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,i=t[2]/100,n=r+i,s;n>1&&(r/=n,i/=n);let o=Math.floor(6*e),a=1-i;s=6*e-o,o&1&&(s=1-s);let u=r+s*(a-r),c,l,p;switch(o){default:case 6:case 0:c=a,l=u,p=r;break;case 1:c=u,l=a,p=r;break;case 2:c=r,l=a,p=u;break;case 3:c=r,l=u,p=a;break;case 4:c=u,l=r,p=a;break;case 5:c=a,l=r,p=u;break}return[c*255,l*255,p*255]};me.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,i=t[2]/100,n=t[3]/100,s=1-Math.min(1,e*(1-n)+n),o=1-Math.min(1,r*(1-n)+n),a=1-Math.min(1,i*(1-n)+n);return[s*255,o*255,a*255]};me.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,i=t[2]/100,n,s,o;return n=e*3.2406+r*-1.5372+i*-.4986,s=e*-.9689+r*1.8758+i*.0415,o=e*.0557+r*-.204+i*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[n*255,s*255,o*255]};me.xyz.lab=function(t){let e=t[0],r=t[1],i=t[2];e/=95.047,r/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let n=116*r-16,s=500*(e-r),o=200*(r-i);return[n,s,o]};me.lab.xyz=function(t){let e=t[0],r=t[1],i=t[2],n,s,o;s=(e+16)/116,n=r/500+s,o=s-i/200;let a=s**3,u=n**3,c=o**3;return s=a>.008856?a:(s-16/116)/7.787,n=u>.008856?u:(n-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,n*=95.047,s*=100,o*=108.883,[n,s,o]};me.lab.lch=function(t){let e=t[0],r=t[1],i=t[2],n;n=Math.atan2(i,r)*360/2/Math.PI,n<0&&(n+=360);let o=Math.sqrt(r*r+i*i);return[e,o,n]};me.lch.lab=function(t){let e=t[0],r=t[1],n=t[2]/360*2*Math.PI,s=r*Math.cos(n),o=r*Math.sin(n);return[e,s,o]};me.rgb.ansi16=function(t,e=null){let[r,i,n]=t,s=e===null?me.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(r/255));return s===2&&(o+=60),o};me.hsv.ansi16=function(t){return me.rgb.ansi16(me.hsv.rgb(t),t[2])};me.rgb.ansi256=function(t){let e=t[0],r=t[1],i=t[2];return e===r&&r===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(i/255*5)};me.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(~~(t>50)+1)*.5,i=(e&1)*r*255,n=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[i,n,s]};me.ansi256.rgb=function(t){if(t>=232){let s=(t-232)*10+8;return[s,s,s]}t-=16;let e,r=Math.floor(t/36)/5*255,i=Math.floor((e=t%36)/6)/5*255,n=e%6/5*255;return[r,i,n]};me.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};me.hex.rgb=function(t){let e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let i=parseInt(r,16),n=i>>16&255,s=i>>8&255,o=i&255;return[n,s,o]};me.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,i=t[2]/255,n=Math.max(Math.max(e,r),i),s=Math.min(Math.min(e,r),i),o=n-s,a,u;return o<1?a=s/(1-o):a=0,o<=0?u=0:n===e?u=(r-i)/o%6:n===r?u=2+(i-e)/o:u=4+(e-r)/o,u/=6,u%=1,[u*360,o*100,a*100]};me.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,i=r<.5?2*e*r:2*e*(1-r),n=0;return i<1&&(n=(r-.5*i)/(1-i)),[t[0],i*100,n*100]};me.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,i=e*r,n=0;return i<1&&(n=(r-i)/(1-i)),[t[0],i*100,n*100]};me.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,i=t[2]/100;if(r===0)return[i*255,i*255,i*255];let n=[0,0,0],s=e%1*6,o=s%1,a=1-o,u=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=o,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=o;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=o,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return u=(1-r)*i,[(r*n[0]+u)*255,(r*n[1]+u)*255,(r*n[2]+u)*255]};me.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,i=e+r*(1-e),n=0;return i>0&&(n=e/i),[t[0],n*100,i*100]};me.hcg.hsl=function(t){let e=t[1]/100,i=t[2]/100*(1-e)+.5*e,n=0;return i>0&&i<.5?n=e/(2*i):i>=.5&&i<1&&(n=e/(2*(1-i))),[t[0],n*100,i*100]};me.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,i=e+r*(1-e);return[t[0],(i-e)*100,(1-i)*100]};me.hwb.hcg=function(t){let e=t[1]/100,i=1-t[2]/100,n=i-e,s=0;return n<1&&(s=(i-n)/(1-n)),[t[0],n*100,s*100]};me.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};me.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};me.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};me.gray.hsl=function(t){return[0,0,t[0]]};me.gray.hsv=me.gray.hsl;me.gray.hwb=function(t){return[0,100,t[0]]};me.gray.cmyk=function(t){return[0,0,0,t[0]]};me.gray.lab=function(t){return[t[0],0,0]};me.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i};me.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});var A3=v((CTe,_3)=>{var Rb=Dx();function Due(){let t={},e=Object.keys(Rb);for(let r=e.length,i=0;i<r;i++)t[e[i]]={distance:-1,parent:null};return t}function Pue(t){let e=Due(),r=[t];for(e[t].distance=0;r.length;){let i=r.pop(),n=Object.keys(Rb[i]);for(let s=n.length,o=0;o<s;o++){let a=n[o],u=e[a];u.distance===-1&&(u.distance=e[i].distance+1,u.parent=i,r.unshift(a))}}return e}function Lue(t,e){return function(r){return e(t(r))}}function Tue(t,e){let r=[e[t].parent,t],i=Rb[e[t].parent][t],n=e[t].parent;for(;e[n].parent;)r.unshift(e[n].parent),i=Lue(Rb[e[n].parent][n],i),n=e[n].parent;return i.conversion=r,i}_3.exports=function(t){let e=Pue(t),r={},i=Object.keys(e);for(let n=i.length,s=0;s<n;s++){let o=i[s];e[o].parent!==null&&(r[o]=Tue(o,e))}return r}});var S3=v((DTe,I3)=>{var Px=Dx(),$ue=A3(),Kp={},kue=Object.keys(Px);function Rue(t){let e=function(...r){let i=r[0];return i==null?i:(i.length>1&&(r=i),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function Mue(t){let e=function(...r){let i=r[0];if(i==null)return i;i.length>1&&(r=i);let n=t(r);if(typeof n=="object")for(let s=n.length,o=0;o<s;o++)n[o]=Math.round(n[o]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}kue.forEach(t=>{Kp[t]={},Object.defineProperty(Kp[t],"channels",{value:Px[t].channels}),Object.defineProperty(Kp[t],"labels",{value:Px[t].labels});let e=$ue(t);Object.keys(e).forEach(i=>{let n=e[i];Kp[t][i]=Mue(n),Kp[t][i].raw=Rue(n)})});I3.exports=Kp});var C3=v((PTe,x3)=>{var zp=H3(),ji=S3(),$x=[].slice,E3=["keyword","gray","hex"],Lx={};for(let t of Object.keys(ji))Lx[$x.call(ji[t].labels).sort().join("")]=t;var Mb={};function yr(t,e){if(!(this instanceof yr))return new yr(t,e);if(e&&e in E3&&(e=null),e&&!(e in ji))throw new Error("Unknown model: "+e);let r,i;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof yr)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){let n=zp.get(t);if(n===null)throw new Error("Unable to parse color from string: "+t);this.model=n.model,i=ji[this.model].channels,this.color=n.value.slice(0,i),this.valpha=typeof n.value[i]=="number"?n.value[i]:1}else if(t.length>0){this.model=e||"rgb",i=ji[this.model].channels;let n=$x.call(t,0,i);this.color=Tx(n,i),this.valpha=typeof t[i]=="number"?t[i]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;let n=Object.keys(t);"alpha"in t&&(n.splice(n.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);let s=n.sort().join("");if(!(s in Lx))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Lx[s];let o=ji[this.model].labels,a=[];for(r=0;r<o.length;r++)a.push(t[o[r]]);this.color=Tx(a)}if(Mb[this.model])for(i=ji[this.model].channels,r=0;r<i;r++){let n=Mb[this.model][r];n&&(this.color[r]=n(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}yr.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in zp.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);let r=e.valpha===1?e.color:e.color.concat(this.valpha);return zp.to[e.model](r)},percentString(t){let e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:e.color.concat(this.valpha);return zp.to.rgb.percent(r)},array(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object(){let t={},e=ji[this.model].channels,r=ji[this.model].labels;for(let i=0;i<e;i++)t[r[i]]=this.color[i];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){let t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){let t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new yr(this.color.map(Nue(t)).concat(this.valpha),this.model)},alpha(t){return arguments.length>0?new yr(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:Ot("rgb",0,nr(255)),green:Ot("rgb",1,nr(255)),blue:Ot("rgb",2,nr(255)),hue:Ot(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Ot("hsl",1,nr(100)),lightness:Ot("hsl",2,nr(100)),saturationv:Ot("hsv",1,nr(100)),value:Ot("hsv",2,nr(100)),chroma:Ot("hcg",1,nr(100)),gray:Ot("hcg",2,nr(100)),white:Ot("hwb",1,nr(100)),wblack:Ot("hwb",2,nr(100)),cyan:Ot("cmyk",0,nr(100)),magenta:Ot("cmyk",1,nr(100)),yellow:Ot("cmyk",2,nr(100)),black:Ot("cmyk",3,nr(100)),x:Ot("xyz",0,nr(100)),y:Ot("xyz",1,nr(100)),z:Ot("xyz",2,nr(100)),l:Ot("lab",0,nr(100)),a:Ot("lab",1),b:Ot("lab",2),keyword(t){return arguments.length>0?new yr(t):ji[this.model].keyword(this.color)},hex(t){return arguments.length>0?new yr(t):zp.to.hex(this.rgb().round().color)},hexa(t){if(arguments.length>0)return new yr(t);let e=this.rgb().round().color,r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),zp.to.hex(e)+r},rgbNumber(){let t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){let t=this.rgb().color,e=[];for(let[r,i]of t.entries()){let n=i/255;e[r]=n<=.03928?n/12.92:((n+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){let e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level(t){let e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark(){let t=this.rgb().color;return(t[0]*299+t[1]*587+t[2]*114)/1e3<128},isLight(){return!this.isDark()},negate(){let t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){let e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){let e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){let e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){let e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){let e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){let e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){let t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return yr.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){let e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);let r=t.rgb(),i=this.rgb(),n=e===void 0?.5:e,s=2*n-1,o=r.alpha()-i.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,u=1-a;return yr.rgb(a*r.red()+u*i.red(),a*r.green()+u*i.green(),a*r.blue()+u*i.blue(),r.alpha()*n+i.alpha()*(1-n))}};for(let t of Object.keys(ji)){if(E3.includes(t))continue;let e=ji[t].channels;yr.prototype[t]=function(){if(this.model===t)return new yr(this);if(arguments.length>0)return new yr(arguments,t);let r=typeof arguments[e]=="number"?e:this.valpha;return new yr(Fue(ji[this.model][t].raw(this.color)).concat(r),t)},yr[t]=function(r){return typeof r=="number"&&(r=Tx($x.call(arguments),e)),new yr(r,t)}}function Oue(t,e){return Number(t.toFixed(e))}function Nue(t){return function(e){return Oue(e,t)}}function Ot(t,e,r){t=Array.isArray(t)?t:[t];for(let i of t)(Mb[i]||(Mb[i]=[]))[e]=r;return t=t[0],function(i){let n;return arguments.length>0?(r&&(i=r(i)),n=this[t](),n.color[e]=i,n):(n=this[t]().color[e],r&&(n=r(n)),n)}}function nr(t){return function(e){return Math.max(0,Math.min(t,e))}}function Fue(t){return Array.isArray(t)?t:[t]}function Tx(t,e){for(let r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}x3.exports=yr});var IU=v((eMe,AU)=>{"use strict";function yce(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),i="",n=!1,s=r[0]||"text/plain",o=s;for(let l=1;l<r.length;l++)r[l]==="base64"?n=!0:(o+=`;${r[l]}`,r[l].indexOf("charset=")===0&&(i=r[l].substring(8)));!r[0]&&!i.length&&(o+=";charset=US-ASCII",i="US-ASCII");let a=n?"base64":"ascii",u=unescape(t.substring(e+1)),c=Buffer.from(u,a);return c.type=s,c.typeFull=o,c.charset=i,c}AU.exports=yce});var $o=v((To,m0)=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});var SU=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function vce(t){return SU.includes(t)}var bce=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...SU];function wce(t){return bce.includes(t)}var _ce=["null","undefined","string","number","bigint","boolean","symbol"];function Ace(t){return _ce.includes(t)}function sf(t){return e=>typeof e===t}var{toString:EU}=Object.prototype,Jm=t=>{let e=EU.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&x.domElement(t))return"HTMLElement";if(wce(e))return e},pt=t=>e=>Jm(e)===t;function x(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(x.observable(t))return"Observable";if(x.array(t))return"Array";if(x.buffer(t))return"Buffer";let e=Jm(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}x.undefined=sf("undefined");x.string=sf("string");var Ice=sf("number");x.number=t=>Ice(t)&&!x.nan(t);x.bigint=sf("bigint");x.function_=sf("function");x.null_=t=>t===null;x.class_=t=>x.function_(t)&&t.toString().startsWith("class ");x.boolean=t=>t===!0||t===!1;x.symbol=sf("symbol");x.numericString=t=>x.string(t)&&!x.emptyStringOrWhitespace(t)&&!Number.isNaN(Number(t));x.array=(t,e)=>Array.isArray(t)?x.function_(e)?t.every(e):!0:!1;x.buffer=t=>{var e,r,i,n;return(n=(i=(r=(e=t)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.isBuffer)===null||i===void 0?void 0:i.call(r,t))!==null&&n!==void 0?n:!1};x.blob=t=>pt("Blob")(t);x.nullOrUndefined=t=>x.null_(t)||x.undefined(t);x.object=t=>!x.null_(t)&&(typeof t=="object"||x.function_(t));x.iterable=t=>{var e;return x.function_((e=t)===null||e===void 0?void 0:e[Symbol.iterator])};x.asyncIterable=t=>{var e;return x.function_((e=t)===null||e===void 0?void 0:e[Symbol.asyncIterator])};x.generator=t=>{var e,r;return x.iterable(t)&&x.function_((e=t)===null||e===void 0?void 0:e.next)&&x.function_((r=t)===null||r===void 0?void 0:r.throw)};x.asyncGenerator=t=>x.asyncIterable(t)&&x.function_(t.next)&&x.function_(t.throw);x.nativePromise=t=>pt("Promise")(t);var Sce=t=>{var e,r;return x.function_((e=t)===null||e===void 0?void 0:e.then)&&x.function_((r=t)===null||r===void 0?void 0:r.catch)};x.promise=t=>x.nativePromise(t)||Sce(t);x.generatorFunction=pt("GeneratorFunction");x.asyncGeneratorFunction=t=>Jm(t)==="AsyncGeneratorFunction";x.asyncFunction=t=>Jm(t)==="AsyncFunction";x.boundFunction=t=>x.function_(t)&&!t.hasOwnProperty("prototype");x.regExp=pt("RegExp");x.date=pt("Date");x.error=pt("Error");x.map=t=>pt("Map")(t);x.set=t=>pt("Set")(t);x.weakMap=t=>pt("WeakMap")(t);x.weakSet=t=>pt("WeakSet")(t);x.int8Array=pt("Int8Array");x.uint8Array=pt("Uint8Array");x.uint8ClampedArray=pt("Uint8ClampedArray");x.int16Array=pt("Int16Array");x.uint16Array=pt("Uint16Array");x.int32Array=pt("Int32Array");x.uint32Array=pt("Uint32Array");x.float32Array=pt("Float32Array");x.float64Array=pt("Float64Array");x.bigInt64Array=pt("BigInt64Array");x.bigUint64Array=pt("BigUint64Array");x.arrayBuffer=pt("ArrayBuffer");x.sharedArrayBuffer=pt("SharedArrayBuffer");x.dataView=pt("DataView");x.enumCase=(t,e)=>Object.values(e).includes(t);x.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype;x.urlInstance=t=>pt("URL")(t);x.urlString=t=>{if(!x.string(t))return!1;try{return new URL(t),!0}catch{return!1}};x.truthy=t=>Boolean(t);x.falsy=t=>!t;x.nan=t=>Number.isNaN(t);x.primitive=t=>x.null_(t)||Ace(typeof t);x.integer=t=>Number.isInteger(t);x.safeInteger=t=>Number.isSafeInteger(t);x.plainObject=t=>{if(EU.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};x.typedArray=t=>vce(Jm(t));var Ece=t=>x.safeInteger(t)&&t>=0;x.arrayLike=t=>!x.nullOrUndefined(t)&&!x.function_(t)&&Ece(t.length);x.inRange=(t,e)=>{if(x.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(x.array(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};var xce=1,Cce=["innerHTML","ownerDocument","style","attributes","nodeValue"];x.domElement=t=>x.object(t)&&t.nodeType===xce&&x.string(t.nodeName)&&!x.plainObject(t)&&Cce.every(e=>e in t);x.observable=t=>{var e,r,i,n;return t?t===((r=(e=t)[Symbol.observable])===null||r===void 0?void 0:r.call(e))||t===((n=(i=t)["@@observable"])===null||n===void 0?void 0:n.call(i)):!1};x.nodeStream=t=>x.object(t)&&x.function_(t.pipe)&&!x.observable(t);x.infinite=t=>t===1/0||t===-1/0;var xU=t=>e=>x.integer(e)&&Math.abs(e%2)===t;x.evenInteger=xU(0);x.oddInteger=xU(1);x.emptyArray=t=>x.array(t)&&t.length===0;x.nonEmptyArray=t=>x.array(t)&&t.length>0;x.emptyString=t=>x.string(t)&&t.length===0;var Dce=t=>x.string(t)&&!/\S/.test(t);x.emptyStringOrWhitespace=t=>x.emptyString(t)||Dce(t);x.nonEmptyString=t=>x.string(t)&&t.length>0;x.nonEmptyStringAndNotWhitespace=t=>x.string(t)&&!x.emptyStringOrWhitespace(t);x.emptyObject=t=>x.object(t)&&!x.map(t)&&!x.set(t)&&Object.keys(t).length===0;x.nonEmptyObject=t=>x.object(t)&&!x.map(t)&&!x.set(t)&&Object.keys(t).length>0;x.emptySet=t=>x.set(t)&&t.size===0;x.nonEmptySet=t=>x.set(t)&&t.size>0;x.emptyMap=t=>x.map(t)&&t.size===0;x.nonEmptyMap=t=>x.map(t)&&t.size>0;x.propertyKey=t=>x.any([x.string,x.number,x.symbol],t);x.formData=t=>pt("FormData")(t);x.urlSearchParams=t=>pt("URLSearchParams")(t);var CU=(t,e,r)=>{if(!x.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)};x.any=(t,...e)=>(x.array(t)?t:[t]).some(i=>CU(Array.prototype.some,i,e));x.all=(t,...e)=>CU(Array.prototype.every,t,e);var se=(t,e,r,i={})=>{if(!t){let{multipleValues:n}=i,s=n?`received values of types ${[...new Set(r.map(o=>`\`${x(o)}\``))].join(", ")}`:`received value of type \`${x(r)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${s}.`)}};To.assert={undefined:t=>se(x.undefined(t),"undefined",t),string:t=>se(x.string(t),"string",t),number:t=>se(x.number(t),"number",t),bigint:t=>se(x.bigint(t),"bigint",t),function_:t=>se(x.function_(t),"Function",t),null_:t=>se(x.null_(t),"null",t),class_:t=>se(x.class_(t),"Class",t),boolean:t=>se(x.boolean(t),"boolean",t),symbol:t=>se(x.symbol(t),"symbol",t),numericString:t=>se(x.numericString(t),"string with a number",t),array:(t,e)=>{se(x.array(t),"Array",t),e&&t.forEach(e)},buffer:t=>se(x.buffer(t),"Buffer",t),blob:t=>se(x.blob(t),"Blob",t),nullOrUndefined:t=>se(x.nullOrUndefined(t),"null or undefined",t),object:t=>se(x.object(t),"Object",t),iterable:t=>se(x.iterable(t),"Iterable",t),asyncIterable:t=>se(x.asyncIterable(t),"AsyncIterable",t),generator:t=>se(x.generator(t),"Generator",t),asyncGenerator:t=>se(x.asyncGenerator(t),"AsyncGenerator",t),nativePromise:t=>se(x.nativePromise(t),"native Promise",t),promise:t=>se(x.promise(t),"Promise",t),generatorFunction:t=>se(x.generatorFunction(t),"GeneratorFunction",t),asyncGeneratorFunction:t=>se(x.asyncGeneratorFunction(t),"AsyncGeneratorFunction",t),asyncFunction:t=>se(x.asyncFunction(t),"AsyncFunction",t),boundFunction:t=>se(x.boundFunction(t),"Function",t),regExp:t=>se(x.regExp(t),"RegExp",t),date:t=>se(x.date(t),"Date",t),error:t=>se(x.error(t),"Error",t),map:t=>se(x.map(t),"Map",t),set:t=>se(x.set(t),"Set",t),weakMap:t=>se(x.weakMap(t),"WeakMap",t),weakSet:t=>se(x.weakSet(t),"WeakSet",t),int8Array:t=>se(x.int8Array(t),"Int8Array",t),uint8Array:t=>se(x.uint8Array(t),"Uint8Array",t),uint8ClampedArray:t=>se(x.uint8ClampedArray(t),"Uint8ClampedArray",t),int16Array:t=>se(x.int16Array(t),"Int16Array",t),uint16Array:t=>se(x.uint16Array(t),"Uint16Array",t),int32Array:t=>se(x.int32Array(t),"Int32Array",t),uint32Array:t=>se(x.uint32Array(t),"Uint32Array",t),float32Array:t=>se(x.float32Array(t),"Float32Array",t),float64Array:t=>se(x.float64Array(t),"Float64Array",t),bigInt64Array:t=>se(x.bigInt64Array(t),"BigInt64Array",t),bigUint64Array:t=>se(x.bigUint64Array(t),"BigUint64Array",t),arrayBuffer:t=>se(x.arrayBuffer(t),"ArrayBuffer",t),sharedArrayBuffer:t=>se(x.sharedArrayBuffer(t),"SharedArrayBuffer",t),dataView:t=>se(x.dataView(t),"DataView",t),enumCase:(t,e)=>se(x.enumCase(t,e),"EnumCase",t),urlInstance:t=>se(x.urlInstance(t),"URL",t),urlString:t=>se(x.urlString(t),"string with a URL",t),truthy:t=>se(x.truthy(t),"truthy",t),falsy:t=>se(x.falsy(t),"falsy",t),nan:t=>se(x.nan(t),"NaN",t),primitive:t=>se(x.primitive(t),"primitive",t),integer:t=>se(x.integer(t),"integer",t),safeInteger:t=>se(x.safeInteger(t),"integer",t),plainObject:t=>se(x.plainObject(t),"plain object",t),typedArray:t=>se(x.typedArray(t),"TypedArray",t),arrayLike:t=>se(x.arrayLike(t),"array-like",t),domElement:t=>se(x.domElement(t),"HTMLElement",t),observable:t=>se(x.observable(t),"Observable",t),nodeStream:t=>se(x.nodeStream(t),"Node.js Stream",t),infinite:t=>se(x.infinite(t),"infinite number",t),emptyArray:t=>se(x.emptyArray(t),"empty array",t),nonEmptyArray:t=>se(x.nonEmptyArray(t),"non-empty array",t),emptyString:t=>se(x.emptyString(t),"empty string",t),emptyStringOrWhitespace:t=>se(x.emptyStringOrWhitespace(t),"empty string or whitespace",t),nonEmptyString:t=>se(x.nonEmptyString(t),"non-empty string",t),nonEmptyStringAndNotWhitespace:t=>se(x.nonEmptyStringAndNotWhitespace(t),"non-empty string and not whitespace",t),emptyObject:t=>se(x.emptyObject(t),"empty object",t),nonEmptyObject:t=>se(x.nonEmptyObject(t),"non-empty object",t),emptySet:t=>se(x.emptySet(t),"empty set",t),nonEmptySet:t=>se(x.nonEmptySet(t),"non-empty set",t),emptyMap:t=>se(x.emptyMap(t),"empty map",t),nonEmptyMap:t=>se(x.nonEmptyMap(t),"non-empty map",t),propertyKey:t=>se(x.propertyKey(t),"PropertyKey",t),formData:t=>se(x.formData(t),"FormData",t),urlSearchParams:t=>se(x.urlSearchParams(t),"URLSearchParams",t),evenInteger:t=>se(x.evenInteger(t),"even integer",t),oddInteger:t=>se(x.oddInteger(t),"odd integer",t),directInstanceOf:(t,e)=>se(x.directInstanceOf(t,e),"T",t),inRange:(t,e)=>se(x.inRange(t,e),"in range",t),any:(t,...e)=>se(x.any(t,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(t,...e)=>se(x.all(t,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(x,{class:{value:x.class_},function:{value:x.function_},null:{value:x.null_}});Object.defineProperties(To.assert,{class:{value:To.assert.class_},function:{value:To.assert.function_},null:{value:To.assert.null_}});To.default=x;m0.exports=x;m0.exports.default=x;m0.exports.assert=To.assert});var DU=v((tMe,hC)=>{"use strict";var g0=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},of=class{static fn(e){return(...r)=>new of((i,n,s)=>{r.push(s),e(...r).then(i,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,i)=>{this._reject=i;let n=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},s=a=>{this._isPending=!1,i(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(n,s,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new g0(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(of.prototype,Promise.prototype);hC.exports=of;hC.exports.CancelError=g0});var PU=v((gC,HC)=>{"use strict";Object.defineProperty(gC,"__esModule",{value:!0});function Pce(t){return t.encrypted}var mC=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let i=typeof r.connect=="function",n=typeof r.secureConnect=="function",s=typeof r.close=="function",o=()=>{i&&r.connect(),Pce(t)&&n&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),s&&t.once("close",r.close)};t.writable&&!t.connecting?o():t.connecting?t.once("connect",o):t.destroyed&&s&&r.close(t._hadError)};gC.default=mC;HC.exports=mC;HC.exports.default=mC});var LU=v((vC,bC)=>{"use strict";Object.defineProperty(vC,"__esModule",{value:!0});var Lce=PU(),Tce=require("util"),$ce=Number(process.versions.node.split(".")[0]),yC=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=a=>{let u=a.emit.bind(a);a.emit=(c,...l)=>(c==="error"&&(e.error=Date.now(),e.phases.total=e.error-e.start,a.emit=u),u(c,...l))};r(t);let i=()=>{e.abort=Date.now(),(!e.response||$ce>=13)&&(e.phases.total=Date.now()-e.start)};t.prependOnceListener("abort",i);let n=a=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,Tce.types.isProxy(a))return;let u=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};a.prependOnceListener("lookup",u),Lce.default(a,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(a.removeListener("lookup",u),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?n(t.socket):t.prependOnceListener("socket",n);let s=()=>{var a;e.upload=Date.now(),e.phases.request=e.upload-((a=e.secureConnect)!==null&&a!==void 0?a:e.connect)};return(()=>typeof t.writableFinished=="boolean"?t.writableFinished:t.finished&&t.outputSize===0&&(!t.socket||t.socket.writableLength===0))()?s():t.prependOnceListener("finish",s),t.prependOnceListener("response",a=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,a.timings=e,r(a),a.prependOnceListener("end",()=>{e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start}),a.prependOnceListener("aborted",i)}),e};vC.default=yC;bC.exports=yC;bC.exports.default=yC});var NU=v((rMe,AC)=>{"use strict";var{V4MAPPED:kce,ADDRCONFIG:Rce,ALL:OU,promises:{Resolver:TU},lookup:Mce}=require("dns"),{promisify:wC}=require("util"),Oce=require("os"),af=Symbol("cacheableLookupCreateConnection"),_C=Symbol("cacheableLookupInstance"),$U=Symbol("expires"),Nce=typeof OU=="number",kU=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},Fce=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},RU=()=>{let t=!1,e=!1;for(let r of Object.values(Oce.networkInterfaces()))for(let i of r)if(!i.internal&&(i.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},Bce=t=>Symbol.iterator in t,MU={ttl:!0},Uce={all:!0},H0=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:i=3600,errorTtl:n=.15,resolver:s=new TU,lookup:o=Mce}={}){if(this.maxTtl=r,this.errorTtl=n,this._cache=e,this._resolver=s,this._dnsLookup=wC(o),this._resolver instanceof TU?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=wC(this._resolver.resolve4.bind(this._resolver)),this._resolve6=wC(this._resolver.resolve6.bind(this._resolver))),this._iface=RU(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,i<1)this._fallback=!1;else{this._fallback=!0;let a=setInterval(()=>{this._hostnamesToFallback.clear()},i*1e3);a.unref&&a.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,i){if(typeof r=="function"?(i=r,r={}):typeof r=="number"&&(r={family:r}),!i)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(n=>{r.all?i(null,n):i(null,n.address,n.family,n.expires,n.ttl)},i)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let i=await this.query(e);if(r.family===6){let n=i.filter(s=>s.family===6);r.hints&kce&&(Nce&&r.hints&OU||n.length===0)?Fce(i):i=n}else r.family===4&&(i=i.filter(n=>n.family===4));if(r.hints&Rce){let{_iface:n}=this;i=i.filter(s=>s.family===6?n.has6:n.has4)}if(i.length===0){let n=new Error(`cacheableLookup ENOTFOUND ${e}`);throw n.code="ENOTFOUND",n.hostname=e,n}return r.all?i:i[0]}async query(e){let r=await this._cache.get(e);if(!r){let i=this._pending[e];if(i)r=await i;else{let n=this.queryAndCache(e);this._pending[e]=n;try{r=await n}finally{delete this._pending[e]}}}return r=r.map(i=>({...i})),r}async _resolve(e){let r=async c=>{try{return await c}catch(l){if(l.code==="ENODATA"||l.code==="ENOTFOUND")return[];throw l}},[i,n]=await Promise.all([this._resolve4(e,MU),this._resolve6(e,MU)].map(c=>r(c))),s=0,o=0,a=0,u=Date.now();for(let c of i)c.family=4,c.expires=u+c.ttl*1e3,s=Math.max(s,c.ttl);for(let c of n)c.family=6,c.expires=u+c.ttl*1e3,o=Math.max(o,c.ttl);return i.length>0?n.length>0?a=Math.min(s,o):a=s:a=o,{entries:[...i,...n],cacheTtl:a}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,i){if(this.maxTtl>0&&i>0){i=Math.min(i,this.maxTtl)*1e3,r[$U]=Date.now()+i;try{await this._cache.set(e,r,i)}catch(n){this.lookupAsync=async()=>{let s=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw s.cause=n,s}}Bce(this._cache)&&this._tick(i)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,Uce);let r=await this._resolve(e);r.entries.length===0&&this._fallback&&(r=await this._lookup(e),r.entries.length!==0&&this._hostnamesToFallback.add(e));let i=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,i),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let i=1/0,n=Date.now();for(let[s,o]of this._cache){let a=o[$U];n>=a?this._cache.delete(s):a<i&&(i=a)}i!==1/0&&this._tick(i-n)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(kU(e),af in e)throw new Error("CacheableLookup has been already installed");e[af]=e.createConnection,e[_C]=this,e.createConnection=(r,i)=>("lookup"in r||(r.lookup=this.lookup),e[af](r,i))}uninstall(e){if(kU(e),e[af]){if(e[_C]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[af],delete e[af],delete e[_C]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=RU(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};AC.exports=H0;AC.exports.default=H0});var UU=v((iMe,BU)=>{"use strict";var jce="text/plain",qce="us-ascii",FU=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),Wce=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:i,data:n,hash:s}=r.groups,o=i.split(";");s=e?"":s;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let u=(o.shift()||"").toLowerCase(),l=[...o.map(p=>{let[f,h=""]=p.split("=").map(g=>g.trim());return f==="charset"&&(h=h.toLowerCase(),h===qce)?"":`${f}${h?`=${h}`:""}`}).filter(Boolean)];return a&&l.push("base64"),(l.length!==0||u&&u!==jce)&&l.unshift(u),`data:${l.join(";")},${a?n.trim():n}${s?`#${s}`:""}`},Vce=(t,e)=>{if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return Wce(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let n=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),e.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),e.stripAuthentication&&(n.username="",n.password=""),e.stripHash?n.hash="":e.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname&&(n.pathname=n.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let o=n.pathname.split("/"),a=o[o.length-1];FU(a,e.removeDirectoryIndex)&&(o=o.slice(0,o.length-1),n.pathname=o.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let o of[...n.searchParams.keys()])FU(o,e.removeQueryParameters)&&n.searchParams.delete(o);e.removeQueryParameters===!0&&(n.search=""),e.sortQueryParameters&&n.searchParams.sort(),e.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));let s=t;return t=n.toString(),!e.removeSingleSlash&&n.pathname==="/"&&!s.endsWith("/")&&n.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t};BU.exports=Vce});var IC=v((nMe,qU)=>{qU.exports=jU;function jU(t,e){if(t&&e)return jU(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(i){r[i]=t[i]}),r;function r(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];var s=t.apply(this,i),o=i[i.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(a){s[a]=o[a]}),s}}});var uf=v((sMe,SC)=>{var WU=IC();SC.exports=WU(y0);SC.exports.strict=WU(VU);y0.proto=y0(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return y0(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return VU(this)},configurable:!0})});function y0(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function VU(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var v0=v((oMe,KU)=>{var Gce=uf(),Kce=function(){},zce=function(t){return t.setHeader&&typeof t.abort=="function"},Xce=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},GU=function(t,e,r){if(typeof e=="function")return GU(t,null,e);e||(e={}),r=Gce(r||Kce);var i=t._writableState,n=t._readableState,s=e.readable||e.readable!==!1&&t.readable,o=e.writable||e.writable!==!1&&t.writable,a=!1,u=function(){t.writable||c()},c=function(){o=!1,s||r.call(t)},l=function(){s=!1,o||r.call(t)},p=function(b){r.call(t,b?new Error("exited with error code: "+b):null)},f=function(b){r.call(t,b)},h=function(){process.nextTick(g)},g=function(){if(!a){if(s&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"));if(o&&!(i&&i.ended&&!i.destroyed))return r.call(t,new Error("premature close"))}},H=function(){t.req.on("finish",c)};return zce(t)?(t.on("complete",c),t.on("abort",h),t.req?H():t.on("request",H)):o&&!i&&(t.on("end",u),t.on("close",u)),Xce(t)&&t.on("exit",p),t.on("end",l),t.on("finish",c),e.error!==!1&&t.on("error",f),t.on("close",h),function(){a=!0,t.removeListener("complete",c),t.removeListener("abort",h),t.removeListener("request",H),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("exit",p),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",h)}};KU.exports=GU});var JU=v((aMe,XU)=>{var Jce=uf(),Yce=v0(),EC=require("fs"),Ym=function(){},Qce=/^v?\.0/.test(process.version),b0=function(t){return typeof t=="function"},Zce=function(t){return!Qce||!EC?!1:(t instanceof(EC.ReadStream||Ym)||t instanceof(EC.WriteStream||Ym))&&b0(t.close)},ele=function(t){return t.setHeader&&b0(t.abort)},tle=function(t,e,r,i){i=Jce(i);var n=!1;t.on("close",function(){n=!0}),Yce(t,{readable:e,writable:r},function(o){if(o)return i(o);n=!0,i()});var s=!1;return function(o){if(!n&&!s){if(s=!0,Zce(t))return t.close(Ym);if(ele(t))return t.abort();if(b0(t.destroy))return t.destroy();i(o||new Error("stream was destroyed"))}}},zU=function(t){t()},rle=function(t,e){return t.pipe(e)},ile=function(){var t=Array.prototype.slice.call(arguments),e=b0(t[t.length-1]||Ym)&&t.pop()||Ym;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,i=t.map(function(n,s){var o=s<t.length-1,a=s>0;return tle(n,o,a,function(u){r||(r=u),u&&i.forEach(zU),!o&&(i.forEach(zU),e(r))})});return t.reduce(rle)};XU.exports=ile});var QU=v((uMe,YU)=>{"use strict";var{PassThrough:nle}=require("stream");YU.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,i=r==="buffer",n=!1;e?n=!(r||i):r=r||"utf8",i&&(r=null);let s=new nle({objectMode:n});r&&s.setEncoding(r);let o=0,a=[];return s.on("data",u=>{a.push(u),n?o=a.length:o+=u.length}),s.getBufferedValue=()=>e?a:i?Buffer.concat(a,o):a.join(""),s.getBufferedLength=()=>o,s}});var ZU=v((cMe,cf)=>{"use strict";var{constants:sle}=require("buffer"),ole=JU(),ale=QU(),w0=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function _0(t,e){if(!t)return Promise.reject(new Error("Expected a stream"));e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,i;return await new Promise((n,s)=>{let o=a=>{a&&i.getBufferedLength()<=sle.MAX_LENGTH&&(a.bufferedData=i.getBufferedValue()),s(a)};i=ole(t,ale(e),a=>{if(a){o(a);return}n()}),i.on("data",()=>{i.getBufferedLength()>r&&o(new w0)})}),i.getBufferedValue()}cf.exports=_0;cf.exports.default=_0;cf.exports.buffer=(t,e)=>_0(t,{...e,encoding:"buffer"});cf.exports.array=(t,e)=>_0(t,{...e,array:!0});cf.exports.MaxBufferError=w0});var tj=v((pMe,ej)=>{"use strict";var ule=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),cle=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),lle=new Set([500,502,503,504]),ple={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},fle={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Nc(t){let e=parseInt(t,10);return isFinite(e)?e:0}function dle(t){return t?lle.has(t.status):!0}function xC(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let i of r){let[n,s]=i.split(/=/,2);e[n.trim()]=s===void 0?!0:s.trim().replace(/^"|"$/g,"")}return e}function hle(t){let e=[];for(let r in t){let i=t[r];e.push(i===!0?r:r+"="+i)}if(e.length)return e.join(", ")}ej.exports=class{constructor(e,r,{shared:i,cacheHeuristic:n,immutableMinTimeToLive:s,ignoreCargoCult:o,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=i!==!1,this._cacheHeuristic=n!==void 0?n:.1,this._immutableMinTtl=s!==void 0?s:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=xC(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=xC(e.headers["cache-control"]),o&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":hle(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&cle.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||ule.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=xC(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let i of r)if(e.headers[i]!==this._reqHeaders[i])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let i in e)ple[i]||(r[i]=e[i]);if(e.connection){let i=e.connection.trim().split(/\s*,\s*/);for(let n of i)delete r[n]}if(r.warning){let i=r.warning.split(/,/).filter(n=>!/^\s*1[0-9][0-9]/.test(n));i.length?r.warning=i.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return Nc(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Nc(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Nc(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let i=Date.parse(this._resHeaders.expires);return Number.isNaN(i)||i<r?0:Math.max(e,(i-r)/1e3)}if(this._resHeaders["last-modified"]){let i=Date.parse(this._resHeaders["last-modified"]);if(isFinite(i)&&r>i)return Math.max(e,(r-i)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+Nc(this._rescc["stale-if-error"]),i=e+Nc(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,i)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Nc(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Nc(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let n=r["if-none-match"].split(/,/).filter(s=>!/^\s*W\//.test(s));n.length?r["if-none-match"]=n.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&dle(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let i=!1;if(r.status!==void 0&&r.status!=304?i=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?i=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?i=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?i=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(i=!0),!i)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let n={};for(let o in this._resHeaders)n[o]=o in r.headers&&!fle[o]?r.headers[o]:this._resHeaders[o];let s=Object.assign({},r,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(e,s,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var A0=v((fMe,rj)=>{"use strict";rj.exports=t=>{let e={};for(let[r,i]of Object.entries(t))e[r.toLowerCase()]=i;return e}});var nj=v((dMe,ij)=>{"use strict";var mle=require("stream").Readable,gle=A0(),CC=class extends mle{constructor(e,r,i,n){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(i instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof n!="string")throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=gle(r),this.body=i,this.url=n}_read(){this.push(this.body),this.push(null)}};ij.exports=CC});var oj=v((hMe,sj)=>{"use strict";var Hle=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];sj.exports=(t,e)=>{let r=new Set(Object.keys(t).concat(Hle));for(let i of r)i in e||(e[i]=typeof t[i]=="function"?t[i].bind(t):t[i])}});var uj=v((mMe,aj)=>{"use strict";var yle=require("stream").PassThrough,vle=oj(),ble=t=>{if(!(t&&t.pipe))throw new TypeError("Parameter `response` must be a response stream.");let e=new yle;return vle(t,e),t.pipe(e)};aj.exports=ble});var cj=v(DC=>{DC.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",i=Array.isArray(e);r=i?"[":"{";var n=!0;for(var s in e){var o=typeof e[s]=="function"||!i&&typeof e[s]>"u";Object.hasOwnProperty.call(e,s)&&!o&&(n||(r+=","),n=!1,i?e[s]==null?r+="null":r+=t(e[s]):e[s]!==void 0&&(r+=t(s)+":"+t(e[s])))}return r+=i?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};DC.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var dj=v((HMe,fj)=>{"use strict";var wle=require("events"),lj=cj(),_le=t=>{let e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(t.adapter||t.uri){let r=t.adapter||/^[^:+]*/.exec(t.uri)[0];return new(require(e[r]))(t)}return new Map},pj=["sqlite","postgres","mysql","mongo","redis","tiered"],PC=class extends wle{constructor(e,{emitErrors:r=!0,...i}={}){if(super(),this.opts={namespace:"keyv",serialize:lj.stringify,deserialize:lj.parse,...typeof e=="string"?{uri:e}:e,...i},!this.opts.store){let s={...this.opts};this.opts.store=_le(s)}if(this.opts.compression){let s=this.opts.compression;this.opts.serialize=s.serialize.bind(s),this.opts.deserialize=s.deserialize.bind(s)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",s=>this.emit("error",s)),this.opts.store.namespace=this.opts.namespace;let n=s=>async function*(){for await(let[o,a]of typeof s=="function"?s(this.opts.store.namespace):s){let u=this.opts.deserialize(a);if(!(this.opts.store.namespace&&!o.includes(this.opts.store.namespace))){if(typeof u.expires=="number"&&Date.now()>u.expires){this.delete(o);continue}yield[this._getKeyUnprefix(o),u.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=n(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=n(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return pj.includes(this.opts.store.opts.dialect)||pj.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,r){let{store:i}=this.opts,n=Array.isArray(e),s=n?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(n&&i.getMany===void 0){let o=[];for(let a of s)o.push(Promise.resolve().then(()=>i.get(a)).then(u=>typeof u=="string"?this.opts.deserialize(u):this.opts.compression?this.opts.deserialize(u):u).then(u=>{if(u!=null)return typeof u.expires=="number"&&Date.now()>u.expires?this.delete(a).then(()=>{}):r&&r.raw?u:u.value}));return Promise.allSettled(o).then(a=>{let u=[];for(let c of a)u.push(c.value);return u})}return Promise.resolve().then(()=>n?i.getMany(s):i.get(s)).then(o=>typeof o=="string"?this.opts.deserialize(o):this.opts.compression?this.opts.deserialize(o):o).then(o=>{if(o!=null){if(n){let a=[];for(let u of o){if(typeof u=="string"&&(u=this.opts.deserialize(u)),u==null){a.push(void 0);continue}typeof u.expires=="number"&&Date.now()>u.expires?(this.delete(e).then(()=>{}),a.push(void 0)):a.push(r&&r.raw?u:u.value)}return a}return typeof o.expires=="number"&&Date.now()>o.expires?this.delete(e).then(()=>{}):r&&r.raw?o:o.value}})}set(e,r,i){let n=this._getKeyPrefix(e);typeof i>"u"&&(i=this.opts.ttl),i===0&&(i=void 0);let{store:s}=this.opts;return Promise.resolve().then(()=>{let o=typeof i=="number"?Date.now()+i:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:o},this.opts.serialize(r)}).then(o=>s.set(n,o,i)).then(()=>!0)}delete(e){let{store:r}=this.opts;if(Array.isArray(e)){let n=this._getKeyPrefixArray(e);if(r.deleteMany===void 0){let s=[];for(let o of n)s.push(r.delete(o));return Promise.allSettled(s).then(o=>o.every(a=>a.value===!0))}return Promise.resolve().then(()=>r.deleteMany(n))}let i=this._getKeyPrefix(e);return Promise.resolve().then(()=>r.delete(i))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let r=this._getKeyPrefix(e),{store:i}=this.opts;return Promise.resolve().then(async()=>typeof i.has=="function"?i.has(r):await i.get(r)!==void 0)}disconnect(){let{store:e}=this.opts;if(typeof e.disconnect=="function")return e.disconnect()}};fj.exports=PC});var gj=v((yMe,mj)=>{"use strict";var Ale=require("events"),I0=require("url"),Ile=UU(),Sle=ZU(),LC=tj(),hj=nj(),Ele=A0(),xle=uj(),Cle=dj(),Gn=class{constructor(e,r){if(typeof e!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new Cle({uri:typeof r=="string"&&r,store:typeof r!="string"&&r,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(r,i)=>{let n;if(typeof r=="string")n=TC(I0.parse(r)),r={};else if(r instanceof I0.URL)n=TC(I0.parse(r.toString())),r={};else{let[p,...f]=(r.path||"").split("?"),h=f.length>0?`?${f.join("?")}`:"";n=TC({...r,pathname:p,search:h})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...Dle(n)},r.headers=Ele(r.headers);let s=new Ale,o=Ile(I0.format(n),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${o}`,u=!1,c=!1,l=p=>{c=!0;let f=!1,h,g=new Promise(b=>{h=()=>{f||(f=!0,b())}}),H=b=>{if(u&&!p.forceRefresh){b.status=b.statusCode;let k=LC.fromObject(u.cachePolicy).revalidatedPolicy(p,b);if(!k.modified){let U=k.policy.responseHeaders();b=new hj(u.statusCode,U,u.body,u.url),b.cachePolicy=k.policy,b.fromCache=!0}}b.fromCache||(b.cachePolicy=new LC(p,b,p),b.fromCache=!1);let _;p.cache&&b.cachePolicy.storable()?(_=xle(b),(async()=>{try{let k=Sle.buffer(b);if(await Promise.race([g,new Promise(q=>b.once("end",q))]),f)return;let U=await k,C={cachePolicy:b.cachePolicy.toObject(),url:b.url,statusCode:b.fromCache?u.statusCode:b.statusCode,body:U},L=p.strictTtl?b.cachePolicy.timeToLive():void 0;p.maxTtl&&(L=L?Math.min(L,p.maxTtl):p.maxTtl),await this.cache.set(a,C,L)}catch(k){s.emit("error",new Gn.CacheError(k))}})()):p.cache&&u&&(async()=>{try{await this.cache.delete(a)}catch(k){s.emit("error",new Gn.CacheError(k))}})(),s.emit("response",_||b),typeof i=="function"&&i(_||b)};try{let b=e(p,H);b.once("error",h),b.once("abort",h),s.emit("request",b)}catch(b){s.emit("error",new Gn.RequestError(b))}};return(async()=>{let p=async h=>{await Promise.resolve();let g=h.cache?await this.cache.get(a):void 0;if(typeof g>"u")return l(h);let H=LC.fromObject(g.cachePolicy);if(H.satisfiesWithoutRevalidation(h)&&!h.forceRefresh){let b=H.responseHeaders(),_=new hj(g.statusCode,b,g.body,g.url);_.cachePolicy=H,_.fromCache=!0,s.emit("response",_),typeof i=="function"&&i(_)}else u=g,h.headers=H.revalidationHeaders(h),l(h)},f=h=>s.emit("error",new Gn.CacheError(h));this.cache.once("error",f),s.on("response",()=>this.cache.removeListener("error",f));try{await p(r)}catch(h){r.automaticFailover&&!c&&l(r),s.emit("error",new Gn.CacheError(h))}})(),s}}};function Dle(t){let e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e}function TC(t){return{protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}}Gn.RequestError=class extends Error{constructor(t){super(t.message),this.name="RequestError",Object.assign(this,t)}};Gn.CacheError=class extends Error{constructor(t){super(t.message),this.name="CacheError",Object.assign(this,t)}};mj.exports=Gn});var yj=v((wMe,Hj)=>{"use strict";var Ple=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];Hj.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(Ple)),i={};for(let n of r)n in e||(i[n]={get(){let s=t[n];return typeof s=="function"?s.bind(t):s},set(s){t[n]=s},enumerable:!0,configurable:!1});return Object.defineProperties(e,i),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var bj=v((_Me,vj)=>{"use strict";var{Transform:Lle,PassThrough:Tle}=require("stream"),$C=require("zlib"),$le=yj();vj.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof $C.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let i=!0,n=new Lle({transform(a,u,c){i=!1,c(null,a)},flush(a){a()}}),s=new Tle({autoDestroy:!1,destroy(a,u){t.destroy(),u(a)}}),o=r?$C.createBrotliDecompress():$C.createUnzip();return o.once("error",a=>{if(i&&!t.readable){s.end();return}s.destroy(a)}),$le(t,s),t.pipe(n).pipe(o).pipe(s),s}});var RC=v((AMe,wj)=>{"use strict";var kC=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[i,n]of this.oldCache.entries())this.onEviction(i,n);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};wj.exports=kC});var OC=v((IMe,Sj)=>{"use strict";var kle=require("events"),Rle=require("tls"),Mle=require("http2"),Ole=RC(),ui=Symbol("currentStreamsCount"),_j=Symbol("request"),Hn=Symbol("cachedOriginSet"),lf=Symbol("gracefullyClosing"),Nle=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],Fle=(t,e,r)=>{let i=0,n=t.length;for(;i<n;){let s=i+n>>>1;r(t[s],e)?i=s+1:n=s}return i},Ble=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,MC=(t,e)=>{for(let r of t)r[Hn].length<e[Hn].length&&r[Hn].every(i=>e[Hn].includes(i))&&r[ui]+e[ui]<=e.remoteSettings.maxConcurrentStreams&&Ij(r)},Ule=(t,e)=>{for(let r of t)e[Hn].length<r[Hn].length&&e[Hn].every(i=>r[Hn].includes(i))&&e[ui]+r[ui]<=r.remoteSettings.maxConcurrentStreams&&Ij(e)},Aj=({agent:t,isFree:e})=>{let r={};for(let i in t.sessions){let s=t.sessions[i].filter(o=>{let a=o[Ks.kCurrentStreamsCount]<o.remoteSettings.maxConcurrentStreams;return e?a:!a});s.length!==0&&(r[i]=s)}return r},Ij=t=>{t[lf]=!0,t[ui]===0&&t.close()},Ks=class extends kle{constructor({timeout:e=6e4,maxSessions:r=1/0,maxFreeSessions:i=10,maxCachedTlsSessions:n=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxFreeSessions=i,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new Ole({maxSize:n})}static normalizeOrigin(e,r){return typeof e=="string"&&(e=new URL(e)),r&&e.hostname!==r&&(e.hostname=r),e.origin}normalizeOptions(e){let r="";if(e)for(let i of Nle)e[i]&&(r+=`:${e[i]}`);return r}_tryToCreateNewSession(e,r){if(!(e in this.queue)||!(r in this.queue[e]))return;let i=this.queue[e][r];this._sessionsCount<this.maxSessions&&!i.completed&&(i.completed=!0,i())}getSession(e,r,i){return new Promise((n,s)=>{Array.isArray(i)?(i=[...i],n()):i=[{resolve:n,reject:s}];let o=this.normalizeOptions(r),a=Ks.normalizeOrigin(e,r&&r.servername);if(a===void 0){for(let{reject:l}of i)l(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(o in this.sessions){let l=this.sessions[o],p=-1,f=-1,h;for(let g of l){let H=g.remoteSettings.maxConcurrentStreams;if(H<p)break;if(g[Hn].includes(a)){let b=g[ui];if(b>=H||g[lf]||g.destroyed)continue;h||(p=H),b>f&&(h=g,f=b)}}if(h){if(i.length!==1){for(let{reject:g}of i){let H=new Error(`Expected the length of listeners to be 1, got ${i.length}.
Please report this to https://github.com/szmarczak/http2-wrapper/`);g(H)}return}i[0].resolve(h);return}}if(o in this.queue){if(a in this.queue[o]){this.queue[o][a].listeners.push(...i),this._tryToCreateNewSession(o,a);return}}else this.queue[o]={};let u=()=>{o in this.queue&&this.queue[o][a]===c&&(delete this.queue[o][a],Object.keys(this.queue[o]).length===0&&delete this.queue[o])},c=()=>{let l=`${a}:${o}`,p=!1;try{let f=Mle.connect(e,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(l),...r});f[ui]=0,f[lf]=!1;let h=()=>f[ui]<f.remoteSettings.maxConcurrentStreams,g=!0;f.socket.once("session",b=>{this.tlsSessionCache.set(l,b)}),f.once("error",b=>{for(let{reject:_}of i)_(b);this.tlsSessionCache.delete(l)}),f.setTimeout(this.timeout,()=>{f.destroy()}),f.once("close",()=>{if(p){g&&this._freeSessionsCount--,this._sessionsCount--;let b=this.sessions[o];b.splice(b.indexOf(f),1),b.length===0&&delete this.sessions[o]}else{let b=new Error("Session closed without receiving a SETTINGS frame");b.code="HTTP2WRAPPER_NOSETTINGS";for(let{reject:_}of i)_(b);u()}this._tryToCreateNewSession(o,a)});let H=()=>{if(!(!(o in this.queue)||!h())){for(let b of f[Hn])if(b in this.queue[o]){let{listeners:_}=this.queue[o][b];for(;_.length!==0&&h();)_.shift().resolve(f);let k=this.queue[o];if(k[b].listeners.length===0&&(delete k[b],Object.keys(k).length===0)){delete this.queue[o];break}if(!h())break}}};f.on("origin",()=>{f[Hn]=f.originSet,h()&&(H(),MC(this.sessions[o],f))}),f.once("remoteSettings",()=>{if(f.ref(),f.unref(),this._sessionsCount++,c.destroyed){let b=new Error("Agent has been destroyed");for(let _ of i)_.reject(b);f.destroy();return}f[Hn]=f.originSet;{let b=this.sessions;if(o in b){let _=b[o];_.splice(Fle(_,f,Ble),0,f)}else b[o]=[f]}this._freeSessionsCount+=1,p=!0,this.emit("session",f),H(),u(),f[ui]===0&&this._freeSessionsCount>this.maxFreeSessions&&f.close(),i.length!==0&&(this.getSession(a,r,i),i.length=0),f.on("remoteSettings",()=>{H(),MC(this.sessions[o],f)})}),f[_j]=f.request,f.request=(b,_)=>{if(f[lf])throw new Error("The session is gracefully closing. No new streams are allowed.");let k=f[_j](b,_);return f.ref(),++f[ui],f[ui]===f.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,k.once("close",()=>{if(g=h(),--f[ui],!f.destroyed&&!f.closed&&(Ule(this.sessions[o],f),h()&&!f.closed)){g||(this._freeSessionsCount++,g=!0);let U=f[ui]===0;U&&f.unref(),U&&(this._freeSessionsCount>this.maxFreeSessions||f[lf])?f.close():(MC(this.sessions[o],f),H())}}),k}}catch(f){for(let h of i)h.reject(f);u()}};c.listeners=i,c.completed=!1,c.destroyed=!1,this.queue[o][a]=c,this._tryToCreateNewSession(o,a)})}request(e,r,i,n){return new Promise((s,o)=>{this.getSession(e,r,[{reject:o,resolve:a=>{try{s(a.request(i,n))}catch(u){o(u)}}}])})}createConnection(e,r){return Ks.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let i=e.port||443,n=e.hostname||e.host;return typeof r.servername>"u"&&(r.servername=n),Rle.connect(i,n,r)}closeFreeSessions(){for(let e of Object.values(this.sessions))for(let r of e)r[ui]===0&&r.close()}destroy(e){for(let r of Object.values(this.sessions))for(let i of r)i.destroy(e);for(let r of Object.values(this.queue))for(let i of Object.values(r))i.destroyed=!0;this.queue={}}get freeSessions(){return Aj({agent:this,isFree:!0})}get busySessions(){return Aj({agent:this,isFree:!1})}};Ks.kCurrentStreamsCount=ui;Ks.kGracefullyClosing=lf;Sj.exports={Agent:Ks,globalAgent:new Ks}});var FC=v((SMe,Ej)=>{"use strict";var{Readable:jle}=require("stream"),NC=class extends jle{constructor(e,r){super({highWaterMark:r,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};Ej.exports=NC});var BC=v((EMe,xj)=>{"use strict";xj.exports=t=>{let e={protocol:t.protocol,hostname:typeof t.hostname=="string"&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return typeof t.port=="string"&&t.port.length!==0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var Dj=v((xMe,Cj)=>{"use strict";Cj.exports=(t,e,r)=>{for(let i of r)t.on(i,(...n)=>e.emit(i,...n))}});var Lj=v((CMe,Pj)=>{"use strict";Pj.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var $j=v((PMe,Tj)=>{"use strict";var pf=(t,e,r)=>{Tj.exports[e]=class extends t{constructor(...n){super(typeof r=="string"?r:r(n)),this.name=`${super.name} [${e}]`,this.code=e}}};pf(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],i=Array.isArray(r);return i&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${i?"one of":"of"} type ${r}. Received ${typeof t[2]}`});pf(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);pf(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);pf(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);pf(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);pf(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`)});var VC=v((LMe,Bj)=>{"use strict";var qle=require("http2"),{Writable:Wle}=require("stream"),{Agent:kj,globalAgent:Vle}=OC(),Gle=FC(),Kle=BC(),zle=Dj(),Xle=Lj(),{ERR_INVALID_ARG_TYPE:UC,ERR_INVALID_PROTOCOL:Jle,ERR_HTTP_HEADERS_SENT:Rj,ERR_INVALID_HTTP_TOKEN:Yle,ERR_HTTP_INVALID_HEADER_VALUE:Qle,ERR_INVALID_CHAR:Zle}=$j(),{HTTP2_HEADER_STATUS:Mj,HTTP2_HEADER_METHOD:Oj,HTTP2_HEADER_PATH:Nj,HTTP2_METHOD_CONNECT:epe}=qle.constants,Xr=Symbol("headers"),jC=Symbol("origin"),qC=Symbol("session"),Fj=Symbol("options"),S0=Symbol("flushedHeaders"),Qm=Symbol("jobs"),tpe=/^[\^`\-\w!#$%&*+.|~]+$/,rpe=/[^\t\u0020-\u007E\u0080-\u00FF]/,WC=class extends Wle{constructor(e,r,i){super({autoDestroy:!1});let n=typeof e=="string"||e instanceof URL;if(n&&(e=Kle(e instanceof URL?e:new URL(e))),typeof r=="function"||r===void 0?(i=r,r=n?e:{...e}):r={...e,...r},r.h2session)this[qC]=r.h2session;else if(r.agent===!1)this.agent=new kj({maxFreeSessions:0});else if(typeof r.agent>"u"||r.agent===null)typeof r.createConnection=="function"?(this.agent=new kj({maxFreeSessions:0}),this.agent.createConnection=r.createConnection):this.agent=Vle;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new UC("options.agent",["Agent-like Object","undefined","false"],r.agent);if(r.protocol&&r.protocol!=="https:")throw new Jle(r.protocol,"https:");let s=r.port||r.defaultPort||this.agent&&this.agent.defaultPort||443,o=r.hostname||r.host||"localhost";delete r.hostname,delete r.host,delete r.port;let{timeout:a}=r;if(r.timeout=void 0,this[Xr]=Object.create(null),this[Qm]=[],this.socket=null,this.connection=null,this.method=r.method||"GET",this.path=r.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,r.headers)for(let[u,c]of Object.entries(r.headers))this.setHeader(u,c);r.auth&&!("authorization"in this[Xr])&&(this[Xr].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[Fj]=r,s===443?(this[jC]=`https://${o}`,":authority"in this[Xr]||(this[Xr][":authority"]=o)):(this[jC]=`https://${o}:${s}`,":authority"in this[Xr]||(this[Xr][":authority"]=`${o}:${s}`)),a&&this.setTimeout(a),i&&this.once("response",i),this[S0]=!1}get method(){return this[Xr][Oj]}set method(e){e&&(this[Xr][Oj]=e.toUpperCase())}get path(){return this[Xr][Nj]}set path(e){e&&(this[Xr][Nj]=e)}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,i){if(this._mustNotHaveABody){i(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let n=()=>this._request.write(e,r,i);this._request?n():this[Qm].push(n)}_final(e){if(this.destroyed)return;this.flushHeaders();let r=()=>{if(this._mustNotHaveABody){e();return}this._request.end(e)};this._request?r():this[Qm].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(e,r){this.res&&this.res._dump(),this._request&&this._request.destroy(),r(e)}async flushHeaders(){if(this[S0]||this.destroyed)return;this[S0]=!0;let e=this.method===epe,r=i=>{if(this._request=i,this.destroyed){i.destroy();return}e||zle(i,this,["timeout","continue","close","error"]);let n=o=>(...a)=>{!this.writable&&!this.destroyed?o(...a):this.once("finish",()=>{o(...a)})};i.once("response",n((o,a,u)=>{let c=new Gle(this.socket,i.readableHighWaterMark);this.res=c,c.req=this,c.statusCode=o[Mj],c.headers=o,c.rawHeaders=u,c.once("end",()=>{this.aborted?(c.aborted=!0,c.emit("aborted")):(c.complete=!0,c.socket=null,c.connection=null)}),e?(c.upgrade=!0,this.emit("connect",c,i,Buffer.alloc(0))?this.emit("close"):i.destroy()):(i.on("data",l=>{!c._dumped&&!c.push(l)&&i.pause()}),i.once("end",()=>{c.push(null)}),this.emit("response",c)||c._dump())})),i.once("headers",n(o=>this.emit("information",{statusCode:o[Mj]}))),i.once("trailers",n((o,a,u)=>{let{res:c}=this;c.trailers=o,c.rawTrailers=u}));let{socket:s}=i.session;this.socket=s,this.connection=s;for(let o of this[Qm])o();this.emit("socket",this.socket)};if(this[qC])try{r(this[qC].request(this[Xr]))}catch(i){this.emit("error",i)}else{this.reusedSocket=!0;try{r(await this.agent.request(this[jC],this[Fj],this[Xr]))}catch(i){this.emit("error",i)}}}getHeader(e){if(typeof e!="string")throw new UC("name","string",e);return this[Xr][e.toLowerCase()]}get headersSent(){return this[S0]}removeHeader(e){if(typeof e!="string")throw new UC("name","string",e);if(this.headersSent)throw new Rj("remove");delete this[Xr][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new Rj("set");if(typeof e!="string"||!tpe.test(e)&&!Xle(e))throw new Yle("Header name",e);if(typeof r>"u")throw new Qle(r,e);if(rpe.test(r))throw new Zle("header content",e);this[Xr][e.toLowerCase()]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let i=()=>this._request.setTimeout(e,r);return this._request?i():this[Qm].push(i),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};Bj.exports=WC});var jj=v((TMe,Uj)=>{"use strict";var ipe=require("tls");Uj.exports=(t={},e=ipe.connect)=>new Promise((r,i)=>{let n=!1,s,o=async()=>{await u,s.off("timeout",a),s.off("error",i),t.resolveSocket?(r({alpnProtocol:s.alpnProtocol,socket:s,timeout:n}),n&&(await Promise.resolve(),s.emit("timeout"))):(s.destroy(),r({alpnProtocol:s.alpnProtocol,timeout:n}))},a=async()=>{n=!0,o()},u=(async()=>{try{s=await e(t,o),s.on("error",i),s.once("timeout",a)}catch(c){i(c)}})()})});var Wj=v(($Me,qj)=>{"use strict";var npe=require("net");qj.exports=t=>{let e=t.host,r=t.headers&&t.headers.host;return r&&(r.startsWith("[")?r.indexOf("]")===-1?e=r:e=r.slice(1,-1):e=r.split(":",1)[0]),npe.isIP(e)?"":e}});var Kj=v((kMe,KC)=>{"use strict";var Vj=require("http"),GC=require("https"),spe=jj(),ope=RC(),ape=VC(),upe=Wj(),cpe=BC(),E0=new ope({maxSize:100}),Zm=new Map,Gj=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let i=()=>{t.emit("free",e,r)};e.on("free",i);let n=()=>{t.removeSocket(e,r)};e.on("close",n);let s=()=>{t.removeSocket(e,r),e.off("close",n),e.off("free",i),e.off("agentRemove",s)};e.on("agentRemove",s),t.emit("free",e,r)},lpe=async t=>{let e=`${t.host}:${t.port}:${t.ALPNProtocols.sort()}`;if(!E0.has(e)){if(Zm.has(e))return(await Zm.get(e)).alpnProtocol;let{path:r,agent:i}=t;t.path=t.socketPath;let n=spe(t);Zm.set(e,n);try{let{socket:s,alpnProtocol:o}=await n;if(E0.set(e,o),t.path=r,o==="h2")s.destroy();else{let{globalAgent:a}=GC,u=GC.Agent.prototype.createConnection;i?i.createConnection===u?Gj(i,s,t):s.destroy():a.createConnection===u?Gj(a,s,t):s.destroy()}return Zm.delete(e),o}catch(s){throw Zm.delete(e),s}}return E0.get(e)};KC.exports=async(t,e,r)=>{if((typeof t=="string"||t instanceof URL)&&(t=cpe(new URL(t))),typeof e=="function"&&(r=e,e=void 0),e={ALPNProtocols:["h2","http/1.1"],...t,...e,resolveSocket:!0},!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let i=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||upe(e),e.port=e.port||(i?443:80),e._defaultAgent=i?GC.globalAgent:Vj.globalAgent;let n=e.agent;if(n){if(n.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");e.agent=n[i?"https":"http"]}return i&&await lpe(e)==="h2"?(n&&(e.agent=n.http2),new ape(e,r)):Vj.request(e,r)};KC.exports.protocolCache=E0});var Xj=v((RMe,zj)=>{"use strict";var ppe=require("http2"),fpe=OC(),zC=VC(),dpe=FC(),hpe=Kj(),mpe=(t,e,r)=>new zC(t,e,r),gpe=(t,e,r)=>{let i=new zC(t,e,r);return i.end(),i};zj.exports={...ppe,ClientRequest:zC,IncomingMessage:dpe,...fpe,request:mpe,get:gpe,auto:hpe}});var JC=v(XC=>{"use strict";Object.defineProperty(XC,"__esModule",{value:!0});var Jj=$o();XC.default=t=>Jj.default.nodeStream(t)&&Jj.default.function_(t.getBoundary)});var e8=v(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});var Qj=require("fs"),Zj=require("util"),Yj=$o(),Hpe=JC(),ype=Zj.promisify(Qj.stat);YC.default=async(t,e)=>{if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(Yj.default.string(t))return Buffer.byteLength(t);if(Yj.default.buffer(t))return t.length;if(Hpe.default(t))return Zj.promisify(t.getLength.bind(t))();if(t instanceof Qj.ReadStream){let{size:r}=await ype(t.path);return r===0?void 0:r}}});var ZC=v(QC=>{"use strict";Object.defineProperty(QC,"__esModule",{value:!0});function vpe(t,e,r){let i={};for(let n of r)i[n]=(...s)=>{e.emit(n,...s)},t.on(n,i[n]);return()=>{for(let n of r)t.off(n,i[n])}}QC.default=vpe});var t8=v(eD=>{"use strict";Object.defineProperty(eD,"__esModule",{value:!0});eD.default=()=>{let t=[];return{once(e,r,i){e.once(r,i),t.push({origin:e,event:r,fn:i})},unhandleAll(){for(let e of t){let{origin:r,event:i,fn:n}=e;r.removeListener(i,n)}t.length=0}}}});var i8=v(eg=>{"use strict";Object.defineProperty(eg,"__esModule",{value:!0});eg.TimeoutError=void 0;var bpe=require("net"),wpe=t8(),r8=Symbol("reentry"),_pe=()=>{},x0=class extends Error{constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`),this.event=r,this.name="TimeoutError",this.code="ETIMEDOUT"}};eg.TimeoutError=x0;eg.default=(t,e,r)=>{if(r8 in t)return _pe;t[r8]=!0;let i=[],{once:n,unhandleAll:s}=wpe.default(),o=(p,f,h)=>{var g;let H=setTimeout(f,p,p,h);(g=H.unref)===null||g===void 0||g.call(H);let b=()=>{clearTimeout(H)};return i.push(b),b},{host:a,hostname:u}=r,c=(p,f)=>{t.destroy(new x0(p,f))},l=()=>{for(let p of i)p();s()};if(t.once("error",p=>{if(l(),t.listenerCount("error")===0)throw p}),t.once("close",l),n(t,"response",p=>{n(p,"end",l)}),typeof e.request<"u"&&o(e.request,c,"request"),typeof e.socket<"u"){let p=()=>{c(e.socket,"socket")};t.setTimeout(e.socket,p),i.push(()=>{t.removeListener("timeout",p)})}return n(t,"socket",p=>{var f;let{socketPath:h}=t;if(p.connecting){let g=Boolean(h??bpe.isIP((f=u??a)!==null&&f!==void 0?f:"")!==0);if(typeof e.lookup<"u"&&!g&&typeof p.address().address>"u"){let H=o(e.lookup,c,"lookup");n(p,"lookup",H)}if(typeof e.connect<"u"){let H=()=>o(e.connect,c,"connect");g?n(p,"connect",H()):n(p,"lookup",b=>{b===null&&n(p,"connect",H())})}typeof e.secureConnect<"u"&&r.protocol==="https:"&&n(p,"connect",()=>{let H=o(e.secureConnect,c,"secureConnect");n(p,"secureConnect",H)})}if(typeof e.send<"u"){let g=()=>o(e.send,c,"send");p.connecting?n(p,"connect",()=>{n(t,"upload-complete",g())}):n(t,"upload-complete",g())}}),typeof e.response<"u"&&n(t,"upload-complete",()=>{let p=o(e.response,c,"response");n(t,"response",p)}),l}});var s8=v(tD=>{"use strict";Object.defineProperty(tD,"__esModule",{value:!0});var n8=$o();tD.default=t=>{t=t;let e={protocol:t.protocol,hostname:n8.default.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return n8.default.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var o8=v(rD=>{"use strict";Object.defineProperty(rD,"__esModule",{value:!0});var Ape=require("url"),Ipe=["protocol","host","hostname","port","pathname","search"];rD.default=(t,e)=>{var r,i;if(e.path){if(e.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(e.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(e.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(e.search&&e.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!t){if(!e.protocol)throw new TypeError("No URL protocol specified");t=`${e.protocol}//${(i=(r=e.hostname)!==null&&r!==void 0?r:e.host)!==null&&i!==void 0?i:""}`}let n=new Ape.URL(t);if(e.path){let s=e.path.indexOf("?");s===-1?e.pathname=e.path:(e.pathname=e.path.slice(0,s),e.search=e.path.slice(s+1)),delete e.path}for(let s of Ipe)e[s]&&(n[s]=e[s].toString());return n}});var a8=v(nD=>{"use strict";Object.defineProperty(nD,"__esModule",{value:!0});var iD=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};nD.default=iD});var oD=v(sD=>{"use strict";Object.defineProperty(sD,"__esModule",{value:!0});var Spe=async t=>{let e=[],r=0;for await(let i of t)e.push(i),r+=Buffer.byteLength(i);return Buffer.isBuffer(e[0])?Buffer.concat(e,r):Buffer.from(e.join(""))};sD.default=Spe});var c8=v(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.dnsLookupIpVersionToFamily=Fc.isDnsLookupIpVersion=void 0;var u8={auto:0,ipv4:4,ipv6:6};Fc.isDnsLookupIpVersion=t=>t in u8;Fc.dnsLookupIpVersionToFamily=t=>{if(Fc.isDnsLookupIpVersion(t))return u8[t];throw new Error("Invalid DNS lookup IP version")}});var aD=v(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});C0.isResponseOk=void 0;C0.isResponseOk=t=>{let{statusCode:e}=t,r=t.request.options.followRedirect?299:399;return e>=200&&e<=r||e===304}});var p8=v(uD=>{"use strict";Object.defineProperty(uD,"__esModule",{value:!0});var l8=new Set;uD.default=t=>{l8.has(t)||(l8.add(t),process.emitWarning(`Got: ${t}`,{type:"DeprecationWarning"}))}});var f8=v(cD=>{"use strict";Object.defineProperty(cD,"__esModule",{value:!0});var yt=$o(),Epe=(t,e)=>{if(yt.default.null_(t.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");yt.assert.any([yt.default.string,yt.default.undefined],t.encoding),yt.assert.any([yt.default.boolean,yt.default.undefined],t.resolveBodyOnly),yt.assert.any([yt.default.boolean,yt.default.undefined],t.methodRewriting),yt.assert.any([yt.default.boolean,yt.default.undefined],t.isStream),yt.assert.any([yt.default.string,yt.default.undefined],t.responseType),t.responseType===void 0&&(t.responseType="text");let{retry:r}=t;if(e?t.retry={...e.retry}:t.retry={calculateDelay:i=>i.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},yt.default.object(r)?(t.retry={...t.retry,...r},t.retry.methods=[...new Set(t.retry.methods.map(i=>i.toUpperCase()))],t.retry.statusCodes=[...new Set(t.retry.statusCodes)],t.retry.errorCodes=[...new Set(t.retry.errorCodes)]):yt.default.number(r)&&(t.retry.limit=r),yt.default.undefined(t.retry.maxRetryAfter)&&(t.retry.maxRetryAfter=Math.min(...[t.timeout.request,t.timeout.connect].filter(yt.default.number))),yt.default.object(t.pagination)){e&&(t.pagination={...e.pagination,...t.pagination});let{pagination:i}=t;if(!yt.default.function_(i.transform))throw new Error("`options.pagination.transform` must be implemented");if(!yt.default.function_(i.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!yt.default.function_(i.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!yt.default.function_(i.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return t.responseType==="json"&&t.headers.accept===void 0&&(t.headers.accept="application/json"),t};cD.default=Epe});var d8=v(tg=>{"use strict";Object.defineProperty(tg,"__esModule",{value:!0});tg.retryAfterStatusCodes=void 0;tg.retryAfterStatusCodes=new Set([413,429,503]);var xpe=({attemptCount:t,retryOptions:e,error:r,retryAfter:i})=>{if(t>e.limit)return 0;let n=e.methods.includes(r.options.method),s=e.errorCodes.includes(r.code),o=r.response&&e.statusCodes.includes(r.response.statusCode);if(!n||!s&&!o)return 0;if(r.response){if(i)return e.maxRetryAfter===void 0||i>e.maxRetryAfter?0:i;if(r.response.statusCode===413)return 0}let a=Math.random()*100;return 2**(t-1)*1e3+a};tg.default=xpe});var ng=v(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.UnsupportedProtocolError=Ke.ReadError=Ke.TimeoutError=Ke.UploadError=Ke.CacheError=Ke.HTTPError=Ke.MaxRedirectsError=Ke.RequestError=Ke.setNonEnumerableProperties=Ke.knownHookEvents=Ke.withoutBody=Ke.kIsNormalizedAlready=void 0;var h8=require("util"),m8=require("stream"),Cpe=require("fs"),ru=require("url"),g8=require("http"),lD=require("http"),Dpe=require("https"),Ppe=LU(),Lpe=NU(),H8=gj(),Tpe=bj(),$pe=Xj(),kpe=A0(),K=$o(),Rpe=e8(),y8=JC(),Mpe=ZC(),v8=i8(),Ope=s8(),b8=o8(),Npe=a8(),Fpe=oD(),w8=c8(),Bpe=aD(),iu=p8(),Upe=f8(),jpe=d8(),pD,Dr=Symbol("request"),L0=Symbol("response"),ff=Symbol("responseSize"),df=Symbol("downloadedSize"),hf=Symbol("bodySize"),mf=Symbol("uploadedSize"),D0=Symbol("serverResponsesPiped"),_8=Symbol("unproxyEvents"),A8=Symbol("isFromCache"),fD=Symbol("cancelTimeouts"),I8=Symbol("startedReading"),gf=Symbol("stopReading"),P0=Symbol("triggerRead"),nu=Symbol("body"),rg=Symbol("jobs"),S8=Symbol("originalResponse"),E8=Symbol("retryTimeout");Ke.kIsNormalizedAlready=Symbol("isNormalizedAlready");var qpe=K.default.string(process.versions.brotli);Ke.withoutBody=new Set(["GET","HEAD"]);Ke.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];function Wpe(t){for(let e in t){let r=t[e];if(!K.default.string(r)&&!K.default.number(r)&&!K.default.boolean(r)&&!K.default.null_(r)&&!K.default.undefined(r))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}function Vpe(t){return K.default.object(t)&&!("statusCode"in t)}var dD=new Npe.default,Gpe=async t=>new Promise((e,r)=>{let i=n=>{r(n)};t.pending||e(),t.once("error",i),t.once("ready",()=>{t.off("error",i),e()})}),Kpe=new Set([300,301,302,303,304,307,308]),zpe=["context","body","json","form"];Ke.setNonEnumerableProperties=(t,e)=>{let r={};for(let i of t)if(i)for(let n of zpe)n in i&&(r[n]={writable:!0,configurable:!0,enumerable:!1,value:i[n]});Object.defineProperties(e,r)};var Wt=class extends Error{constructor(e,r,i){var n,s;if(super(e),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=(n=r.code)!==null&&n!==void 0?n:"ERR_GOT_REQUEST_ERROR",i instanceof N0?(Object.defineProperty(this,"request",{enumerable:!1,value:i}),Object.defineProperty(this,"response",{enumerable:!1,value:i[L0]}),Object.defineProperty(this,"options",{enumerable:!1,value:i.options})):Object.defineProperty(this,"options",{enumerable:!1,value:i}),this.timings=(s=this.request)===null||s===void 0?void 0:s.timings,K.default.string(r.stack)&&K.default.string(this.stack)){let o=this.stack.indexOf(this.message)+this.message.length,a=this.stack.slice(o).split(`
`).reverse(),u=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;u.length!==0&&u[0]===a[0];)a.shift();this.stack=`${this.stack.slice(0,o)}${a.reverse().join(`
`)}${u.reverse().join(`
`)}`}}};Ke.RequestError=Wt;var T0=class extends Wt{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}};Ke.MaxRedirectsError=T0;var $0=class extends Wt{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}};Ke.HTTPError=$0;var k0=class extends Wt{constructor(e,r){super(e.message,e,r),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}};Ke.CacheError=k0;var R0=class extends Wt{constructor(e,r){super(e.message,e,r),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}};Ke.UploadError=R0;var M0=class extends Wt{constructor(e,r,i){super(e.message,e,i),this.name="TimeoutError",this.event=e.event,this.timings=r}};Ke.TimeoutError=M0;var ig=class extends Wt{constructor(e,r){super(e.message,e,r),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}};Ke.ReadError=ig;var O0=class extends Wt{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e),this.name="UnsupportedProtocolError",this.code="ERR_UNSUPPORTED_PROTOCOL"}};Ke.UnsupportedProtocolError=O0;var Xpe=["socket","connect","continue","information","upgrade","timeout"],N0=class extends m8.Duplex{constructor(e,r={},i){super({autoDestroy:!1,highWaterMark:0}),this[df]=0,this[mf]=0,this.requestInitialized=!1,this[D0]=new Set,this.redirects=[],this[gf]=!1,this[P0]=!1,this[rg]=[],this.retryCount=0,this._progressCallbacks=[];let n=()=>this._unlockWrite(),s=()=>this._lockWrite();this.on("pipe",c=>{c.prependListener("data",n),c.on("data",s),c.prependListener("end",n),c.on("end",s)}),this.on("unpipe",c=>{c.off("data",n),c.off("data",s),c.off("end",n),c.off("end",s)}),this.on("pipe",c=>{c instanceof lD.IncomingMessage&&(this.options.headers={...c.headers,...this.options.headers})});let{json:o,body:a,form:u}=r;if((o||a||u)&&this._lockWrite(),Ke.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(e,r,i)}catch(c){K.default.nodeStream(r.body)&&r.body.destroy(),this.destroy(c);return}(async()=>{var c;try{this.options.body instanceof Cpe.ReadStream&&await Gpe(this.options.body);let{url:l}=this.options;if(!l)throw new TypeError("Missing `url` property");if(this.requestUrl=l.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed){(c=this[Dr])===null||c===void 0||c.destroy();return}for(let p of this[rg])p();this[rg].length=0,this.requestInitialized=!0}catch(l){if(l instanceof Wt){this._beforeError(l);return}this.destroyed||this.destroy(l)}})()}static normalizeArguments(e,r,i){var n,s,o,a,u;let c=r;if(K.default.object(e)&&!K.default.urlInstance(e))r={...i,...e,...r};else{if(e&&r&&r.url!==void 0)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...i,...r},e!==void 0&&(r.url=e),K.default.urlInstance(r.url)&&(r.url=new ru.URL(r.url.toString()))}if(r.cache===!1&&(r.cache=void 0),r.dnsCache===!1&&(r.dnsCache=void 0),K.assert.any([K.default.string,K.default.undefined],r.method),K.assert.any([K.default.object,K.default.undefined],r.headers),K.assert.any([K.default.string,K.default.urlInstance,K.default.undefined],r.prefixUrl),K.assert.any([K.default.object,K.default.undefined],r.cookieJar),K.assert.any([K.default.object,K.default.string,K.default.undefined],r.searchParams),K.assert.any([K.default.object,K.default.string,K.default.undefined],r.cache),K.assert.any([K.default.object,K.default.number,K.default.undefined],r.timeout),K.assert.any([K.default.object,K.default.undefined],r.context),K.assert.any([K.default.object,K.default.undefined],r.hooks),K.assert.any([K.default.boolean,K.default.undefined],r.decompress),K.assert.any([K.default.boolean,K.default.undefined],r.ignoreInvalidCookies),K.assert.any([K.default.boolean,K.default.undefined],r.followRedirect),K.assert.any([K.default.number,K.default.undefined],r.maxRedirects),K.assert.any([K.default.boolean,K.default.undefined],r.throwHttpErrors),K.assert.any([K.default.boolean,K.default.undefined],r.http2),K.assert.any([K.default.boolean,K.default.undefined],r.allowGetBody),K.assert.any([K.default.string,K.default.undefined],r.localAddress),K.assert.any([w8.isDnsLookupIpVersion,K.default.undefined],r.dnsLookupIpVersion),K.assert.any([K.default.object,K.default.undefined],r.https),K.assert.any([K.default.boolean,K.default.undefined],r.rejectUnauthorized),r.https&&(K.assert.any([K.default.boolean,K.default.undefined],r.https.rejectUnauthorized),K.assert.any([K.default.function_,K.default.undefined],r.https.checkServerIdentity),K.assert.any([K.default.string,K.default.object,K.default.array,K.default.undefined],r.https.certificateAuthority),K.assert.any([K.default.string,K.default.object,K.default.array,K.default.undefined],r.https.key),K.assert.any([K.default.string,K.default.object,K.default.array,K.default.undefined],r.https.certificate),K.assert.any([K.default.string,K.default.undefined],r.https.passphrase),K.assert.any([K.default.string,K.default.buffer,K.default.array,K.default.undefined],r.https.pfx)),K.assert.any([K.default.object,K.default.undefined],r.cacheOptions),K.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===(i==null?void 0:i.headers)?r.headers={...r.headers}:r.headers=kpe({...i==null?void 0:i.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==(i==null?void 0:i.searchParams)){let h;if(K.default.string(r.searchParams)||r.searchParams instanceof ru.URLSearchParams)h=new ru.URLSearchParams(r.searchParams);else{Wpe(r.searchParams),h=new ru.URLSearchParams;for(let g in r.searchParams){let H=r.searchParams[g];H===null?h.append(g,""):H!==void 0&&h.append(g,H)}}(n=i==null?void 0:i.searchParams)===null||n===void 0||n.forEach((g,H)=>{h.has(H)||h.append(H,g)}),r.searchParams=h}if(r.username=(s=r.username)!==null&&s!==void 0?s:"",r.password=(o=r.password)!==null&&o!==void 0?o:"",K.default.undefined(r.prefixUrl)?r.prefixUrl=(a=i==null?void 0:i.prefixUrl)!==null&&a!==void 0?a:"":(r.prefixUrl=r.prefixUrl.toString(),r.prefixUrl!==""&&!r.prefixUrl.endsWith("/")&&(r.prefixUrl+="/")),K.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=b8.default(r.prefixUrl+r.url,r)}else(K.default.undefined(r.url)&&r.prefixUrl!==""||r.protocol)&&(r.url=b8.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:h}=r;Object.defineProperty(r,"prefixUrl",{set:H=>{let b=r.url;if(!b.href.startsWith(H))throw new Error(`Cannot change \`prefixUrl\` from ${h} to ${H}: ${b.href}`);r.url=new ru.URL(H+b.href.slice(h.length)),h=H},get:()=>h});let{protocol:g}=r.url;if(g==="unix:"&&(g="http:",r.url=new ru.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),g!=="http:"&&g!=="https:")throw new O0(r);r.username===""?r.username=r.url.username:r.url.username=r.username,r.password===""?r.password=r.url.password:r.url.password=r.password}let{cookieJar:l}=r;if(l){let{setCookie:h,getCookieString:g}=l;K.assert.function_(h),K.assert.function_(g),h.length===4&&g.length===0&&(h=h8.promisify(h.bind(r.cookieJar)),g=h8.promisify(g.bind(r.cookieJar)),r.cookieJar={setCookie:h,getCookieString:g})}let{cache:p}=r;if(p&&(dD.has(p)||dD.set(p,new H8((h,g)=>{let H=h[Dr](h,g);return K.default.promise(H)&&(H.once=(b,_)=>{if(b==="error")H.catch(_);else if(b==="abort")(async()=>{try{(await H).once("abort",_)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${b}`);return H}),H},p))),r.cacheOptions={...r.cacheOptions},r.dnsCache===!0)pD||(pD=new Lpe.default),r.dnsCache=pD;else if(!K.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${K.default(r.dnsCache)}`);K.default.number(r.timeout)?r.timeout={request:r.timeout}:i&&r.timeout!==i.timeout?r.timeout={...i.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});let f=r.hooks===(i==null?void 0:i.hooks);r.hooks={...r.hooks};for(let h of Ke.knownHookEvents)if(h in r.hooks)if(K.default.array(r.hooks[h]))r.hooks[h]=[...r.hooks[h]];else throw new TypeError(`Parameter \`${h}\` must be an Array, got ${K.default(r.hooks[h])}`);else r.hooks[h]=[];if(i&&!f)for(let h of Ke.knownHookEvents)i.hooks[h].length>0&&(r.hooks[h]=[...i.hooks[h],...r.hooks[h]]);if("family"in r&&iu.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),i!=null&&i.https&&(r.https={...i.https,...r.https}),"rejectUnauthorized"in r&&iu.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&iu.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&iu.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&iu.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&iu.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&iu.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&iu.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent){for(let h in r.agent)if(h!=="http"&&h!=="https"&&h!=="http2")throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${h}\``)}return r.maxRedirects=(u=r.maxRedirects)!==null&&u!==void 0?u:0,Ke.setNonEnumerableProperties([i,c],r),Upe.default(r,i)}_lockWrite(){let e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:e}=this,{headers:r}=e,i=!K.default.undefined(e.form),n=!K.default.undefined(e.json),s=!K.default.undefined(e.body),o=i||n||s,a=Ke.withoutBody.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=a,o){if(a)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([s,i,n].filter(u=>u).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(s&&!(e.body instanceof m8.Readable)&&!K.default.string(e.body)&&!K.default.buffer(e.body)&&!y8.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(i&&!K.default.object(e.form))throw new TypeError("The `form` option must be an Object");{let u=!K.default.string(r["content-type"]);s?(y8.default(e.body)&&u&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`),this[nu]=e.body):i?(u&&(r["content-type"]="application/x-www-form-urlencoded"),this[nu]=new ru.URLSearchParams(e.form).toString()):(u&&(r["content-type"]="application/json"),this[nu]=e.stringifyJson(e.json));let c=await Rpe.default(this[nu],e.headers);K.default.undefined(r["content-length"])&&K.default.undefined(r["transfer-encoding"])&&!a&&!K.default.undefined(c)&&(r["content-length"]=String(c))}}else a?this._lockWrite():this._unlockWrite();this[hf]=Number(r["content-length"])||void 0}async _onResponseBase(e){let{options:r}=this,{url:i}=r;this[S8]=e,r.decompress&&(e=Tpe(e));let n=e.statusCode,s=e;s.statusMessage=s.statusMessage?s.statusMessage:g8.STATUS_CODES[n],s.url=r.url.toString(),s.requestUrl=this.requestUrl,s.redirectUrls=this.redirects,s.request=this,s.isFromCache=e.fromCache||!1,s.ip=this.ip,s.retryCount=this.retryCount,this[A8]=s.isFromCache,this[ff]=Number(e.headers["content-length"])||void 0,this[L0]=e,e.once("end",()=>{this[ff]=this[df],this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{e.destroy(),this._beforeError(new ig(a,this))}),e.once("aborted",()=>{this._beforeError(new ig({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let o=e.headers["set-cookie"];if(K.default.object(r.cookieJar)&&o){let a=o.map(async u=>r.cookieJar.setCookie(u,i.toString()));r.ignoreInvalidCookies&&(a=a.map(async u=>u.catch(()=>{})));try{await Promise.all(a)}catch(u){this._beforeError(u);return}}if(r.followRedirect&&e.headers.location&&Kpe.has(n)){if(e.resume(),this[Dr]&&(this[fD](),delete this[Dr],this[_8]()),(n===303&&r.method!=="GET"&&r.method!=="HEAD"||!r.methodRewriting)&&(r.method="GET","body"in r&&delete r.body,"json"in r&&delete r.json,"form"in r&&delete r.form,this[nu]=void 0,delete r.headers["content-length"]),this.redirects.length>=r.maxRedirects){this._beforeError(new T0(this));return}try{let p=function(f){return f.protocol==="unix:"||f.hostname==="unix"},u=Buffer.from(e.headers.location,"binary").toString(),c=new ru.URL(u,i),l=c.toString();if(decodeURI(l),!p(i)&&p(c)){this._beforeError(new Wt("Cannot redirect to UNIX socket",{},this));return}c.hostname!==i.hostname||c.port!==i.port?("host"in r.headers&&delete r.headers.host,"cookie"in r.headers&&delete r.headers.cookie,"authorization"in r.headers&&delete r.headers.authorization,(r.username||r.password)&&(r.username="",r.password="")):(c.username=r.username,c.password=r.password),this.redirects.push(l),r.url=c;for(let f of r.hooks.beforeRedirect)await f(r,s);this.emit("redirect",s,r),await this._makeRequest()}catch(u){this._beforeError(u);return}return}if(r.isStream&&r.throwHttpErrors&&!Bpe.isResponseOk(s)){this._beforeError(new $0(s));return}e.on("readable",()=>{this[P0]&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this.emit("response",e);for(let a of this[D0])if(!a.headersSent){for(let u in e.headers){let c=r.decompress?u!=="content-encoding":!0,l=e.headers[u];c&&a.setHeader(u,l)}a.statusCode=n}}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:i,url:n}=r;Ppe.default(e),this[fD]=v8.default(e,i,n);let s=r.cache?"cacheableResponse":"response";e.once(s,u=>{this._onResponse(u)}),e.once("error",u=>{var c;e.destroy(),(c=e.res)===null||c===void 0||c.removeAllListeners("end"),u=u instanceof v8.TimeoutError?new M0(u,this.timings,this):new Wt(u.message,u,this),this._beforeError(u)}),this[_8]=Mpe.default(e,this,Xpe),this[Dr]=e,this.emit("uploadProgress",this.uploadProgress);let o=this[nu],a=this.redirects.length===0?this:e;K.default.nodeStream(o)?(o.pipe(a),o.once("error",u=>{this._beforeError(new R0(u,this))})):(this._unlockWrite(),K.default.undefined(o)?(this._cannotHaveBody||this._noPipe)&&(a.end(),this._lockWrite()):(this._writeRequest(o,void 0,()=>{}),a.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,r){return new Promise((i,n)=>{Object.assign(r,Ope.default(e)),delete r.url;let s,o=dD.get(r.cache)(r,async a=>{a._readableState.autoDestroy=!1,s&&(await s).emit("cacheableResponse",a),i(a)});r.url=e,o.once("error",n),o.once("request",async a=>{s=a,i(s)})})}async _makeRequest(){var e,r,i,n,s;let{options:o}=this,{headers:a}=o;for(let _ in a)if(K.default.undefined(a[_]))delete a[_];else if(K.default.null_(a[_]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${_}\` header`);if(o.decompress&&K.default.undefined(a["accept-encoding"])&&(a["accept-encoding"]=qpe?"gzip, deflate, br":"gzip, deflate"),o.cookieJar){let _=await o.cookieJar.getCookieString(o.url.toString());K.default.nonEmptyString(_)&&(o.headers.cookie=_)}for(let _ of o.hooks.beforeRequest){let k=await _(o);if(!K.default.undefined(k)){o.request=()=>k;break}}o.body&&this[nu]!==o.body&&(this[nu]=o.body);let{agent:u,request:c,timeout:l,url:p}=o;if(o.dnsCache&&!("lookup"in o)&&(o.lookup=o.dnsCache.lookup),p.hostname==="unix"){let _=/(?<socketPath>.+?):(?<path>.+)/.exec(`${p.pathname}${p.search}`);if(_!=null&&_.groups){let{socketPath:k,path:U}=_.groups;Object.assign(o,{socketPath:k,path:U,host:""})}}let f=p.protocol==="https:",h;o.http2?h=$pe.auto:h=f?Dpe.request:g8.request;let g=(e=o.request)!==null&&e!==void 0?e:h,H=o.cache?this._createCacheableRequest:g;u&&!o.http2&&(o.agent=u[f?"https":"http"]),o[Dr]=g,delete o.request,delete o.timeout;let b=o;if(b.shared=(r=o.cacheOptions)===null||r===void 0?void 0:r.shared,b.cacheHeuristic=(i=o.cacheOptions)===null||i===void 0?void 0:i.cacheHeuristic,b.immutableMinTimeToLive=(n=o.cacheOptions)===null||n===void 0?void 0:n.immutableMinTimeToLive,b.ignoreCargoCult=(s=o.cacheOptions)===null||s===void 0?void 0:s.ignoreCargoCult,o.dnsLookupIpVersion!==void 0)try{b.family=w8.dnsLookupIpVersionToFamily(o.dnsLookupIpVersion)}catch{throw new Error("Invalid `dnsLookupIpVersion` option value")}o.https&&("rejectUnauthorized"in o.https&&(b.rejectUnauthorized=o.https.rejectUnauthorized),o.https.checkServerIdentity&&(b.checkServerIdentity=o.https.checkServerIdentity),o.https.certificateAuthority&&(b.ca=o.https.certificateAuthority),o.https.certificate&&(b.cert=o.https.certificate),o.https.key&&(b.key=o.https.key),o.https.passphrase&&(b.passphrase=o.https.passphrase),o.https.pfx&&(b.pfx=o.https.pfx));try{let _=await H(p,b);K.default.undefined(_)&&(_=h(p,b)),o.request=c,o.timeout=l,o.agent=u,o.https&&("rejectUnauthorized"in o.https&&delete b.rejectUnauthorized,o.https.checkServerIdentity&&delete b.checkServerIdentity,o.https.certificateAuthority&&delete b.ca,o.https.certificate&&delete b.cert,o.https.key&&delete b.key,o.https.passphrase&&delete b.passphrase,o.https.pfx&&delete b.pfx),Vpe(_)?this._onRequest(_):this.writable?(this.once("finish",()=>{this._onResponse(_)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(_)}catch(_){throw _ instanceof H8.CacheError?new k0(_,this):new Wt(_.message,_,this)}}async _error(e){try{for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new Wt(r.message,r,this)}this.destroy(e)}_beforeError(e){if(this[gf])return;let{options:r}=this,i=this.retryCount+1;this[gf]=!0,e instanceof Wt||(e=new Wt(e.message,e,this));let n=e,{response:s}=n;(async()=>{if(s&&!s.body){s.setEncoding(this._readableState.encoding);try{s.rawBody=await Fpe.default(s),s.body=s.rawBody.toString()}catch{}}if(this.listenerCount("retry")!==0){let o;try{let a;s&&"retry-after"in s.headers&&(a=Number(s.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(s.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3),o=await r.retry.calculateDelay({attemptCount:i,retryOptions:r.retry,error:n,retryAfter:a,computedValue:jpe.default({attemptCount:i,retryOptions:r.retry,error:n,retryAfter:a,computedValue:0})})}catch(a){this._error(new Wt(a.message,a,this));return}if(o){let a=async()=>{try{for(let u of this.options.hooks.beforeRetry)await u(this.options,n,i)}catch(u){this._error(new Wt(u.message,e,this));return}this.destroyed||(this.destroy(),this.emit("retry",i,e))};this[E8]=setTimeout(a,o);return}}this._error(n)})()}_read(){this[P0]=!0;let e=this[L0];if(e&&!this[gf]){e.readableLength&&(this[P0]=!1);let r;for(;(r=e.read())!==null;){this[df]+=r.length,this[I8]=!0;let i=this.downloadProgress;i.percent<1&&this.emit("downloadProgress",i),this.push(r)}}}_write(e,r,i){let n=()=>{this._writeRequest(e,r,i)};this.requestInitialized?n():this[rg].push(n)}_writeRequest(e,r,i){this[Dr].destroyed||(this._progressCallbacks.push(()=>{this[mf]+=Buffer.byteLength(e,r);let n=this.uploadProgress;n.percent<1&&this.emit("uploadProgress",n)}),this[Dr].write(e,r,n=>{!n&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),i(n)}))}_final(e){let r=()=>{for(;this._progressCallbacks.length!==0;)this._progressCallbacks.shift()();if(!(Dr in this)){e();return}if(this[Dr].destroyed){e();return}this[Dr].end(i=>{i||(this[hf]=this[mf],this.emit("uploadProgress",this.uploadProgress),this[Dr].emit("upload-complete")),e(i)})};this.requestInitialized?r():this[rg].push(r)}_destroy(e,r){var i;this[gf]=!0,clearTimeout(this[E8]),Dr in this&&(this[fD](),!((i=this[L0])===null||i===void 0)&&i.complete||this[Dr].destroy()),e!==null&&!K.default.undefined(e)&&!(e instanceof Wt)&&(e=new Wt(e.message,e,this)),r(e)}get _isAboutToError(){return this[gf]}get ip(){var e;return(e=this.socket)===null||e===void 0?void 0:e.remoteAddress}get aborted(){var e,r,i;return((r=(e=this[Dr])===null||e===void 0?void 0:e.destroyed)!==null&&r!==void 0?r:this.destroyed)&&!(!((i=this[S8])===null||i===void 0)&&i.complete)}get socket(){var e,r;return(r=(e=this[Dr])===null||e===void 0?void 0:e.socket)!==null&&r!==void 0?r:void 0}get downloadProgress(){let e;return this[ff]?e=this[df]/this[ff]:this[ff]===this[df]?e=1:e=0,{percent:e,transferred:this[df],total:this[ff]}}get uploadProgress(){let e;return this[hf]?e=this[mf]/this[hf]:this[hf]===this[mf]?e=1:e=0,{percent:e,transferred:this[mf],total:this[hf]}}get timings(){var e;return(e=this[Dr])===null||e===void 0?void 0:e.timings}get isFromCache(){return this[A8]}pipe(e,r){if(this[I8])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof lD.ServerResponse&&this[D0].add(e),super.pipe(e,r)}unpipe(e){return e instanceof lD.ServerResponse&&this[D0].delete(e),super.unpipe(e),this}};Ke.default=N0});var sg=v(Kn=>{"use strict";var Jpe=Kn&&Kn.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Ype=Kn&&Kn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Jpe(e,t,r)};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.CancelError=Kn.ParseError=void 0;var x8=ng(),hD=class extends x8.RequestError{constructor(e,r){let{options:i}=r.request;super(`${e.message} in "${i.url.toString()}"`,e,r.request),this.name="ParseError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_BODY_PARSE_FAILURE":this.code}};Kn.ParseError=hD;var mD=class extends x8.RequestError{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};Kn.CancelError=mD;Ype(ng(),Kn)});var D8=v(gD=>{"use strict";Object.defineProperty(gD,"__esModule",{value:!0});var C8=sg(),Qpe=(t,e,r,i)=>{let{rawBody:n}=t;try{if(e==="text")return n.toString(i);if(e==="json")return n.length===0?"":r(n.toString());if(e==="buffer")return n;throw new C8.ParseError({message:`Unknown body type '${e}'`,name:"Error"},t)}catch(s){throw new C8.ParseError(s,t)}};gD.default=Qpe});var HD=v(su=>{"use strict";var Zpe=su&&su.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),efe=su&&su.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Zpe(e,t,r)};Object.defineProperty(su,"__esModule",{value:!0});var tfe=require("events"),rfe=$o(),ife=DU(),F0=sg(),P8=D8(),L8=ng(),nfe=ZC(),sfe=oD(),T8=aD(),ofe=["request","response","redirect","uploadProgress","downloadProgress"];function $8(t){let e,r,i=new tfe.EventEmitter,n=new ife((o,a,u)=>{let c=l=>{let p=new L8.default(void 0,t);p.retryCount=l,p._noPipe=!0,u(()=>p.destroy()),u.shouldReject=!1,u(()=>a(new F0.CancelError(p))),e=p,p.once("response",async g=>{var H;if(g.retryCount=l,g.request.aborted)return;let b;try{b=await sfe.default(p),g.rawBody=b}catch{return}if(p._isAboutToError)return;let _=((H=g.headers["content-encoding"])!==null&&H!==void 0?H:"").toLowerCase(),k=["gzip","deflate","br"].includes(_),{options:U}=p;if(k&&!U.decompress)g.body=b;else try{g.body=P8.default(g,U.responseType,U.parseJson,U.encoding)}catch(C){if(g.body=b.toString(),T8.isResponseOk(g)){p._beforeError(C);return}}try{for(let[C,L]of U.hooks.afterResponse.entries())g=await L(g,async q=>{let j=L8.default.normalizeArguments(void 0,{...q,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},U);j.hooks.afterResponse=j.hooks.afterResponse.slice(0,C);for(let T of j.hooks.beforeRetry)await T(j);let F=$8(j);return u(()=>{F.catch(()=>{}),F.cancel()}),F})}catch(C){p._beforeError(new F0.RequestError(C.message,C,p));return}if(r=g,!T8.isResponseOk(g)){p._beforeError(new F0.HTTPError(g));return}p.destroy(),o(p.options.resolveBodyOnly?g.body:g)});let f=g=>{if(n.isCanceled)return;let{options:H}=p;if(g instanceof F0.HTTPError&&!H.throwHttpErrors){let{response:b}=g;o(p.options.resolveBodyOnly?b.body:b);return}a(g)};p.once("error",f);let h=p.options.body;p.once("retry",(g,H)=>{var b,_;if(h===((b=H.request)===null||b===void 0?void 0:b.options.body)&&rfe.default.nodeStream((_=H.request)===null||_===void 0?void 0:_.options.body)){f(H);return}c(g)}),nfe.default(p,i,ofe)};c(0)});n.on=(o,a)=>(i.on(o,a),n);let s=o=>{let a=(async()=>{await n;let{options:u}=r.request;return P8.default(r,o,u.parseJson,u.encoding)})();return Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)),a};return n.json=()=>{let{headers:o}=e.options;return!e.writableFinished&&o.accept===void 0&&(o.accept="application/json"),s("json")},n.buffer=()=>s("buffer"),n.text=()=>s("text"),n}su.default=$8;efe(sg(),su)});var k8=v(yD=>{"use strict";Object.defineProperty(yD,"__esModule",{value:!0});var afe=sg();function ufe(t,...e){let r=(async()=>{if(t instanceof afe.RequestError)try{for(let n of e)if(n)for(let s of n)t=await s(t)}catch(n){t=n}throw t})(),i=()=>r;return r.json=i,r.text=i,r.buffer=i,r.on=i,r}yD.default=ufe});var O8=v(vD=>{"use strict";Object.defineProperty(vD,"__esModule",{value:!0});var R8=$o();function M8(t){for(let e of Object.values(t))(R8.default.plainObject(e)||R8.default.array(e))&&M8(e);return Object.freeze(t)}vD.default=M8});var F8=v(N8=>{"use strict";Object.defineProperty(N8,"__esModule",{value:!0})});var bD=v(vn=>{"use strict";var cfe=vn&&vn.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),lfe=vn&&vn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&cfe(e,t,r)};Object.defineProperty(vn,"__esModule",{value:!0});vn.defaultHandler=void 0;var B8=$o(),yn=HD(),pfe=k8(),U0=ng(),ffe=O8(),dfe={RequestError:yn.RequestError,CacheError:yn.CacheError,ReadError:yn.ReadError,HTTPError:yn.HTTPError,MaxRedirectsError:yn.MaxRedirectsError,TimeoutError:yn.TimeoutError,ParseError:yn.ParseError,CancelError:yn.CancelError,UnsupportedProtocolError:yn.UnsupportedProtocolError,UploadError:yn.UploadError},hfe=async t=>new Promise(e=>{setTimeout(e,t)}),{normalizeArguments:B0}=U0.default,U8=(...t)=>{let e;for(let r of t)e=B0(void 0,r,e);return e},mfe=t=>t.isStream?new U0.default(void 0,t):yn.default(t),gfe=t=>"defaults"in t&&"options"in t.defaults,Hfe=["get","post","put","patch","head","delete"];vn.defaultHandler=(t,e)=>e(t);var j8=(t,e)=>{if(t)for(let r of t)r(e)},q8=t=>{t._rawHandlers=t.handlers,t.handlers=t.handlers.map(i=>(n,s)=>{let o,a=i(n,u=>(o=s(u),o));if(a!==o&&!n.isStream&&o){let u=a,{then:c,catch:l,finally:p}=u;Object.setPrototypeOf(u,Object.getPrototypeOf(o)),Object.defineProperties(u,Object.getOwnPropertyDescriptors(o)),u.then=c,u.catch=l,u.finally=p}return a});let e=(i,n={},s)=>{var o,a;let u=0,c=l=>t.handlers[u++](l,u===t.handlers.length?mfe:c);if(B8.default.plainObject(i)){let l={...i,...n};U0.setNonEnumerableProperties([i,n],l),n=l,i=void 0}try{let l;try{j8(t.options.hooks.init,n),j8((o=n.hooks)===null||o===void 0?void 0:o.init,n)}catch(f){l=f}let p=B0(i,n,s??t.options);if(p[U0.kIsNormalizedAlready]=!0,l)throw new yn.RequestError(l.message,l,p);return c(p)}catch(l){if(n.isStream)throw l;return pfe.default(l,t.options.hooks.beforeError,(a=n.hooks)===null||a===void 0?void 0:a.beforeError)}};e.extend=(...i)=>{let n=[t.options],s=[...t._rawHandlers],o;for(let a of i)gfe(a)?(n.push(a.defaults.options),s.push(...a.defaults._rawHandlers),o=a.defaults.mutableDefaults):(n.push(a),"handlers"in a&&s.push(...a.handlers),o=a.mutableDefaults);return s=s.filter(a=>a!==vn.defaultHandler),s.length===0&&s.push(vn.defaultHandler),q8({options:U8(...n),handlers:s,mutableDefaults:Boolean(o)})};let r=async function*(i,n){let s=B0(i,n,t.options);s.resolveBodyOnly=!1;let o=s.pagination;if(!B8.default.object(o))throw new TypeError("`options.pagination` must be implemented");let a=[],{countLimit:u}=o,c=0;for(;c<o.requestLimit;){c!==0&&await hfe(o.backoff);let l=await e(void 0,void 0,s),p=await o.transform(l),f=[];for(let g of p)if(o.filter(g,a,f)&&(!o.shouldContinue(g,a,f)||(yield g,o.stackAllItems&&a.push(g),f.push(g),--u<=0)))return;let h=o.paginate(l,a,f);if(h===!1)return;h===l.request.options?s=l.request.options:h!==void 0&&(s=B0(void 0,h,s)),c++}};e.paginate=r,e.paginate.all=async(i,n)=>{let s=[];for await(let o of r(i,n))s.push(o);return s},e.paginate.each=r,e.stream=(i,n)=>e(i,{...n,isStream:!0});for(let i of Hfe)e[i]=(n,s)=>e(n,{...s,method:i}),e.stream[i]=(n,s)=>e(n,{...s,method:i,isStream:!0});return Object.assign(e,dfe),Object.defineProperty(e,"defaults",{value:t.mutableDefaults?t:ffe.default(t),writable:t.mutableDefaults,configurable:t.mutableDefaults,enumerable:!0}),e.mergeOptions=U8,e};vn.default=q8;lfe(F8(),vn)});var G8=v((ko,j0)=>{"use strict";var yfe=ko&&ko.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),W8=ko&&ko.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yfe(e,t,r)};Object.defineProperty(ko,"__esModule",{value:!0});var vfe=require("url"),V8=bD(),bfe={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:t=>t.request.options.responseType==="json"?t.body:JSON.parse(t.body),paginate:t=>{if(!Reflect.has(t.headers,"link"))return!1;let e=t.headers.link.split(","),r;for(let i of e){let n=i.split(";");if(n[1].includes("next")){r=n[0].trimStart().trim(),r=r.slice(1,-1);break}}return r?{url:new vfe.URL(r)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:t=>JSON.parse(t),stringifyJson:t=>JSON.stringify(t),cacheOptions:{}},handlers:[V8.defaultHandler],mutableDefaults:!1},wD=V8.default(bfe);ko.default=wD;j0.exports=wD;j0.exports.default=wD;j0.exports.__esModule=!0;W8(bD(),ko);W8(HD(),ko)});var tq=v((aNe,W0)=>{var sr=function(t){"use strict";var e=1e7,r=7,i=9007199254740992,n=f(i),s="0123456789abcdefghijklmnopqrstuvwxyz",o=typeof BigInt=="function";function a(d,y,A,S){return typeof d>"u"?a[0]:typeof y<"u"?+y==10&&!A?_e(d):Ct(d,y,A,S):_e(d)}function u(d,y){this.value=d,this.sign=y,this.isSmall=!1}u.prototype=Object.create(a.prototype);function c(d){this.value=d,this.sign=d<0,this.isSmall=!0}c.prototype=Object.create(a.prototype);function l(d){this.value=d}l.prototype=Object.create(a.prototype);function p(d){return-i<d&&d<i}function f(d){return d<1e7?[d]:d<1e14?[d%1e7,Math.floor(d/1e7)]:[d%1e7,Math.floor(d/1e7)%1e7,Math.floor(d/1e14)]}function h(d){g(d);var y=d.length;if(y<4&&ie(d,n)<0)switch(y){case 0:return 0;case 1:return d[0];case 2:return d[0]+d[1]*e;default:return d[0]+(d[1]+d[2]*e)*e}return d}function g(d){for(var y=d.length;d[--y]===0;);d.length=y+1}function H(d){for(var y=new Array(d),A=-1;++A<d;)y[A]=0;return y}function b(d){return d>0?Math.floor(d):Math.ceil(d)}function _(d,y){var A=d.length,S=y.length,R=new Array(A),B=0,V=e,G,W;for(W=0;W<S;W++)G=d[W]+y[W]+B,B=G>=V?1:0,R[W]=G-B*V;for(;W<A;)G=d[W]+B,B=G===V?1:0,R[W++]=G-B*V;return B>0&&R.push(B),R}function k(d,y){return d.length>=y.length?_(d,y):_(y,d)}function U(d,y){var A=d.length,S=new Array(A),R=e,B,V;for(V=0;V<A;V++)B=d[V]-R+y,y=Math.floor(B/R),S[V]=B-y*R,y+=1;for(;y>0;)S[V++]=y%R,y=Math.floor(y/R);return S}u.prototype.add=function(d){var y=_e(d);if(this.sign!==y.sign)return this.subtract(y.negate());var A=this.value,S=y.value;return y.isSmall?new u(U(A,Math.abs(S)),this.sign):new u(k(A,S),this.sign)},u.prototype.plus=u.prototype.add,c.prototype.add=function(d){var y=_e(d),A=this.value;if(A<0!==y.sign)return this.subtract(y.negate());var S=y.value;if(y.isSmall){if(p(A+S))return new c(A+S);S=f(Math.abs(S))}return new u(U(S,Math.abs(A)),A<0)},c.prototype.plus=c.prototype.add,l.prototype.add=function(d){return new l(this.value+_e(d).value)},l.prototype.plus=l.prototype.add;function C(d,y){var A=d.length,S=y.length,R=new Array(A),B=0,V=e,G,W;for(G=0;G<S;G++)W=d[G]-B-y[G],W<0?(W+=V,B=1):B=0,R[G]=W;for(G=S;G<A;G++){if(W=d[G]-B,W<0)W+=V;else{R[G++]=W;break}R[G]=W}for(;G<A;G++)R[G]=d[G];return g(R),R}function L(d,y,A){var S;return ie(d,y)>=0?S=C(d,y):(S=C(y,d),A=!A),S=h(S),typeof S=="number"?(A&&(S=-S),new c(S)):new u(S,A)}function q(d,y,A){var S=d.length,R=new Array(S),B=-y,V=e,G,W;for(G=0;G<S;G++)W=d[G]+B,B=Math.floor(W/V),W%=V,R[G]=W<0?W+V:W;return R=h(R),typeof R=="number"?(A&&(R=-R),new c(R)):new u(R,A)}u.prototype.subtract=function(d){var y=_e(d);if(this.sign!==y.sign)return this.add(y.negate());var A=this.value,S=y.value;return y.isSmall?q(A,Math.abs(S),this.sign):L(A,S,this.sign)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(d){var y=_e(d),A=this.value;if(A<0!==y.sign)return this.add(y.negate());var S=y.value;return y.isSmall?new c(A-S):q(S,Math.abs(A),A>=0)},c.prototype.minus=c.prototype.subtract,l.prototype.subtract=function(d){return new l(this.value-_e(d).value)},l.prototype.minus=l.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},c.prototype.negate=function(){var d=this.sign,y=new c(-this.value);return y.sign=!d,y},l.prototype.negate=function(){return new l(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},l.prototype.abs=function(){return new l(this.value>=0?this.value:-this.value)};function j(d,y){var A=d.length,S=y.length,R=A+S,B=H(R),V=e,G,W,ue,de,ye;for(ue=0;ue<A;++ue){de=d[ue];for(var Fe=0;Fe<S;++Fe)ye=y[Fe],G=de*ye+B[ue+Fe],W=Math.floor(G/V),B[ue+Fe]=G-W*V,B[ue+Fe+1]+=W}return g(B),B}function F(d,y){var A=d.length,S=new Array(A),R=e,B=0,V,G;for(G=0;G<A;G++)V=d[G]*y+B,B=Math.floor(V/R),S[G]=V-B*R;for(;B>0;)S[G++]=B%R,B=Math.floor(B/R);return S}function T(d,y){for(var A=[];y-- >0;)A.push(0);return A.concat(d)}function N(d,y){var A=Math.max(d.length,y.length);if(A<=30)return j(d,y);A=Math.ceil(A/2);var S=d.slice(A),R=d.slice(0,A),B=y.slice(A),V=y.slice(0,A),G=N(R,V),W=N(S,B),ue=N(k(R,S),k(V,B)),de=k(k(G,T(C(C(ue,G),W),A)),T(W,2*A));return g(de),de}function E(d,y){return-.012*d-.012*y+15e-6*d*y>0}u.prototype.multiply=function(d){var y=_e(d),A=this.value,S=y.value,R=this.sign!==y.sign,B;if(y.isSmall){if(S===0)return a[0];if(S===1)return this;if(S===-1)return this.negate();if(B=Math.abs(S),B<e)return new u(F(A,B),R);S=f(B)}return E(A.length,S.length)?new u(N(A,S),R):new u(j(A,S),R)},u.prototype.times=u.prototype.multiply;function M(d,y,A){return d<e?new u(F(y,d),A):new u(j(y,f(d)),A)}c.prototype._multiplyBySmall=function(d){return p(d.value*this.value)?new c(d.value*this.value):M(Math.abs(d.value),f(Math.abs(this.value)),this.sign!==d.sign)},u.prototype._multiplyBySmall=function(d){return d.value===0?a[0]:d.value===1?this:d.value===-1?this.negate():M(Math.abs(d.value),this.value,this.sign!==d.sign)},c.prototype.multiply=function(d){return _e(d)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,l.prototype.multiply=function(d){return new l(this.value*_e(d).value)},l.prototype.times=l.prototype.multiply;function O(d){var y=d.length,A=H(y+y),S=e,R,B,V,G,W;for(V=0;V<y;V++){G=d[V],B=0-G*G;for(var ue=V;ue<y;ue++)W=d[ue],R=2*(G*W)+A[V+ue]+B,B=Math.floor(R/S),A[V+ue]=R-B*S;A[V+y]=B}return g(A),A}u.prototype.square=function(){return new u(O(this.value),!1)},c.prototype.square=function(){var d=this.value*this.value;return p(d)?new c(d):new u(O(f(Math.abs(this.value))),!1)},l.prototype.square=function(d){return new l(this.value*this.value)};function z(d,y){var A=d.length,S=y.length,R=e,B=H(y.length),V=y[S-1],G=Math.ceil(R/(2*V)),W=F(d,G),ue=F(y,G),de,ye,Fe,Ti,pi,iI,nI;for(W.length<=A&&W.push(0),ue.push(0),V=ue[S-1],ye=A-S;ye>=0;ye--){for(de=R-1,W[ye+S]!==V&&(de=Math.floor((W[ye+S]*R+W[ye+S-1])/V)),Fe=0,Ti=0,iI=ue.length,pi=0;pi<iI;pi++)Fe+=de*ue[pi],nI=Math.floor(Fe/R),Ti+=W[ye+pi]-(Fe-nI*R),Fe=nI,Ti<0?(W[ye+pi]=Ti+R,Ti=-1):(W[ye+pi]=Ti,Ti=0);for(;Ti!==0;){for(de-=1,Fe=0,pi=0;pi<iI;pi++)Fe+=W[ye+pi]-R+ue[pi],Fe<0?(W[ye+pi]=Fe+R,Fe=0):(W[ye+pi]=Fe,Fe=1);Ti+=Fe}B[ye]=de}return W=P(W,G)[0],[h(B),h(W)]}function D(d,y){for(var A=d.length,S=y.length,R=[],B=[],V=e,G,W,ue,de,ye;A;){if(B.unshift(d[--A]),g(B),ie(B,y)<0){R.push(0);continue}W=B.length,ue=B[W-1]*V+B[W-2],de=y[S-1]*V+y[S-2],W>S&&(ue=(ue+1)*V),G=Math.ceil(ue/de);do{if(ye=F(y,G),ie(ye,B)<=0)break;G--}while(G);R.push(G),B=C(B,ye)}return R.reverse(),[h(R),h(B)]}function P(d,y){var A=d.length,S=H(A),R=e,B,V,G,W;for(G=0,B=A-1;B>=0;--B)W=G*R+d[B],V=b(W/y),G=W-V*y,S[B]=V|0;return[S,G|0]}function ee(d,y){var A,S=_e(y);if(o)return[new l(d.value/S.value),new l(d.value%S.value)];var R=d.value,B=S.value,V;if(B===0)throw new Error("Cannot divide by zero");if(d.isSmall)return S.isSmall?[new c(b(R/B)),new c(R%B)]:[a[0],d];if(S.isSmall){if(B===1)return[d,a[0]];if(B==-1)return[d.negate(),a[0]];var G=Math.abs(B);if(G<e){A=P(R,G),V=h(A[0]);var W=A[1];return d.sign&&(W=-W),typeof V=="number"?(d.sign!==S.sign&&(V=-V),[new c(V),new c(W)]):[new u(V,d.sign!==S.sign),new c(W)]}B=f(G)}var ue=ie(R,B);if(ue===-1)return[a[0],d];if(ue===0)return[a[d.sign===S.sign?1:-1],a[0]];R.length+B.length<=200?A=z(R,B):A=D(R,B),V=A[0];var de=d.sign!==S.sign,ye=A[1],Fe=d.sign;return typeof V=="number"?(de&&(V=-V),V=new c(V)):V=new u(V,de),typeof ye=="number"?(Fe&&(ye=-ye),ye=new c(ye)):ye=new u(ye,Fe),[V,ye]}u.prototype.divmod=function(d){var y=ee(this,d);return{quotient:y[0],remainder:y[1]}},l.prototype.divmod=c.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(d){return ee(this,d)[0]},l.prototype.over=l.prototype.divide=function(d){return new l(this.value/_e(d).value)},c.prototype.over=c.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(d){return ee(this,d)[1]},l.prototype.mod=l.prototype.remainder=function(d){return new l(this.value%_e(d).value)},c.prototype.remainder=c.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(d){var y=_e(d),A=this.value,S=y.value,R,B,V;if(S===0)return a[1];if(A===0)return a[0];if(A===1)return a[1];if(A===-1)return y.isEven()?a[1]:a[-1];if(y.sign)return a[0];if(!y.isSmall)throw new Error("The exponent "+y.toString()+" is too large.");if(this.isSmall&&p(R=Math.pow(A,S)))return new c(b(R));for(B=this,V=a[1];S&!0&&(V=V.times(B),--S),S!==0;)S/=2,B=B.square();return V},c.prototype.pow=u.prototype.pow,l.prototype.pow=function(d){var y=_e(d),A=this.value,S=y.value,R=BigInt(0),B=BigInt(1),V=BigInt(2);if(S===R)return a[1];if(A===R)return a[0];if(A===B)return a[1];if(A===BigInt(-1))return y.isEven()?a[1]:a[-1];if(y.isNegative())return new l(R);for(var G=this,W=a[1];(S&B)===B&&(W=W.times(G),--S),S!==R;)S/=V,G=G.square();return W},u.prototype.modPow=function(d,y){if(d=_e(d),y=_e(y),y.isZero())throw new Error("Cannot take modPow with modulus 0");var A=a[1],S=this.mod(y);for(d.isNegative()&&(d=d.multiply(a[-1]),S=S.modInv(y));d.isPositive();){if(S.isZero())return a[0];d.isOdd()&&(A=A.multiply(S).mod(y)),d=d.divide(2),S=S.square().mod(y)}return A},l.prototype.modPow=c.prototype.modPow=u.prototype.modPow;function ie(d,y){if(d.length!==y.length)return d.length>y.length?1:-1;for(var A=d.length-1;A>=0;A--)if(d[A]!==y[A])return d[A]>y[A]?1:-1;return 0}u.prototype.compareAbs=function(d){var y=_e(d),A=this.value,S=y.value;return y.isSmall?1:ie(A,S)},c.prototype.compareAbs=function(d){var y=_e(d),A=Math.abs(this.value),S=y.value;return y.isSmall?(S=Math.abs(S),A===S?0:A>S?1:-1):-1},l.prototype.compareAbs=function(d){var y=this.value,A=_e(d).value;return y=y>=0?y:-y,A=A>=0?A:-A,y===A?0:y>A?1:-1},u.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var y=_e(d),A=this.value,S=y.value;return this.sign!==y.sign?y.sign?1:-1:y.isSmall?this.sign?-1:1:ie(A,S)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var y=_e(d),A=this.value,S=y.value;return y.isSmall?A==S?0:A>S?1:-1:A<0!==y.sign?A<0?-1:1:A<0?1:-1},c.prototype.compareTo=c.prototype.compare,l.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var y=this.value,A=_e(d).value;return y===A?0:y>A?1:-1},l.prototype.compareTo=l.prototype.compare,u.prototype.equals=function(d){return this.compare(d)===0},l.prototype.eq=l.prototype.equals=c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(d){return this.compare(d)!==0},l.prototype.neq=l.prototype.notEquals=c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(d){return this.compare(d)>0},l.prototype.gt=l.prototype.greater=c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(d){return this.compare(d)<0},l.prototype.lt=l.prototype.lesser=c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(d){return this.compare(d)>=0},l.prototype.geq=l.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(d){return this.compare(d)<=0},l.prototype.leq=l.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return(this.value[0]&1)===0},c.prototype.isEven=function(){return(this.value&1)===0},l.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return(this.value[0]&1)===1},c.prototype.isOdd=function(){return(this.value&1)===1},l.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},l.prototype.isPositive=c.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},l.prototype.isNegative=c.prototype.isNegative,u.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return Math.abs(this.value)===1},l.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return this.value===0},l.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(d){var y=_e(d);return y.isZero()?!1:y.isUnit()?!0:y.compareAbs(2)===0?this.isEven():this.mod(y).isZero()},l.prototype.isDivisibleBy=c.prototype.isDivisibleBy=u.prototype.isDivisibleBy;function ne(d){var y=d.abs();if(y.isUnit())return!1;if(y.equals(2)||y.equals(3)||y.equals(5))return!0;if(y.isEven()||y.isDivisibleBy(3)||y.isDivisibleBy(5))return!1;if(y.lesser(49))return!0}function J(d,y){for(var A=d.prev(),S=A,R=0,B,V,G,W;S.isEven();)S=S.divide(2),R++;e:for(G=0;G<y.length;G++)if(!d.lesser(y[G])&&(W=sr(y[G]).modPow(S,d),!(W.isUnit()||W.equals(A)))){for(B=R-1;B!=0;B--){if(W=W.square().mod(d),W.isUnit())return!1;if(W.equals(A))continue e}return!1}return!0}u.prototype.isPrime=function(d){var y=ne(this);if(y!==t)return y;var A=this.abs(),S=A.bitLength();if(S<=64)return J(A,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var R=Math.log(2)*S.toJSNumber(),B=Math.ceil(d===!0?2*Math.pow(R,2):R),V=[],G=0;G<B;G++)V.push(sr(G+2));return J(A,V)},l.prototype.isPrime=c.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(d,y){var A=ne(this);if(A!==t)return A;for(var S=this.abs(),R=d===t?5:d,B=[],V=0;V<R;V++)B.push(sr.randBetween(2,S.minus(2),y));return J(S,B)},l.prototype.isProbablePrime=c.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(d){for(var y=sr.zero,A=sr.one,S=_e(d),R=this.abs(),B,V,G;!R.isZero();)B=S.divide(R),V=y,G=S,y=A,S=R,A=V.subtract(B.multiply(A)),R=G.subtract(B.multiply(R));if(!S.isUnit())throw new Error(this.toString()+" and "+d.toString()+" are not co-prime");return y.compare(0)===-1&&(y=y.add(d)),this.isNegative()?y.negate():y},l.prototype.modInv=c.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var d=this.value;return this.sign?q(d,1,this.sign):new u(U(d,1),this.sign)},c.prototype.next=function(){var d=this.value;return d+1<i?new c(d+1):new u(n,!1)},l.prototype.next=function(){return new l(this.value+BigInt(1))},u.prototype.prev=function(){var d=this.value;return this.sign?new u(U(d,1),!0):q(d,1,this.sign)},c.prototype.prev=function(){var d=this.value;return d-1>-i?new c(d-1):new u(n,!0)},l.prototype.prev=function(){return new l(this.value-BigInt(1))};for(var te=[1];2*te[te.length-1]<=e;)te.push(2*te[te.length-1]);var ce=te.length,ae=te[ce-1];function he(d){return Math.abs(d)<=e}u.prototype.shiftLeft=function(d){var y=_e(d).toJSNumber();if(!he(y))throw new Error(String(y)+" is too large for shifting.");if(y<0)return this.shiftRight(-y);var A=this;if(A.isZero())return A;for(;y>=ce;)A=A.multiply(ae),y-=ce-1;return A.multiply(te[y])},l.prototype.shiftLeft=c.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(d){var y,A=_e(d).toJSNumber();if(!he(A))throw new Error(String(A)+" is too large for shifting.");if(A<0)return this.shiftLeft(-A);for(var S=this;A>=ce;){if(S.isZero()||S.isNegative()&&S.isUnit())return S;y=ee(S,ae),S=y[1].isNegative()?y[0].prev():y[0],A-=ce-1}return y=ee(S,te[A]),y[1].isNegative()?y[0].prev():y[0]},l.prototype.shiftRight=c.prototype.shiftRight=u.prototype.shiftRight;function dt(d,y,A){y=_e(y);for(var S=d.isNegative(),R=y.isNegative(),B=S?d.not():d,V=R?y.not():y,G=0,W=0,ue=null,de=null,ye=[];!B.isZero()||!V.isZero();)ue=ee(B,ae),G=ue[1].toJSNumber(),S&&(G=ae-1-G),de=ee(V,ae),W=de[1].toJSNumber(),R&&(W=ae-1-W),B=ue[0],V=de[0],ye.push(A(G,W));for(var Fe=A(S?1:0,R?1:0)!==0?sr(-1):sr(0),Ti=ye.length-1;Ti>=0;Ti-=1)Fe=Fe.multiply(ae).add(sr(ye[Ti]));return Fe}u.prototype.not=function(){return this.negate().prev()},l.prototype.not=c.prototype.not=u.prototype.not,u.prototype.and=function(d){return dt(this,d,function(y,A){return y&A})},l.prototype.and=c.prototype.and=u.prototype.and,u.prototype.or=function(d){return dt(this,d,function(y,A){return y|A})},l.prototype.or=c.prototype.or=u.prototype.or,u.prototype.xor=function(d){return dt(this,d,function(y,A){return y^A})},l.prototype.xor=c.prototype.xor=u.prototype.xor;var ge=1<<30,Vt=(e&-e)*(e&-e)|ge;function Br(d){var y=d.value,A=typeof y=="number"?y|ge:typeof y=="bigint"?y|BigInt(ge):y[0]+y[1]*e|Vt;return A&-A}function Z(d,y){if(y.compareTo(d)<=0){var A=Z(d,y.square(y)),S=A.p,R=A.e,B=S.multiply(y);return B.compareTo(d)<=0?{p:B,e:R*2+1}:{p:S,e:R*2}}return{p:sr(1),e:0}}u.prototype.bitLength=function(){var d=this;return d.compareTo(sr(0))<0&&(d=d.negate().subtract(sr(1))),d.compareTo(sr(0))===0?sr(0):sr(Z(d,sr(2)).e).add(sr(1))},l.prototype.bitLength=c.prototype.bitLength=u.prototype.bitLength;function Ae(d,y){return d=_e(d),y=_e(y),d.greater(y)?d:y}function Q(d,y){return d=_e(d),y=_e(y),d.lesser(y)?d:y}function be(d,y){if(d=_e(d).abs(),y=_e(y).abs(),d.equals(y))return d;if(d.isZero())return y;if(y.isZero())return d;for(var A=a[1],S,R;d.isEven()&&y.isEven();)S=Q(Br(d),Br(y)),d=d.divide(S),y=y.divide(S),A=A.multiply(S);for(;d.isEven();)d=d.divide(Br(d));do{for(;y.isEven();)y=y.divide(Br(y));d.greater(y)&&(R=y,y=d,d=R),y=y.subtract(d)}while(!y.isZero());return A.isUnit()?d:d.multiply(A)}function ze(d,y){return d=_e(d).abs(),y=_e(y).abs(),d.divide(be(d,y)).multiply(y)}function _t(d,y,A){d=_e(d),y=_e(y);var S=A||Math.random,R=Q(d,y),B=Ae(d,y),V=B.subtract(R).add(1);if(V.isSmall)return R.add(Math.floor(S()*V));for(var G=zu(V,e).value,W=[],ue=!0,de=0;de<G.length;de++){var ye=ue?G[de]:e,Fe=b(S()*ye);W.push(Fe),Fe<ye&&(ue=!1)}return R.add(a.fromArray(W,e,!1))}var Ct=function(d,y,A,S){A=A||s,d=String(d),S||(d=d.toLowerCase(),A=A.toLowerCase());var R=d.length,B,V=Math.abs(y),G={};for(B=0;B<A.length;B++)G[A[B]]=B;for(B=0;B<R;B++){var W=d[B];if(W!=="-"&&W in G&&G[W]>=V){if(W==="1"&&V===1)continue;throw new Error(W+" is not a valid digit in base "+y+".")}}y=_e(y);var ue=[],de=d[0]==="-";for(B=de?1:0;B<d.length;B++){var W=d[B];if(W in G)ue.push(_e(G[W]));else if(W==="<"){var ye=B;do B++;while(d[B]!==">"&&B<d.length);ue.push(_e(d.slice(ye+1,B)))}else throw new Error(W+" is not a valid character")}return pa(ue,y,de)};function pa(d,y,A){var S=a[0],R=a[1],B;for(B=d.length-1;B>=0;B--)S=S.add(d[B].times(R)),R=R.times(y);return A?S.negate():S}function fa(d,y){return y=y||s,d<y.length?y[d]:"<"+d+">"}function zu(d,y){if(y=sr(y),y.isZero()){if(d.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(y.equals(-1)){if(d.isZero())return{value:[0],isNegative:!1};if(d.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-d.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var A=Array.apply(null,Array(d.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return A.unshift([1]),{value:[].concat.apply([],A),isNegative:!1}}var S=!1;if(d.isNegative()&&y.isPositive()&&(S=!0,d=d.abs()),y.isUnit())return d.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(d.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:S};for(var R=[],B=d,V;B.isNegative()||B.compareAbs(y)>=0;){V=B.divmod(y),B=V.quotient;var G=V.remainder;G.isNegative()&&(G=y.minus(G).abs(),B=B.next()),R.push(G.toJSNumber())}return R.push(B.toJSNumber()),{value:R.reverse(),isNegative:S}}function Dl(d,y,A){var S=zu(d,y);return(S.isNegative?"-":"")+S.value.map(function(R){return fa(R,A)}).join("")}u.prototype.toArray=function(d){return zu(this,d)},c.prototype.toArray=function(d){return zu(this,d)},l.prototype.toArray=function(d){return zu(this,d)},u.prototype.toString=function(d,y){if(d===t&&(d=10),d!==10)return Dl(this,d,y);for(var A=this.value,S=A.length,R=String(A[--S]),B="0000000",V;--S>=0;)V=String(A[S]),R+=B.slice(V.length)+V;var G=this.sign?"-":"";return G+R},c.prototype.toString=function(d,y){return d===t&&(d=10),d!=10?Dl(this,d,y):String(this.value)},l.prototype.toString=c.prototype.toString,l.prototype.toJSON=u.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf,l.prototype.valueOf=l.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function OH(d){if(p(+d)){var y=+d;if(y===b(y))return o?new l(BigInt(y)):new c(y);throw new Error("Invalid integer: "+d)}var A=d[0]==="-";A&&(d=d.slice(1));var S=d.split(/e/i);if(S.length>2)throw new Error("Invalid integer: "+S.join("e"));if(S.length===2){var R=S[1];if(R[0]==="+"&&(R=R.slice(1)),R=+R,R!==b(R)||!p(R))throw new Error("Invalid integer: "+R+" is not a valid exponent.");var B=S[0],V=B.indexOf(".");if(V>=0&&(R-=B.length-V-1,B=B.slice(0,V)+B.slice(V+1)),R<0)throw new Error("Cannot include negative exponent part for integers");B+=new Array(R+1).join("0"),d=B}var G=/^([0-9][0-9]*)$/.test(d);if(!G)throw new Error("Invalid integer: "+d);if(o)return new l(BigInt(A?"-"+d:d));for(var W=[],ue=d.length,de=r,ye=ue-de;ue>0;)W.push(+d.slice(ye,ue)),ye-=de,ye<0&&(ye=0),ue-=de;return g(W),new u(W,A)}function rI(d){if(o)return new l(BigInt(d));if(p(d)){if(d!==b(d))throw new Error(d+" is not an integer.");return new c(d)}return OH(d.toString())}function _e(d){return typeof d=="number"?rI(d):typeof d=="string"?OH(d):typeof d=="bigint"?new l(d):d}for(var $n=0;$n<1e3;$n++)a[$n]=_e($n),$n>0&&(a[-$n]=_e(-$n));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=Ae,a.min=Q,a.gcd=be,a.lcm=ze,a.isInstance=function(d){return d instanceof u||d instanceof c||d instanceof l},a.randBetween=_t,a.fromArray=function(d,y,A){return pa(d.map(_e),_e(y||10),A)},a}();typeof W0<"u"&&W0.hasOwnProperty("exports")&&(W0.exports=sr);typeof define=="function"&&define.amd&&define(function(){return sr})});var rq=v(or=>{"use strict";var Ife=require("fs"),Sfe=tq(),cu=!1;or.maxObjectSize=100*1e3*1e3;or.maxObjectCount=32768;var Efe=9783072e5,xfe=or.UID=function(t){this.UID=t},uNe=or.parseFile=function(t,e){function r(i){var n=null,s;try{s=Cfe(i)}catch(o){n=o}e(n,s)}if(Buffer.isBuffer(t))return r(t);Ife.readFile(t,function(i,n){if(i)return e(i);r(n)})},Cfe=or.parseBuffer=function(t){var e={},r=t.slice(0,6).toString("utf8");if(r!=="bplist")throw new Error("Invalid binary plist. Expected 'bplist' at offset 0.");var i=t.slice(t.length-32,t.length),n=i.readUInt8(6);cu&&console.log("offsetSize: "+n);var s=i.readUInt8(7);cu&&console.log("objectRefSize: "+s);var o=_D(i,8);cu&&console.log("numObjects: "+o);var a=_D(i,16);cu&&console.log("topObject: "+a);var u=_D(i,24);if(cu&&console.log("offsetTableOffset: "+u),o>or.maxObjectCount)throw new Error("maxObjectCount exceeded");for(var c=[],l=0;l<o;l++){var p=t.slice(u+l*n,u+(l+1)*n);c[l]=xi(p,0),cu&&console.log("Offset for Object #"+l+" is "+c[l]+" ["+c[l].toString(16)+"]")}function f(h){var g=c[h],H=t[g],b=(H&240)>>4,_=H&15;switch(b){case 0:return k();case 1:return C();case 8:return L();case 2:return q();case 3:return j();case 4:return F();case 5:return T();case 6:return T(!0);case 10:return N();case 13:return E();default:throw new Error("Unhandled type 0x"+b.toString(16))}function k(){switch(_){case 0:return null;case 8:return!1;case 9:return!0;case 15:return null;default:throw new Error("Unhandled simple type 0x"+b.toString(16))}}function U(M){var O="",z;for(z=0;z<M.length&&M[z]==0;z++);for(;z<M.length;z++){var D="00"+M[z].toString(16);O+=D.substr(D.length-2)}return O}function C(){var M=Math.pow(2,_);if(M>4){var O=t.slice(g+1,g+1+M),z=U(O);return Sfe(z,16)}if(M<or.maxObjectSize)return xi(t.slice(g+1,g+1+M));throw new Error("To little heap space available! Wanted to read "+M+" bytes, but only "+or.maxObjectSize+" are available.")}function L(){var M=_+1;if(M<or.maxObjectSize)return new xfe(xi(t.slice(g+1,g+1+M)));throw new Error("To little heap space available! Wanted to read "+M+" bytes, but only "+or.maxObjectSize+" are available.")}function q(){var M=Math.pow(2,_);if(M<or.maxObjectSize){var O=t.slice(g+1,g+1+M);if(M===4)return O.readFloatBE(0);if(M===8)return O.readDoubleBE(0)}else throw new Error("To little heap space available! Wanted to read "+M+" bytes, but only "+or.maxObjectSize+" are available.")}function j(){_!=3&&console.error("Unknown date type :"+_+". Parsing anyway...");var M=t.slice(g+1,g+9);return new Date(Efe+1e3*M.readDoubleBE(0))}function F(){var M=1,O=_;if(_==15){var z=t[g+1],D=(z&240)/16;D!=1&&console.error("0x4: UNEXPECTED LENGTH-INT TYPE! "+D);var P=z&15,ee=Math.pow(2,P);M=2+ee,ee<3,O=xi(t.slice(g+2,g+2+ee))}if(O<or.maxObjectSize)return t.slice(g+M,g+M+O);throw new Error("To little heap space available! Wanted to read "+O+" bytes, but only "+or.maxObjectSize+" are available.")}function T(M){M=M||0;var O="utf8",z=_,D=1;if(_==15){var P=t[g+1],ee=(P&240)/16;ee!=1&&console.err("UNEXPECTED LENGTH-INT TYPE! "+ee);var ie=P&15,ne=Math.pow(2,ie),D=2+ne;ne<3,z=xi(t.slice(g+2,g+2+ne))}if(z*=M+1,z<or.maxObjectSize){var J=new Buffer(t.slice(g+D,g+D+z));return M&&(J=Dfe(J),O="ucs2"),J.toString(O)}else throw new Error("To little heap space available! Wanted to read "+z+" bytes, but only "+or.maxObjectSize+" are available.")}function N(){var M=_,O=1;if(_==15){var z=t[g+1],D=(z&240)/16;D!=1&&console.error("0xa: UNEXPECTED LENGTH-INT TYPE! "+D);var P=z&15,ee=Math.pow(2,P);O=2+ee,ee<3,M=xi(t.slice(g+2,g+2+ee))}if(M*s>or.maxObjectSize)throw new Error("To little heap space available!");for(var ie=[],ne=0;ne<M;ne++){var J=xi(t.slice(g+O+ne*s,g+O+(ne+1)*s));ie[ne]=f(J)}return ie}function E(){var M=_,O=1;if(_==15){var z=t[g+1],D=(z&240)/16;D!=1&&console.error("0xD: UNEXPECTED LENGTH-INT TYPE! "+D);var P=z&15,ee=Math.pow(2,P);O=2+ee,ee<3,M=xi(t.slice(g+2,g+2+ee))}if(M*2*s>or.maxObjectSize)throw new Error("To little heap space available!");cu&&console.log("Parsing dictionary #"+h);for(var ie={},ne=0;ne<M;ne++){var J=xi(t.slice(g+O+ne*s,g+O+(ne+1)*s)),te=xi(t.slice(g+O+M*s+ne*s,g+O+M*s+(ne+1)*s)),ce=f(J),ae=f(te);cu&&console.log("  DICT #"+h+": Mapped "+ce+" to "+ae),ie[ce]=ae}return ie}}return[f(a)]};function xi(t,e){e=e||0;for(var r=0,i=e;i<t.length;i++)r<<=8,r|=t[i]&255;return r}function _D(t,e){var r=t.slice(e,e+8);return r.readUInt32BE(4,8)}function Dfe(t){for(var e=t.length,r=0;r<e;r+=2){var i=t[r];t[r]=t[r+1],t[r+1]=i}return t}});var sq=v((lNe,nq)=>{"use strict";var iq=require("os");function Pfe(){var t=process.env,e=t.HOME,r=t.LOGNAME||t.USER||t.LNAME||t.USERNAME;return process.platform==="win32"?t.USERPROFILE||t.HOMEDRIVE+t.HOMEPATH||e||null:process.platform==="darwin"?e||(r?"/Users/"+r:null):process.platform==="linux"?e||(process.getuid()===0?"/root":r?"/home/"+r:null):e||null}nq.exports=typeof iq.homedir=="function"?iq.homedir:Pfe});var uq=v((pNe,aq)=>{"use strict";var Lfe=sq(),oq=Lfe();aq.exports=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return oq?t.replace(/^~($|\/|\\)/,oq+"$1"):t}});var AD=v((fNe,pq)=>{"use strict";var cq=function(t,e,r){return function(){for(var i=this,n=new Array(arguments.length),s=0;s<arguments.length;s++)n[s]=arguments[s];return new e(function(o,a){n.push(function(u,c){if(u)a(u);else if(r.multiArgs){for(var l=new Array(arguments.length-1),p=1;p<arguments.length;p++)l[p-1]=arguments[p];o(l)}else o(c)}),t.apply(i,n)})}},lq=pq.exports=function(t,e,r){typeof e!="function"&&(r=e,e=Promise),r=r||{},r.exclude=r.exclude||[/.+Sync$/];var i=function(s){var o=function(a){return typeof a=="string"?s===a:a.test(s)};return r.include?r.include.some(o):!r.exclude.some(o)},n=typeof t=="function"?function(){return r.excludeMain?t.apply(this,arguments):cq(t,e,r).apply(this,arguments)}:{};return Object.keys(t).reduce(function(s,o){var a=t[o];return s[o]=typeof a=="function"&&i(o)?cq(a,e,r):a,s},n)};lq.all=lq});var dq=v((dNe,fq)=>{"use strict";var Tfe=require("os"),$fe=rq(),kfe=uq(),Rfe=AD(),Mfe=Number(Tfe.release().split(".")[0]),Ofe=kfe(Mfe>=14?"~/Library/Preferences/com.apple.LaunchServices/com.apple.launchservices.secure.plist":"~/Library/Preferences/com.apple.LaunchServices.plist");fq.exports=()=>{if(process.platform!=="darwin")return Promise.reject(new Error("Only OS X is supported"));let t="com.apple.Safari";return Rfe($fe.parseFile)(Ofe).then(e=>{let r=e&&e[0].LSHandlers;if(!r||r.length===0)return t;for(let i of r)if(i.LSHandlerURLScheme==="http"&&i.LSHandlerRoleAll){t=i.LSHandlerRoleAll;break}return t})}});var wq=v((hNe,bq)=>{"use strict";var SD="pending",hq="settled",V0="fulfilled",G0="rejected",Nfe=function(){},mq=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",Ffe=typeof setImmediate>"u"?setTimeout:setImmediate,ag=[],ID;function Bfe(){for(var t=0;t<ag.length;t++)ag[t][0](ag[t][1]);ag=[],ID=!1}function K0(t,e){ag.push([t,e]),ID||(ID=!0,Ffe(Bfe,0))}function Ufe(t,e){function r(n){ED(e,n)}function i(n){ug(e,n)}try{t(r,i)}catch(n){i(n)}}function gq(t){var e=t.owner,r=e._state,i=e._data,n=t[r],s=t.then;if(typeof n=="function"){r=V0;try{i=n(i)}catch(o){ug(s,o)}}Hq(s,i)||(r===V0&&ED(s,i),r===G0&&ug(s,i))}function Hq(t,e){var r;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||typeof e=="object")){var i=e.then;if(typeof i=="function")return i.call(e,function(n){r||(r=!0,e===n?yq(t,n):ED(t,n))},function(n){r||(r=!0,ug(t,n))}),!0}}catch(n){return r||ug(t,n),!0}return!1}function ED(t,e){(t===e||!Hq(t,e))&&yq(t,e)}function yq(t,e){t._state===SD&&(t._state=hq,t._data=e,K0(jfe,t))}function ug(t,e){t._state===SD&&(t._state=hq,t._data=e,K0(qfe,t))}function vq(t){t._then=t._then.forEach(gq)}function jfe(t){t._state=V0,vq(t)}function qfe(t){t._state=G0,vq(t),!t._handled&&mq&&global.process.emit("unhandledRejection",t._data,t)}function Wfe(t){global.process.emit("rejectionHandled",t)}function Vi(t){if(typeof t!="function")throw new TypeError("Promise resolver "+t+" is not a function");if(!(this instanceof Vi))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],Ufe(t,this)}Vi.prototype={constructor:Vi,_state:SD,_then:null,_data:void 0,_handled:!1,then:function(t,e){var r={owner:this,then:new this.constructor(Nfe),fulfilled:t,rejected:e};return(e||t)&&!this._handled&&(this._handled=!0,this._state===G0&&mq&&K0(Wfe,this)),this._state===V0||this._state===G0?K0(gq,r):this._then.push(r),r.then},catch:function(t){return this.then(null,t)}};Vi.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new Vi(function(e,r){var i=[],n=0;function s(u){return n++,function(c){i[u]=c,--n||e(i)}}for(var o=0,a;o<t.length;o++)a=t[o],a&&typeof a.then=="function"?a.then(s(o),r):i[o]=a;n||e(i)})};Vi.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new Vi(function(e,r){for(var i=0,n;i<t.length;i++)n=t[i],n&&typeof n.then=="function"?n.then(e,r):e(n)})};Vi.resolve=function(t){return t&&typeof t=="object"&&t.constructor===Vi?t:new Vi(function(e){e(t)})};Vi.reject=function(t){return new Vi(function(e,r){r(t)})};bq.exports=Vi});var Aq=v((mNe,_q)=>{"use strict";_q.exports=typeof Promise=="function"?Promise:wq()});var Eq=v((gNe,Sq)=>{"use strict";var Vfe=require("child_process").execFile,Iq=Aq(),Gfe=AD();Sq.exports=function(t){return process.platform!=="darwin"?Iq.reject(new Error("Only OS X systems are supported")):Gfe(Vfe,Iq)("osascript",["-e",t]).then(function(e){return e.trim()})}});var Cq=v((HNe,xq)=>{"use strict";var Kfe=Eq();xq.exports=t=>Kfe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)});var Tq=v((yNe,Lq)=>{var Dq=Object.prototype.hasOwnProperty;Lq.exports=Gi;function Gi(t){if(!(this instanceof Gi))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),t)if(t instanceof Gi||typeof Map=="function"&&t instanceof Map)t.forEach(function(e,r){this.set(r,e)},this);else if(Array.isArray(t))t.forEach(function(e){this.set(e[0],e[1])},this);else throw new TypeError("invalid argument")}Gi.prototype.forEach=function(t,e){e=e||this,Object.keys(this._data).forEach(function(r){r!=="size"&&t.call(e,this._data[r].value,this._data[r].key)},this)};Gi.prototype.has=function(t){return!!xD(this._data,t)};Gi.prototype.get=function(t){var e=xD(this._data,t);return e&&e.value};Gi.prototype.set=function(t,e){Xfe(this._data,t,e)};Gi.prototype.delete=function(t){var e=xD(this._data,t);e&&(delete this._data[e._index],this._data.size--)};Gi.prototype.clear=function(){var t=Object.create(null);t.size=0,Object.defineProperty(this,"_data",{value:t,enumerable:!1,configurable:!0,writable:!1})};Object.defineProperty(Gi.prototype,"size",{get:function(){return this._data.size},set:function(t){},enumerable:!0,configurable:!0});Gi.prototype.values=Gi.prototype.keys=Gi.prototype.entries=function(){throw new Error("iterators are not implemented in this version")};function Pq(t,e){return t===e||t!==t&&e!==e}function zfe(t,e,r){this.key=t,this.value=e,this._index=r}function xD(t,e){for(var r=0,i="_"+e,n=i;Dq.call(t,n);n=i+r++)if(Pq(t[n].key,e))return t[n]}function Xfe(t,e,r){for(var i=0,n="_"+e,s=n;Dq.call(t,s);s=n+i++)if(Pq(t[s].key,e)){t[s].value=r;return}t.size++,t[s]=new zfe(e,r,s)}});var $q=v((vNe,CD)=>{process.env.npm_package_name==="pseudomap"&&process.env.npm_lifecycle_script==="test"&&(process.env.TEST_PSEUDOMAP="true");typeof Map=="function"&&!process.env.TEST_PSEUDOMAP?CD.exports=Map:CD.exports=Tq()});var Rq=v((bNe,kq)=>{kq.exports=Qe;Qe.Node=cg;Qe.create=Qe;function Qe(t){var e=this;if(e instanceof Qe||(e=new Qe),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)e.push(arguments[r]);return e}Qe.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null};Qe.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Qe.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Qe.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Jfe(this,arguments[t]);return this.length};Qe.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Yfe(this,arguments[t]);return this.length};Qe.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Qe.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Qe.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,i=0;r!==null;i++)t.call(e,r.value,i,this),r=r.next};Qe.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,i=this.length-1;r!==null;i--)t.call(e,r.value,i,this),r=r.prev};Qe.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Qe.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Qe.prototype.map=function(t,e){e=e||this;for(var r=new Qe,i=this.head;i!==null;)r.push(t.call(e,i.value,this)),i=i.next;return r};Qe.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Qe,i=this.tail;i!==null;)r.push(t.call(e,i.value,this)),i=i.prev;return r};Qe.prototype.reduce=function(t,e){var r,i=this.head;if(arguments.length>1)r=e;else if(this.head)i=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;i!==null;n++)r=t(r,i.value,n),i=i.next;return r};Qe.prototype.reduceReverse=function(t,e){var r,i=this.tail;if(arguments.length>1)r=e;else if(this.tail)i=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;i!==null;n--)r=t(r,i.value,n),i=i.prev;return r};Qe.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Qe.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Qe.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Qe;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;n!==null&&i<t;i++)n=n.next;for(;n!==null&&i<e;i++,n=n.next)r.push(n.value);return r};Qe.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Qe;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;n!==null&&i>e;i--)n=n.prev;for(;n!==null&&i>t;i--,n=n.prev)r.push(n.value);return r};Qe.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=e,this.tail=t,this};function Jfe(t,e){t.tail=new cg(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Yfe(t,e){t.head=new cg(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function cg(t,e,r,i){if(!(this instanceof cg))return new cg(t,e,r,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}});var PD=v((wNe,Nq)=>{"use strict";Nq.exports=vt;var Qfe=$q(),lg=require("util"),Zfe=Rq(),ede=typeof Symbol=="function"&&process.env._nodeLRUCacheForceNoSymbol!=="1",Xn;ede?Xn=function(t){return Symbol(t)}:Xn=function(t){return"_"+t};var Mo=Xn("max"),Js=Xn("length"),jc=Xn("lengthCalculator"),bf=Xn("allowStale"),lu=Xn("maxAge"),Ro=Xn("dispose"),Mq=Xn("noDisposeOnSet"),ar=Xn("lruList"),zn=Xn("cache");function pg(){return 1}function vt(t){if(!(this instanceof vt))return new vt(t);typeof t=="number"&&(t={max:t}),t||(t={});var e=this[Mo]=t.max;(!e||typeof e!="number"||e<=0)&&(this[Mo]=1/0);var r=t.length||pg;typeof r!="function"&&(r=pg),this[jc]=r,this[bf]=t.stale||!1,this[lu]=t.maxAge||0,this[Ro]=t.dispose,this[Mq]=t.noDisposeOnSet||!1,this.reset()}Object.defineProperty(vt.prototype,"max",{set:function(t){(!t||typeof t!="number"||t<=0)&&(t=1/0),this[Mo]=t,fg(this)},get:function(){return this[Mo]},enumerable:!0});Object.defineProperty(vt.prototype,"allowStale",{set:function(t){this[bf]=!!t},get:function(){return this[bf]},enumerable:!0});Object.defineProperty(vt.prototype,"maxAge",{set:function(t){(!t||typeof t!="number"||t<0)&&(t=0),this[lu]=t,fg(this)},get:function(){return this[lu]},enumerable:!0});Object.defineProperty(vt.prototype,"lengthCalculator",{set:function(t){typeof t!="function"&&(t=pg),t!==this[jc]&&(this[jc]=t,this[Js]=0,this[ar].forEach(function(e){e.length=this[jc](e.value,e.key),this[Js]+=e.length},this)),fg(this)},get:function(){return this[jc]},enumerable:!0});Object.defineProperty(vt.prototype,"length",{get:function(){return this[Js]},enumerable:!0});Object.defineProperty(vt.prototype,"itemCount",{get:function(){return this[ar].length},enumerable:!0});vt.prototype.rforEach=function(t,e){e=e||this;for(var r=this[ar].tail;r!==null;){var i=r.prev;Oq(this,t,r,e),r=i}};function Oq(t,e,r,i){var n=r.value;dg(t,n)&&(wf(t,r),t[bf]||(n=void 0)),n&&e.call(i,n.value,n.key,t)}vt.prototype.forEach=function(t,e){e=e||this;for(var r=this[ar].head;r!==null;){var i=r.next;Oq(this,t,r,e),r=i}};vt.prototype.keys=function(){return this[ar].toArray().map(function(t){return t.key},this)};vt.prototype.values=function(){return this[ar].toArray().map(function(t){return t.value},this)};vt.prototype.reset=function(){this[Ro]&&this[ar]&&this[ar].length&&this[ar].forEach(function(t){this[Ro](t.key,t.value)},this),this[zn]=new Qfe,this[ar]=new Zfe,this[Js]=0};vt.prototype.dump=function(){return this[ar].map(function(t){if(!dg(this,t))return{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}},this).toArray().filter(function(t){return t})};vt.prototype.dumpLru=function(){return this[ar]};vt.prototype.inspect=function(t,e){var r="LRUCache {",i=!1,n=this[bf];n&&(r+=`
  allowStale: true`,i=!0);var s=this[Mo];s&&s!==1/0&&(i&&(r+=","),r+=`
  max: `+lg.inspect(s,e),i=!0);var o=this[lu];o&&(i&&(r+=","),r+=`
  maxAge: `+lg.inspect(o,e),i=!0);var a=this[jc];a&&a!==pg&&(i&&(r+=","),r+=`
  length: `+lg.inspect(this[Js],e),i=!0);var u=!1;return this[ar].forEach(function(c){u?r+=`,
  `:(i&&(r+=`,
`),u=!0,r+=`
  `);var l=lg.inspect(c.key).split(`
`).join(`
  `),p={value:c.value};c.maxAge!==o&&(p.maxAge=c.maxAge),a!==pg&&(p.length=c.length),dg(this,c)&&(p.stale=!0),p=lg.inspect(p,e).split(`
`).join(`
  `),r+=l+" => "+p}),(u||i)&&(r+=`
`),r+="}",r};vt.prototype.set=function(t,e,r){r=r||this[lu];var i=r?Date.now():0,n=this[jc](e,t);if(this[zn].has(t)){if(n>this[Mo])return wf(this,this[zn].get(t)),!1;var s=this[zn].get(t),o=s.value;return this[Ro]&&(this[Mq]||this[Ro](t,o.value)),o.now=i,o.maxAge=r,o.value=e,this[Js]+=n-o.length,o.length=n,this.get(t),fg(this),!0}var a=new tde(t,e,n,i,r);return a.length>this[Mo]?(this[Ro]&&this[Ro](t,e),!1):(this[Js]+=a.length,this[ar].unshift(a),this[zn].set(t,this[ar].head),fg(this),!0)};vt.prototype.has=function(t){if(!this[zn].has(t))return!1;var e=this[zn].get(t).value;return!dg(this,e)};vt.prototype.get=function(t){return DD(this,t,!0)};vt.prototype.peek=function(t){return DD(this,t,!1)};vt.prototype.pop=function(){var t=this[ar].tail;return t?(wf(this,t),t.value):null};vt.prototype.del=function(t){wf(this,this[zn].get(t))};vt.prototype.load=function(t){this.reset();for(var e=Date.now(),r=t.length-1;r>=0;r--){var i=t[r],n=i.e||0;if(n===0)this.set(i.k,i.v);else{var s=n-e;s>0&&this.set(i.k,i.v,s)}}};vt.prototype.prune=function(){var t=this;this[zn].forEach(function(e,r){DD(t,r,!1)})};function DD(t,e,r){var i=t[zn].get(e);if(i){var n=i.value;dg(t,n)?(wf(t,i),t[bf]||(n=void 0)):r&&t[ar].unshiftNode(i),n&&(n=n.value)}return n}function dg(t,e){if(!e||!e.maxAge&&!t[lu])return!1;var r=!1,i=Date.now()-e.now;return e.maxAge?r=i>e.maxAge:r=t[lu]&&i>t[lu],r}function fg(t){if(t[Js]>t[Mo])for(var e=t[ar].tail;t[Js]>t[Mo]&&e!==null;){var r=e.prev;wf(t,e),e=r}}function wf(t,e){if(e){var r=e.value;t[Ro]&&t[Ro](r.key,r.value),t[Js]-=r.length,t[zn].delete(r.key),t[ar].removeNode(e)}}function tde(t,e,r,i,n){this.key=t,this.value=e,this.length=r,this.now=i,this.maxAge=n||0}});var Vq=v((_Ne,Wq)=>{Wq.exports=qq;qq.sync=ide;var LD=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Fq=require("path"),rde=LD?";":":",Bq=PI();function Uq(t){var e=new Error("not found: "+t);return e.code="ENOENT",e}function jq(t,e){var r=e.colon||rde,i=e.path||process.env.PATH||"",n=[""];i=i.split(r);var s="";return LD&&(i.unshift(process.cwd()),s=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",n=s.split(r),t.indexOf(".")!==-1&&n[0]!==""&&n.unshift("")),(t.match(/\//)||LD&&t.match(/\\/))&&(i=[""]),{env:i,ext:n,extExe:s}}function qq(t,e,r){typeof e=="function"&&(r=e,e={});var i=jq(t,e),n=i.env,s=i.ext,o=i.extExe,a=[];(function u(c,l){if(c===l)return e.all&&a.length?r(null,a):r(Uq(t));var p=n[c];p.charAt(0)==='"'&&p.slice(-1)==='"'&&(p=p.slice(1,-1));var f=Fq.join(p,t);!p&&/^\.[\\\/]/.test(t)&&(f=t.slice(0,2)+f),function h(g,H){if(g===H)return u(c+1,l);var b=s[g];Bq(f+b,{pathExt:o},function(_,k){if(!_&&k)if(e.all)a.push(f+b);else return r(null,f+b);return h(g+1,H)})}(0,s.length)})(0,n.length)}function ide(t,e){e=e||{};for(var r=jq(t,e),i=r.env,n=r.ext,s=r.extExe,o=[],a=0,u=i.length;a<u;a++){var c=i[a];c.charAt(0)==='"'&&c.slice(-1)==='"'&&(c=c.slice(1,-1));var l=Fq.join(c,t);!c&&/^\.[\\\/]/.test(t)&&(l=t.slice(0,2)+l);for(var p=0,f=n.length;p<f;p++){var h=l+n[p],g;try{if(g=Bq.sync(h,{pathExt:s}),g)if(e.all)o.push(h);else return h}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw Uq(t)}});var Xq=v((ANe,zq)=>{"use strict";var Gq=require("path"),Kq=Vq(),nde=PD(),z0=new nde({max:50,maxAge:30*1e3}),sde=new RegExp(process.platform==="win32"?/[\/\\]/:/\//);function ode(t,e){var r;if(sde.test(t)&&(t=Gq.resolve(t)),e=!!e,r=z0.get(t+"!"+e),z0.has(t))return z0.get(t);try{r=e?Kq.sync(t,{pathExt:Gq.delimiter+(process.env.PATHEXT||"")}):Kq.sync(t)}catch{}return z0.set(t+"!"+e,r),r}zq.exports=ode});var Zq=v((INe,Qq)=>{"use strict";var TD=require("fs"),ade=PD(),Jq=Xq(),ude=process.platform==="win32",$D=new ade({max:50,maxAge:30*1e3});function cde(t){var e,r,i,n;if($D.has(t))return $D.get(t);e=new Buffer(150);try{r=TD.openSync(t,"r"),TD.readSync(r,e,0,150,0),TD.closeSync(r)}catch{}return i=e.toString().trim().match(/#!(.+)/i),i&&(n=i[1].replace(/\/usr\/bin\/env\s+/i,"")),$D.set(t,n),n}function Yq(t,e){return t=""+t,e?(t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t='"'+t+'"'):t=t.replace(/([\(\)%!\^<>&|;,"'\s])/g,"^$1"),t}function lde(t){return/^[a-z0-9_-]+$/i.test(t)?t:Yq(t,!0)}function pde(t,e,r){var i,n,s,o;return e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=r||{},o=t,ude&&(s=Jq(t),s=s||Jq(t,!0),i=s&&cde(s),i&&(e.unshift(s),t=i),n=t!=="echo",t=lde(t),e=e.map(function(a){return Yq(a,n)}),e=["/s","/c",'"'+t+(e.length?" "+e.join(" "):"")+'"'],t=process.env.comspec||"cmd.exe",r.windowsVerbatimArguments=!0),{command:t,args:e,options:r,file:s,original:o}}Qq.exports=pde});var iW=v((SNe,X0)=>{"use strict";var eW=process.platform==="win32";function tW(t,e){var r;return r=new Error(e+" "+t+" ENOENT"),r.code=r.errno="ENOENT",r.syscall=e+" "+t,r}function fde(t,e){var r;eW&&(r=t.emit,t.emit=function(i,n){var s;return i==="exit"&&(s=rW(n,e,"spawn"),s)?r.call(t,"error",s):r.apply(t,arguments)})}function rW(t,e,r){return eW&&t===1&&!e.file?tW(e.original,r):null}X0.exports.hookChildProcess=fde;X0.exports.verifyENOENT=rW;X0.exports.notFoundError=tW});var aW=v((ENe,hg)=>{"use strict";var dde=require("child_process"),nW=Zq(),sW=iW();function oW(t,e,r){var i,n;return i=nW(t,e,r),n=dde.spawn(i.command,i.args,i.options),sW.hookChildProcess(n,i),n}hg.exports=oW;hg.exports.spawn=oW;hg.exports._parse=nW;hg.exports._enoent=sW});var cW=v((xNe,uW)=>{"use strict";uW.exports=function(t){var e=typeof t=="string"?`
`:`
`.charCodeAt(),r=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,t.length-1)),t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t}});var fW=v((CNe,pW)=>{"use strict";var lW=Object.getOwnPropertySymbols,hde=Object.prototype.hasOwnProperty,mde=Object.prototype.propertyIsEnumerable;function gde(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Hde(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}pW.exports=Hde()?Object.assign:function(t,e){for(var r,i=gde(t),n,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)hde.call(r,o)&&(i[o]=r[o]);if(lW){n=lW(r);for(var a=0;a<n.length;a++)mde.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i}});var kD=v((DNe,dW)=>{"use strict";dW.exports=function(t){t=t||{};var e=t.env||process.env,r=t.platform||process.platform;return r!=="win32"?"PATH":Object.keys(e).filter(function(i){return i.toUpperCase()==="PATH"})[0]||"Path"}});var mW=v((PNe,hW)=>{"use strict";var mg=require("path"),yde=kD();hW.exports=function(t){t=t||{};for(var e,r=mg.resolve(t.cwd||"."),i=[];e!==r;)i.push(mg.join(r,"node_modules/.bin")),e=r,r=mg.resolve(r,"..");return i.push(mg.dirname(process.execPath)),i.concat(t.path||process.env[yde()]).join(mg.delimiter)}});var HW=v((LNe,gg)=>{"use strict";var vde=require("child_process"),RD=aW(),bde=cW(),MD=fW(),wde=mW(),gW=kD()(),_de=1024*1024*10;gg.exports=function(t,e,r){return new Promise(function(i,n){var s=RD._parse(t,e,r);r=MD({maxBuffer:_de,stripEof:!0,preferLocal:!0},s.options);var o=function(u){return r.stripEof&&(u=bde(u)),u};r.preferLocal&&(r.env=MD({},r.env||process.env),r.env[gW]=wde({cwd:r.cwd,path:r.env[gW]}));var a=vde.execFile(s.command,s.args,r,function(u,c,l){if(u){u.stdout=c,u.stderr=l,n(u);return}i({stdout:o(c),stderr:o(l)})});RD._enoent.hookChildProcess(a,s)})};gg.exports.shell=function(t,e){var r,i;return e=MD({},e),process.platform==="win32"?(r=process.env.comspec||"cmd.exe",i=["/s","/c",'"'+t+'"'],e.windowsVerbatimArguments=!0):(r="/bin/sh",i=["-c",t]),e.shell&&(r=e.shell),gg.exports(r,i,e)};gg.exports.spawn=RD});var vW=v((TNe,yW)=>{"use strict";yW.exports=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.toLowerCase().replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})}});var wW=v(($Ne,bW)=>{"use strict";var Ade=HW(),Ide=vW();bW.exports=function(){return process.platform!=="linux"?Promise.reject(new Error("Only Linux systems are supported")):Ade("xdg-mime",["query","default","x-scheme-handler/http"]).then(t=>{let e=t.stdout.trim();return{name:Ide(e.replace(/.desktop$/,"").replace("-"," ")),id:e}})}});var AW=v((kNe,_W)=>{"use strict";var Sde=dq(),Ede=Cq();_W.exports=()=>process.platform==="linux"?wW()():process.platform==="darwin"?Sde().then(t=>Ede(t).then(e=>({name:e,id:t}))):Promise.reject(new Error("Only macOS and Linux are supported"))});var No=v((nFe,ND)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?ND.exports={nextTick:Dde}:ND.exports=process;function Dde(t,e,r,i){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,s,o;switch(n){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,i)});default:for(s=new Array(n-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(function(){t.apply(null,s)})}}});var FD=v((sFe,PW)=>{var Pde={}.toString;PW.exports=Array.isArray||function(t){return Pde.call(t)=="[object Array]"}});var BD=v((oFe,LW)=>{LW.exports=require("stream")});var Bo=v((UD,$W)=>{var ew=require("buffer"),Fo=ew.Buffer;function TW(t,e){for(var r in t)e[r]=t[r]}Fo.from&&Fo.alloc&&Fo.allocUnsafe&&Fo.allocUnsafeSlow?$W.exports=ew:(TW(ew,UD),UD.Buffer=If);function If(t,e,r){return Fo(t,e,r)}TW(Fo,If);If.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Fo(t,e,r)};If.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=Fo(t);return e!==void 0?typeof r=="string"?i.fill(e,r):i.fill(e):i.fill(0),i};If.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Fo(t)};If.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ew.SlowBuffer(t)}});var Jn=v(Jr=>{function Lde(t){return Array.isArray?Array.isArray(t):tw(t)==="[object Array]"}Jr.isArray=Lde;function Tde(t){return typeof t=="boolean"}Jr.isBoolean=Tde;function $de(t){return t===null}Jr.isNull=$de;function kde(t){return t==null}Jr.isNullOrUndefined=kde;function Rde(t){return typeof t=="number"}Jr.isNumber=Rde;function Mde(t){return typeof t=="string"}Jr.isString=Mde;function Ode(t){return typeof t=="symbol"}Jr.isSymbol=Ode;function Nde(t){return t===void 0}Jr.isUndefined=Nde;function Fde(t){return tw(t)==="[object RegExp]"}Jr.isRegExp=Fde;function Bde(t){return typeof t=="object"&&t!==null}Jr.isObject=Bde;function Ude(t){return tw(t)==="[object Date]"}Jr.isDate=Ude;function jde(t){return tw(t)==="[object Error]"||t instanceof Error}Jr.isError=jde;function qde(t){return typeof t=="function"}Jr.isFunction=qde;function Wde(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Jr.isPrimitive=Wde;Jr.isBuffer=Buffer.isBuffer;function tw(t){return Object.prototype.toString.call(t)}});var kW=v((uFe,jD)=>{typeof Object.create=="function"?jD.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:jD.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}}});var ur=v((cFe,WD)=>{try{if(qD=require("util"),typeof qD.inherits!="function")throw"";WD.exports=qD.inherits}catch{WD.exports=kW()}var qD});var MW=v((lFe,VD)=>{"use strict";function Vde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var RW=Bo().Buffer,yg=require("util");function Gde(t,e,r){t.copy(e,r)}VD.exports=function(){function t(){Vde(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length},t.prototype.unshift=function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n},t.prototype.concat=function(r){if(this.length===0)return RW.alloc(0);if(this.length===1)return this.head.data;for(var i=RW.allocUnsafe(r>>>0),n=this.head,s=0;n;)Gde(n.data,i,s),s+=n.data.length,n=n.next;return i},t}();yg&&yg.inspect&&yg.inspect.custom&&(VD.exports.prototype[yg.inspect.custom]=function(){var t=yg.inspect({length:this.length});return this.constructor.name+" "+t})});var GD=v((pFe,FW)=>{"use strict";var OW=No();function Kde(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&OW.nextTick(NW,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?(OW.nextTick(NW,r,s),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(s)}),this)}function zde(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function NW(t,e){t.emit("error",e)}FW.exports={destroy:Kde,undestroy:zde}});var rw=v((fFe,BW)=>{BW.exports=require("util").deprecate});var zD=v((dFe,zW)=>{"use strict";var qc=No();zW.exports=Yt;function jW(t){var e=this;this.next=null,this.entry=null,this.finish=function(){fhe(e,t)}}var Xde=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:qc.nextTick,Sf;Yt.WritableState=bg;var qW=Object.create(Jn());qW.inherits=ur();var Jde={deprecate:rw()},WW=BD(),nw=Bo().Buffer,Yde=global.Uint8Array||function(){};function Qde(t){return nw.from(t)}function Zde(t){return nw.isBuffer(t)||t instanceof Yde}var VW=GD();qW.inherits(Yt,WW);function ehe(){}function bg(t,e){Sf=Sf||Wc(),t=t||{};var r=e instanceof Sf;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,n=t.writableHighWaterMark,s=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:r&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){ahe(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new jW(this)}bg.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(bg.prototype,"buffer",{get:Jde.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var iw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(iw=Function.prototype[Symbol.hasInstance],Object.defineProperty(Yt,Symbol.hasInstance,{value:function(t){return iw.call(this,t)?!0:this!==Yt?!1:t&&t._writableState instanceof bg}})):iw=function(t){return t instanceof this};function Yt(t){if(Sf=Sf||Wc(),!iw.call(Yt,this)&&!(this instanceof Sf))return new Yt(t);this._writableState=new bg(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),WW.call(this)}Yt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function the(t,e){var r=new Error("write after end");t.emit("error",r),qc.nextTick(e,r)}function rhe(t,e,r,i){var n=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),qc.nextTick(i,s),n=!1),n}Yt.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&Zde(t);return s&&!nw.isBuffer(t)&&(t=Qde(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=ehe),i.ended?the(this,r):(s||rhe(this,i,t,r))&&(i.pendingcb++,n=nhe(this,i,s,t,e,r)),n};Yt.prototype.cork=function(){var t=this._writableState;t.corked++};Yt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&GW(this,t))};Yt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function ihe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=nw.from(e,r)),e}Object.defineProperty(Yt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function nhe(t,e,r,i,n,s){if(!r){var o=ihe(e,i,n);i!==o&&(r=!0,n="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else KD(t,e,!1,a,i,n,s);return u}function KD(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function she(t,e,r,i,n){--e.pendingcb,r?(qc.nextTick(n,i),qc.nextTick(vg,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(n(i),t._writableState.errorEmitted=!0,t.emit("error",i),vg(t,e))}function ohe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function ahe(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(ohe(r),e)she(t,r,i,e,n);else{var s=KW(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&GW(t,r),i?Xde(UW,t,r,s,n):UW(t,r,s,n)}}function UW(t,e,r,i){r||uhe(t,e),e.pendingcb--,i(),vg(t,e)}function uhe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function GW(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,KD(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new jW(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,p=e.objectMode?1:u.length;if(KD(t,e,!1,p,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Yt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};Yt.prototype._writev=null;Yt.prototype.end=function(t,e,r){var i=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&phe(this,i,r)};function KW(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function che(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),vg(t,e)})}function lhe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,qc.nextTick(che,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function vg(t,e){var r=KW(e);return r&&(lhe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function phe(t,e,r){e.ending=!0,vg(t,e),r&&(e.finished?qc.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function fhe(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}Object.defineProperty(Yt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});Yt.prototype.destroy=VW.destroy;Yt.prototype._undestroy=VW.undestroy;Yt.prototype._destroy=function(t,e){this.end(),e(t)}});var Wc=v((hFe,QW)=>{"use strict";var XW=No(),dhe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};QW.exports=Uo;var JW=Object.create(Jn());JW.inherits=ur();var YW=YD(),JD=zD();JW.inherits(Uo,YW);for(XD=dhe(JD.prototype),sw=0;sw<XD.length;sw++)ow=XD[sw],Uo.prototype[ow]||(Uo.prototype[ow]=JD.prototype[ow]);var XD,ow,sw;function Uo(t){if(!(this instanceof Uo))return new Uo(t);YW.call(this,t),JD.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",hhe)}Object.defineProperty(Uo.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function hhe(){this.allowHalfOpen||this._writableState.ended||XW.nextTick(mhe,this)}function mhe(t){t.end()}Object.defineProperty(Uo.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});Uo.prototype._destroy=function(t,e){this.push(null),this.end(),XW.nextTick(e,t)}});var eP=v(eV=>{"use strict";var ZD=Bo().Buffer,ZW=ZD.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ghe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Hhe(t){var e=ghe(t);if(typeof e!="string"&&(ZD.isEncoding===ZW||!ZW(t)))throw new Error("Unknown encoding: "+t);return e||t}eV.StringDecoder=wg;function wg(t){this.encoding=Hhe(t);var e;switch(this.encoding){case"utf16le":this.text=Ahe,this.end=Ihe,e=4;break;case"utf8":this.fillLast=bhe,e=4;break;case"base64":this.text=She,this.end=Ehe,e=3;break;default:this.write=xhe,this.end=Che;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ZD.allocUnsafe(e)}wg.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};wg.prototype.end=_he;wg.prototype.text=whe;wg.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function QD(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function yhe(t,e,r){var i=e.length-1;if(i<r)return 0;var n=QD(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||n===-2?0:(n=QD(e[i]),n>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||n===-2?0:(n=QD(e[i]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function vhe(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function bhe(t){var e=this.lastTotal-this.lastNeed,r=vhe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function whe(t,e){var r=yhe(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function _he(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Ahe(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Ihe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function She(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Ehe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function xhe(t){return t.toString(this.encoding)}function Che(t){return t&&t.length?this.write(t):""}});var YD=v((HFe,fV)=>{"use strict";var xf=No();fV.exports=bt;var Dhe=FD(),_g;bt.ReadableState=aV;var gFe=require("events").EventEmitter,nV=function(t,e){return t.listeners(e).length},sP=BD(),Ag=Bo().Buffer,Phe=global.Uint8Array||function(){};function Lhe(t){return Ag.from(t)}function The(t){return Ag.isBuffer(t)||t instanceof Phe}var sV=Object.create(Jn());sV.inherits=ur();var tP=require("util"),Xe=void 0;tP&&tP.debuglog?Xe=tP.debuglog("stream"):Xe=function(){};var $he=MW(),oV=GD(),Ef;sV.inherits(bt,sP);var rP=["error","close","destroy","pause","resume"];function khe(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Dhe(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function aV(t,e){_g=_g||Wc(),t=t||{};var r=e instanceof _g;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,n=t.readableHighWaterMark,s=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:r&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new $he,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Ef||(Ef=eP().StringDecoder),this.decoder=new Ef(t.encoding),this.encoding=t.encoding)}function bt(t){if(_g=_g||Wc(),!(this instanceof bt))return new bt(t);this._readableState=new aV(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),sP.call(this)}Object.defineProperty(bt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});bt.prototype.destroy=oV.destroy;bt.prototype._undestroy=oV.undestroy;bt.prototype._destroy=function(t,e){this.push(null),e(t)};bt.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Ag.from(t,e),e=""),i=!0),uV(this,t,e,!1,i)};bt.prototype.unshift=function(t){return uV(this,t,null,!0,!1)};function uV(t,e,r,i,n){var s=t._readableState;if(e===null)s.reading=!1,Nhe(t,s);else{var o;n||(o=Rhe(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Ag.prototype&&(e=Lhe(e)),i?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):iP(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?iP(t,s,e,!1):cV(t,s)):iP(t,s,e,!1))):i||(s.reading=!1)}return Mhe(s)}function iP(t,e,r,i){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&aw(t)),cV(t,e)}function Rhe(t,e){var r;return!The(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Mhe(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}bt.prototype.isPaused=function(){return this._readableState.flowing===!1};bt.prototype.setEncoding=function(t){return Ef||(Ef=eP().StringDecoder),this._readableState.decoder=new Ef(t),this._readableState.encoding=t,this};var tV=8388608;function Ohe(t){return t>=tV?t=tV:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function rV(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Ohe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}bt.prototype.read=function(t){Xe("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Xe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?nP(this):aw(this),null;if(t=rV(t,e),t===0&&e.ended)return e.length===0&&nP(this),null;var i=e.needReadable;Xe("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,Xe("length less than watermark",i)),e.ended||e.reading?(i=!1,Xe("reading or ended",i)):i&&(Xe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=rV(r,e)));var n;return t>0?n=lV(t,e):n=null,n===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&nP(this)),n!==null&&this.emit("data",n),n};function Nhe(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,aw(t)}}function aw(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Xe("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?xf.nextTick(iV,t):iV(t))}function iV(t){Xe("emit readable"),t.emit("readable"),oP(t)}function cV(t,e){e.readingMore||(e.readingMore=!0,xf.nextTick(Fhe,t,e))}function Fhe(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Xe("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}bt.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};bt.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,Xe("pipe count=%d opts=%j",i.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=n?a:b;i.endEmitted?xf.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(_,k){Xe("onunpipe"),_===r&&k&&k.hasUnpiped===!1&&(k.hasUnpiped=!0,l())}function a(){Xe("onend"),t.end()}var u=Bhe(r);t.on("drain",u);var c=!1;function l(){Xe("cleanup"),t.removeListener("close",g),t.removeListener("finish",H),t.removeListener("drain",u),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",f),c=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var p=!1;r.on("data",f);function f(_){Xe("ondata"),p=!1;var k=t.write(_);k===!1&&!p&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&pV(i.pipes,t)!==-1)&&!c&&(Xe("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function h(_){Xe("onerror",_),b(),t.removeListener("error",h),nV(t,"error")===0&&t.emit("error",_)}khe(t,"error",h);function g(){t.removeListener("finish",H),b()}t.once("close",g);function H(){Xe("onfinish"),t.removeListener("close",g),b()}t.once("finish",H);function b(){Xe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(Xe("pipe resume"),r.resume()),t};function Bhe(t){return function(){var e=t._readableState;Xe("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&nV(t,"data")&&(e.flowing=!0,oP(t))}}bt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,r);return this}var o=pV(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};bt.prototype.on=function(t,e){var r=sP.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&aw(this):xf.nextTick(Uhe,this))}return r};bt.prototype.addListener=bt.prototype.on;function Uhe(t){Xe("readable nexttick read 0"),t.read(0)}bt.prototype.resume=function(){var t=this._readableState;return t.flowing||(Xe("resume"),t.flowing=!0,jhe(this,t)),this};function jhe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,xf.nextTick(qhe,t,e))}function qhe(t,e){e.reading||(Xe("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),oP(t),e.flowing&&!e.reading&&t.read(0)}bt.prototype.pause=function(){return Xe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Xe("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function oP(t){var e=t._readableState;for(Xe("flow",e.flowing);e.flowing&&t.read()!==null;);}bt.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;t.on("end",function(){if(Xe("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Xe("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(i=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(o){return function(){return t[o].apply(t,arguments)}}(n));for(var s=0;s<rP.length;s++)t.on(rP[s],this.emit.bind(this,rP[s]));return this._read=function(o){Xe("wrapped _read",o),i&&(i=!1,t.resume())},this};Object.defineProperty(bt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});bt._fromList=lV;function lV(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=Whe(t,e.buffer,e.decoder),r}function Whe(t,e,r){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?i=e.shift():i=r?Vhe(t,e):Ghe(t,e),i}function Vhe(t,e){var r=e.head,i=1,n=r.data;for(t-=n.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(o===s.length?n+=s:n+=s.slice(0,t),t-=o,t===0){o===s.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++i}return e.length-=i,n}function Ghe(t,e){var r=Ag.allocUnsafe(t),i=e.head,n=1;for(i.data.copy(r),t-=i.data.length;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,o),t-=o,t===0){o===s.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=s.slice(o));break}++n}return e.length-=n,r}function nP(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,xf.nextTick(Khe,e,t))}function Khe(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function pV(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}});var aP=v((yFe,mV)=>{"use strict";mV.exports=jo;var uw=Wc(),hV=Object.create(Jn());hV.inherits=ur();hV.inherits(jo,uw);function zhe(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function jo(t){if(!(this instanceof jo))return new jo(t);uw.call(this,t),this._transformState={afterTransform:zhe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Xhe)}function Xhe(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){dV(t,e,r)}):dV(this,null,null)}jo.prototype.push=function(t,e){return this._transformState.needTransform=!1,uw.prototype.push.call(this,t,e)};jo.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};jo.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};jo.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};jo.prototype._destroy=function(t,e){var r=this;uw.prototype._destroy.call(this,t,function(i){e(i),r.emit("close")})};function dV(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var vV=v((vFe,yV)=>{"use strict";yV.exports=Ig;var gV=aP(),HV=Object.create(Jn());HV.inherits=ur();HV.inherits(Ig,gV);function Ig(t){if(!(this instanceof Ig))return new Ig(t);gV.call(this,t)}Ig.prototype._transform=function(t,e,r){r(null,t)}});var bV=v((Pr,cw)=>{var Ys=require("stream");process.env.READABLE_STREAM==="disable"&&Ys?(cw.exports=Ys,Pr=cw.exports=Ys.Readable,Pr.Readable=Ys.Readable,Pr.Writable=Ys.Writable,Pr.Duplex=Ys.Duplex,Pr.Transform=Ys.Transform,Pr.PassThrough=Ys.PassThrough,Pr.Stream=Ys):(Pr=cw.exports=YD(),Pr.Stream=Ys||Pr,Pr.Readable=Pr,Pr.Writable=zD(),Pr.Duplex=Wc(),Pr.Transform=aP(),Pr.PassThrough=vV())});var AV=v((bFe,_V)=>{var wV=bV(),Jhe=require("util");function Yhe(t){return!(typeof t.pipe!="function"||!t.readable||typeof t._read!="function"||!t._readableState)}function Qhe(t,e){if(!Yhe(e))throw new Error("All input streams must be readable");var r=this;e._buffer=[],e.on("readable",function(){for(var i=e.read();i;)this===t[0]?r.push(i):this._buffer.push(i),i=e.read()}),e.on("end",function(){for(var i=t[0];i&&i._readableState.ended;i=t[0]){for(;i._buffer.length;)r.push(i._buffer.shift());t.shift()}t.length||r.push(null)}),e.on("error",this.emit.bind(this,"error")),t.push(e)}function Sg(t,e){if(!(this instanceof Sg))return new Sg(t,e);if(t=t||[],e=e||{},e.objectMode=!0,wV.call(this,e),Array.isArray(t)||(t=[t]),!t.length)return this.push(null);var r=Qhe.bind(this,[]);t.forEach(function(i){Array.isArray(i)?i.forEach(r):r(i)})}Jhe.inherits(Sg,wV);Sg.prototype._read=function(){};_V.exports=Sg});var uP=v((wFe,IV)=>{IV.exports=require("stream")});var EV=v((_Fe,cP)=>{"use strict";function Zhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var SV=Bo().Buffer,Eg=require("util");function eme(t,e,r){t.copy(e,r)}cP.exports=function(){function t(){Zhe(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length},t.prototype.unshift=function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n},t.prototype.concat=function(r){if(this.length===0)return SV.alloc(0);if(this.length===1)return this.head.data;for(var i=SV.allocUnsafe(r>>>0),n=this.head,s=0;n;)eme(n.data,i,s),s+=n.data.length,n=n.next;return i},t}();Eg&&Eg.inspect&&Eg.inspect.custom&&(cP.exports.prototype[Eg.inspect.custom]=function(){var t=Eg.inspect({length:this.length});return this.constructor.name+" "+t})});var lP=v((AFe,DV)=>{"use strict";var xV=No();function tme(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&xV.nextTick(CV,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?(xV.nextTick(CV,r,s),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(s)}),this)}function rme(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function CV(t,e){t.emit("error",e)}DV.exports={destroy:tme,undestroy:rme}});var fP=v((IFe,OV)=>{"use strict";var Vc=No();OV.exports=Qt;function LV(t){var e=this;this.next=null,this.entry=null,this.finish=function(){bme(e,t)}}var ime=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Vc.nextTick,Cf;Qt.WritableState=Cg;var TV=Jn();TV.inherits=ur();var nme={deprecate:rw()},$V=uP(),pw=Bo().Buffer,sme=global.Uint8Array||function(){};function ome(t){return pw.from(t)}function ame(t){return pw.isBuffer(t)||t instanceof sme}var kV=lP();TV.inherits(Qt,$V);function ume(){}function Cg(t,e){Cf=Cf||Gc(),t=t||{};var r=e instanceof Cf;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,n=t.writableHighWaterMark,s=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:r&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){mme(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new LV(this)}Cg.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Cg.prototype,"buffer",{get:nme.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var lw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(lw=Function.prototype[Symbol.hasInstance],Object.defineProperty(Qt,Symbol.hasInstance,{value:function(t){return lw.call(this,t)?!0:this!==Qt?!1:t&&t._writableState instanceof Cg}})):lw=function(t){return t instanceof this};function Qt(t){if(Cf=Cf||Gc(),!lw.call(Qt,this)&&!(this instanceof Cf))return new Qt(t);this._writableState=new Cg(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),$V.call(this)}Qt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function cme(t,e){var r=new Error("write after end");t.emit("error",r),Vc.nextTick(e,r)}function lme(t,e,r,i){var n=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),Vc.nextTick(i,s),n=!1),n}Qt.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&ame(t);return s&&!pw.isBuffer(t)&&(t=ome(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=ume),i.ended?cme(this,r):(s||lme(this,i,t,r))&&(i.pendingcb++,n=fme(this,i,s,t,e,r)),n};Qt.prototype.cork=function(){var t=this._writableState;t.corked++};Qt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&RV(this,t))};Qt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function pme(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=pw.from(e,r)),e}Object.defineProperty(Qt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function fme(t,e,r,i,n,s){if(!r){var o=pme(e,i,n);i!==o&&(r=!0,n="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else pP(t,e,!1,a,i,n,s);return u}function pP(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function dme(t,e,r,i,n){--e.pendingcb,r?(Vc.nextTick(n,i),Vc.nextTick(xg,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(n(i),t._writableState.errorEmitted=!0,t.emit("error",i),xg(t,e))}function hme(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function mme(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(hme(r),e)dme(t,r,i,e,n);else{var s=MV(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&RV(t,r),i?ime(PV,t,r,s,n):PV(t,r,s,n)}}function PV(t,e,r,i){r||gme(t,e),e.pendingcb--,i(),xg(t,e)}function gme(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function RV(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,pP(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new LV(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,p=e.objectMode?1:u.length;if(pP(t,e,!1,p,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Qt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};Qt.prototype._writev=null;Qt.prototype.end=function(t,e,r){var i=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&vme(this,i,r)};function MV(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Hme(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),xg(t,e)})}function yme(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,Vc.nextTick(Hme,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function xg(t,e){var r=MV(e);return r&&(yme(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function vme(t,e,r){e.ending=!0,xg(t,e),r&&(e.finished?Vc.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function bme(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}Object.defineProperty(Qt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});Qt.prototype.destroy=kV.destroy;Qt.prototype._undestroy=kV.undestroy;Qt.prototype._destroy=function(t,e){this.end(),e(t)}});var Gc=v((SFe,UV)=>{"use strict";var NV=No(),wme=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};UV.exports=qo;var FV=Jn();FV.inherits=ur();var BV=mP(),hP=fP();FV.inherits(qo,BV);for(dP=wme(hP.prototype),fw=0;fw<dP.length;fw++)dw=dP[fw],qo.prototype[dw]||(qo.prototype[dw]=hP.prototype[dw]);var dP,dw,fw;function qo(t){if(!(this instanceof qo))return new qo(t);BV.call(this,t),hP.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",_me)}Object.defineProperty(qo.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _me(){this.allowHalfOpen||this._writableState.ended||NV.nextTick(Ame,this)}function Ame(t){t.end()}Object.defineProperty(qo.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});qo.prototype._destroy=function(t,e){this.push(null),this.end(),NV.nextTick(e,t)}});var yP=v(qV=>{"use strict";var HP=Bo().Buffer,jV=HP.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ime(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Sme(t){var e=Ime(t);if(typeof e!="string"&&(HP.isEncoding===jV||!jV(t)))throw new Error("Unknown encoding: "+t);return e||t}qV.StringDecoder=Dg;function Dg(t){this.encoding=Sme(t);var e;switch(this.encoding){case"utf16le":this.text=Lme,this.end=Tme,e=4;break;case"utf8":this.fillLast=Cme,e=4;break;case"base64":this.text=$me,this.end=kme,e=3;break;default:this.write=Rme,this.end=Mme;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=HP.allocUnsafe(e)}Dg.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Dg.prototype.end=Pme;Dg.prototype.text=Dme;Dg.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function gP(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Eme(t,e,r){var i=e.length-1;if(i<r)return 0;var n=gP(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||n===-2?0:(n=gP(e[i]),n>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||n===-2?0:(n=gP(e[i]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function xme(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Cme(t){var e=this.lastTotal-this.lastNeed,r=xme(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Dme(t,e){var r=Eme(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function Pme(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Lme(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Tme(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function $me(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function kme(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Rme(t){return t.toString(this.encoding)}function Mme(t){return t&&t.length?this.write(t):""}});var mP=v((CFe,t4)=>{"use strict";var Pf=No();t4.exports=wt;var Ome=FD(),Pg;wt.ReadableState=JV;var xFe=require("events").EventEmitter,KV=function(t,e){return t.listeners(e).length},AP=uP(),Lg=Bo().Buffer,Nme=global.Uint8Array||function(){};function Fme(t){return Lg.from(t)}function Bme(t){return Lg.isBuffer(t)||t instanceof Nme}var zV=Jn();zV.inherits=ur();var vP=require("util"),Je=void 0;vP&&vP.debuglog?Je=vP.debuglog("stream"):Je=function(){};var Ume=EV(),XV=lP(),Df;zV.inherits(wt,AP);var bP=["error","close","destroy","pause","resume"];function jme(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Ome(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function JV(t,e){Pg=Pg||Gc(),t=t||{};var r=e instanceof Pg;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,n=t.readableHighWaterMark,s=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:r&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Ume,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Df||(Df=yP().StringDecoder),this.decoder=new Df(t.encoding),this.encoding=t.encoding)}function wt(t){if(Pg=Pg||Gc(),!(this instanceof wt))return new wt(t);this._readableState=new JV(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),AP.call(this)}Object.defineProperty(wt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});wt.prototype.destroy=XV.destroy;wt.prototype._undestroy=XV.undestroy;wt.prototype._destroy=function(t,e){this.push(null),e(t)};wt.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Lg.from(t,e),e=""),i=!0),YV(this,t,e,!1,i)};wt.prototype.unshift=function(t){return YV(this,t,null,!0,!1)};function YV(t,e,r,i,n){var s=t._readableState;if(e===null)s.reading=!1,Gme(t,s);else{var o;n||(o=qme(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Lg.prototype&&(e=Fme(e)),i?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):wP(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?wP(t,s,e,!1):QV(t,s)):wP(t,s,e,!1))):i||(s.reading=!1)}return Wme(s)}function wP(t,e,r,i){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&hw(t)),QV(t,e)}function qme(t,e){var r;return!Bme(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Wme(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}wt.prototype.isPaused=function(){return this._readableState.flowing===!1};wt.prototype.setEncoding=function(t){return Df||(Df=yP().StringDecoder),this._readableState.decoder=new Df(t),this._readableState.encoding=t,this};var WV=8388608;function Vme(t){return t>=WV?t=WV:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function VV(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Vme(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}wt.prototype.read=function(t){Je("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Je("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?_P(this):hw(this),null;if(t=VV(t,e),t===0&&e.ended)return e.length===0&&_P(this),null;var i=e.needReadable;Je("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,Je("length less than watermark",i)),e.ended||e.reading?(i=!1,Je("reading or ended",i)):i&&(Je("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=VV(r,e)));var n;return t>0?n=ZV(t,e):n=null,n===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&_P(this)),n!==null&&this.emit("data",n),n};function Gme(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,hw(t)}}function hw(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Je("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Pf.nextTick(GV,t):GV(t))}function GV(t){Je("emit readable"),t.emit("readable"),IP(t)}function QV(t,e){e.readingMore||(e.readingMore=!0,Pf.nextTick(Kme,t,e))}function Kme(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Je("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}wt.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};wt.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,Je("pipe count=%d opts=%j",i.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=n?a:b;i.endEmitted?Pf.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(_,k){Je("onunpipe"),_===r&&k&&k.hasUnpiped===!1&&(k.hasUnpiped=!0,l())}function a(){Je("onend"),t.end()}var u=zme(r);t.on("drain",u);var c=!1;function l(){Je("cleanup"),t.removeListener("close",g),t.removeListener("finish",H),t.removeListener("drain",u),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",f),c=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var p=!1;r.on("data",f);function f(_){Je("ondata"),p=!1;var k=t.write(_);k===!1&&!p&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&e4(i.pipes,t)!==-1)&&!c&&(Je("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function h(_){Je("onerror",_),b(),t.removeListener("error",h),KV(t,"error")===0&&t.emit("error",_)}jme(t,"error",h);function g(){t.removeListener("finish",H),b()}t.once("close",g);function H(){Je("onfinish"),t.removeListener("close",g),b()}t.once("finish",H);function b(){Je("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(Je("pipe resume"),r.resume()),t};function zme(t){return function(){var e=t._readableState;Je("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&KV(t,"data")&&(e.flowing=!0,IP(t))}}wt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,r);return this}var o=e4(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};wt.prototype.on=function(t,e){var r=AP.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&hw(this):Pf.nextTick(Xme,this))}return r};wt.prototype.addListener=wt.prototype.on;function Xme(t){Je("readable nexttick read 0"),t.read(0)}wt.prototype.resume=function(){var t=this._readableState;return t.flowing||(Je("resume"),t.flowing=!0,Jme(this,t)),this};function Jme(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Pf.nextTick(Yme,t,e))}function Yme(t,e){e.reading||(Je("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),IP(t),e.flowing&&!e.reading&&t.read(0)}wt.prototype.pause=function(){return Je("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Je("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function IP(t){var e=t._readableState;for(Je("flow",e.flowing);e.flowing&&t.read()!==null;);}wt.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;t.on("end",function(){if(Je("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Je("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(i=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(o){return function(){return t[o].apply(t,arguments)}}(n));for(var s=0;s<bP.length;s++)t.on(bP[s],this.emit.bind(this,bP[s]));return this._read=function(o){Je("wrapped _read",o),i&&(i=!1,t.resume())},this};Object.defineProperty(wt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});wt._fromList=ZV;function ZV(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=Qme(t,e.buffer,e.decoder),r}function Qme(t,e,r){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?i=e.shift():i=r?Zme(t,e):ege(t,e),i}function Zme(t,e){var r=e.head,i=1,n=r.data;for(t-=n.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(o===s.length?n+=s:n+=s.slice(0,t),t-=o,t===0){o===s.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++i}return e.length-=i,n}function ege(t,e){var r=Lg.allocUnsafe(t),i=e.head,n=1;for(i.data.copy(r),t-=i.data.length;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,o),t-=o,t===0){o===s.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=s.slice(o));break}++n}return e.length-=n,r}function _P(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Pf.nextTick(tge,e,t))}function tge(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function e4(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}});var SP=v((DFe,n4)=>{"use strict";n4.exports=Wo;var mw=Gc(),i4=Jn();i4.inherits=ur();i4.inherits(Wo,mw);function rge(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function Wo(t){if(!(this instanceof Wo))return new Wo(t);mw.call(this,t),this._transformState={afterTransform:rge.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",ige)}function ige(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){r4(t,e,r)}):r4(this,null,null)}Wo.prototype.push=function(t,e){return this._transformState.needTransform=!1,mw.prototype.push.call(this,t,e)};Wo.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};Wo.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};Wo.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Wo.prototype._destroy=function(t,e){var r=this;mw.prototype._destroy.call(this,t,function(i){e(i),r.emit("close")})};function r4(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var u4=v((PFe,a4)=>{"use strict";a4.exports=Tg;var s4=SP(),o4=Jn();o4.inherits=ur();o4.inherits(Tg,s4);function Tg(t){if(!(this instanceof Tg))return new Tg(t);s4.call(this,t)}Tg.prototype._transform=function(t,e,r){r(null,t)}});var c4=v((Lr,gw)=>{var Qs=require("stream");process.env.READABLE_STREAM==="disable"&&Qs?(gw.exports=Qs,Lr=gw.exports=Qs.Readable,Lr.Readable=Qs.Readable,Lr.Writable=Qs.Writable,Lr.Duplex=Qs.Duplex,Lr.Transform=Qs.Transform,Lr.PassThrough=Qs.PassThrough,Lr.Stream=Qs):(Lr=gw.exports=mP(),Lr.Stream=Qs||Lr,Lr.Readable=Lr,Lr.Writable=fP(),Lr.Duplex=Gc(),Lr.Transform=SP(),Lr.PassThrough=u4())});var EP=v((LFe,l4)=>{l4.exports=sge;var nge=Object.prototype.hasOwnProperty;function sge(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)nge.call(r,i)&&(t[i]=r[i])}return t}});var h4=v((TFe,Hw)=>{var p4=c4().Transform,f4=require("util").inherits,d4=EP();function Lf(t){p4.call(this,t),this._destroyed=!1}f4(Lf,p4);Lf.prototype.destroy=function(t){if(!this._destroyed){this._destroyed=!0;var e=this;process.nextTick(function(){t&&e.emit("error",t),e.emit("close")})}};function oge(t,e,r){r(null,t)}function xP(t){return function(e,r,i){return typeof e=="function"&&(i=r,r=e,e={}),typeof r!="function"&&(r=oge),typeof i!="function"&&(i=null),t(e,r,i)}}Hw.exports=xP(function(t,e,r){var i=new Lf(t);return i._transform=e,r&&(i._flush=r),i});Hw.exports.ctor=xP(function(t,e,r){function i(n){if(!(this instanceof i))return new i(n);this.options=d4(t,n),Lf.call(this,this.options)}return f4(i,Lf),i.prototype._transform=e,r&&(i.prototype._flush=r),i});Hw.exports.obj=xP(function(t,e,r){var i=new Lf(d4({objectMode:!0,highWaterMark:16},t));return i._transform=e,r&&(i._flush=r),i})});var H4=v(($Fe,$g)=>{"use strict";$g.exports=g4;$g.exports.ctor=CP;$g.exports.objCtor=uge;$g.exports.obj=cge;var age=h4(),m4=EP();function CP(t,e){typeof t=="function"&&(e=t,t={});var r=age.ctor(t,function(i,n,s){this.options.wantStrings&&(i=i.toString());try{return e.call(this,i,this._index++)&&this.push(i),s()}catch(o){return s(o)}});return r.prototype._index=0,r}function uge(t,e){return typeof t=="function"&&(e=t,t={}),t=m4({objectMode:!0,highWaterMark:16},t),CP(t,e)}function g4(t,e){return CP(t,e)()}function cge(t,e){return typeof t=="function"&&(e=t,t={}),t=m4({objectMode:!0,highWaterMark:16},t),g4(t,e)}});var v4=v((kFe,y4)=>{y4.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=e.space||"";typeof r=="number"&&(r=Array(r+1).join(" "));var i=typeof e.cycles=="boolean"?e.cycles:!1,n=e.replacer||function(a,u){return u},s=e.cmp&&function(a){return function(u){return function(c,l){var p={key:c,value:u[c]},f={key:l,value:u[l]};return a(p,f)}}}(e.cmp),o=[];return function a(u,c,l,p){var f=r?`
`+new Array(p+1).join(r):"",h=r?": ":":";if(l&&l.toJSON&&typeof l.toJSON=="function"&&(l=l.toJSON()),l=n.call(u,c,l),l!==void 0){if(typeof l!="object"||l===null)return JSON.stringify(l);if(lge(l)){for(var g=[],H=0;H<l.length;H++){var b=a(l,H,l[H],p+1)||JSON.stringify(null);g.push(f+r+b)}return"["+g.join(",")+f+"]"}else{if(o.indexOf(l)!==-1){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else o.push(l);for(var _=pge(l).sort(s&&s(l)),g=[],H=0;H<_.length;H++){var c=_[H],k=a(l,c,l[c],p+1);if(k){var U=JSON.stringify(c)+h+k;g.push(f+r+U)}}return o.splice(o.indexOf(l),1),"{"+g.join(",")+f+"}"}}}({"":t},"",t,0)};var lge=Array.isArray||function(t){return{}.toString.call(t)==="[object Array]"},pge=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var i in t)e.call(t,i)&&r.push(i);return r}});var w4=v((RFe,b4)=>{"use strict";var fge=H4().obj,dge=v4(),DP;typeof global.Set=="function"?DP=global.Set:DP=function(){this.keys=[],this.has=function(t){return this.keys.indexOf(t)!==-1},this.add=function(t){this.keys.push(t)}};function hge(t){return function(e){return e[t]}}b4.exports=mge;function mge(t,e){e=e||new DP;var r=dge;return typeof t=="string"?r=hge(t):typeof t=="function"&&(r=t),fge(function(i){var n=r(i);return e.has(n)?!1:(e.add(n),!0)})}});var I4=v((MFe,A4)=>{var gge=uf(),Hge=v0(),PP=require("fs"),kg=function(){},yge=/^v?\.0/.test(process.version),yw=function(t){return typeof t=="function"},vge=function(t){return!yge||!PP?!1:(t instanceof(PP.ReadStream||kg)||t instanceof(PP.WriteStream||kg))&&yw(t.close)},bge=function(t){return t.setHeader&&yw(t.abort)},wge=function(t,e,r,i){i=gge(i);var n=!1;t.on("close",function(){n=!0}),Hge(t,{readable:e,writable:r},function(o){if(o)return i(o);n=!0,i()});var s=!1;return function(o){if(!n&&!s){if(s=!0,vge(t))return t.close(kg);if(bge(t))return t.abort();if(yw(t.destroy))return t.destroy();i(o||new Error("stream was destroyed"))}}},_4=function(t){t()},_ge=function(t,e){return t.pipe(e)},Age=function(){var t=Array.prototype.slice.call(arguments),e=yw(t[t.length-1]||kg)&&t.pop()||kg;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,i=t.map(function(n,s){var o=s<t.length-1,a=s>0;return wge(n,o,a,function(u){r||(r=u),u&&i.forEach(_4),!o&&(i.forEach(_4),e(r))})});return t.reduce(_ge)};A4.exports=Age});var LP=v((OFe,S4)=>{S4.exports=require("stream")});var D4=v((NFe,C4)=>{"use strict";function E4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function Ige(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E4(Object(r),!0).forEach(function(i){Sge(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E4(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Sge(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ege(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x4(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xge(t,e,r){return e&&x4(t.prototype,e),r&&x4(t,r),t}var Cge=require("buffer"),vw=Cge.Buffer,Dge=require("util"),TP=Dge.inspect,Pge=TP&&TP.custom||"inspect";function Lge(t,e,r){vw.prototype.copy.call(t,e,r)}C4.exports=function(){function t(){Ege(this,t),this.head=null,this.tail=null,this.length=0}return xge(t,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return vw.alloc(0);for(var i=vw.allocUnsafe(r>>>0),n=this.head,s=0;n;)Lge(n.data,i,s),s+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,s=i.data;for(r-=s.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++n}return this.length-=n,s}},{key:"_getBuffer",value:function(r){var i=vw.allocUnsafe(r),n=this.head,s=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,a),r-=a,r===0){a===o.length?(++s,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++s}return this.length-=s,i}},{key:Pge,value:function(r,i){return TP(this,Ige({},i,{depth:0,customInspect:!1}))}}]),t}()});var kP=v((FFe,L4)=>{"use strict";function Tge(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick($P,this,t)):process.nextTick($P,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(bw,r):(r._writableState.errorEmitted=!0,process.nextTick(P4,r,s)):process.nextTick(P4,r,s):e?(process.nextTick(bw,r),e(s)):process.nextTick(bw,r)}),this)}function P4(t,e){$P(t,e),bw(t)}function bw(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function $ge(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function $P(t,e){t.emit("error",e)}function kge(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}L4.exports={destroy:Tge,undestroy:$ge,errorOrDestroy:kge}});var pu=v((BFe,k4)=>{"use strict";var $4={};function _n(t,e,r){r||(r=Error);function i(s,o,a){return typeof e=="string"?e:e(s,o,a)}class n extends r{constructor(o,a,u){super(i(o,a,u))}}n.prototype.name=r.name,n.prototype.code=t,$4[t]=n}function T4(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(i=>String(i)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function Rge(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Mge(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Oge(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}_n("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);_n("ERR_INVALID_ARG_TYPE",function(t,e,r){let i;typeof e=="string"&&Rge(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be";let n;if(Mge(t," argument"))n=`The ${t} ${i} ${T4(e,"type")}`;else{let s=Oge(t,".")?"property":"argument";n=`The "${t}" ${s} ${i} ${T4(e,"type")}`}return n+=`. Received type ${typeof r}`,n},TypeError);_n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");_n("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});_n("ERR_STREAM_PREMATURE_CLOSE","Premature close");_n("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});_n("ERR_MULTIPLE_CALLBACK","Callback called multiple times");_n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");_n("ERR_STREAM_WRITE_AFTER_END","write after end");_n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);_n("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);_n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");k4.exports.codes=$4});var RP=v((UFe,R4)=>{"use strict";var Nge=pu().codes.ERR_INVALID_OPT_VALUE;function Fge(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Bge(t,e,r,i){var n=Fge(e,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var s=i?r:"highWaterMark";throw new Nge(s,n)}return Math.floor(n)}return t.objectMode?16:16*1024}R4.exports={getHighWaterMark:Bge}});var NP=v((jFe,U4)=>{"use strict";U4.exports=Nt;function O4(t){var e=this;this.next=null,this.entry=null,this.finish=function(){dHe(e,t)}}var Tf;Nt.WritableState=Mg;var Uge={deprecate:rw()},N4=LP(),_w=require("buffer").Buffer,jge=global.Uint8Array||function(){};function qge(t){return _w.from(t)}function Wge(t){return _w.isBuffer(t)||t instanceof jge}var OP=kP(),Vge=RP(),Gge=Vge.getHighWaterMark,fu=pu().codes,Kge=fu.ERR_INVALID_ARG_TYPE,zge=fu.ERR_METHOD_NOT_IMPLEMENTED,Xge=fu.ERR_MULTIPLE_CALLBACK,Jge=fu.ERR_STREAM_CANNOT_PIPE,Yge=fu.ERR_STREAM_DESTROYED,Qge=fu.ERR_STREAM_NULL_VALUES,Zge=fu.ERR_STREAM_WRITE_AFTER_END,eHe=fu.ERR_UNKNOWN_ENCODING,$f=OP.errorOrDestroy;ur()(Nt,N4);function tHe(){}function Mg(t,e,r){Tf=Tf||Kc(),t=t||{},typeof r!="boolean"&&(r=e instanceof Tf),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Gge(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){uHe(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new O4(this)}Mg.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Mg.prototype,"buffer",{get:Uge.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var ww;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ww=Function.prototype[Symbol.hasInstance],Object.defineProperty(Nt,Symbol.hasInstance,{value:function(e){return ww.call(this,e)?!0:this!==Nt?!1:e&&e._writableState instanceof Mg}})):ww=function(e){return e instanceof this};function Nt(t){Tf=Tf||Kc();var e=this instanceof Tf;if(!e&&!ww.call(Nt,this))return new Nt(t);this._writableState=new Mg(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),N4.call(this)}Nt.prototype.pipe=function(){$f(this,new Jge)};function rHe(t,e){var r=new Zge;$f(t,r),process.nextTick(e,r)}function iHe(t,e,r,i){var n;return r===null?n=new Qge:typeof r!="string"&&!e.objectMode&&(n=new Kge("chunk",["string","Buffer"],r)),n?($f(t,n),process.nextTick(i,n),!1):!0}Nt.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&Wge(t);return s&&!_w.isBuffer(t)&&(t=qge(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=tHe),i.ending?rHe(this,r):(s||iHe(this,i,t,r))&&(i.pendingcb++,n=sHe(this,i,s,t,e,r)),n};Nt.prototype.cork=function(){this._writableState.corked++};Nt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&F4(this,t))};Nt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new eHe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Nt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function nHe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=_w.from(e,r)),e}Object.defineProperty(Nt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function sHe(t,e,r,i,n,s){if(!r){var o=nHe(e,i,n);i!==o&&(r=!0,n="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else MP(t,e,!1,a,i,n,s);return u}function MP(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Yge("write")):r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function oHe(t,e,r,i,n){--e.pendingcb,r?(process.nextTick(n,i),process.nextTick(Rg,t,e),t._writableState.errorEmitted=!0,$f(t,i)):(n(i),t._writableState.errorEmitted=!0,$f(t,i),Rg(t,e))}function aHe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function uHe(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new Xge;if(aHe(r),e)oHe(t,r,i,e,n);else{var s=B4(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&F4(t,r),i?process.nextTick(M4,t,r,s,n):M4(t,r,s,n)}}function M4(t,e,r,i){r||cHe(t,e),e.pendingcb--,i(),Rg(t,e)}function cHe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function F4(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,MP(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new O4(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,p=e.objectMode?1:u.length;if(MP(t,e,!1,p,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Nt.prototype._write=function(t,e,r){r(new zge("_write()"))};Nt.prototype._writev=null;Nt.prototype.end=function(t,e,r){var i=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||fHe(this,i,r),this};Object.defineProperty(Nt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function B4(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function lHe(t,e){t._final(function(r){e.pendingcb--,r&&$f(t,r),e.prefinished=!0,t.emit("prefinish"),Rg(t,e)})}function pHe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(lHe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Rg(t,e){var r=B4(e);if(r&&(pHe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}function fHe(t,e,r){e.ending=!0,Rg(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function dHe(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree.next=t}Object.defineProperty(Nt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Nt.prototype.destroy=OP.destroy;Nt.prototype._undestroy=OP.undestroy;Nt.prototype._destroy=function(t,e){e(t)}});var Kc=v((qFe,q4)=>{"use strict";var hHe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};q4.exports=Zs;var j4=UP(),BP=NP();ur()(Zs,j4);for(FP=hHe(BP.prototype),Aw=0;Aw<FP.length;Aw++)Iw=FP[Aw],Zs.prototype[Iw]||(Zs.prototype[Iw]=BP.prototype[Iw]);var FP,Iw,Aw;function Zs(t){if(!(this instanceof Zs))return new Zs(t);j4.call(this,t),BP.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",mHe)))}Object.defineProperty(Zs.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Zs.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Zs.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function mHe(){this._writableState.ended||process.nextTick(gHe,this)}function gHe(t){t.end()}Object.defineProperty(Zs.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var G4=v((jP,V4)=>{var Sw=require("buffer"),eo=Sw.Buffer;function W4(t,e){for(var r in t)e[r]=t[r]}eo.from&&eo.alloc&&eo.allocUnsafe&&eo.allocUnsafeSlow?V4.exports=Sw:(W4(Sw,jP),jP.Buffer=zc);function zc(t,e,r){return eo(t,e,r)}zc.prototype=Object.create(eo.prototype);W4(eo,zc);zc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return eo(t,e,r)};zc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=eo(t);return e!==void 0?typeof r=="string"?i.fill(e,r):i.fill(e):i.fill(0),i};zc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return eo(t)};zc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Sw.SlowBuffer(t)}});var VP=v(z4=>{"use strict";var WP=G4().Buffer,K4=WP.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function HHe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function yHe(t){var e=HHe(t);if(typeof e!="string"&&(WP.isEncoding===K4||!K4(t)))throw new Error("Unknown encoding: "+t);return e||t}z4.StringDecoder=Og;function Og(t){this.encoding=yHe(t);var e;switch(this.encoding){case"utf16le":this.text=IHe,this.end=SHe,e=4;break;case"utf8":this.fillLast=wHe,e=4;break;case"base64":this.text=EHe,this.end=xHe,e=3;break;default:this.write=CHe,this.end=DHe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=WP.allocUnsafe(e)}Og.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Og.prototype.end=AHe;Og.prototype.text=_He;Og.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function qP(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function vHe(t,e,r){var i=e.length-1;if(i<r)return 0;var n=qP(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||n===-2?0:(n=qP(e[i]),n>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||n===-2?0:(n=qP(e[i]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function bHe(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function wHe(t){var e=this.lastTotal-this.lastNeed,r=bHe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function _He(t,e){var r=vHe(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function AHe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function IHe(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function SHe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function EHe(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function xHe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function CHe(t){return t.toString(this.encoding)}function DHe(t){return t&&t.length?this.write(t):""}});var Ew=v((VFe,Y4)=>{"use strict";var X4=pu().codes.ERR_STREAM_PREMATURE_CLOSE;function PHe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}function LHe(){}function THe(t){return t.setHeader&&typeof t.abort=="function"}function J4(t,e,r){if(typeof e=="function")return J4(t,null,e);e||(e={}),r=PHe(r||LHe);var i=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){n=!1,o=!0,i||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){i=!1,u=!0,n||r.call(t)},l=function(g){r.call(t,g)},p=function(){var g;if(i&&!u)return(!t._readableState||!t._readableState.ended)&&(g=new X4),r.call(t,g);if(n&&!o)return(!t._writableState||!t._writableState.ended)&&(g=new X4),r.call(t,g)},f=function(){t.req.on("finish",a)};return THe(t)?(t.on("complete",a),t.on("abort",p),t.req?f():t.on("request",f)):n&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",p),function(){t.removeListener("complete",a),t.removeListener("abort",p),t.removeListener("request",f),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",p)}}Y4.exports=J4});var Z4=v((GFe,Q4)=>{"use strict";var xw;function du(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $He=Ew(),hu=Symbol("lastResolve"),Xc=Symbol("lastReject"),Ng=Symbol("error"),Cw=Symbol("ended"),Jc=Symbol("lastPromise"),GP=Symbol("handlePromise"),Yc=Symbol("stream");function mu(t,e){return{value:t,done:e}}function kHe(t){var e=t[hu];if(e!==null){var r=t[Yc].read();r!==null&&(t[Jc]=null,t[hu]=null,t[Xc]=null,e(mu(r,!1)))}}function RHe(t){process.nextTick(kHe,t)}function MHe(t,e){return function(r,i){t.then(function(){if(e[Cw]){r(mu(void 0,!0));return}e[GP](r,i)},i)}}var OHe=Object.getPrototypeOf(function(){}),NHe=Object.setPrototypeOf((xw={get stream(){return this[Yc]},next:function(){var e=this,r=this[Ng];if(r!==null)return Promise.reject(r);if(this[Cw])return Promise.resolve(mu(void 0,!0));if(this[Yc].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[Ng]?a(e[Ng]):o(mu(void 0,!0))})});var i=this[Jc],n;if(i)n=new Promise(MHe(i,this));else{var s=this[Yc].read();if(s!==null)return Promise.resolve(mu(s,!1));n=new Promise(this[GP])}return this[Jc]=n,n}},du(xw,Symbol.asyncIterator,function(){return this}),du(xw,"return",function(){var e=this;return new Promise(function(r,i){e[Yc].destroy(null,function(n){if(n){i(n);return}r(mu(void 0,!0))})})}),xw),OHe),FHe=function(e){var r,i=Object.create(NHe,(r={},du(r,Yc,{value:e,writable:!0}),du(r,hu,{value:null,writable:!0}),du(r,Xc,{value:null,writable:!0}),du(r,Ng,{value:null,writable:!0}),du(r,Cw,{value:e._readableState.endEmitted,writable:!0}),du(r,GP,{value:function(s,o){var a=i[Yc].read();a?(i[Jc]=null,i[hu]=null,i[Xc]=null,s(mu(a,!1))):(i[hu]=s,i[Xc]=o)},writable:!0}),r));return i[Jc]=null,$He(e,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=i[Xc];s!==null&&(i[Jc]=null,i[hu]=null,i[Xc]=null,s(n)),i[Ng]=n;return}var o=i[hu];o!==null&&(i[Jc]=null,i[hu]=null,i[Xc]=null,o(mu(void 0,!0))),i[Cw]=!0}),e.on("readable",RHe.bind(null,i)),i};Q4.exports=FHe});var i5=v((KFe,r5)=>{"use strict";function e5(t,e,r,i,n,s,o){try{var a=t[s](o),u=a.value}catch(c){r(c);return}a.done?e(u):Promise.resolve(u).then(i,n)}function BHe(t){return function(){var e=this,r=arguments;return new Promise(function(i,n){var s=t.apply(e,r);function o(u){e5(s,i,n,o,a,"next",u)}function a(u){e5(s,i,n,o,a,"throw",u)}o(void 0)})}}function t5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function UHe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t5(Object(r),!0).forEach(function(i){jHe(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t5(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function jHe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var qHe=pu().codes.ERR_INVALID_ARG_TYPE;function WHe(t,e,r){var i;if(e&&typeof e.next=="function")i=e;else if(e&&e[Symbol.asyncIterator])i=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])i=e[Symbol.iterator]();else throw new qHe("iterable",["Iterable"],e);var n=new t(UHe({objectMode:!0},r)),s=!1;n._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=BHe(function*(){try{var u=yield i.next(),c=u.value,l=u.done;l?n.push(null):n.push(yield c)?o():s=!1}catch(p){n.destroy(p)}}),a.apply(this,arguments)}return n}r5.exports=WHe});var UP=v((XFe,d5)=>{"use strict";d5.exports=Ue;var kf;Ue.ReadableState=a5;var zFe=require("events").EventEmitter,o5=function(e,r){return e.listeners(r).length},Bg=LP(),Dw=require("buffer").Buffer,VHe=global.Uint8Array||function(){};function GHe(t){return Dw.from(t)}function KHe(t){return Dw.isBuffer(t)||t instanceof VHe}var KP=require("util"),Le;KP&&KP.debuglog?Le=KP.debuglog("stream"):Le=function(){};var zHe=D4(),eL=kP(),XHe=RP(),JHe=XHe.getHighWaterMark,Pw=pu().codes,YHe=Pw.ERR_INVALID_ARG_TYPE,QHe=Pw.ERR_STREAM_PUSH_AFTER_EOF,ZHe=Pw.ERR_METHOD_NOT_IMPLEMENTED,eye=Pw.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Rf,zP,XP;ur()(Ue,Bg);var Fg=eL.errorOrDestroy,JP=["error","close","destroy","pause","resume"];function tye(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function a5(t,e,r){kf=kf||Kc(),t=t||{},typeof r!="boolean"&&(r=e instanceof kf),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=JHe(this,t,"readableHighWaterMark",r),this.buffer=new zHe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Rf||(Rf=VP().StringDecoder),this.decoder=new Rf(t.encoding),this.encoding=t.encoding)}function Ue(t){if(kf=kf||Kc(),!(this instanceof Ue))return new Ue(t);var e=this instanceof kf;this._readableState=new a5(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Bg.call(this)}Object.defineProperty(Ue.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Ue.prototype.destroy=eL.destroy;Ue.prototype._undestroy=eL.undestroy;Ue.prototype._destroy=function(t,e){e(t)};Ue.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Dw.from(t,e),e=""),i=!0),u5(this,t,e,!1,i)};Ue.prototype.unshift=function(t){return u5(this,t,null,!0,!1)};function u5(t,e,r,i,n){Le("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,nye(t,s);else{var o;if(n||(o=rye(s,e)),o)Fg(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Dw.prototype&&(e=GHe(e)),i)s.endEmitted?Fg(t,new eye):YP(t,s,e,!0);else if(s.ended)Fg(t,new QHe);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?YP(t,s,e,!1):ZP(t,s)):YP(t,s,e,!1)}else i||(s.reading=!1,ZP(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function YP(t,e,r,i){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Lw(t)),ZP(t,e)}function rye(t,e){var r;return!KHe(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new YHe("chunk",["string","Buffer","Uint8Array"],e)),r}Ue.prototype.isPaused=function(){return this._readableState.flowing===!1};Ue.prototype.setEncoding=function(t){Rf||(Rf=VP().StringDecoder);var e=new Rf(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var n5=1073741824;function iye(t){return t>=n5?t=n5:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function s5(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=iye(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Ue.prototype.read=function(t){Le("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Le("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?QP(this):Lw(this),null;if(t=s5(t,e),t===0&&e.ended)return e.length===0&&QP(this),null;var i=e.needReadable;Le("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,Le("length less than watermark",i)),e.ended||e.reading?(i=!1,Le("reading or ended",i)):i&&(Le("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=s5(r,e)));var n;return t>0?n=p5(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&QP(this)),n!==null&&this.emit("data",n),n};function nye(t,e){if(Le("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Lw(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,c5(t)))}}function Lw(t){var e=t._readableState;Le("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Le("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(c5,t))}function c5(t){var e=t._readableState;Le("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,tL(t)}function ZP(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(sye,t,e))}function sye(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Le("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Ue.prototype._read=function(t){Fg(this,new ZHe("_read()"))};Ue.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,Le("pipe count=%d opts=%j",i.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=n?a:H;i.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(b,_){Le("onunpipe"),b===r&&_&&_.hasUnpiped===!1&&(_.hasUnpiped=!0,l())}function a(){Le("onend"),t.end()}var u=oye(r);t.on("drain",u);var c=!1;function l(){Le("cleanup"),t.removeListener("close",h),t.removeListener("finish",g),t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",H),r.removeListener("data",p),c=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",p);function p(b){Le("ondata");var _=t.write(b);Le("dest.write",_),_===!1&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&f5(i.pipes,t)!==-1)&&!c&&(Le("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function f(b){Le("onerror",b),H(),t.removeListener("error",f),o5(t,"error")===0&&Fg(t,b)}tye(t,"error",f);function h(){t.removeListener("finish",g),H()}t.once("close",h);function g(){Le("onfinish"),t.removeListener("close",h),H()}t.once("finish",g);function H(){Le("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(Le("pipe resume"),r.resume()),t};function oye(t){return function(){var r=t._readableState;Le("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&o5(t,"data")&&(r.flowing=!0,tL(t))}}Ue.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=f5(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Ue.prototype.on=function(t,e){var r=Bg.prototype.on.call(this,t,e),i=this._readableState;return t==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):t==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,Le("on readable",i.length,i.reading),i.length?Lw(this):i.reading||process.nextTick(aye,this)),r};Ue.prototype.addListener=Ue.prototype.on;Ue.prototype.removeListener=function(t,e){var r=Bg.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(l5,this),r};Ue.prototype.removeAllListeners=function(t){var e=Bg.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(l5,this),e};function l5(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function aye(t){Le("readable nexttick read 0"),t.read(0)}Ue.prototype.resume=function(){var t=this._readableState;return t.flowing||(Le("resume"),t.flowing=!t.readableListening,uye(this,t)),t.paused=!1,this};function uye(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(cye,t,e))}function cye(t,e){Le("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),tL(t),e.flowing&&!e.reading&&t.read(0)}Ue.prototype.pause=function(){return Le("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Le("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function tL(t){var e=t._readableState;for(Le("flow",e.flowing);e.flowing&&t.read()!==null;);}Ue.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;t.on("end",function(){if(Le("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Le("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(i=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(a){return function(){return t[a].apply(t,arguments)}}(n));for(var s=0;s<JP.length;s++)t.on(JP[s],this.emit.bind(this,JP[s]));return this._read=function(o){Le("wrapped _read",o),i&&(i=!1,t.resume())},this};typeof Symbol=="function"&&(Ue.prototype[Symbol.asyncIterator]=function(){return zP===void 0&&(zP=Z4()),zP(this)});Object.defineProperty(Ue.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Ue.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Ue.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Ue._fromList=p5;Object.defineProperty(Ue.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function p5(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function QP(t){var e=t._readableState;Le("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(lye,e,t))}function lye(t,e){if(Le("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Ue.from=function(t,e){return XP===void 0&&(XP=i5()),XP(Ue,t,e)});function f5(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}});var rL=v((JFe,m5)=>{"use strict";m5.exports=Vo;var Tw=pu().codes,pye=Tw.ERR_METHOD_NOT_IMPLEMENTED,fye=Tw.ERR_MULTIPLE_CALLBACK,dye=Tw.ERR_TRANSFORM_ALREADY_TRANSFORMING,hye=Tw.ERR_TRANSFORM_WITH_LENGTH_0,$w=Kc();ur()(Vo,$w);function mye(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new fye);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function Vo(t){if(!(this instanceof Vo))return new Vo(t);$w.call(this,t),this._transformState={afterTransform:mye.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",gye)}function gye(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){h5(t,e,r)}):h5(this,null,null)}Vo.prototype.push=function(t,e){return this._transformState.needTransform=!1,$w.prototype.push.call(this,t,e)};Vo.prototype._transform=function(t,e,r){r(new pye("_transform()"))};Vo.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};Vo.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Vo.prototype._destroy=function(t,e){$w.prototype._destroy.call(this,t,function(r){e(r)})};function h5(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new hye;if(t._transformState.transforming)throw new dye;return t.push(null)}});var y5=v((YFe,H5)=>{"use strict";H5.exports=Ug;var g5=rL();ur()(Ug,g5);function Ug(t){if(!(this instanceof Ug))return new Ug(t);g5.call(this,t)}Ug.prototype._transform=function(t,e,r){r(null,t)}});var A5=v((QFe,_5)=>{"use strict";var iL;function Hye(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var w5=pu().codes,yye=w5.ERR_MISSING_ARGS,vye=w5.ERR_STREAM_DESTROYED;function v5(t){if(t)throw t}function bye(t){return t.setHeader&&typeof t.abort=="function"}function wye(t,e,r,i){i=Hye(i);var n=!1;t.on("close",function(){n=!0}),iL===void 0&&(iL=Ew()),iL(t,{readable:e,writable:r},function(o){if(o)return i(o);n=!0,i()});var s=!1;return function(o){if(!n&&!s){if(s=!0,bye(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();i(o||new vye("pipe"))}}}function b5(t){t()}function _ye(t,e){return t.pipe(e)}function Aye(t){return!t.length||typeof t[t.length-1]!="function"?v5:t.pop()}function Iye(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=Aye(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new yye("streams");var n,s=e.map(function(o,a){var u=a<e.length-1,c=a>0;return wye(o,u,c,function(l){n||(n=l),l&&s.forEach(b5),!u&&(s.forEach(b5),i(n))})});return e.reduce(_ye)}_5.exports=Iye});var nL=v((An,qg)=>{var jg=require("stream");process.env.READABLE_STREAM==="disable"&&jg?(qg.exports=jg.Readable,Object.assign(qg.exports,jg),qg.exports.Stream=jg):(An=qg.exports=UP(),An.Stream=jg||An,An.Readable=An,An.Writable=NP(),An.Duplex=Kc(),An.Transform=rL(),An.PassThrough=y5(),An.finished=Ew(),An.pipeline=A5())});var S5=v((ZFe,I5)=>{I5.exports=Sye;function Sye(t){var e=t._readableState;return e?e.objectMode?t.read():t.read(Eye(e)):null}function Eye(t){return t.buffer.length?t.buffer.head?t.buffer.head.data.length:t.buffer[0].length:t.length}});var P5=v((eBe,D5)=>{var kw=nL(),E5=v0(),xye=ur(),Cye=S5(),x5=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),sL=function(t,e){t._corked?t.once("uncork",e):e()},Dye=function(t,e){t._autoDestroy&&t.destroy(e)},C5=function(t,e){return function(r){r?Dye(t,r.message==="premature close"?null:r):e&&!t._ended&&t.end()}},Pye=function(t,e){if(!t||t._writableState&&t._writableState.finished)return e();if(t._writableState)return t.end(e);t.end(),e()},Lye=function(){},Tye=function(t){return new kw.Readable({objectMode:!0,highWaterMark:16}).wrap(t)},Tr=function(t,e,r){if(!(this instanceof Tr))return new Tr(t,e,r);kw.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||r.autoDestroy!==!1,this._forwardDestroy=!r||r.destroy!==!1,this._forwardEnd=!r||r.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};xye(Tr,kw.Duplex);Tr.obj=function(t,e,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new Tr(t,e,r)};Tr.prototype.cork=function(){++this._corked===1&&this.emit("cork")};Tr.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")};Tr.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.end();return}var e=this,r=E5(t,{writable:!0,readable:!1},C5(this,this._forwardEnd)),i=function(){var s=e._ondrain;e._ondrain=null,s&&s()},n=function(){e._writable.removeListener("drain",i),r()};this._unwrite&&process.nextTick(i),this._writable=t,this._writable.on("drain",i),this._unwrite=n,this.uncork()};Tr.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.push(null),this.resume();return}var e=this,r=E5(t,{writable:!1,readable:!0},C5(this)),i=function(){e._forward()},n=function(){e.push(null)},s=function(){e._readable2.removeListener("readable",i),e._readable2.removeListener("end",n),r()};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:Tye(t),this._readable2.on("readable",i),this._readable2.on("end",n),this._unread=s,this._forward()};Tr.prototype._read=function(){this._drained=!0,this._forward()};Tr.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var t;this._drained&&(t=Cye(this._readable2))!==null;)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}};Tr.prototype.destroy=function(t,e){if(e||(e=Lye),this.destroyed)return e(null);this.destroyed=!0;var r=this;process.nextTick(function(){r._destroy(t),e(null)})};Tr.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")};Tr.prototype._write=function(t,e,r){if(!this.destroyed){if(this._corked)return sL(this,this._write.bind(this,t,e,r));if(t===x5)return this._finish(r);if(!this._writable)return r();this._writable.write(t)===!1?this._ondrain=r:this.destroyed||r()}};Tr.prototype._finish=function(t){var e=this;this.emit("preend"),sL(this,function(){Pye(e._forwardEnd&&e._writable,function(){e._writableState.prefinished===!1&&(e._writableState.prefinished=!0),e.emit("prefinish"),sL(e,t)})})};Tr.prototype.end=function(t,e,r){return typeof t=="function"?this.end(null,null,t):typeof e=="function"?this.end(t,null,e):(this._ended=!0,t&&this.write(t),!this._writableState.ending&&!this._writableState.destroyed&&this.write(x5),kw.Writable.prototype.end.call(this,r))};D5.exports=Tr});var $5=v((tBe,Rw)=>{var $ye=I4(),kye=ur(),L5=P5(),T5=function(t){return t.length?Array.isArray(t[0])?t[0]:Array.prototype.slice.call(t):[]},oL=function(t){var e=function(){var r=T5(arguments);if(!(this instanceof e))return new e(r);L5.call(this,null,null,t),r.length&&this.setPipeline(r)};return kye(e,L5),e.prototype.setPipeline=function(){var r=T5(arguments),i=this,n=!1,s=r[0],o=r[r.length-1];o=o.readable?o:null,s=s.writable?s:null;var a=function(){r[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",a),this.on("prefinish",function(){n||i.cork()}),$ye(r,function(u){if(i.removeListener("close",a),u)return i.destroy(u.message==="premature close"?null:u);n=!0,i._autoDestroy===!1&&(i._autoDestroy=!0),i.uncork()}),this.destroyed)return a();this.setWritable(s),this.setReadable(o)},e};Rw.exports=oL({autoDestroy:!1,destroy:!1});Rw.exports.obj=oL({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16});Rw.exports.ctor=oL});var aL=v((rBe,k5)=>{"use strict";k5.exports=function(t){if(typeof t!="string")throw new TypeError("expected a string");var e={negated:!1,pattern:t,original:t};return t.charAt(0)==="!"&&t.charAt(1)!=="("&&(e.negated=!0,e.pattern=t.slice(1)),e}});var uL=v((iBe,j5)=>{"use strict";var Mw=Object.prototype.hasOwnProperty,U5=Object.prototype.toString,R5=Object.defineProperty,M5=Object.getOwnPropertyDescriptor,O5=function(e){return typeof Array.isArray=="function"?Array.isArray(e):U5.call(e)==="[object Array]"},N5=function(e){if(!e||U5.call(e)!=="[object Object]")return!1;var r=Mw.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&Mw.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!i)return!1;var n;for(n in e);return typeof n>"u"||Mw.call(e,n)},F5=function(e,r){R5&&r.name==="__proto__"?R5(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},B5=function(e,r){if(r==="__proto__")if(Mw.call(e,r)){if(M5)return M5(e,r).value}else return;return e[r]};j5.exports=function t(){var e,r,i,n,s,o,a=arguments[0],u=1,c=arguments.length,l=!1;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(e=arguments[u],e!=null)for(r in e)i=B5(a,r),n=B5(e,r),a!==n&&(l&&n&&(N5(n)||(s=O5(n)))?(s?(s=!1,o=i&&O5(i)?i:[]):o=i&&N5(i)?i:{},F5(a,{name:r,newValue:t(l,o,n)})):typeof n<"u"&&F5(a,{name:r,newValue:n}));return a}});var q5=v(cL=>{var Qc=require("path"),Hu=process.platform==="win32",gu=require("fs"),Rye=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Mye(){var t;if(Rye){var e=new Error;t=r}else t=i;return t;function r(n){n&&(e.message=n.message,n=e,i(n))}function i(n){if(n){if(process.throwDeprecation)throw n;if(!process.noDeprecation){var s="fs: missing callback "+(n.stack||n.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function Oye(t){return typeof t=="function"?t:Mye()}var nBe=Qc.normalize;Hu?Go=/(.*?)(?:[\/\\]+|$)/g:Go=/(.*?)(?:[\/]+|$)/g;var Go;Hu?Wg=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Wg=/^[\/]*/;var Wg;cL.realpathSync=function(e,r){if(e=Qc.resolve(e),r&&Object.prototype.hasOwnProperty.call(r,e))return r[e];var i=e,n={},s={},o,a,u,c;l();function l(){var b=Wg.exec(e);o=b[0].length,a=b[0],u=b[0],c="",Hu&&!s[u]&&(gu.lstatSync(u),s[u]=!0)}for(;o<e.length;){Go.lastIndex=o;var p=Go.exec(e);if(c=a,a+=p[0],u=c+p[1],o=Go.lastIndex,!(s[u]||r&&r[u]===u)){var f;if(r&&Object.prototype.hasOwnProperty.call(r,u))f=r[u];else{var h=gu.lstatSync(u);if(!h.isSymbolicLink()){s[u]=!0,r&&(r[u]=u);continue}var g=null;if(!Hu){var H=h.dev.toString(32)+":"+h.ino.toString(32);n.hasOwnProperty(H)&&(g=n[H])}g===null&&(gu.statSync(u),g=gu.readlinkSync(u)),f=Qc.resolve(c,g),r&&(r[u]=f),Hu||(n[H]=g)}e=Qc.resolve(f,e.slice(o)),l()}}return r&&(r[i]=e),e};cL.realpath=function(e,r,i){if(typeof i!="function"&&(i=Oye(r),r=null),e=Qc.resolve(e),r&&Object.prototype.hasOwnProperty.call(r,e))return process.nextTick(i.bind(null,null,r[e]));var n=e,s={},o={},a,u,c,l;p();function p(){var b=Wg.exec(e);a=b[0].length,u=b[0],c=b[0],l="",Hu&&!o[c]?gu.lstat(c,function(_){if(_)return i(_);o[c]=!0,f()}):process.nextTick(f)}function f(){if(a>=e.length)return r&&(r[n]=e),i(null,e);Go.lastIndex=a;var b=Go.exec(e);return l=u,u+=b[0],c=l+b[1],a=Go.lastIndex,o[c]||r&&r[c]===c?process.nextTick(f):r&&Object.prototype.hasOwnProperty.call(r,c)?H(r[c]):gu.lstat(c,h)}function h(b,_){if(b)return i(b);if(!_.isSymbolicLink())return o[c]=!0,r&&(r[c]=c),process.nextTick(f);if(!Hu){var k=_.dev.toString(32)+":"+_.ino.toString(32);if(s.hasOwnProperty(k))return g(null,s[k],c)}gu.stat(c,function(U){if(U)return i(U);gu.readlink(c,function(C,L){Hu||(s[k]=L),g(C,L)})})}function g(b,_,k){if(b)return i(b);var U=Qc.resolve(l,_);r&&(r[k]=U),H(U)}function H(b){e=Qc.resolve(b,e.slice(a)),p()}}});var dL=v((oBe,K5)=>{K5.exports=yu;yu.realpath=yu;yu.sync=fL;yu.realpathSync=fL;yu.monkeypatch=Fye;yu.unmonkeypatch=Bye;var Mf=require("fs"),lL=Mf.realpath,pL=Mf.realpathSync,Nye=process.version,W5=/^v[0-5]\./.test(Nye),V5=q5();function G5(t){return t&&t.syscall==="realpath"&&(t.code==="ELOOP"||t.code==="ENOMEM"||t.code==="ENAMETOOLONG")}function yu(t,e,r){if(W5)return lL(t,e,r);typeof e=="function"&&(r=e,e=null),lL(t,e,function(i,n){G5(i)?V5.realpath(t,e,r):r(i,n)})}function fL(t,e){if(W5)return pL(t,e);try{return pL(t,e)}catch(r){if(G5(r))return V5.realpathSync(t,e);throw r}}function Fye(){Mf.realpath=yu,Mf.realpathSync=fL}function Bye(){Mf.realpath=lL,Mf.realpathSync=pL}});var X5=v((aBe,z5)=>{z5.exports=function(t,e){for(var r=[],i=0;i<t.length;i++){var n=e(t[i],i);Uye(n)?r.push.apply(r,n):r.push(n)}return r};var Uye=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var e6=v((uBe,Z5)=>{"use strict";Z5.exports=Y5;function Y5(t,e,r){t instanceof RegExp&&(t=J5(t,r)),e instanceof RegExp&&(e=J5(e,r));var i=Q5(t,e,r);return i&&{start:i[0],end:i[1],pre:r.slice(0,i[0]),body:r.slice(i[0]+t.length,i[1]),post:r.slice(i[1]+e.length)}}function J5(t,e){var r=e.match(t);return r?r[0]:null}Y5.range=Q5;function Q5(t,e,r){var i,n,s,o,a,u=r.indexOf(t),c=r.indexOf(e,u+1),l=u;if(u>=0&&c>0){for(i=[],s=r.length;l>=0&&!a;)l==u?(i.push(l),u=r.indexOf(t,l+1)):i.length==1?a=[i.pop(),c]:(n=i.pop(),n<s&&(s=n,o=c),c=r.indexOf(e,l+1)),l=u<c&&u>=0?u:c;i.length&&(a=[s,o])}return a}});var u6=v((cBe,a6)=>{var jye=X5(),t6=e6();a6.exports=Vye;var r6="\0SLASH"+Math.random()+"\0",i6="\0OPEN"+Math.random()+"\0",mL="\0CLOSE"+Math.random()+"\0",n6="\0COMMA"+Math.random()+"\0",s6="\0PERIOD"+Math.random()+"\0";function hL(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function qye(t){return t.split("\\\\").join(r6).split("\\{").join(i6).split("\\}").join(mL).split("\\,").join(n6).split("\\.").join(s6)}function Wye(t){return t.split(r6).join("\\").split(i6).join("{").split(mL).join("}").split(n6).join(",").split(s6).join(".")}function o6(t){if(!t)return[""];var e=[],r=t6("{","}",t);if(!r)return t.split(",");var i=r.pre,n=r.body,s=r.post,o=i.split(",");o[o.length-1]+="{"+n+"}";var a=o6(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Vye(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Of(qye(t),!0).map(Wye)):[]}function Gye(t){return"{"+t+"}"}function Kye(t){return/^-?0\d/.test(t)}function zye(t,e){return t<=e}function Xye(t,e){return t>=e}function Of(t,e){var r=[],i=t6("{","}",t);if(!i||/\$$/.test(i.pre))return[t];var n=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),o=n||s,a=i.body.indexOf(",")>=0;if(!o&&!a)return i.post.match(/,.*\}/)?(t=i.pre+"{"+i.body+mL+i.post,Of(t)):[t];var u;if(o)u=i.body.split(/\.\./);else if(u=o6(i.body),u.length===1&&(u=Of(u[0],!1).map(Gye),u.length===1)){var l=i.post.length?Of(i.post,!1):[""];return l.map(function(E){return i.pre+u[0]+E})}var c=i.pre,l=i.post.length?Of(i.post,!1):[""],p;if(o){var f=hL(u[0]),h=hL(u[1]),g=Math.max(u[0].length,u[1].length),H=u.length==3?Math.abs(hL(u[2])):1,b=zye,_=h<f;_&&(H*=-1,b=Xye);var k=u.some(Kye);p=[];for(var U=f;b(U,h);U+=H){var C;if(s)C=String.fromCharCode(U),C==="\\"&&(C="");else if(C=String(U),k){var L=g-C.length;if(L>0){var q=new Array(L+1).join("0");U<0?C="-"+q+C.slice(1):C=q+C}}p.push(C)}}else p=jye(u,function(N){return Of(N,!1)});for(var j=0;j<p.length;j++)for(var F=0;F<l.length;F++){var T=c+p[j]+l[F];(!e||o||T)&&r.push(T)}return r}});var Fw=v((lBe,d6)=>{d6.exports=Ki;Ki.Minimatch=$r;var Vg=function(){try{return require("path")}catch{}}()||{sep:"/"};Ki.sep=Vg.sep;var yL=Ki.GLOBSTAR=$r.GLOBSTAR={},Jye=u6(),c6={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},gL="[^/]",HL=gL+"*?",Yye="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Qye="(?:(?!(?:\\/|^)\\.).)*?",l6=Zye("().*{}+?[]^$\\!");function Zye(t){return t.split("").reduce(function(e,r){return e[r]=!0,e},{})}var p6=/\/+/;Ki.filter=eve;function eve(t,e){return e=e||{},function(r,i,n){return Ki(r,t,e)}}function vu(t,e){e=e||{};var r={};return Object.keys(t).forEach(function(i){r[i]=t[i]}),Object.keys(e).forEach(function(i){r[i]=e[i]}),r}Ki.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return Ki;var e=Ki,r=function(n,s,o){return e(n,s,vu(t,o))};return r.Minimatch=function(n,s){return new e.Minimatch(n,vu(t,s))},r.Minimatch.defaults=function(n){return e.defaults(vu(t,n)).Minimatch},r.filter=function(n,s){return e.filter(n,vu(t,s))},r.defaults=function(n){return e.defaults(vu(t,n))},r.makeRe=function(n,s){return e.makeRe(n,vu(t,s))},r.braceExpand=function(n,s){return e.braceExpand(n,vu(t,s))},r.match=function(i,n,s){return e.match(i,n,vu(t,s))},r};$r.defaults=function(t){return Ki.defaults(t).Minimatch};function Ki(t,e,r){return Nw(e),r||(r={}),!r.nocomment&&e.charAt(0)==="#"?!1:new $r(e,r).match(t)}function $r(t,e){if(!(this instanceof $r))return new $r(t,e);Nw(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&Vg.sep!=="/"&&(t=t.split(Vg.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}$r.prototype.debug=function(){};$r.prototype.make=tve;function tve(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(i){return i.split(p6)}),this.debug(this.pattern,r),r=r.map(function(i,n,s){return i.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(i){return i.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}$r.prototype.parseNegate=rve;function rve(){var t=this.pattern,e=!1,r=this.options,i=0;if(!r.nonegate){for(var n=0,s=t.length;n<s&&t.charAt(n)==="!";n++)e=!e,i++;i&&(this.pattern=t.substr(i)),this.negate=e}}Ki.braceExpand=function(t,e){return f6(t,e)};$r.prototype.braceExpand=f6;function f6(t,e){return e||(this instanceof $r?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,Nw(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:Jye(t)}var ive=1024*64,Nw=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>ive)throw new TypeError("pattern is too long")};$r.prototype.parse=nve;var Ow={};function nve(t,e){Nw(t);var r=this.options;if(t==="**")if(r.noglobstar)t="*";else return yL;if(t==="")return"";var i="",n=!!r.nocase,s=!1,o=[],a=[],u,c=!1,l=-1,p=-1,f=t.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=this;function g(){if(u){switch(u){case"*":i+=HL,n=!0;break;case"?":i+=gL,n=!0;break;default:i+="\\"+u;break}h.debug("clearStateChar %j %j",u,i),u=!1}}for(var H=0,b=t.length,_;H<b&&(_=t.charAt(H));H++){if(this.debug("%s	%s %s %j",t,H,i,_),s&&l6[_]){i+="\\"+_,s=!1;continue}switch(_){case"/":return!1;case"\\":g(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,H,i,_),c){this.debug("  in class"),_==="!"&&H===p+1&&(_="^"),i+=_;continue}h.debug("call clearStateChar %j",u),g(),u=_,r.noext&&g();continue;case"(":if(c){i+="(";continue}if(!u){i+="\\(";continue}o.push({type:u,start:H-1,reStart:i.length,open:c6[u].open,close:c6[u].close}),i+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,i),u=!1;continue;case")":if(c||!o.length){i+="\\)";continue}g(),n=!0;var k=o.pop();i+=k.close,k.type==="!"&&a.push(k),k.reEnd=i.length;continue;case"|":if(c||!o.length||s){i+="\\|",s=!1;continue}g(),i+="|";continue;case"[":if(g(),c){i+="\\"+_;continue}c=!0,p=H,l=i.length,i+=_;continue;case"]":if(H===p+1||!c){i+="\\"+_,s=!1;continue}var U=t.substring(p+1,H);try{RegExp("["+U+"]")}catch{var C=this.parse(U,Ow);i=i.substr(0,l)+"\\["+C[0]+"\\]",n=n||C[1],c=!1;continue}n=!0,c=!1,i+=_;continue;default:g(),s?s=!1:l6[_]&&!(_==="^"&&c)&&(i+="\\"),i+=_}}for(c&&(U=t.substr(p+1),C=this.parse(U,Ow),i=i.substr(0,l)+"\\["+C[0],n=n||C[1]),k=o.pop();k;k=o.pop()){var L=i.slice(k.reStart+k.open.length);this.debug("setting tail",i,k),L=L.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(J,te,ce){return ce||(ce="\\"),te+te+ce+"|"}),this.debug(`tail=%j
   %s`,L,L,k,i);var q=k.type==="*"?HL:k.type==="?"?gL:"\\"+k.type;n=!0,i=i.slice(0,k.reStart)+q+"\\("+L}g(),s&&(i+="\\\\");var j=!1;switch(i.charAt(0)){case"[":case".":case"(":j=!0}for(var F=a.length-1;F>-1;F--){var T=a[F],N=i.slice(0,T.reStart),E=i.slice(T.reStart,T.reEnd-8),M=i.slice(T.reEnd-8,T.reEnd),O=i.slice(T.reEnd);M+=O;var z=N.split("(").length-1,D=O;for(H=0;H<z;H++)D=D.replace(/\)[+*?]?/,"");O=D;var P="";O===""&&e!==Ow&&(P="$");var ee=N+E+O+P+M;i=ee}if(i!==""&&n&&(i="(?=.)"+i),j&&(i=f+i),e===Ow)return[i,n];if(!n)return ove(t);var ie=r.nocase?"i":"";try{var ne=new RegExp("^"+i+"$",ie)}catch{return new RegExp("$.")}return ne._glob=t,ne._src=i,ne}Ki.makeRe=function(t,e){return new $r(t,e||{}).makeRe()};$r.prototype.makeRe=sve;function sve(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?HL:e.dot?Yye:Qye,i=e.nocase?"i":"",n=t.map(function(s){return s.map(function(o){return o===yL?r:typeof o=="string"?ave(o):o._src}).join("\\/")}).join("|");n="^(?:"+n+")$",this.negate&&(n="^(?!"+n+").*$");try{this.regexp=new RegExp(n,i)}catch{this.regexp=!1}return this.regexp}Ki.match=function(t,e,r){r=r||{};var i=new $r(e,r);return t=t.filter(function(n){return i.match(n)}),i.options.nonull&&!t.length&&t.push(e),t};$r.prototype.match=function(e,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;var i=this.options;Vg.sep!=="/"&&(e=e.split(Vg.sep).join("/")),e=e.split(p6),this.debug(this.pattern,"split",e);var n=this.set;this.debug(this.pattern,"set",n);var s,o;for(o=e.length-1;o>=0&&(s=e[o],!s);o--);for(o=0;o<n.length;o++){var a=n[o],u=e;i.matchBase&&a.length===1&&(u=[s]);var c=this.matchOne(u,a,r);if(c)return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate};$r.prototype.matchOne=function(t,e,r){var i=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var n=0,s=0,o=t.length,a=e.length;n<o&&s<a;n++,s++){this.debug("matchOne loop");var u=e[s],c=t[n];if(this.debug(e,u,c),u===!1)return!1;if(u===yL){this.debug("GLOBSTAR",[e,u,c]);var l=n,p=s+1;if(p===a){for(this.debug("** at the end");n<o;n++)if(t[n]==="."||t[n]===".."||!i.dot&&t[n].charAt(0)===".")return!1;return!0}for(;l<o;){var f=t[l];if(this.debug(`
globstar while`,t,l,e,p,f),this.matchOne(t.slice(l),e.slice(p),r))return this.debug("globstar found match!",l,o,f),!0;if(f==="."||f===".."||!i.dot&&f.charAt(0)==="."){this.debug("dot detected!",t,l,e,p);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,t,l,e,p),l===o))}var h;if(typeof u=="string"?(h=c===u,this.debug("string match",u,c,h)):(h=c.match(u),this.debug("pattern match",u,c,h)),!h)return!1}if(n===o&&s===a)return!0;if(n===o)return r;if(s===a)return n===o-1&&t[n]==="";throw new Error("wtf?")};function ove(t){return t.replace(/\\(.)/g,"$1")}function ave(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Uw=v((pBe,Bw)=>{"use strict";function h6(t){return t.charAt(0)==="/"}function m6(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=e.exec(t),i=r[1]||"",n=Boolean(i&&i.charAt(1)!==":");return Boolean(r[2]||n)}Bw.exports=process.platform==="win32"?m6:h6;Bw.exports.posix=h6;Bw.exports.win32=m6});var bL=v(bu=>{bu.setopts=dve;bu.ownProp=g6;bu.makeAbs=Gg;bu.finish=hve;bu.mark=mve;bu.isIgnored=y6;bu.childrenIgnored=gve;function g6(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var uve=require("fs"),Nf=require("path"),cve=Fw(),H6=Uw(),vL=cve.Minimatch;function lve(t,e){return t.localeCompare(e,"en")}function pve(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map(fve))}function fve(t){var e=null;if(t.slice(-3)==="/**"){var r=t.replace(/(\/\*\*)+$/,"");e=new vL(r,{dot:!0})}return{matcher:new vL(t,{dot:!0}),gmatcher:e}}function dve(t,e,r){if(r||(r={}),r.matchBase&&e.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!r.silent,t.pattern=e,t.strict=r.strict!==!1,t.realpath=!!r.realpath,t.realpathCache=r.realpathCache||Object.create(null),t.follow=!!r.follow,t.dot=!!r.dot,t.mark=!!r.mark,t.nodir=!!r.nodir,t.nodir&&(t.mark=!0),t.sync=!!r.sync,t.nounique=!!r.nounique,t.nonull=!!r.nonull,t.nosort=!!r.nosort,t.nocase=!!r.nocase,t.stat=!!r.stat,t.noprocess=!!r.noprocess,t.absolute=!!r.absolute,t.fs=r.fs||uve,t.maxLength=r.maxLength||1/0,t.cache=r.cache||Object.create(null),t.statCache=r.statCache||Object.create(null),t.symlinks=r.symlinks||Object.create(null),pve(t,r),t.changedCwd=!1;var i=process.cwd();g6(r,"cwd")?(t.cwd=Nf.resolve(r.cwd),t.changedCwd=t.cwd!==i):t.cwd=i,t.root=r.root||Nf.resolve(t.cwd,"/"),t.root=Nf.resolve(t.root),process.platform==="win32"&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=H6(t.cwd)?t.cwd:Gg(t,t.cwd),process.platform==="win32"&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,t.minimatch=new vL(e,r),t.options=t.minimatch.options}function hve(t){for(var e=t.nounique,r=e?[]:Object.create(null),i=0,n=t.matches.length;i<n;i++){var s=t.matches[i];if(!s||Object.keys(s).length===0){if(t.nonull){var o=t.minimatch.globSet[i];e?r.push(o):r[o]=!0}}else{var a=Object.keys(s);e?r.push.apply(r,a):a.forEach(function(u){r[u]=!0})}}if(e||(r=Object.keys(r)),t.nosort||(r=r.sort(lve)),t.mark){for(var i=0;i<r.length;i++)r[i]=t._mark(r[i]);t.nodir&&(r=r.filter(function(u){var c=!/\/$/.test(u),l=t.cache[u]||t.cache[Gg(t,u)];return c&&l&&(c=l!=="DIR"&&!Array.isArray(l)),c}))}t.ignore.length&&(r=r.filter(function(u){return!y6(t,u)})),t.found=r}function mve(t,e){var r=Gg(t,e),i=t.cache[r],n=e;if(i){var s=i==="DIR"||Array.isArray(i),o=e.slice(-1)==="/";if(s&&!o?n+="/":!s&&o&&(n=n.slice(0,-1)),n!==e){var a=Gg(t,n);t.statCache[a]=t.statCache[r],t.cache[a]=t.cache[r]}}return n}function Gg(t,e){var r=e;return e.charAt(0)==="/"?r=Nf.join(t.root,e):H6(e)||e===""?r=e:t.changedCwd?r=Nf.resolve(t.cwd,e):r=Nf.resolve(e),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function y6(t,e){return t.ignore.length?t.ignore.some(function(r){return r.matcher.match(e)||!!(r.gmatcher&&r.gmatcher.match(e))}):!1}function gve(t,e){return t.ignore.length?t.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(e))}):!1}});var A6=v((gBe,_6)=>{_6.exports=w6;w6.GlobSync=cr;var Hve=dL(),v6=Fw(),dBe=v6.Minimatch,hBe=AL().Glob,mBe=require("util"),wL=require("path"),b6=require("assert"),jw=Uw(),Zc=bL(),yve=Zc.setopts,_L=Zc.ownProp,vve=Zc.childrenIgnored,bve=Zc.isIgnored;function w6(t,e){if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new cr(t,e).found}function cr(t,e){if(!t)throw new Error("must provide pattern");if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof cr))return new cr(t,e);if(yve(this,t,e),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var i=0;i<r;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}cr.prototype._finish=function(){if(b6(this instanceof cr),this.realpath){var t=this;this.matches.forEach(function(e,r){var i=t.matches[r]=Object.create(null);for(var n in e)try{n=t._makeAbs(n);var s=Hve.realpathSync(n,t.realpathCache);i[s]=!0}catch(o){if(o.syscall==="stat")i[t._makeAbs(n)]=!0;else throw o}})}Zc.finish(this)};cr.prototype._process=function(t,e,r){b6(this instanceof cr);for(var i=0;typeof t[i]=="string";)i++;var n;switch(i){case t.length:this._processSimple(t.join("/"),e);return;case 0:n=null;break;default:n=t.slice(0,i).join("/");break}var s=t.slice(i),o;n===null?o=".":((jw(n)||jw(t.join("/")))&&(!n||!jw(n))&&(n="/"+n),o=n);var a=this._makeAbs(o);if(!vve(this,o)){var u=s[0]===v6.GLOBSTAR;u?this._processGlobStar(n,o,a,s,e,r):this._processReaddir(n,o,a,s,e,r)}};cr.prototype._processReaddir=function(t,e,r,i,n,s){var o=this._readdir(r,s);if(o){for(var a=i[0],u=!!this.minimatch.negate,c=a._glob,l=this.dot||c.charAt(0)===".",p=[],f=0;f<o.length;f++){var h=o[f];if(h.charAt(0)!=="."||l){var g;u&&!t?g=!h.match(a):g=h.match(a),g&&p.push(h)}}var H=p.length;if(H!==0){if(i.length===1&&!this.mark&&!this.stat){this.matches[n]||(this.matches[n]=Object.create(null));for(var f=0;f<H;f++){var h=p[f];t&&(t.slice(-1)!=="/"?h=t+"/"+h:h=t+h),h.charAt(0)==="/"&&!this.nomount&&(h=wL.join(this.root,h)),this._emitMatch(n,h)}return}i.shift();for(var f=0;f<H;f++){var h=p[f],b;t?b=[t,h]:b=[h],this._process(b.concat(i),n,s)}}}};cr.prototype._emitMatch=function(t,e){if(!bve(this,e)){var r=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var i=this.cache[r];if(i==="DIR"||Array.isArray(i))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}};cr.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,r,i;try{r=this.fs.lstatSync(t)}catch(s){if(s.code==="ENOENT")return null}var n=r&&r.isSymbolicLink();return this.symlinks[t]=n,!n&&r&&!r.isDirectory()?this.cache[t]="FILE":e=this._readdir(t,!1),e};cr.prototype._readdir=function(t,e){var r;if(e&&!_L(this.symlinks,t))return this._readdirInGlobStar(t);if(_L(this.cache,t)){var i=this.cache[t];if(!i||i==="FILE")return null;if(Array.isArray(i))return i}try{return this._readdirEntries(t,this.fs.readdirSync(t))}catch(n){return this._readdirError(t,n),null}};cr.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var r=0;r<e.length;r++){var i=e[r];t==="/"?i=t+i:i=t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,e};cr.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(t);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=e.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e);break}};cr.prototype._processGlobStar=function(t,e,r,i,n,s){var o=this._readdir(r,s);if(o){var a=i.slice(1),u=t?[t]:[],c=u.concat(a);this._process(c,n,!1);var l=o.length,p=this.symlinks[r];if(!(p&&s))for(var f=0;f<l;f++){var h=o[f];if(!(h.charAt(0)==="."&&!this.dot)){var g=u.concat(o[f],a);this._process(g,n,!0);var H=u.concat(o[f],i);this._process(H,n,!0)}}}};cr.prototype._processSimple=function(t,e){var r=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),!!r){if(t&&jw(t)&&!this.nomount){var i=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=wL.join(this.root,t):(t=wL.resolve(this.root,t),i&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}};cr.prototype._stat=function(t){var e=this._makeAbs(t),r=t.slice(-1)==="/";if(t.length>this.maxLength)return!1;if(!this.stat&&_L(this.cache,e)){var o=this.cache[e];if(Array.isArray(o)&&(o="DIR"),!r||o==="DIR")return o;if(r&&o==="FILE")return!1}var i,n=this.statCache[e];if(!n){var s;try{s=this.fs.lstatSync(e)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[e]=!1,!1}if(s&&s.isSymbolicLink())try{n=this.fs.statSync(e)}catch{n=s}else n=s}this.statCache[e]=n;var o=!0;return n&&(o=n.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||o,r&&o==="FILE"?!1:o};cr.prototype._mark=function(t){return Zc.mark(this,t)};cr.prototype._makeAbs=function(t){return Zc.makeAbs(this,t)}});var S6=v((HBe,I6)=>{var wve=IC(),Kg=Object.create(null),_ve=uf();I6.exports=wve(Ave);function Ave(t,e){return Kg[t]?(Kg[t].push(e),null):(Kg[t]=[e],Ive(t))}function Ive(t){return _ve(function e(){var r=Kg[t],i=r.length,n=Sve(arguments);try{for(var s=0;s<i;s++)r[s].apply(null,n)}finally{r.length>i?(r.splice(0,i),process.nextTick(function(){e.apply(null,n)})):delete Kg[t]}})}function Sve(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i]=t[i];return r}});var AL=v((bBe,x6)=>{x6.exports=el;var Eve=dL(),E6=Fw(),yBe=E6.Minimatch,xve=ur(),Cve=require("events").EventEmitter,IL=require("path"),SL=require("assert"),zg=Uw(),xL=A6(),tl=bL(),Dve=tl.setopts,EL=tl.ownProp,CL=S6(),vBe=require("util"),Pve=tl.childrenIgnored,Lve=tl.isIgnored,Tve=uf();function el(t,e,r){if(typeof e=="function"&&(r=e,e={}),e||(e={}),e.sync){if(r)throw new TypeError("callback provided to sync glob");return xL(t,e)}return new Ze(t,e,r)}el.sync=xL;var $ve=el.GlobSync=xL.GlobSync;el.glob=el;function kve(t,e){if(e===null||typeof e!="object")return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t}el.hasMagic=function(t,e){var r=kve({},e);r.noprocess=!0;var i=new Ze(t,r),n=i.minimatch.set;if(!t)return!1;if(n.length>1)return!0;for(var s=0;s<n[0].length;s++)if(typeof n[0][s]!="string")return!0;return!1};el.Glob=Ze;xve(Ze,Cve);function Ze(t,e,r){if(typeof e=="function"&&(r=e,e=null),e&&e.sync){if(r)throw new TypeError("callback provided to sync glob");return new $ve(t,e)}if(!(this instanceof Ze))return new Ze(t,e,r);Dve(this,t,e),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),typeof r=="function"&&(r=Tve(r),this.on("error",r),this.on("end",function(u){r(null,u)}));var n=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(i===0)return a();for(var s=!0,o=0;o<i;o++)this._process(this.minimatch.set[o],o,!1,a);s=!1;function a(){--n._processing,n._processing<=0&&(s?process.nextTick(function(){n._finish()}):n._finish())}}Ze.prototype._finish=function(){if(SL(this instanceof Ze),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();tl.finish(this),this.emit("end",this.found)}};Ze.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var t=this.matches.length;if(t===0)return this._finish();for(var e=this,r=0;r<this.matches.length;r++)this._realpathSet(r,i);function i(){--t===0&&e._finish()}};Ze.prototype._realpathSet=function(t,e){var r=this.matches[t];if(!r)return e();var i=Object.keys(r),n=this,s=i.length;if(s===0)return e();var o=this.matches[t]=Object.create(null);i.forEach(function(a,u){a=n._makeAbs(a),Eve.realpath(a,n.realpathCache,function(c,l){c?c.syscall==="stat"?o[a]=!0:n.emit("error",c):o[l]=!0,--s===0&&(n.matches[t]=o,e())})})};Ze.prototype._mark=function(t){return tl.mark(this,t)};Ze.prototype._makeAbs=function(t){return tl.makeAbs(this,t)};Ze.prototype.abort=function(){this.aborted=!0,this.emit("abort")};Ze.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};Ze.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var r=t[e];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);this._processQueue.length=0;for(var e=0;e<i.length;e++){var n=i[e];this._processing--,this._process(n[0],n[1],n[2],n[3])}}}};Ze.prototype._process=function(t,e,r,i){if(SL(this instanceof Ze),SL(typeof i=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([t,e,r,i]);return}for(var n=0;typeof t[n]=="string";)n++;var s;switch(n){case t.length:this._processSimple(t.join("/"),e,i);return;case 0:s=null;break;default:s=t.slice(0,n).join("/");break}var o=t.slice(n),a;s===null?a=".":((zg(s)||zg(t.join("/")))&&(!s||!zg(s))&&(s="/"+s),a=s);var u=this._makeAbs(a);if(Pve(this,a))return i();var c=o[0]===E6.GLOBSTAR;c?this._processGlobStar(s,a,u,o,e,r,i):this._processReaddir(s,a,u,o,e,r,i)}};Ze.prototype._processReaddir=function(t,e,r,i,n,s,o){var a=this;this._readdir(r,s,function(u,c){return a._processReaddir2(t,e,r,i,n,s,c,o)})};Ze.prototype._processReaddir2=function(t,e,r,i,n,s,o,a){if(!o)return a();for(var u=i[0],c=!!this.minimatch.negate,l=u._glob,p=this.dot||l.charAt(0)===".",f=[],h=0;h<o.length;h++){var g=o[h];if(g.charAt(0)!=="."||p){var H;c&&!t?H=!g.match(u):H=g.match(u),H&&f.push(g)}}var b=f.length;if(b===0)return a();if(i.length===1&&!this.mark&&!this.stat){this.matches[n]||(this.matches[n]=Object.create(null));for(var h=0;h<b;h++){var g=f[h];t&&(t!=="/"?g=t+"/"+g:g=t+g),g.charAt(0)==="/"&&!this.nomount&&(g=IL.join(this.root,g)),this._emitMatch(n,g)}return a()}i.shift();for(var h=0;h<b;h++){var g=f[h],_;t&&(t!=="/"?g=t+"/"+g:g=t+g),this._process([g].concat(i),n,s,a)}a()};Ze.prototype._emitMatch=function(t,e){if(!this.aborted&&!Lve(this,e)){if(this.paused){this._emitQueue.push([t,e]);return}var r=zg(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var i=this.cache[r];if(i==="DIR"||Array.isArray(i))return}this.matches[t][e]=!0;var n=this.statCache[r];n&&this.emit("stat",e,n),this.emit("match",e)}}};Ze.prototype._readdirInGlobStar=function(t,e){if(this.aborted)return;if(this.follow)return this._readdir(t,!1,e);var r="lstat\0"+t,i=this,n=CL(r,s);n&&i.fs.lstat(t,n);function s(o,a){if(o&&o.code==="ENOENT")return e();var u=a&&a.isSymbolicLink();i.symlinks[t]=u,!u&&a&&!a.isDirectory()?(i.cache[t]="FILE",e()):i._readdir(t,!1,e)}};Ze.prototype._readdir=function(t,e,r){if(!this.aborted&&(r=CL("readdir\0"+t+"\0"+e,r),!!r)){if(e&&!EL(this.symlinks,t))return this._readdirInGlobStar(t,r);if(EL(this.cache,t)){var i=this.cache[t];if(!i||i==="FILE")return r();if(Array.isArray(i))return r(null,i)}var n=this;n.fs.readdir(t,Rve(this,t,r))}};function Rve(t,e,r){return function(i,n){i?t._readdirError(e,i,r):t._readdirEntries(e,n,r)}}Ze.prototype._readdirEntries=function(t,e,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<e.length;i++){var n=e[i];t==="/"?n=t+n:n=t+"/"+n,this.cache[n]=!0}return this.cache[t]=e,r(null,e)}};Ze.prototype._readdirError=function(t,e,r){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(t);if(this.cache[i]="FILE",i===this.cwdAbs){var n=new Error(e.code+" invalid cwd "+this.cwd);n.path=this.cwd,n.code=e.code,this.emit("error",n),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e);break}return r()}};Ze.prototype._processGlobStar=function(t,e,r,i,n,s,o){var a=this;this._readdir(r,s,function(u,c){a._processGlobStar2(t,e,r,i,n,s,c,o)})};Ze.prototype._processGlobStar2=function(t,e,r,i,n,s,o,a){if(!o)return a();var u=i.slice(1),c=t?[t]:[],l=c.concat(u);this._process(l,n,!1,a);var p=this.symlinks[r],f=o.length;if(p&&s)return a();for(var h=0;h<f;h++){var g=o[h];if(!(g.charAt(0)==="."&&!this.dot)){var H=c.concat(o[h],u);this._process(H,n,!0,a);var b=c.concat(o[h],i);this._process(b,n,!0,a)}}a()};Ze.prototype._processSimple=function(t,e,r){var i=this;this._stat(t,function(n,s){i._processSimple2(t,e,n,s,r)})};Ze.prototype._processSimple2=function(t,e,r,i,n){if(this.matches[e]||(this.matches[e]=Object.create(null)),!i)return n();if(t&&zg(t)&&!this.nomount){var s=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=IL.join(this.root,t):(t=IL.resolve(this.root,t),s&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),n()};Ze.prototype._stat=function(t,e){var r=this._makeAbs(t),i=t.slice(-1)==="/";if(t.length>this.maxLength)return e();if(!this.stat&&EL(this.cache,r)){var n=this.cache[r];if(Array.isArray(n)&&(n="DIR"),!i||n==="DIR")return e(null,n);if(i&&n==="FILE")return e()}var s,o=this.statCache[r];if(o!==void 0){if(o===!1)return e(null,o);var a=o.isDirectory()?"DIR":"FILE";return i&&a==="FILE"?e():e(null,a,o)}var u=this,c=CL("stat\0"+r,l);c&&u.fs.lstat(r,c);function l(p,f){if(f&&f.isSymbolicLink())return u.fs.stat(r,function(h,g){h?u._stat2(t,r,null,f,e):u._stat2(t,r,h,g,e)});u._stat2(t,r,p,f,e)}};Ze.prototype._stat2=function(t,e,r,i,n){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[e]=!1,n();var s=t.slice(-1)==="/";if(this.statCache[e]=i,e.slice(-1)==="/"&&i&&!i.isDirectory())return n(null,!1,i);var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||o,s&&o==="FILE"?n():n(null,o,i)}});var D6=v((wBe,C6)=>{C6.exports=function(e){if(typeof e!="string"||e==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(r[2])return!0;e=e.slice(r.index+r[0].length)}return!1}});var T6=v((_Be,L6)=>{var Mve=D6(),P6={"{":"}","(":")","[":"]"},Ove=function(t){if(t[0]==="!")return!0;for(var e=0,r=-2,i=-2,n=-2,s=-2,o=-2;e<t.length;){if(t[e]==="*"||t[e+1]==="?"&&/[\].+)]/.test(t[e])||i!==-1&&t[e]==="["&&t[e+1]!=="]"&&(i<e&&(i=t.indexOf("]",e)),i>e&&(o===-1||o>i||(o=t.indexOf("\\",e),o===-1||o>i)))||n!==-1&&t[e]==="{"&&t[e+1]!=="}"&&(n=t.indexOf("}",e),n>e&&(o=t.indexOf("\\",e),o===-1||o>n))||s!==-1&&t[e]==="("&&t[e+1]==="?"&&/[:!=]/.test(t[e+2])&&t[e+3]!==")"&&(s=t.indexOf(")",e),s>e&&(o=t.indexOf("\\",e),o===-1||o>s))||r!==-1&&t[e]==="("&&t[e+1]!=="|"&&(r<e&&(r=t.indexOf("|",e)),r!==-1&&t[r+1]!==")"&&(s=t.indexOf(")",r),s>r&&(o=t.indexOf("\\",r),o===-1||o>s))))return!0;if(t[e]==="\\"){var a=t[e+1];e+=2;var u=P6[a];if(u){var c=t.indexOf(u,e);c!==-1&&(e=c+1)}if(t[e]==="!")return!0}else e++}return!1},Nve=function(t){if(t[0]==="!")return!0;for(var e=0;e<t.length;){if(/[*?{}()[\]]/.test(t[e]))return!0;if(t[e]==="\\"){var r=t[e+1];e+=2;var i=P6[r];if(i){var n=t.indexOf(i,e);n!==-1&&(e=n+1)}if(t[e]==="!")return!0}else e++}return!1};L6.exports=function(e,r){if(typeof e!="string"||e==="")return!1;if(Mve(e))return!0;var i=Ove;return r&&r.strict===!1&&(i=Nve),i(e)}});var k6=v((ABe,$6)=>{"use strict";var Fve=T6(),Bve=require("path").posix.dirname,Uve=require("os").platform()==="win32",qw="/",jve=/\\/g,qve=/\\([!*?|[\](){}])/g;$6.exports=function(e,r){var i=Object.assign({flipBackslashes:!0},r);i.flipBackslashes&&Uve&&e.indexOf(qw)<0&&(e=e.replace(jve,qw)),Wve(e)&&(e+=qw),e+="a";do e=Bve(e);while(Vve(e));return e.replace(qve,"$1")};function Wve(t){var e=t.slice(-1),r;switch(e){case"}":r="{";break;case"]":r="[";break;default:return!1}var i=t.indexOf(r);return i<0?!1:t.slice(i+1,-1).includes(qw)}function Vve(t){return/\([^()]+$/.test(t)||t[0]==="{"||t[0]==="["||/[^\\][{[]/.test(t)?!0:Fve(t)}});var M6=v((IBe,R6)=>{"use strict";R6.exports=function(){return/^[\\\/]{2,}[^\\\/]+[\\\/]+[^\\\/]+/}});var N6=v((SBe,O6)=>{"use strict";var Gve=M6()();O6.exports=function(t){if(typeof t!="string")throw new TypeError("expected a string");return Gve.test(t)}});var B6=v((EBe,F6)=>{"use strict";var Kve=N6();F6.exports=function(e){if(typeof e!="string")throw new TypeError("expected filepath to be a string");return!Kve(e)&&!/^([a-z]:)?[\\\/]/i.test(e)}});var U6=v((DL,PL)=>{(function(t){DL&&typeof DL=="object"&&typeof PL<"u"?PL.exports=t():typeof define=="function"&&define.amd?define([],t):typeof window<"u"?window.isWindows=t():typeof global<"u"?global.isWindows=t():typeof self<"u"?self.isWindows=t():this.isWindows=t()})(function(){"use strict";return function(){return process&&(process.platform==="win32"||/^(msys|cygwin)$/.test(process.env.OSTYPE))}})});var q6=v((xBe,j6)=>{"use strict";var zve=B6(),Xve=U6();j6.exports=Xg;function Xg(t){if(typeof t!="string")throw new TypeError("isAbsolute expects a string.");return Xve()?Xg.win32(t):Xg.posix(t)}Xg.posix=function(e){return e.charAt(0)==="/"};Xg.win32=function(e){return/[a-z]/i.test(e.charAt(0))&&e.charAt(1)===":"&&e.charAt(2)==="\\"||e.slice(0,2)==="\\\\"?!0:!zve(e)}});var TL=v((CBe,K6)=>{"use strict";var W6=require("path"),Jve=aL(),V6=q6();K6.exports=function(t,e){var r=e||{},i=W6.resolve(r.cwd?r.cwd:process.cwd());i=LL(i);var n=r.root;n&&(n=LL(n),(process.platform==="win32"||!V6(n))&&(n=LL(W6.resolve(n)))),t.slice(0,2)==="./"&&(t=t.slice(2)),t.length===1&&t==="."&&(t="");var s=t.slice(-1),o=Jve(t);return t=o.pattern,n&&t.charAt(0)==="/"?t=G6(n,t):(!V6(t)||t.slice(0,1)==="\\")&&(t=G6(i,t)),s==="/"&&t.slice(-1)!=="/"&&(t+="/"),o.negated?"!"+t:t};function LL(t){return t.replace(/\\/g,"/")}function G6(t,e){return t.charAt(t.length-1)==="/"&&(t=t.slice(0,-1)),e.charAt(0)==="/"&&(e=e.slice(1)),e?t+"/"+e:t}});var X6=v((DBe,z6)=>{var Yve=process.platform==="win32";z6.exports=function(t){var e=t.length-1;if(e<2)return t;for(;Qve(t,e);)e--;return t.substr(0,e+1)};function Qve(t,e){var r=t[e];return e>0&&(r==="/"||Yve&&r==="\\")}});var Q6=v((PBe,Y6)=>{"use strict";var Zve=require("util").inherits,ebe=AL(),tbe=uL(),J6=nL().Readable,rbe=k6(),$L=TL(),ibe=X6(),nbe="File not found with singular glob: ",sbe=" (if this was purposeful, use `allowEmpty` option)";function obe(t,e){return rbe($L(t,e))}function abe(t){var e=t.minimatch.set;return e.length!==1?!1:e[0].every(function(i){return typeof i=="string"})}function Ff(t,e,r){if(!(this instanceof Ff))return new Ff(t,e,r);var i=tbe({},r);J6.call(this,{objectMode:!0,highWaterMark:i.highWaterMark||16}),delete i.highWaterMark;var n=this;function s(h){return $L(h,i)}var o=e.map(s);i.ignore=o;var a=i.cwd,u=i.allowEmpty||!1,c=i.base||obe(t,i);t=$L(t,i),delete i.root;var l=new ebe.Glob(t,i);this._globber=l;var p=!1;l.on("match",function(h){p=!0;var g={cwd:a,base:c,path:ibe(h)};n.push(g)||l.pause()}),l.once("end",function(){if(u!==!0&&!p&&abe(l)){var h=new Error(nbe+t+sbe);return n.destroy(h)}n.push(null)});function f(h){n.destroy(h)}l.once("error",f)}Zve(Ff,J6);Ff.prototype._read=function(){this._globber.resume()};Ff.prototype.destroy=function(t){var e=this;this._globber.abort(),process.nextTick(function(){t&&e.emit("error",t),e.emit("close")})};Y6.exports=Ff});var e9=v((LBe,Z6)=>{"use strict";var ube=AV(),cbe=w4(),lbe=$5(),pbe=aL(),fbe=uL(),dbe=Q6();function hbe(t,e){e||(e={});var r=fbe({},e),i=r.ignore;r.cwd=typeof r.cwd=="string"?r.cwd:process.cwd(),r.dot=typeof r.dot=="boolean"?r.dot:!1,r.silent=typeof r.silent=="boolean"?r.silent:!0,r.cwdbase=typeof r.cwdbase=="boolean"?r.cwdbase:!1,r.uniqueBy=typeof r.uniqueBy=="string"||typeof r.uniqueBy=="function"?r.uniqueBy:"path",r.cwdbase&&(r.base=r.cwd),typeof i=="string"&&(i=[i]),Array.isArray(i)||(i=[]),Array.isArray(t)||(t=[t]);var n=[],s=[];t.forEach(o);function o(p,f){if(typeof p!="string")throw new Error("Invalid glob at index "+f);var h=pbe(p),g=h.negated?s:n;g.push({index:f,glob:h.pattern})}if(n.length===0)throw new Error("Missing positive glob");var a=n.map(l),u=new ube(a),c=cbe(r.uniqueBy);return lbe.obj(u,c);function l(p){var f=s.filter(mbe(p.index)).map(gbe).concat(i);return new dbe(p.glob,f,r)}}function mbe(t){return function(e){return e.index>t}}function gbe(t){return t.glob}Z6.exports=hbe});var Yw=v((A2e,p9)=>{"use strict";var{Transform:wbe}=require("stream"),{StringDecoder:_be}=require("string_decoder"),Iu=Symbol("last"),Jw=Symbol("decoder");function Abe(t,e,r){let i;if(this.overflow){if(i=this[Jw].write(t).split(this.matcher),i.length===1)return r();i.shift(),this.overflow=!1}else this[Iu]+=this[Jw].write(t),i=this[Iu].split(this.matcher);this[Iu]=i.pop();for(let n=0;n<i.length;n++)try{l9(this,this.mapper(i[n]))}catch(s){return r(s)}if(this.overflow=this[Iu].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function Ibe(t){if(this[Iu]+=this[Jw].end(),this[Iu])try{l9(this,this.mapper(this[Iu]))}catch(e){return t(e)}t()}function l9(t,e){e!==void 0&&t.push(e)}function c9(t){return t}function Sbe(t,e,r){switch(t=t||/\r?\n/,e=e||c9,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=c9)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=Abe,r.flush=Ibe,r.readableObjectMode=!0;let i=new wbe(r);return i[Iu]="",i[Jw]=new _be("utf8"),i.matcher=t,i.mapper=e,i.maxLength=r.maxLength,i.skipOverflow=r.skipOverflow||!1,i.overflow=!1,i._destroy=function(n,s){this._writableState.errorEmitted=!1,s(n)},i}p9.exports=Sbe});var $9,T9=UX(()=>{$9="./w32appcontainertokens-XTRA77NA.node"});var R9=v((JUe,k9)=>{T9();try{k9.exports=require($9)}catch{}});var O9=v(n_=>{"use strict";Object.defineProperty(n_,"__esModule",{value:!0});n_.getAppContainerProcessTokens=void 0;var Lbe=require("path"),M9,Tbe=()=>{if(process.platform==="win32")return M9??=R9(),M9},$be=t=>{var e;return(e=Tbe())==null?void 0:e.getAppContainerProcessTokens().map(r=>(0,Lbe.join)(r,t))};n_.getAppContainerProcessTokens=$be});var rG=v((z8e,m_)=>{var Ube=require("fs"),tG=require("path"),jbe=require("os"),qbe=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Wbe(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let i;for(;(i=qbe.exec(r))!=null;){let n=i[1],s=i[2]||"";s=s.trim();let o=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),e[n]=s}return e}function KL(t){console.log(`[dotenv][DEBUG] ${t}`)}function Vbe(t){return t[0]==="~"?tG.join(jbe.homedir(),t.slice(1)):t}function Gbe(t){let e=tG.resolve(process.cwd(),".env"),r="utf8",i=Boolean(t&&t.debug),n=Boolean(t&&t.override);t&&(t.path!=null&&(e=Vbe(t.path)),t.encoding!=null&&(r=t.encoding));try{let s=h_.parse(Ube.readFileSync(e,{encoding:r}));return Object.keys(s).forEach(function(o){Object.prototype.hasOwnProperty.call(process.env,o)?(n===!0&&(process.env[o]=s[o]),i&&KL(n===!0?`"${o}" is already defined in \`process.env\` and WAS overwritten`:`"${o}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[o]=s[o]}),{parsed:s}}catch(s){return i&&KL(`Failed to load ${e} ${s.message}`),{error:s}}}var h_={config:Gbe,parse:Wbe};m_.exports.config=h_.config;m_.exports.parse=h_.parse;m_.exports=h_});var iT=v(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var $_=require("vscode"),gd=class{constructor(e,r,i){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=i}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case ta.ApplicationVersion:return gd.trimVersionSuffix($_.version);case ta.Build:return $_.env.appName;case ta.ClientId:return $_.env.machineId;case ta.ExtensionName:return this.extensionName;case ta.ExtensionVersion:return gd.trimVersionSuffix(this.extensionVersion);case ta.Language:return $_.env.language;case ta.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(ta);for(let i of r)e.set(i,this.getFilterValue(i));return e}};fl.VSCodeFilterProvider=gd;var ta;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(ta=fl.Filters||(fl.Filters={}));var c0e;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(c0e=fl.TargetPopulation||(fl.TargetPopulation={}))});var BG=v(sT=>{"use strict";Object.defineProperty(sT,"__esModule",{value:!0});var nT=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};sT.BaseFeatureProvider=nT});var UG=v(aT=>{"use strict";Object.defineProperty(aT,"__esModule",{value:!0});var l0e=BG(),oT=class extends l0e.BaseFeatureProvider{constructor(e,r){super(e),this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let i=r.getFilters();for(let n of i.keys()){let s=i.get(n);e.set(n,s)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};aT.FilteredFeatureProvider=oT});var jG=v(cT=>{"use strict";Object.defineProperty(cT,"__esModule",{value:!0});var p0e=UG(),uT=class extends p0e.FilteredFeatureProvider{constructor(e,r,i){super(r,i),this.httpClient=e,this.telemetry=r,this.filterProviders=i}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let u=e.get(a);r[a]=u}let i=await this.httpClient.get({headers:r});e.keys.length>0&&this.PostEventToTelemetry(r);let n=i.data,s=n.Configs,o=[];for(let a of s)if(a.Parameters)for(let u of Object.keys(a.Parameters)){let c=u+(a.Parameters[u]?"":"cf");o.includes(c)||o.push(c)}return{features:o,assignmentContext:n.AssignmentContext,configs:s}}};cT.TasApiFeatureProvider=uT});var lT=v((t5e,qG)=>{"use strict";qG.exports=function(e,r){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return e.apply(r,n)}}});var Yr=v((r5e,KG)=>{"use strict";var f0e=lT(),ku=Object.prototype.toString;function dT(t){return Array.isArray(t)}function pT(t){return typeof t>"u"}function d0e(t){return t!==null&&!pT(t)&&t.constructor!==null&&!pT(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function WG(t){return ku.call(t)==="[object ArrayBuffer]"}function h0e(t){return ku.call(t)==="[object FormData]"}function m0e(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&WG(t.buffer),e}function g0e(t){return typeof t=="string"}function H0e(t){return typeof t=="number"}function VG(t){return t!==null&&typeof t=="object"}function k_(t){if(ku.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function y0e(t){return ku.call(t)==="[object Date]"}function v0e(t){return ku.call(t)==="[object File]"}function b0e(t){return ku.call(t)==="[object Blob]"}function GG(t){return ku.call(t)==="[object Function]"}function w0e(t){return VG(t)&&GG(t.pipe)}function _0e(t){return ku.call(t)==="[object URLSearchParams]"}function A0e(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function I0e(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function hT(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),dT(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function fT(){var t={};function e(n,s){k_(t[s])&&k_(n)?t[s]=fT(t[s],n):k_(n)?t[s]=fT({},n):dT(n)?t[s]=n.slice():t[s]=n}for(var r=0,i=arguments.length;r<i;r++)hT(arguments[r],e);return t}function S0e(t,e,r){return hT(e,function(n,s){r&&typeof n=="function"?t[s]=f0e(n,r):t[s]=n}),t}function E0e(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}KG.exports={isArray:dT,isArrayBuffer:WG,isBuffer:d0e,isFormData:h0e,isArrayBufferView:m0e,isString:g0e,isNumber:H0e,isObject:VG,isPlainObject:k_,isUndefined:pT,isDate:y0e,isFile:v0e,isBlob:b0e,isFunction:GG,isStream:w0e,isURLSearchParams:_0e,isStandardBrowserEnv:I0e,forEach:hT,merge:fT,extend:S0e,trim:A0e,stripBOM:E0e}});var R_=v((i5e,XG)=>{"use strict";var Hd=Yr();function zG(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}XG.exports=function(e,r,i){if(!r)return e;var n;if(i)n=i(r);else if(Hd.isURLSearchParams(r))n=r.toString();else{var s=[];Hd.forEach(r,function(u,c){u===null||typeof u>"u"||(Hd.isArray(u)?c=c+"[]":u=[u],Hd.forEach(u,function(p){Hd.isDate(p)?p=p.toISOString():Hd.isObject(p)&&(p=JSON.stringify(p)),s.push(zG(c)+"="+zG(p))}))}),n=s.join("&")}if(n){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}});var YG=v((n5e,JG)=>{"use strict";var x0e=Yr();function M_(){this.handlers=[]}M_.prototype.use=function(e,r,i){return this.handlers.push({fulfilled:e,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};M_.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};M_.prototype.forEach=function(e){x0e.forEach(this.handlers,function(i){i!==null&&e(i)})};JG.exports=M_});var ZG=v((s5e,QG)=>{"use strict";var C0e=Yr();QG.exports=function(e,r){C0e.forEach(e,function(n,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=n,delete e[s])})}});var O_=v((o5e,e7)=>{"use strict";e7.exports=function(e,r,i,n,s){return e.config=r,i&&(e.code=i),e.request=n,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var N_=v((a5e,t7)=>{"use strict";t7.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var F_=v((u5e,r7)=>{"use strict";var D0e=O_();r7.exports=function(e,r,i,n,s){var o=new Error(e);return D0e(o,r,i,n,s)}});var mT=v((c5e,i7)=>{"use strict";var P0e=F_();i7.exports=function(e,r,i){var n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):r(P0e("Request failed with status code "+i.status,i.config,null,i.request,i))}});var s7=v((l5e,n7)=>{"use strict";var B_=Yr();n7.exports=B_.isStandardBrowserEnv()?function(){return{write:function(r,i,n,s,o,a){var u=[];u.push(r+"="+encodeURIComponent(i)),B_.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),B_.isString(s)&&u.push("path="+s),B_.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var a7=v((p5e,o7)=>{"use strict";o7.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var c7=v((f5e,u7)=>{"use strict";u7.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var gT=v((d5e,l7)=>{"use strict";var L0e=a7(),T0e=c7();l7.exports=function(e,r){return e&&!L0e(r)?T0e(e,r):r}});var f7=v((h5e,p7)=>{"use strict";var HT=Yr(),$0e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];p7.exports=function(e){var r={},i,n,s;return e&&HT.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),i=HT.trim(a.substr(0,s)).toLowerCase(),n=HT.trim(a.substr(s+1)),i){if(r[i]&&$0e.indexOf(i)>=0)return;i==="set-cookie"?r[i]=(r[i]?r[i]:[]).concat([n]):r[i]=r[i]?r[i]+", "+n:n}}),r}});var m7=v((m5e,h7)=>{"use strict";var d7=Yr();h7.exports=d7.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function n(s){var o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=n(window.location.href),function(o){var a=d7.isString(o)?n(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}()});var yd=v((g5e,g7)=>{"use strict";function yT(t){this.message=t}yT.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};yT.prototype.__CANCEL__=!0;g7.exports=yT});var y7=v((H5e,H7)=>{"use strict";var U_=Yr(),k0e=mT(),R0e=s7(),M0e=R_(),O0e=gT(),N0e=f7(),F0e=m7(),vT=F_(),B0e=N_(),U0e=yd();H7.exports=function(e){return new Promise(function(i,n){var s=e.data,o=e.headers,a=e.responseType,u;function c(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}U_.isFormData(s)&&delete o["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(p+":"+f)}var h=O0e(e.baseURL,e.url);l.open(e.method.toUpperCase(),M0e(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function g(){if(l){var b="getAllResponseHeaders"in l?N0e(l.getAllResponseHeaders()):null,_=!a||a==="text"||a==="json"?l.responseText:l.response,k={data:_,status:l.status,statusText:l.statusText,headers:b,config:e,request:l};k0e(function(C){i(C),c()},function(C){n(C),c()},k),l=null}}if("onloadend"in l?l.onloadend=g:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(g)},l.onabort=function(){l&&(n(vT("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){n(vT("Network Error",e,null,l)),l=null},l.ontimeout=function(){var _=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",k=e.transitional||B0e;e.timeoutErrorMessage&&(_=e.timeoutErrorMessage),n(vT(_,e,k.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},U_.isStandardBrowserEnv()){var H=(e.withCredentials||F0e(h))&&e.xsrfCookieName?R0e.read(e.xsrfCookieName):void 0;H&&(o[e.xsrfHeaderName]=H)}"setRequestHeader"in l&&U_.forEach(o,function(_,k){typeof s>"u"&&k.toLowerCase()==="content-type"?delete o[k]:l.setRequestHeader(k,_)}),U_.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&a!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(b){l&&(n(!b||b&&b.type?new U0e("canceled"):b),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),s||(s=null),l.send(s)})}});var b7=v((y5e,v7)=>{var vd=1e3,bd=vd*60,wd=bd*60,dl=wd*24,j0e=dl*7,q0e=dl*365.25;v7.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return W0e(t);if(r==="number"&&isFinite(t))return e.long?G0e(t):V0e(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function W0e(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*q0e;case"weeks":case"week":case"w":return r*j0e;case"days":case"day":case"d":return r*dl;case"hours":case"hour":case"hrs":case"hr":case"h":return r*wd;case"minutes":case"minute":case"mins":case"min":case"m":return r*bd;case"seconds":case"second":case"secs":case"sec":case"s":return r*vd;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function V0e(t){var e=Math.abs(t);return e>=dl?Math.round(t/dl)+"d":e>=wd?Math.round(t/wd)+"h":e>=bd?Math.round(t/bd)+"m":e>=vd?Math.round(t/vd)+"s":t+"ms"}function G0e(t){var e=Math.abs(t);return e>=dl?j_(t,e,dl,"day"):e>=wd?j_(t,e,wd,"hour"):e>=bd?j_(t,e,bd,"minute"):e>=vd?j_(t,e,vd,"second"):t+" ms"}function j_(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var bT=v((v5e,w7)=>{function K0e(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=n,r.enabled=o,r.humanize=b7(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let p=0;for(let f=0;f<l.length;f++)p=(p<<5)-p+l.charCodeAt(f),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(l){let p,f=null,h,g;function H(...b){if(!H.enabled)return;let _=H,k=Number(new Date),U=k-(p||k);_.diff=U,_.prev=p,_.curr=k,p=k,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let C=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(q,j)=>{if(q==="%%")return"%";C++;let F=r.formatters[j];if(typeof F=="function"){let T=b[C];q=F.call(_,T),b.splice(C,1),C--}return q}),r.formatArgs.call(_,b),(_.log||r.log).apply(_,b)}return H.namespace=l,H.useColors=r.useColors(),H.color=r.selectColor(l),H.extend=i,H.destroy=r.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(l)),g),set:b=>{f=b}}),typeof r.init=="function"&&r.init(H),H}function i(l,p){let f=r(this.namespace+(typeof p>"u"?":":p)+l);return f.log=this.log,f}function n(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let p,f=(typeof l=="string"?l:"").split(/[\s,]+/),h=f.length;for(p=0;p<h;p++)f[p]&&(l=f[p].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function s(){let l=[...r.names.map(a),...r.skips.map(a).map(p=>"-"+p)].join(",");return r.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let p,f;for(p=0,f=r.skips.length;p<f;p++)if(r.skips[p].test(l))return!1;for(p=0,f=r.names.length;p<f;p++)if(r.names[p].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}w7.exports=K0e});var _7=v((Ji,q_)=>{Ji.formatArgs=X0e;Ji.save=J0e;Ji.load=Y0e;Ji.useColors=z0e;Ji.storage=Q0e();Ji.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ji.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function z0e(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function X0e(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+q_.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}Ji.log=console.debug||console.log||(()=>{});function J0e(t){try{t?Ji.storage.setItem("debug",t):Ji.storage.removeItem("debug")}catch{}}function Y0e(){let t;try{t=Ji.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Q0e(){try{return localStorage}catch{}}q_.exports=bT()(Ji);var{formatters:Z0e}=q_.exports;Z0e.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var I7=v((b5e,A7)=>{"use strict";A7.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",i=e.indexOf(r+t),n=e.indexOf("--");return i!==-1&&(n===-1?!0:i<n)}});var E7=v((w5e,S7)=>{"use strict";var ewe=require("os"),is=I7(),Qr=process.env,_d;is("no-color")||is("no-colors")||is("color=false")?_d=!1:(is("color")||is("colors")||is("color=true")||is("color=always"))&&(_d=!0);"FORCE_COLOR"in Qr&&(_d=Qr.FORCE_COLOR.length===0||parseInt(Qr.FORCE_COLOR,10)!==0);function twe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function rwe(t){if(_d===!1)return 0;if(is("color=16m")||is("color=full")||is("color=truecolor"))return 3;if(is("color=256"))return 2;if(t&&!t.isTTY&&_d!==!0)return 0;let e=_d?1:0;if(process.platform==="win32"){let r=ewe.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Qr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in Qr)||Qr.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Qr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Qr.TEAMCITY_VERSION)?1:0;if(Qr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Qr){let r=parseInt((Qr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Qr.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Qr.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Qr.TERM)||"COLORTERM"in Qr?1:(Qr.TERM==="dumb",e)}function wT(t){let e=rwe(t);return twe(e)}S7.exports={supportsColor:wT,stdout:wT(process.stdout),stderr:wT(process.stderr)}});var C7=v((Rr,V_)=>{var iwe=require("tty"),W_=require("util");Rr.init=lwe;Rr.log=awe;Rr.formatArgs=swe;Rr.save=uwe;Rr.load=cwe;Rr.useColors=nwe;Rr.destroy=W_.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Rr.colors=[6,2,3,4,5,1];try{let t=E7();t&&(t.stderr||t).level>=2&&(Rr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Rr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[e];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),t[r]=i,t},{});function nwe(){return"colors"in Rr.inspectOpts?Boolean(Rr.inspectOpts.colors):iwe.isatty(process.stderr.fd)}function swe(t){let{namespace:e,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),s=`  ${n};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(n+"m+"+V_.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=owe()+e+" "+t[0]}function owe(){return Rr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function awe(...t){return process.stderr.write(W_.format(...t)+`
`)}function uwe(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function cwe(){return process.env.DEBUG}function lwe(t){t.inspectOpts={};let e=Object.keys(Rr.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Rr.inspectOpts[e[r]]}V_.exports=bT()(Rr);var{formatters:x7}=V_.exports;x7.o=function(t){return this.inspectOpts.colors=this.useColors,W_.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};x7.O=function(t){return this.inspectOpts.colors=this.useColors,W_.inspect(t,this.inspectOpts)}});var D7=v((_5e,_T)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?_T.exports=_7():_T.exports=C7()});var L7=v((A5e,P7)=>{var pH;P7.exports=function(){if(!pH){try{pH=D7()("follow-redirects")}catch{}typeof pH!="function"&&(pH=function(){})}pH.apply(null,arguments)}});var xT=v((I5e,ET)=>{var hl=require("url"),AT=hl.URL,pwe=require("http"),fwe=require("https"),k7=require("stream").Writable,dwe=require("assert"),R7=L7(),ml=["abort","aborted","connect","error","socket","timeout"],ST=Object.create(null);ml.forEach(function(t){ST[t]=function(e,r,i){this._redirectable.emit(t,e,r,i)}});var T7=G_("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),hwe=G_("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),mwe=G_("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),gwe=G_("ERR_STREAM_WRITE_AFTER_END","write after end");function Yi(t,e){k7.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(i){r._processResponse(i)},this._performRequest()}Yi.prototype=Object.create(k7.prototype);Yi.prototype.abort=function(){O7(this._currentRequest),this.emit("abort")};Yi.prototype.write=function(t,e,r){if(this._ending)throw new gwe;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new mwe),this.abort())};Yi.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var i=this,n=this._currentRequest;this.write(t,e,function(){i._ended=!0,n.end(null,null,r)}),this._ending=!0}};Yi.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Yi.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Yi.prototype.setTimeout=function(t,e){var r=this;function i(o){o.setTimeout(t),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function n(o){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),s()},t),i(o)}function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",s),r.removeListener("error",s),r.removeListener("response",s),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",n)}return e&&this.on("timeout",e),this.socket?n(this.socket):this._currentRequest.once("socket",n),this.on("socket",i),this.on("abort",s),this.on("error",s),this.on("response",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Yi.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Yi.prototype,t,{get:function(){return this._currentRequest[t]}})});Yi.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Yi.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.slice(0,-1);this._options.agent=this._options.agents[r]}var i=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=hl.format(this._options),i._redirectable=this;for(var n=0;n<ml.length;n++)i.on(ml[n],ST[ml[n]]);if(this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function u(c){if(i===o._currentRequest)if(c)o.emit("error",c);else if(s<a.length){var l=a[s++];i.finished||i.write(l.data,l.encoding,u)}else o._ended&&i.end()})()}};Yi.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(!r||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(O7(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new hwe);return}var i,n=this._options.beforeRedirect;n&&(i=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var s=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],IT(/^content-/i,this._options.headers));var o=IT(/^host$/i,this._options.headers),a=hl.parse(this._currentUrl),u=o||a.host,c=/^\w+:/.test(r)?this._currentUrl:hl.format(Object.assign(a,{host:u})),l;try{l=hl.resolve(c,r)}catch(g){this.emit("error",new T7(g));return}R7("redirecting to",l),this._isRedirect=!0;var p=hl.parse(l);if(Object.assign(this._options,p),(p.protocol!==a.protocol&&p.protocol!=="https:"||p.host!==u&&!ywe(p.host,u))&&IT(/^(?:authorization|cookie)$/i,this._options.headers),typeof n=="function"){var f={headers:t.headers,statusCode:e},h={url:c,method:s,headers:i};try{n(this._options,f,h)}catch(g){this.emit("error",g);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(g){this.emit("error",new T7(g))}};function M7(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach(function(i){var n=i+":",s=r[n]=t[i],o=e[i]=Object.create(s);function a(c,l,p){if(typeof c=="string"){var f=c;try{c=$7(new AT(f))}catch{c=hl.parse(f)}}else AT&&c instanceof AT?c=$7(c):(p=l,l=c,c={protocol:n});return typeof l=="function"&&(p=l,l=null),l=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},c,l),l.nativeProtocols=r,dwe.equal(l.protocol,n,"protocol mismatch"),R7("options",l),new Yi(l,p)}function u(c,l,p){var f=o.request(c,l,p);return f.end(),f}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:u,configurable:!0,enumerable:!0,writable:!0}})}),e}function Hwe(){}function $7(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function IT(t,e){var r;for(var i in e)t.test(i)&&(r=e[i],delete e[i]);return r===null||typeof r>"u"?void 0:String(r).trim()}function G_(t,e){function r(i){Error.captureStackTrace(this,this.constructor),i?(this.message=e+": "+i.message,this.cause=i):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function O7(t){for(var e=0;e<ml.length;e++)t.removeListener(ml[e],ST[ml[e]]);t.on("error",Hwe),t.abort()}function ywe(t,e){let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}ET.exports=M7({http:pwe,https:fwe});ET.exports.wrap=M7});var K_=v((S5e,N7)=>{N7.exports={version:"0.26.1"}});var V7=v((E5e,W7)=>{"use strict";var fH=Yr(),F7=mT(),vwe=gT(),B7=R_(),bwe=require("http"),wwe=require("https"),_we=xT().http,Awe=xT().https,U7=require("url"),Iwe=require("zlib"),Swe=K_().version,Ad=F_(),z_=O_(),Ewe=N_(),xwe=yd(),j7=/https:?/;function q7(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var i=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+i}t.beforeRedirect=function(s){s.headers.host=s.host,q7(s,e,s.href)}}W7.exports=function(e){return new Promise(function(i,n){var s;function o(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}var a=function(ae){o(),i(ae)},u=!1,c=function(ae){o(),u=!0,n(ae)},l=e.data,p=e.headers,f={};if(Object.keys(p).forEach(function(ae){f[ae.toLowerCase()]=ae}),"user-agent"in f?p[f["user-agent"]]||delete p[f["user-agent"]]:p["User-Agent"]="axios/"+Swe,l&&!fH.isStream(l)){if(!Buffer.isBuffer(l))if(fH.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(fH.isString(l))l=Buffer.from(l,"utf-8");else return c(Ad("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));if(e.maxBodyLength>-1&&l.length>e.maxBodyLength)return c(Ad("Request body larger than maxBodyLength limit",e));f["content-length"]||(p["Content-Length"]=l.length)}var h=void 0;if(e.auth){var g=e.auth.username||"",H=e.auth.password||"";h=g+":"+H}var b=vwe(e.baseURL,e.url),_=U7.parse(b),k=_.protocol||"http:";if(!h&&_.auth){var U=_.auth.split(":"),C=U[0]||"",L=U[1]||"";h=C+":"+L}h&&f.authorization&&delete p[f.authorization];var q=j7.test(k),j=q?e.httpsAgent:e.httpAgent;try{B7(_.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(ce){var F=new Error(ce.message);F.config=e,F.url=e.url,F.exists=!0,c(F)}var T={path:B7(_.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:p,agent:j,agents:{http:e.httpAgent,https:e.httpsAgent},auth:h};e.socketPath?T.socketPath=e.socketPath:(T.hostname=_.hostname,T.port=_.port);var N=e.proxy;if(!N&&N!==!1){var E=k.slice(0,-1)+"_proxy",M=process.env[E]||process.env[E.toUpperCase()];if(M){var O=U7.parse(M),z=process.env.no_proxy||process.env.NO_PROXY,D=!0;if(z){var P=z.split(",").map(function(ae){return ae.trim()});D=!P.some(function(ae){return ae?ae==="*"||ae[0]==="."&&_.hostname.substr(_.hostname.length-ae.length)===ae?!0:_.hostname===ae:!1})}if(D&&(N={host:O.hostname,port:O.port,protocol:O.protocol},O.auth)){var ee=O.auth.split(":");N.auth={username:ee[0],password:ee[1]}}}}N&&(T.headers.host=_.hostname+(_.port?":"+_.port:""),q7(T,N,k+"//"+_.hostname+(_.port?":"+_.port:"")+T.path));var ie,ne=q&&(N?j7.test(N.protocol):!0);e.transport?ie=e.transport:e.maxRedirects===0?ie=ne?wwe:bwe:(e.maxRedirects&&(T.maxRedirects=e.maxRedirects),ie=ne?Awe:_we),e.maxBodyLength>-1&&(T.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(T.insecureHTTPParser=e.insecureHTTPParser);var J=ie.request(T,function(ae){if(!J.aborted){var he=ae,dt=ae.req||J;if(ae.statusCode!==204&&dt.method!=="HEAD"&&e.decompress!==!1)switch(ae.headers["content-encoding"]){case"gzip":case"compress":case"deflate":he=he.pipe(Iwe.createUnzip()),delete ae.headers["content-encoding"];break}var ge={status:ae.statusCode,statusText:ae.statusMessage,headers:ae.headers,config:e,request:dt};if(e.responseType==="stream")ge.data=he,F7(a,c,ge);else{var Vt=[],Br=0;he.on("data",function(Ae){Vt.push(Ae),Br+=Ae.length,e.maxContentLength>-1&&Br>e.maxContentLength&&(u=!0,he.destroy(),c(Ad("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,dt)))}),he.on("aborted",function(){u||(he.destroy(),c(Ad("error request aborted",e,"ERR_REQUEST_ABORTED",dt)))}),he.on("error",function(Ae){J.aborted||c(z_(Ae,e,null,dt))}),he.on("end",function(){try{var Ae=Vt.length===1?Vt[0]:Buffer.concat(Vt);e.responseType!=="arraybuffer"&&(Ae=Ae.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(Ae=fH.stripBOM(Ae))),ge.data=Ae}catch(Q){c(z_(Q,e,Q.code,ge.request,ge))}F7(a,c,ge)})}}});if(J.on("error",function(ae){J.aborted&&ae.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(z_(ae,e,null,J))}),J.on("socket",function(ae){ae.setKeepAlive(!0,1e3*60)}),e.timeout){var te=parseInt(e.timeout,10);if(isNaN(te)){c(Ad("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",J));return}J.setTimeout(te,function(){J.abort();var ae="";e.timeoutErrorMessage?ae=e.timeoutErrorMessage:ae="timeout of "+e.timeout+"ms exceeded";var he=e.transitional||Ewe;c(Ad(ae,e,he.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",J))})}(e.cancelToken||e.signal)&&(s=function(ce){J.aborted||(J.abort(),c(!ce||ce&&ce.type?new xwe("canceled"):ce))},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s))),fH.isStream(l)?l.on("error",function(ae){c(z_(ae,e,null,J))}).pipe(J):J.end(l)})}});var J_=v((x5e,z7)=>{"use strict";var Mr=Yr(),G7=ZG(),Cwe=O_(),Dwe=N_(),Pwe={"Content-Type":"application/x-www-form-urlencoded"};function K7(t,e){!Mr.isUndefined(t)&&Mr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Lwe(){var t;return typeof XMLHttpRequest<"u"?t=y7():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=V7()),t}function Twe(t,e,r){if(Mr.isString(t))try{return(e||JSON.parse)(t),Mr.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}var X_={transitional:Dwe,adapter:Lwe(),transformRequest:[function(e,r){return G7(r,"Accept"),G7(r,"Content-Type"),Mr.isFormData(e)||Mr.isArrayBuffer(e)||Mr.isBuffer(e)||Mr.isStream(e)||Mr.isFile(e)||Mr.isBlob(e)?e:Mr.isArrayBufferView(e)?e.buffer:Mr.isURLSearchParams(e)?(K7(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Mr.isObject(e)||r&&r["Content-Type"]==="application/json"?(K7(r,"application/json"),Twe(e)):e}],transformResponse:[function(e){var r=this.transitional||X_.transitional,i=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||n&&Mr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?Cwe(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Mr.forEach(["delete","get","head"],function(e){X_.headers[e]={}});Mr.forEach(["post","put","patch"],function(e){X_.headers[e]=Mr.merge(Pwe)});z7.exports=X_});var J7=v((C5e,X7)=>{"use strict";var $we=Yr(),kwe=J_();X7.exports=function(e,r,i){var n=this||kwe;return $we.forEach(i,function(o){e=o.call(n,e,r)}),e}});var CT=v((D5e,Y7)=>{"use strict";Y7.exports=function(e){return!!(e&&e.__CANCEL__)}});var eK=v((P5e,Z7)=>{"use strict";var Q7=Yr(),DT=J7(),Rwe=CT(),Mwe=J_(),Owe=yd();function PT(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Owe("canceled")}Z7.exports=function(e){PT(e),e.headers=e.headers||{},e.data=DT.call(e,e.data,e.headers,e.transformRequest),e.headers=Q7.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Q7.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var r=e.adapter||Mwe.adapter;return r(e).then(function(n){return PT(e),n.data=DT.call(e,n.data,n.headers,e.transformResponse),n},function(n){return Rwe(n)||(PT(e),n&&n.response&&(n.response.data=DT.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})}});var LT=v((L5e,tK)=>{"use strict";var Qi=Yr();tK.exports=function(e,r){r=r||{};var i={};function n(l,p){return Qi.isPlainObject(l)&&Qi.isPlainObject(p)?Qi.merge(l,p):Qi.isPlainObject(p)?Qi.merge({},p):Qi.isArray(p)?p.slice():p}function s(l){if(Qi.isUndefined(r[l])){if(!Qi.isUndefined(e[l]))return n(void 0,e[l])}else return n(e[l],r[l])}function o(l){if(!Qi.isUndefined(r[l]))return n(void 0,r[l])}function a(l){if(Qi.isUndefined(r[l])){if(!Qi.isUndefined(e[l]))return n(void 0,e[l])}else return n(void 0,r[l])}function u(l){if(l in r)return n(e[l],r[l]);if(l in e)return n(void 0,e[l])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return Qi.forEach(Object.keys(e).concat(Object.keys(r)),function(p){var f=c[p]||s,h=f(p);Qi.isUndefined(h)&&f!==u||(i[p]=h)}),i}});var nK=v((T5e,iK)=>{"use strict";var Nwe=K_().version,TT={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){TT[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var rK={};TT.transitional=function(e,r,i){function n(s,o){return"[Axios v"+Nwe+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return function(s,o,a){if(e===!1)throw new Error(n(o," has been removed"+(r?" in "+r:"")));return r&&!rK[o]&&(rK[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Fwe(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var i=Object.keys(t),n=i.length;n-- >0;){var s=i[n],o=e[s];if(o){var a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+s)}}iK.exports={assertOptions:Fwe,validators:TT}});var lK=v(($5e,cK)=>{"use strict";var aK=Yr(),Bwe=R_(),sK=YG(),oK=eK(),Y_=LT(),uK=nK(),Id=uK.validators;function dH(t){this.defaults=t,this.interceptors={request:new sK,response:new sK}}dH.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Y_(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&uK.assertOptions(i,{silentJSONParsing:Id.transitional(Id.boolean),forcedJSONParsing:Id.transitional(Id.boolean),clarifyTimeoutError:Id.transitional(Id.boolean)},!1);var n=[],s=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(s=s&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var o=[];this.interceptors.response.forEach(function(h){o.push(h.fulfilled,h.rejected)});var a;if(!s){var u=[oK,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(o),a=Promise.resolve(r);u.length;)a=a.then(u.shift(),u.shift());return a}for(var c=r;n.length;){var l=n.shift(),p=n.shift();try{c=l(c)}catch(f){p(f);break}}try{a=oK(c)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};dH.prototype.getUri=function(e){return e=Y_(this.defaults,e),Bwe(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};aK.forEach(["delete","get","head","options"],function(e){dH.prototype[e]=function(r,i){return this.request(Y_(i||{},{method:e,url:r,data:(i||{}).data}))}});aK.forEach(["post","put","patch"],function(e){dH.prototype[e]=function(r,i,n){return this.request(Y_(n||{},{method:e,url:r,data:i}))}});cK.exports=dH});var fK=v((k5e,pK)=>{"use strict";var Uwe=yd();function Sd(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(n){e=n});var r=this;this.promise.then(function(i){if(r._listeners){var n,s=r._listeners.length;for(n=0;n<s;n++)r._listeners[n](i);r._listeners=null}}),this.promise.then=function(i){var n,s=new Promise(function(o){r.subscribe(o),n=o}).then(i);return s.cancel=function(){r.unsubscribe(n)},s},t(function(n){r.reason||(r.reason=new Uwe(n),e(r.reason))})}Sd.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Sd.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Sd.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Sd.source=function(){var e,r=new Sd(function(n){e=n});return{token:r,cancel:e}};pK.exports=Sd});var hK=v((R5e,dK)=>{"use strict";dK.exports=function(e){return function(i){return e.apply(null,i)}}});var gK=v((M5e,mK)=>{"use strict";var jwe=Yr();mK.exports=function(e){return jwe.isObject(e)&&e.isAxiosError===!0}});var vK=v((O5e,$T)=>{"use strict";var HK=Yr(),qwe=lT(),Q_=lK(),Wwe=LT(),Vwe=J_();function yK(t){var e=new Q_(t),r=qwe(Q_.prototype.request,e);return HK.extend(r,Q_.prototype,e),HK.extend(r,e),r.create=function(n){return yK(Wwe(t,n))},r}var uo=yK(Vwe);uo.Axios=Q_;uo.Cancel=yd();uo.CancelToken=fK();uo.isCancel=CT();uo.VERSION=K_().version;uo.all=function(e){return Promise.all(e)};uo.spread=hK();uo.isAxiosError=gK();$T.exports=uo;$T.exports.default=uo});var wK=v((N5e,bK)=>{bK.exports=vK()});var _K=v(RT=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0});var Gwe=wK(),kT=class{constructor(e){this.endpoint=e}get(e){return Gwe.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};RT.AxiosHttpClient=kT});var AK=v(OT=>{"use strict";Object.defineProperty(OT,"__esModule",{value:!0});var MT=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};OT.MemoryKeyValueStorage=MT});var IK=v(FT=>{"use strict";Object.defineProperty(FT,"__esModule",{value:!0});var Kwe=AK(),NT=class{constructor(e,r,i,n,s,o){this.telemetry=e,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=n,this.storageKey=s,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new Kwe.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,u)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let i={features:[],assignmentContext:"",configs:[]};for(let n of e){for(let s of n.features)i.features.includes(s)||i.features.push(s);for(let s of n.configs){let o=i.configs.find(a=>a.Id===s.Id);o?o.Parameters=Object.assign(Object.assign({},o.Parameters),s.Parameters):i.configs.push(s)}i.assignmentContext+=n.assignmentContext}(r||!this.featuresConsumed)&&(this.features=i),this.storage&&this.storage.setValue(this.storageKey,i)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var i;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(i=this.features.configs.find(s=>s.Id===e))===null||i===void 0?void 0:i.Parameters[r]}async getTreatmentVariableAsync(e,r,i){if(i){let n=this.featuresConsumed,s=this.getTreatmentVariable(e,r);if(s===void 0)this.featuresConsumed=n;else return s}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};FT.ExperimentationServiceBase=NT});var SK=v(UT=>{"use strict";Object.defineProperty(UT,"__esModule",{value:!0});var BT=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};UT.PollingService=BT});var EK=v(qT=>{"use strict";Object.defineProperty(qT,"__esModule",{value:!0});var zwe=IK(),Xwe=SK(),jT=class extends zwe.ExperimentationServiceBase{constructor(e,r,i,n,s,o,a,u){if(super(e,n,s,o,a,u),this.telemetry=e,this.filterProviders=r,this.refreshRateMs=i,this.featuresTelemetryPropertyName=n,this.assignmentContextTelemetryPropertyName=s,this.telemetryEventName=o,this.storageKey=a,this.storage=u,i<1e3&&i!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");i>0&&(this.pollingService=new Xwe.PollingService(i),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};qT.ExperimentationServiceAutoPolling=jT});var xK=v(WT=>{"use strict";Object.defineProperty(WT,"__esModule",{value:!0});var Jwe=jG(),Ywe=_K(),Qwe=EK(),Z_=class extends Qwe.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new Jwe.TasApiFeatureProvider(new Ywe.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};WT.ExperimentationService=Z_;Z_.REFRESH_RATE_IN_MINUTES=30});var CK=v(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0});var Zwe=xK();VT.ExperimentationService=Zwe.ExperimentationService});var DK=v(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0});var GT=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};KT.MementoKeyValueStorage=GT});var PK=v(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});var zT=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};XT.default=zT});var TK=v(eA=>{"use strict";Object.defineProperty(eA,"__esModule",{value:!0});var e_e=iT(),t_e=CK(),JT=require("vscode"),r_e=DK(),i_e=PK(),n_e="https://default.exp-tas.com/vscode/ab",s_e="query-expfeature",o_e="VSCode.ABExp.Features",a_e="abexp.assignmentcontext",u_e="VSCode.ABExp.FeatureData",c_e=1e3*60*30;function LK(t,e,r,i,n,...s){if(!n)throw new Error("Memento storage was not provided.");let o=JT.workspace.getConfiguration("telemetry");if(!(JT.env.isTelemetryEnabled===void 0?o.get("enableTelemetry",!0):JT.env.isTelemetryEnabled))return new i_e.default;let c=[new e_e.VSCodeFilterProvider(t,e,r),...s],l=new r_e.MementoKeyValueStorage(n);return new t_e.ExperimentationService({filterProviders:c,telemetry:i,storageKey:u_e,keyValueStorage:l,featuresTelemetryPropertyName:o_e,assignmentContextTelemetryPropertyName:a_e,telemetryEventName:s_e,endpoint:n_e,refetchInterval:c_e})}eA.getExperimentationService=LK;async function l_e(t,e,r,i,n,...s){let o=LK(t,e,r,i,n,...s);return await o.initializePromise,o}eA.getExperimentationServiceAsync=l_e});var kK=v(hH=>{"use strict";Object.defineProperty(hH,"__esModule",{value:!0});var $K=TK();hH.getExperimentationService=$K.getExperimentationService;hH.getExperimentationServiceAsync=$K.getExperimentationServiceAsync;var p_e=iT();hH.TargetPopulation=p_e.TargetPopulation});var jz=v(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});function v$(t){this.j={},this.jr=[],this.jd=null,this.t=t}v$.prototype={accepts:function(){return!!this.t},tt:function(e,r){if(r&&r.j)return this.j[e]=r,r;var i=r,n=this.j[e];if(n)return i&&(n.t=i),n;n=at();var s=wA(this,e);return s?(Object.assign(n.j,s.j),n.jr.append(s.jr),n.jr=s.jd,n.t=i||s.t):n.t=i,this.j[e]=n,n}};var at=function(){return new v$},ve=function(e){return new v$(e)},oe=function(e,r,i){e.j[r]||(e.j[r]=i)},wr=function(e,r,i){e.jr.push([r,i])},wA=function(e,r){var i=e.j[r];if(i)return i;for(var n=0;n<e.jr.length;n++){var s=e.jr[n][0],o=e.jr[n][1];if(s.test(r))return o}return e.jd},$e=function(e,r,i){for(var n=0;n<r.length;n++)oe(e,r[n],i)},O_e=function(e,r){for(var i=0;i<r.length;i++){var n=r[i][0],s=r[i][1];oe(e,n,s)}},Il=function(e,r,i,n){for(var s=0,o=r.length,a;s<o&&(a=e.j[r[s]]);)e=a,s++;if(s>=o)return[];for(;s<o-1;)a=n(),oe(e,r[s],a),e=a,s++;oe(e,r[o-1],i)},os="DOMAIN",aa="LOCALHOST",po="TLD",Ln="NUM",dh="PROTOCOL",b$="MAILTO",Nz="WS",w$="NL",uh="OPENBRACE",PH="OPENBRACKET",LH="OPENANGLEBRACKET",TH="OPENPAREN",Sl="CLOSEBRACE",ch="CLOSEBRACKET",lh="CLOSEANGLEBRACKET",ph="CLOSEPAREN",_A="AMPERSAND",AA="APOSTROPHE",IA="ASTERISK",fh="AT",SA="BACKSLASH",EA="BACKTICK",xA="CARET",$H="COLON",_$="COMMA",CA="DOLLAR",qu="DOT",DA="EQUALS",A$="EXCLAMATION",PA="HYPHEN",LA="PERCENT",TA="PIPE",$A="PLUS",kA="POUND",RA="QUERY",I$="QUOTE",S$="SEMI",ua="SLASH",MA="TILDE",OA="UNDERSCORE",NA="SYM",N_e=Object.freeze({__proto__:null,DOMAIN:os,LOCALHOST:aa,TLD:po,NUM:Ln,PROTOCOL:dh,MAILTO:b$,WS:Nz,NL:w$,OPENBRACE:uh,OPENBRACKET:PH,OPENANGLEBRACKET:LH,OPENPAREN:TH,CLOSEBRACE:Sl,CLOSEBRACKET:ch,CLOSEANGLEBRACKET:lh,CLOSEPAREN:ph,AMPERSAND:_A,APOSTROPHE:AA,ASTERISK:IA,AT:fh,BACKSLASH:SA,BACKTICK:EA,CARET:xA,COLON:$H,COMMA:_$,DOLLAR:CA,DOT:qu,EQUALS:DA,EXCLAMATION:A$,HYPHEN:PA,PERCENT:LA,PIPE:TA,PLUS:$A,POUND:kA,QUERY:RA,QUOTE:I$,SEMI:S$,SLASH:ua,TILDE:MA,UNDERSCORE:OA,SYM:NA}),Rz="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xF6gensberater-ctb verm\xF6gensberatung-pwb \u03B5\u03BB \u03B5\u03C5 \u0431\u0433 \u0431\u0435\u043B \u0434\u0435\u0442\u0438 \u0435\u044E \u043A\u0430\u0442\u043E\u043B\u0438\u043A \u043A\u043E\u043C \u049B\u0430\u0437 \u043C\u043A\u0434 \u043C\u043E\u043D \u043C\u043E\u0441\u043A\u0432\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043A\u0440 \u10D2\u10D4 \u0570\u0561\u0575 \u05D9\u05E9\u05E8\u05D0\u05DC \u05E7\u05D5\u05DD \u0627\u0628\u0648\u0638\u0628\u064A \u0627\u062A\u0635\u0627\u0644\u0627\u062A \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062F\u0646 \u0627\u0644\u0628\u062D\u0631\u064A\u0646 \u0627\u0644\u062C\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629 \u0627\u0644\u0639\u0644\u064A\u0627\u0646 \u0627\u0644\u0645\u063A\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062A \u0627\u06CC\u0631\u0627\u0646 \u0628\u0627\u0631\u062A \u0628\u0627\u0632\u0627\u0631 \u0628\u06BE\u0627\u0631\u062A \u0628\u064A\u062A\u0643 \u067E\u0627\u06A9\u0633\u062A\u0627\u0646 \u0680\u0627\u0631\u062A \u062A\u0648\u0646\u0633 \u0633\u0648\u062F\u0627\u0646 \u0633\u0648\u0631\u064A\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064A\u0646 \u0642\u0637\u0631 \u0643\u0627\u062B\u0648\u0644\u064A\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064A\u0633\u064A\u0627 \u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092E \u0928\u0947\u091F \u092D\u093E\u0930\u0924 \u092D\u093E\u0930\u0924\u092E\u094D \u092D\u093E\u0930\u094B\u0924 \u0938\u0902\u0917\u0920\u0928 \u09AC\u09BE\u0982\u09B2\u09BE \u09AD\u09BE\u09B0\u09A4 \u09AD\u09BE\u09F0\u09A4 \u0A2D\u0A3E\u0A30\u0A24 \u0AAD\u0ABE\u0AB0\u0AA4 \u0B2D\u0B3E\u0B30\u0B24 \u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE \u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8 \u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD \u0C2D\u0C3E\u0C30\u0C24\u0C4D \u0CAD\u0CBE\u0CB0\u0CA4 \u0D2D\u0D3E\u0D30\u0D24\u0D02 \u0DBD\u0D82\u0D9A\u0DCF \u0E04\u0E2D\u0E21 \u0E44\u0E17\u0E22 \u0EA5\u0EB2\u0EA7 \uB2F7\uB137 \uB2F7\uCEF4 \uC0BC\uC131 \uD55C\uAD6D \u30A2\u30DE\u30BE\u30F3 \u30B0\u30FC\u30B0\u30EB \u30AF\u30E9\u30A6\u30C9 \u30B3\u30E0 \u30B9\u30C8\u30A2 \u30BB\u30FC\u30EB \u30D5\u30A1\u30C3\u30B7\u30E7\u30F3 \u30DD\u30A4\u30F3\u30C8 \u307F\u3093\u306A \u4E16\u754C \u4E2D\u4FE1 \u4E2D\u56FD \u4E2D\u570B \u4E2D\u6587\u7F51 \u4E9A\u9A6C\u900A \u4F01\u4E1A \u4F5B\u5C71 \u4FE1\u606F \u5065\u5EB7 \u516B\u5366 \u516C\u53F8 \u516C\u76CA \u53F0\u6E7E \u53F0\u7063 \u5546\u57CE \u5546\u5E97 \u5546\u6807 \u5609\u91CC \u5609\u91CC\u5927\u9152\u5E97 \u5728\u7EBF \u5927\u4F17\u6C7D\u8F66 \u5927\u62FF \u5929\u4E3B\u6559 \u5A31\u4E50 \u5BB6\u96FB \u5E7F\u4E1C \u5FAE\u535A \u6148\u5584 \u6211\u7231\u4F60 \u624B\u673A \u62DB\u8058 \u653F\u52A1 \u653F\u5E9C \u65B0\u52A0\u5761 \u65B0\u95FB \u65F6\u5C1A \u66F8\u7C4D \u673A\u6784 \u6DE1\u9A6C\u9521 \u6E38\u620F \u6FB3\u9580 \u70B9\u770B \u79FB\u52A8 \u7EC4\u7EC7\u673A\u6784 \u7F51\u5740 \u7F51\u5E97 \u7F51\u7AD9 \u7F51\u7EDC \u8054\u901A \u8BFA\u57FA\u4E9A \u8C37\u6B4C \u8D2D\u7269 \u901A\u8CA9 \u96C6\u56E2 \u96FB\u8A0A\u76C8\u79D1 \u98DE\u5229\u6D66 \u98DF\u54C1 \u9910\u5385 \u9999\u683C\u91CC\u62C9 \u9999\u6E2F".split(" "),EH=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,xH=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,CH=/\uFE0F/,DH=/\d/,Mz=/\s/;function F_e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=at(),r=ve(Ln),i=ve(os),n=at(),s=ve(Nz),o=[[DH,i],[EH,i],[xH,i],[CH,i]],a=function(){var C=ve(os);return C.j={"-":n},C.jr=[].concat(o),C},u=function(C){var L=a();return L.t=C,L};O_e(e,[["'",ve(AA)],["{",ve(uh)],["[",ve(PH)],["<",ve(LH)],["(",ve(TH)],["}",ve(Sl)],["]",ve(ch)],[">",ve(lh)],[")",ve(ph)],["&",ve(_A)],["*",ve(IA)],["@",ve(fh)],["`",ve(EA)],["^",ve(xA)],[":",ve($H)],[",",ve(_$)],["$",ve(CA)],[".",ve(qu)],["=",ve(DA)],["!",ve(A$)],["-",ve(PA)],["%",ve(LA)],["|",ve(TA)],["+",ve($A)],["#",ve(kA)],["?",ve(RA)],['"',ve(I$)],["/",ve(ua)],[";",ve(S$)],["~",ve(MA)],["_",ve(OA)],["\\",ve(SA)]]),oe(e,`
`,ve(w$)),wr(e,Mz,s),oe(s,`
`,at()),wr(s,Mz,s);for(var c=0;c<Rz.length;c++)Il(e,Rz[c],u(po),a);var l=a(),p=a(),f=a(),h=a();Il(e,"file",l,a),Il(e,"ftp",p,a),Il(e,"http",f,a),Il(e,"mailto",h,a);var g=a(),H=ve(dh),b=ve(b$);oe(p,"s",g),oe(p,":",H),oe(f,"s",g),oe(f,":",H),oe(l,":",H),oe(g,":",H),oe(h,":",b);for(var _=a(),k=0;k<t.length;k++)Il(e,t[k],_,a);return oe(_,":",H),Il(e,"localhost",u(aa),a),wr(e,DH,r),wr(e,EH,i),wr(e,xH,i),wr(e,CH,i),wr(r,DH,r),wr(r,EH,i),wr(r,xH,i),wr(r,CH,i),oe(r,"-",n),oe(i,"-",n),oe(n,"-",n),wr(i,DH,i),wr(i,EH,i),wr(i,xH,i),wr(i,CH,i),wr(n,DH,i),wr(n,EH,i),wr(n,xH,i),wr(n,CH,i),e.jd=ve(NA),e}function B_e(t,e){for(var r=U_e(e.replace(/[A-Z]/g,function(h){return h.toLowerCase()})),i=r.length,n=[],s=0,o=0;o<i;){for(var a=t,u=null,c=0,l=null,p=-1,f=-1;o<i&&(u=wA(a,r[o]));)a=u,a.accepts()?(p=0,f=0,l=a):p>=0&&(p+=r[o].length,f++),c+=r[o].length,s+=r[o].length,o++;s-=p,o-=f,c-=p,n.push({t:l.t,v:e.substr(s-c,c),s:s-c,e:s})}return n}function U_e(t){for(var e=[],r=t.length,i=0;i<r;){var n=t.charCodeAt(i),s=void 0,o=n<55296||n>56319||i+1===r||(s=t.charCodeAt(i+1))<56320||s>57343?t[i]:t.slice(i,i+2);e.push(o),i+=o.length}return e}function bA(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bA=function(e){return typeof e}:bA=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bA(t)}var Nr={defaultProtocol:"http",events:null,format:Oz,formatHref:Oz,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function E$(t){t=t||{},this.defaultProtocol="defaultProtocol"in t?t.defaultProtocol:Nr.defaultProtocol,this.events="events"in t?t.events:Nr.events,this.format="format"in t?t.format:Nr.format,this.formatHref="formatHref"in t?t.formatHref:Nr.formatHref,this.nl2br="nl2br"in t?t.nl2br:Nr.nl2br,this.tagName="tagName"in t?t.tagName:Nr.tagName,this.target="target"in t?t.target:Nr.target,this.rel="rel"in t?t.rel:Nr.rel,this.validate="validate"in t?t.validate:Nr.validate,this.truncate="truncate"in t?t.truncate:Nr.truncate,this.className="className"in t?t.className:Nr.className,this.attributes=t.attributes||Nr.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in t)?t.ignoreTags:Nr.ignoreTags,r=0;r<e.length;r++)this.ignoreTags.push(e[r].toUpperCase())}E$.prototype={resolve:function(e){var r=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",r,e),tagName:this.get("tagName",r,e),className:this.get("className",r,e),target:this.get("target",r,e),rel:this.get("rel",r,e),events:this.getObject("events",r,e),attributes:this.getObject("attributes",r,e),truncate:this.get("truncate",r,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,r,i){var n=this[e];if(!n)return n;var s;switch(bA(n)){case"function":return n(r,i.t);case"object":return s=i.t in n?n[i.t]:Nr[e],typeof s=="function"?s(r,i.t):s}return n},getObject:function(e,r,i){var n=this[e];return typeof n=="function"?n(r,i.t):n}};function Oz(t){return t}var j_e=Object.freeze({__proto__:null,defaults:Nr,Options:E$});function q_e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Object.create(t.prototype);for(var n in r)i[n]=r[n];return i.constructor=e,e.prototype=i,e}function FA(){}FA.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nr.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function El(t,e){function r(i,n){this.t=t,this.v=i,this.tk=n}return q_e(FA,r,e),r}var Fz=El("email",{isLink:!0}),g$=El("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),H$=El("text"),Bz=El("nl"),ju=El("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nr.defaultProtocol,r=this.tk,i=!1,n=!1,s=[],o=0;r[o].t===dh;)i=!0,s.push(r[o].v),o++;for(;r[o].t===ua;)n=!0,s.push(r[o].v),o++;for(;o<r.length;o++)s.push(r[o].v);return s=s.join(""),i||n||(s="".concat(e,"://").concat(s)),s},hasProtocol:function(){return this.tk[0].t===dh}}),W_e=Object.freeze({__proto__:null,MultiToken:FA,Base:FA,createTokenClass:El,MailtoEmail:Fz,Email:g$,Text:H$,Nl:Bz,Url:ju});function V_e(){var t=at(),e=at(),r=at(),i=at(),n=at(),s=at(),o=at(),a=ve(ju),u=at(),c=ve(ju),l=ve(ju),p=at(),f=at(),h=at(),g=at(),H=at(),b=ve(ju),_=ve(ju),k=ve(ju),U=ve(ju),C=at(),L=at(),q=at(),j=at(),F=at(),T=at(),N=ve(g$),E=at(),M=ve(g$),O=ve(Fz),z=at(),D=at(),P=at(),ee=at(),ie=ve(Bz);oe(t,w$,ie),oe(t,dh,e),oe(t,b$,r),oe(e,ua,i),oe(i,ua,n),oe(t,po,s),oe(t,os,s),oe(t,aa,a),oe(t,Ln,s),oe(n,po,l),oe(n,os,l),oe(n,Ln,l),oe(n,aa,l),oe(s,qu,o),oe(F,qu,T),oe(o,po,a),oe(o,os,s),oe(o,Ln,s),oe(o,aa,s),oe(T,po,N),oe(T,os,F),oe(T,Ln,F),oe(T,aa,F),oe(a,qu,o),oe(N,qu,T),oe(a,$H,u),oe(a,ua,l),oe(u,Ln,c),oe(c,ua,l),oe(N,$H,E),oe(E,Ln,M);var ne=[_A,IA,fh,SA,EA,xA,CA,os,DA,PA,aa,Ln,LA,TA,$A,kA,dh,ua,NA,MA,po,OA],J=[AA,lh,Sl,ch,ph,$H,_$,qu,A$,LH,uh,PH,TH,RA,I$,S$];oe(l,uh,f),oe(l,PH,h),oe(l,LH,g),oe(l,TH,H),oe(p,uh,f),oe(p,PH,h),oe(p,LH,g),oe(p,TH,H),oe(f,Sl,l),oe(h,ch,l),oe(g,lh,l),oe(H,ph,l),oe(b,Sl,l),oe(_,ch,l),oe(k,lh,l),oe(U,ph,l),oe(C,Sl,l),oe(L,ch,l),oe(q,lh,l),oe(j,ph,l),$e(f,ne,b),$e(h,ne,_),$e(g,ne,k),$e(H,ne,U),$e(f,J,C),$e(h,J,L),$e(g,J,q),$e(H,J,j),$e(b,ne,b),$e(_,ne,_),$e(k,ne,k),$e(U,ne,U),$e(b,J,b),$e(_,J,_),$e(k,J,k),$e(U,J,U),$e(C,ne,b),$e(L,ne,_),$e(q,ne,k),$e(j,ne,U),$e(C,J,C),$e(L,J,L),$e(q,J,q),$e(j,J,j),$e(l,ne,l),$e(p,ne,l),$e(l,J,p),$e(p,J,p),oe(r,po,O),oe(r,os,O),oe(r,Ln,O),oe(r,aa,O),$e(O,ne,O),$e(O,J,z),$e(z,ne,O),$e(z,J,z);var te=[_A,AA,IA,SA,EA,xA,Sl,CA,os,DA,PA,Ln,uh,LA,TA,$A,kA,RA,ua,NA,MA,po,OA];return $e(s,te,D),oe(s,fh,P),$e(a,te,D),oe(a,fh,P),$e(o,te,D),$e(D,te,D),oe(D,fh,P),oe(D,qu,ee),$e(ee,te,D),oe(P,po,F),oe(P,os,F),oe(P,Ln,F),oe(P,aa,N),t}function G_e(t,e,r){for(var i=r.length,n=0,s=[],o=[];n<i;){for(var a=t,u=null,c=null,l=0,p=null,f=-1;n<i&&!(u=wA(a,r[n].t));)o.push(r[n++]);for(;n<i&&(c=u||wA(a,r[n].t));)u=null,a=c,a.accepts()?(f=0,p=a):f>=0&&f++,n++,l++;if(f<0)for(var h=n-l;h<n;h++)o.push(r[h]);else{o.length>0&&(s.push(m$(H$,e,o)),o=[]),n-=f,l-=f;var g=p.t,H=r.slice(n-l,n);s.push(m$(g,e,H))}}return o.length>0&&s.push(m$(H$,e,o)),s}function m$(t,e,r){var i=r[0].s,n=r[r.length-1].e,s=e.substr(i,n-i);return new t(s,r)}var y$=typeof console<"u"&&console&&console.warn||function(){},$t={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function K_e(){$t.scanner=null,$t.parser=null,$t.pluginQueue=[],$t.customProtocols=[],$t.initialized=!1}function z_e(t,e){for(var r=0;r<$t.pluginQueue.length;r++)if(t===$t.pluginQueue[r][0]){y$('linkifyjs: plugin "'.concat(t,'" already registered - will be overwritten')),$t.pluginQueue[r]=[t,e];return}$t.pluginQueue.push([t,e]),$t.initialized&&y$('linkifyjs: already initialized - will not register plugin "'.concat(t,'" until you manually call linkify.init(). To avoid this warning, please register all plugins before invoking linkify the first time.'))}function X_e(t){if($t.initialized&&y$('linkifyjs: already initialized - will not register custom protocol "'.concat(t,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(t))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");$t.customProtocols.push(t)}function Uz(){$t.scanner={start:F_e($t.customProtocols),tokens:N_e},$t.parser={start:V_e(),tokens:W_e};for(var t={createTokenClass:El},e=0;e<$t.pluginQueue.length;e++)$t.pluginQueue[e][1]({scanner:$t.scanner,parser:$t.parser,utils:t});$t.initialized=!0}function x$(t){return $t.initialized||Uz(),G_e($t.parser.start,t,B_e($t.scanner.start,t))}function J_e(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=x$(t),i=[],n=0;n<r.length;n++){var s=r[n];s.isLink&&(!e||s.t===e)&&i.push(s.toObject())}return i}function Y_e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=x$(t);return r.length===1&&r[0].isLink&&(!e||r[0].t===e)}as.Options=E$;as.find=J_e;as.init=Uz;as.options=j_e;as.registerCustomProtocol=X_e;as.registerPlugin=z_e;as.reset=K_e;as.test=Y_e;as.tokenize=x$});var Wz=v((cKe,qz)=>{qz.exports=jz()});var dAe={};jX(dAe,{activate:()=>pAe,deactivate:()=>fAe});module.exports=qX(dAe);var RX=I(Se()),MX=require("os"),er=I(require("vscode"));var vh=new Map([["pwa-node","node"],["pwa-chrome","chrome"],["pwa-extensionHost","extensionHost"],["pwa-msedge","msedge"]]),Ll=t=>vh.get(t)||t,oJ={["pwa-extensionHost"]:null,["node-terminal"]:null,["pwa-node"]:null,["pwa-chrome"]:null,["pwa-msedge"]:null},aJ={["extension.js-debug.addCustomBreakpoints"]:null,["extension.pwa-node-debug.attachNodeProcess"]:null,["extension.js-debug.clearAutoAttachVariables"]:null,["extension.js-debug.setAutoAttachVariables"]:null,["extension.js-debug.autoAttachToProcess"]:null,["extension.js-debug.createDebuggerTerminal"]:null,["extension.js-debug.createDiagnostics"]:null,["extension.js-debug.getDiagnosticLogs"]:null,["extension.js-debug.debugLink"]:null,["extension.js-debug.npmScript"]:null,["extension.js-debug.pickNodeProcess"]:null,["extension.js-debug.prettyPrint"]:null,["extension.js-debug.removeAllCustomBreakpoints"]:null,["extension.js-debug.removeCustomBreakpoint"]:null,["extension.js-debug.revealPage"]:null,["extension.js-debug.startProfile"]:null,["extension.js-debug.stopProfile"]:null,["extension.js-debug.toggleSkippingFile"]:null,["extension.node-debug.startWithStopOnEntry"]:null,["extension.js-debug.requestCDPProxy"]:null,["extension.js-debug.openEdgeDevTools"]:null,["extension.js-debug.callers.add"]:null,["extension.js-debug.callers.goToCaller"]:null,["extension.js-debug.callers.gotToTarget"]:null,["extension.js-debug.callers.remove"]:null,["extension.js-debug.callers.removeAll"]:null,["extension.js-debug.enableSourceMapStepping"]:null,["extension.js-debug.disableSourceMapStepping"]:null},gAe=new Set(Object.keys(aJ)),sI=new Set(Object.keys(oJ)),da=t=>sI.has(t);var ke=(t,e,r)=>t.registerCommand(e,r),FH=async(t,e,...r)=>await t.executeCommand(e,...r);var Rt=(t,e,r)=>t.getConfiguration(void 0,r).get(e),oI=(t,e,r,i)=>t.getConfiguration().update(e,r,i);var bh=async(t,e,r)=>await t.executeCommand("setContext",e,r);var Mt=t=>!!t,Tl=t=>UH(t,e=>e!==null),W$=t=>UH(t,e=>e!==void 0),Xu=t=>e=>e instanceof t,BH=(t,e)=>{debugger;throw new Error(e.replace("{value}",JSON.stringify(t)))};function UH(t,e){let r={};for(let i of Object.keys(t)){let n=t[i];e(n,i)&&(r[i]=n)}return r}function fo(t,e){let r={};for(let i of Object.keys(t)){let n=t[i];r[i]=e(n,i)}return r}function V$(t,e){let r={};for(let i of Object.keys(t))e(i,t[i])&&(r[i]=t[i]);return r}function G$(...t){if(t.length===0)return{};let e={},r=Object.create(null);for(let i of t)if(i)for(let n of Object.keys(i)){let s=n.toLowerCase();r[s]?e[r[s]]=i[n]:(r[s]=n,e[n]=i[n])}return e}function K$(t,e){if(t.hasOwnProperty(e))return t[e];let r=e.toLowerCase();for(let i of Object.keys(t))if(i.toLowerCase()===r)return t[i]}var aI=Symbol("unset");function Ee(t){let e=aI,r=(...i)=>(e===aI&&(r.value=e=t(...i)),e);return r.forget=()=>{e=aI,r.value=void 0},r.value=void 0,r}function ho(t){let e=new Map,r=i=>{if(e.has(i))return e.get(i);let n=t(i);return e.set(i,n),n};return r.clear=()=>e.clear(),r}function z$(t){let e,r=i=>((e==null?void 0:e.arg)===i||(e={arg:i,val:t(i)}),e.val);return r.clear=()=>e=void 0,r}function X$(t,e){let r,i=()=>{r!==void 0&&clearTimeout(r),r=setTimeout(()=>{r=void 0,e()},t)};return i.clear=()=>{r&&(clearTimeout(r),r=void 0)},i}function J$(t,e){let r,i=()=>{r===void 0&&(r=setTimeout(()=>{r=void 0,e()},t))};return i.queued=()=>!!r,i.clear=()=>{r&&(clearTimeout(r),r=void 0)},i}async function Y$(t,e){let r=[],i=[];for(let n of t)await e(n)?r.push(n):i.push(n);return[r,i]}function mo(t){let e=[];for(let r of t)e=e.concat(r);return e}var uJ=2**31-1,jH=()=>{let t=0;return()=>t++&uJ};var je=Symbol("AnyLaunchConfiguration"),qH={type:"",name:"",request:"",trace:!1,outputCapture:"console",timeout:1e4,timeouts:{},showAsyncStacks:!0,skipFiles:[],smartStep:!0,sourceMaps:!0,sourceMapRenames:!0,pauseForSourceMap:!0,resolveSourceMapLocations:null,rootPath:"${workspaceFolder}",outFiles:["${workspaceFolder}/**/*.js","!**/node_modules/**"],sourceMapPathOverrides:fI("${workspaceFolder}"),enableContentValidation:!0,cascadeTerminateToConfigurations:[],enableDWARF:!0,__workspaceFolder:"",__remoteFilePrefix:void 0,__breakOnConditionalError:!1,customDescriptionGenerator:void 0,customPropertiesGenerator:void 0},wh={...qH,cwd:"${workspaceFolder}",env:{},envFile:null,pauseForSourceMap:!1,sourceMaps:!0,localRoot:null,remoteRoot:null,resolveSourceMapLocations:["**","!**/node_modules/**"],autoAttachChildProcesses:!0,runtimeSourcemapPausePatterns:[],skipFiles:["<node_internals>/**"]},WH={...wh,showAsyncStacks:{onceBreakpointResolved:16},type:"node-terminal",request:"launch",name:"JavaScript Debug Terminal"},cJ={...wh,type:"node-terminal",request:"attach",name:WH.name,showAsyncStacks:{onceBreakpointResolved:16},delegateId:-1},uI={...wh,type:"pwa-extensionHost",name:"Debug Extension",request:"launch",args:["--extensionDevelopmentPath=${workspaceFolder}"],outFiles:["${workspaceFolder}/out/**/*.js"],resolveSourceMapLocations:["${workspaceFolder}/**","!**/node_modules/**"],rendererDebugOptions:{},runtimeExecutable:"${execPath}",autoAttachChildProcesses:!1,debugWebviews:!1,debugWebWorkerHost:!1,__sessionId:""},lJ={...wh,type:"pwa-node",request:"launch",program:"",cwd:"${workspaceFolder}",stopOnEntry:!1,console:"internalConsole",restart:!1,args:[],runtimeExecutable:"node",runtimeVersion:"default",runtimeArgs:[],profileStartup:!1,attachSimplePort:null,killBehavior:"forceful"},_h={...qH,type:"pwa-chrome",request:"attach",address:"localhost",port:0,disableNetworkCache:!0,pathMapping:{},url:null,restart:!1,urlFilter:"",sourceMapPathOverrides:fI("${webRoot}"),webRoot:"${workspaceFolder}",server:null,browserAttachLocation:"workspace",targetSelection:"automatic",vueComponentPaths:["${workspaceFolder}/**/*.vue","!**/node_modules/**"],perScriptSourcemaps:"auto"},cI={..._h,type:"pwa-msedge",useWebView:!1},VH={..._h,type:"pwa-chrome",request:"launch",cwd:null,file:null,env:{},urlFilter:"*",includeDefaultArgs:!0,includeLaunchArgs:!0,runtimeArgs:null,runtimeExecutable:"*",userDataDir:!0,browserLaunchLocation:"workspace",profileStartup:!1,cleanUp:"wholeBrowser"},lI={...VH,type:"pwa-msedge",useWebView:!1},pI={...wh,type:"pwa-node",attachExistingChildren:!0,address:"localhost",port:9229,restart:!1,request:"attach",continueOnAttach:!1};function fI(t){return{"webpack:///./~/*":`${t}/node_modules/*`,"webpack:////*":"/*","webpack://@?:*/?:*/*":`${t}/*`,"webpack://?:*/*":`${t}/*`,"webpack:///([a-z]):/(.+)":"$1:/$2","meteor://\u{1F4BB}app/*":`${t}/*`}}var GH=t=>{!t.sourceMapPathOverrides&&t.cwd&&(t.sourceMapPathOverrides=fI(t.cwd)),t.resolveSourceMapLocations===void 0&&!t.remoteRoot&&(t.resolveSourceMapLocations=t.outFiles)};function dI({...t}){return GH(t),t.request==="attach"?{...pI,...t}:{...lJ,...t}}function pJ(t,e){return t.request==="attach"?{..._h,browserAttachLocation:e,...t}:{...VH,browserLaunchLocation:e,...t}}function fJ(t,e){return t.request==="attach"?{...cI,browserAttachLocation:e,...t}:{...lI,browserLaunchLocation:e,...t}}function dJ(t){let e={...uI,...t};return e.skipFiles=[...e.skipFiles,"**/node_modules.asar/**","**/bootstrap-fork.js"],e}function hI(t){return GH(t),t.request==="launch"?{...WH,...t}:{...cJ,...t}}function ha(t,e){let r,i=e==="remote"?"ui":"workspace";switch(t.type){case"pwa-node":r=dI(t);break;case"pwa-msedge":r=fJ(t,i);break;case"pwa-chrome":r=pJ(t,i);break;case"pwa-extensionHost":r=dJ(t);break;case"node-terminal":r=hI(t);break;default:throw BH(t,"Unknown config: {value}")}return gI(r)}function mI(t){var i,n,s;let e="${workspaceFolder}",r={...t,rootPath:void 0,outFiles:t.outFiles.filter(o=>!o.includes(e)),sourceMapPathOverrides:UH(t.sourceMapPathOverrides,o=>!o.includes("${workspaceFolder}"))};return"vueComponentPaths"in r&&(r.vueComponentPaths=r.vueComponentPaths.filter(o=>!o.includes(e))),"resolveSourceMapLocations"in r&&(r.resolveSourceMapLocations=((i=r.resolveSourceMapLocations)==null?void 0:i.filter(o=>!o.includes(e)))??null),"cwd"in r&&((n=r.cwd)!=null&&n.includes(e))&&(r.cwd=void 0),"webRoot"in r&&((s=r.webRoot)!=null&&s.includes(e))&&(r.webRoot="/"),r}function gI(t){return t.__workspaceFolder||(t=mI(t)),t=us(t,"workspaceFolder",t.__workspaceFolder),t=us(t,"webRoot","webRoot"in t?t.webRoot:t.__workspaceFolder),t}function us(t,e,r){let i;if(typeof t=="string")i=t.replace(new RegExp(`\\$\\{${e}\\}`,"g"),()=>{if(!r)throw new Error(`Unable to resolve \${${e}} in configuration (${JSON.stringify(e)})`);return r});else if(t instanceof Array)i=t.map(n=>us(n,e,r));else if(typeof t=="object"&&t){let n={};for(let[s,o]of Object.entries(t))n[us(s,e,r)]=us(o,e,r);i=n}else i=t;return i}var KH=["javascript","typescript","typescriptreact","javascriptreact","fsharp","html","wat","c","cpp","rust","zig"],zH="js-debug",Ju="1.83.1",hJ="ms-vscode",XH=zH.includes("nightly"),Q$=`${hJ}.${zH}`;var qA=I(CI()),Yz=I(JI()),jA=require("fs"),WA=I(Y());var gM;(function(t){(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),i=n(t);typeof r.Reflect>"u"?r.Reflect=t:i=n(r.Reflect,i),e(i);function n(s,o){return function(a,u){typeof s[a]!="function"&&Object.defineProperty(s,a,{configurable:!0,writable:!0,value:u}),o&&o(a,u)}}})(function(e){var r=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",n=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",o=typeof Object.create=="function",a={__proto__:[]}instanceof Array,u=!o&&!a,c={create:o?function(){return $n(Object.create(null))}:a?function(){return $n({__proto__:null})}:function(){return $n({})},has:u?function(d,y){return r.call(d,y)}:function(d,y){return y in d},get:u?function(d,y){return r.call(d,y)?d[y]:void 0}:function(d,y){return d[y]}},l=Object.getPrototypeOf(Function),p=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",f=!p&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:OH(),h=!p&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:rI(),g=!p&&typeof WeakMap=="function"?WeakMap:_e(),H=new g;function b(d,y,A,S){if(te(A)){if(!Ae(d))throw new TypeError;if(!be(y))throw new TypeError;return N(d,y)}else{if(!Ae(d))throw new TypeError;if(!he(y))throw new TypeError;if(!he(S)&&!te(S)&&!ce(S))throw new TypeError;return ce(S)&&(S=void 0),A=Z(A),E(d,y,A,S)}}e("decorate",b);function _(d,y){function A(S,R){if(!he(S))throw new TypeError;if(!te(R)&&!ze(R))throw new TypeError;ee(d,y,S,R)}return A}e("metadata",_);function k(d,y,A,S){if(!he(A))throw new TypeError;return te(S)||(S=Z(S)),ee(d,y,A,S)}e("defineMetadata",k);function U(d,y,A){if(!he(y))throw new TypeError;return te(A)||(A=Z(A)),O(d,y,A)}e("hasMetadata",U);function C(d,y,A){if(!he(y))throw new TypeError;return te(A)||(A=Z(A)),z(d,y,A)}e("hasOwnMetadata",C);function L(d,y,A){if(!he(y))throw new TypeError;return te(A)||(A=Z(A)),D(d,y,A)}e("getMetadata",L);function q(d,y,A){if(!he(y))throw new TypeError;return te(A)||(A=Z(A)),P(d,y,A)}e("getOwnMetadata",q);function j(d,y){if(!he(d))throw new TypeError;return te(y)||(y=Z(y)),ie(d,y)}e("getMetadataKeys",j);function F(d,y){if(!he(d))throw new TypeError;return te(y)||(y=Z(y)),ne(d,y)}e("getOwnMetadataKeys",F);function T(d,y,A){if(!he(y))throw new TypeError;te(A)||(A=Z(A));var S=M(y,A,!1);if(te(S)||!S.delete(d))return!1;if(S.size>0)return!0;var R=H.get(y);return R.delete(A),R.size>0||H.delete(y),!0}e("deleteMetadata",T);function N(d,y){for(var A=d.length-1;A>=0;--A){var S=d[A],R=S(y);if(!te(R)&&!ce(R)){if(!be(R))throw new TypeError;y=R}}return y}function E(d,y,A,S){for(var R=d.length-1;R>=0;--R){var B=d[R],V=B(y,A,S);if(!te(V)&&!ce(V)){if(!he(V))throw new TypeError;S=V}}return S}function M(d,y,A){var S=H.get(d);if(te(S)){if(!A)return;S=new f,H.set(d,S)}var R=S.get(y);if(te(R)){if(!A)return;R=new f,S.set(y,R)}return R}function O(d,y,A){var S=z(d,y,A);if(S)return!0;var R=Dl(y);return ce(R)?!1:O(d,R,A)}function z(d,y,A){var S=M(y,A,!1);return te(S)?!1:Vt(S.has(d))}function D(d,y,A){var S=z(d,y,A);if(S)return P(d,y,A);var R=Dl(y);if(!ce(R))return D(d,R,A)}function P(d,y,A){var S=M(y,A,!1);if(!te(S))return S.get(d)}function ee(d,y,A,S){var R=M(A,S,!0);R.set(d,y)}function ie(d,y){var A=ne(d,y),S=Dl(d);if(S===null)return A;var R=ie(S,y);if(R.length<=0)return A;if(A.length<=0)return R;for(var B=new h,V=[],G=0,W=A;G<W.length;G++){var ue=W[G],de=B.has(ue);de||(B.add(ue),V.push(ue))}for(var ye=0,Fe=R;ye<Fe.length;ye++){var ue=Fe[ye],de=B.has(ue);de||(B.add(ue),V.push(ue))}return V}function ne(d,y){var A=[],S=M(d,y,!1);if(te(S))return A;for(var R=S.keys(),B=Ct(R),V=0;;){var G=fa(B);if(!G)return A.length=V,A;var W=pa(G);try{A[V]=W}catch(ue){try{zu(B)}finally{throw ue}}V++}}function J(d){if(d===null)return 1;switch(typeof d){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return d===null?1:6;default:return 6}}function te(d){return d===void 0}function ce(d){return d===null}function ae(d){return typeof d=="symbol"}function he(d){return typeof d=="object"?d!==null:typeof d=="function"}function dt(d,y){switch(J(d)){case 0:return d;case 1:return d;case 2:return d;case 3:return d;case 4:return d;case 5:return d}var A=y===3?"string":y===5?"number":"default",S=_t(d,n);if(S!==void 0){var R=S.call(d,A);if(he(R))throw new TypeError;return R}return ge(d,A==="default"?"number":A)}function ge(d,y){if(y==="string"){var A=d.toString;if(Q(A)){var S=A.call(d);if(!he(S))return S}var R=d.valueOf;if(Q(R)){var S=R.call(d);if(!he(S))return S}}else{var R=d.valueOf;if(Q(R)){var S=R.call(d);if(!he(S))return S}var B=d.toString;if(Q(B)){var S=B.call(d);if(!he(S))return S}}throw new TypeError}function Vt(d){return!!d}function Br(d){return""+d}function Z(d){var y=dt(d,3);return ae(y)?y:Br(y)}function Ae(d){return Array.isArray?Array.isArray(d):d instanceof Object?d instanceof Array:Object.prototype.toString.call(d)==="[object Array]"}function Q(d){return typeof d=="function"}function be(d){return typeof d=="function"}function ze(d){switch(J(d)){case 3:return!0;case 4:return!0;default:return!1}}function _t(d,y){var A=d[y];if(A!=null){if(!Q(A))throw new TypeError;return A}}function Ct(d){var y=_t(d,s);if(!Q(y))throw new TypeError;var A=y.call(d);if(!he(A))throw new TypeError;return A}function pa(d){return d.value}function fa(d){var y=d.next();return y.done?!1:y}function zu(d){var y=d.return;y&&y.call(d)}function Dl(d){var y=Object.getPrototypeOf(d);if(typeof d!="function"||d===l||y!==l)return y;var A=d.prototype,S=A&&Object.getPrototypeOf(A);if(S==null||S===Object.prototype)return y;var R=S.constructor;return typeof R!="function"||R===d?y:R}function OH(){var d={},y=[],A=function(){function V(G,W,ue){this._index=0,this._keys=G,this._values=W,this._selector=ue}return V.prototype["@@iterator"]=function(){return this},V.prototype[s]=function(){return this},V.prototype.next=function(){var G=this._index;if(G>=0&&G<this._keys.length){var W=this._selector(this._keys[G],this._values[G]);return G+1>=this._keys.length?(this._index=-1,this._keys=y,this._values=y):this._index++,{value:W,done:!1}}return{value:void 0,done:!0}},V.prototype.throw=function(G){throw this._index>=0&&(this._index=-1,this._keys=y,this._values=y),G},V.prototype.return=function(G){return this._index>=0&&(this._index=-1,this._keys=y,this._values=y),{value:G,done:!0}},V}();return function(){function V(){this._keys=[],this._values=[],this._cacheKey=d,this._cacheIndex=-2}return Object.defineProperty(V.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),V.prototype.has=function(G){return this._find(G,!1)>=0},V.prototype.get=function(G){var W=this._find(G,!1);return W>=0?this._values[W]:void 0},V.prototype.set=function(G,W){var ue=this._find(G,!0);return this._values[ue]=W,this},V.prototype.delete=function(G){var W=this._find(G,!1);if(W>=0){for(var ue=this._keys.length,de=W+1;de<ue;de++)this._keys[de-1]=this._keys[de],this._values[de-1]=this._values[de];return this._keys.length--,this._values.length--,G===this._cacheKey&&(this._cacheKey=d,this._cacheIndex=-2),!0}return!1},V.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=d,this._cacheIndex=-2},V.prototype.keys=function(){return new A(this._keys,this._values,S)},V.prototype.values=function(){return new A(this._keys,this._values,R)},V.prototype.entries=function(){return new A(this._keys,this._values,B)},V.prototype["@@iterator"]=function(){return this.entries()},V.prototype[s]=function(){return this.entries()},V.prototype._find=function(G,W){return this._cacheKey!==G&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=G)),this._cacheIndex<0&&W&&(this._cacheIndex=this._keys.length,this._keys.push(G),this._values.push(void 0)),this._cacheIndex},V}();function S(V,G){return V}function R(V,G){return G}function B(V,G){return[V,G]}}function rI(){return function(){function d(){this._map=new f}return Object.defineProperty(d.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),d.prototype.has=function(y){return this._map.has(y)},d.prototype.add=function(y){return this._map.set(y,y),this},d.prototype.delete=function(y){return this._map.delete(y)},d.prototype.clear=function(){this._map.clear()},d.prototype.keys=function(){return this._map.keys()},d.prototype.values=function(){return this._map.values()},d.prototype.entries=function(){return this._map.entries()},d.prototype["@@iterator"]=function(){return this.keys()},d.prototype[s]=function(){return this.keys()},d}()}function _e(){var d=16,y=c.create(),A=S();return function(){function W(){this._key=S()}return W.prototype.has=function(ue){var de=R(ue,!1);return de!==void 0?c.has(de,this._key):!1},W.prototype.get=function(ue){var de=R(ue,!1);return de!==void 0?c.get(de,this._key):void 0},W.prototype.set=function(ue,de){var ye=R(ue,!0);return ye[this._key]=de,this},W.prototype.delete=function(ue){var de=R(ue,!1);return de!==void 0?delete de[this._key]:!1},W.prototype.clear=function(){this._key=S()},W}();function S(){var W;do W="@@WeakMap@@"+G();while(c.has(y,W));return y[W]=!0,W}function R(W,ue){if(!r.call(W,A)){if(!ue)return;Object.defineProperty(W,A,{value:c.create()})}return W[A]}function B(W,ue){for(var de=0;de<ue;++de)W[de]=Math.random()*255|0;return W}function V(W){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(W)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(W)):B(new Uint8Array(W),W):B(new Array(W),W)}function G(){var W=V(d);W[6]=W[6]&79|64,W[8]=W[8]&191|128;for(var ue="",de=0;de<d;++de){var ye=W[de];(de===4||de===6||de===8)&&(ue+="-"),ye<16&&(ue+="0"),ue+=ye.toString(16).toLowerCase()}return ue}}function $n(d){return d.__=void 0,delete d.__,d}})})(gM||(gM={}));var cm=require("fs"),dr=I(Y()),Fv=I(require("path"));var X=class{constructor(){this._listeners=new Set;this.event=(e,r,i)=>{let n={listener:e,thisArg:r};this._listeners.add(n);let s={dispose:()=>{s.dispose=()=>{},this._listeners.delete(n)}};return i&&i.push(s),s}}get size(){return this._listeners.size}fire(e){let r=!this._deliveryQueue;this._deliveryQueue||(this._deliveryQueue=[]);for(let i of this._listeners)this._deliveryQueue.push({data:i,event:e});if(r){for(let i=0;i<this._deliveryQueue.length;i++){let{data:n,event:s}=this._deliveryQueue[i];n.listener.call(n.thisArg,s)}this._deliveryQueue=void 0}}dispose(){this._listeners.clear(),this._deliveryQueue&&(this._deliveryQueue=[])}},Rh=class{constructor(){this.map=new Map;this.listeners=this.map}listen(e,r){let i=this.map.get(e);i||(i=new X,this.map.set(e,i));let n=i.event(r);return{dispose:Ee(()=>{n.dispose(),(i==null?void 0:i.size)===0&&this.map.delete(e)})}}emit(e,r){var i;(i=this.listeners.get(e))==null||i.fire(r)}};var rc=I(Y()),Nh=I(require("path"));var bM=require("crypto"),wM=I(JI()),_M=require("os"),qe=I(require("path"));var yo=I(require("fs")),HM=I(require("util"));async function tc({access:t},e){if(!e)return!1;try{return await t(e),!0}catch{return!1}}async function DS(t,e,r){try{await t.copyFile(e,r)}catch(i){try{if(await tc(t,r))await t.unlink(r),await t.copyFile(e,r);else throw i}catch{throw i}}}async function ki({stat:t},e){if(e)try{return await t(e)}catch{return}}async function yM({lstat:t},e){if(e)try{return await t(e)}catch{return}}async function vM({copyFile:t,rename:e,unlink:r},i,n){try{await e(i,n)}catch{await t(i,n),await r(i)}}function Ky(t){return new Promise(e=>{yo.readFile(t,"utf8",async(r,i)=>{e(r?"":i)})})}var hSe=HM.promisify(yo.writeFile);var Gr=Symbol("FsUtils"),$i=class{constructor(e){this.fs=e}realPath(e){return this.fs.realpath(e)}async exists(e){try{return await this.fs.access(e,yo.constants.F_OK),!0}catch{return!1}}readFile(e){return this.fs.readFile(e)}},CS=class{constructor(e){this.dap=e}async realPath(){throw new Error("not implemented")}async exists(e){try{let{doesExists:r}=await this.dap.remoteFileExistsRequest({localFilePath:e});return r}catch{return!1}}readFile(){throw new Error("not implemented")}},Gy=class{constructor(e,r,i){this.remoteFilePrefix=e;this.localFsUtils=r;this.remoteFsUtils=i}static create(e,r,i){let n=new $i(r);return e!==void 0?new this(e.toLowerCase(),n,new CS(i)):n}async exists(e){return this.selectFs(e).exists(e)}async readFile(e){return this.selectFs(e).readFile(e)}async realPath(e){return this.selectFs(e).realPath(e)}selectFs(e){return e.toLowerCase().startsWith(this.remoteFilePrefix)?this.remoteFsUtils:this.localFsUtils}};var wie=process.platform==="win32"?"\\\\.\\pipe\\":(0,_M.tmpdir)(),_ie=0,zy=()=>qe.join(wie,`node-cdp.${process.pid}-${(0,bM.randomBytes)(4).toString("hex")}-${_ie++}.sock`);async function Xy(t,e,r){let i;if(process.platform==="win32"){let n=r.WINDIR||"C:\\Windows";i=qe.join(n,"System32","where.exe")}else i="/usr/bin/which";try{if(await ki(t,i)){let s=(await(0,wM.default)(i,[e],{env:Tl(r)})).stdout.split(/\r?\n/);if(process.platform==="win32"){let o=String(r.PATHEXT||".exe").toUpperCase().split(";");for(let a of s){let u=qe.extname(a).toUpperCase();if(u&&o.includes(u))return a}}else if(s.length>0)return s[0];return}return e}catch{}}async function AM(t,e,r){if(e){if(process.platform==="win32"&&!qe.extname(e)){let i=r.lookup("PATHEXT");if(i){let n=i.split(";");for(let s of n){let o=e+s;if(await ki(t,o))return o}}}if(await ki(t,e))return e}}var IM=t=>t.includes(`.asar${qe.sep}`);function Ha(...t){return qe.posix.isAbsolute(t[0])?rt(qe.posix.join(...t)):qe.win32.isAbsolute(t[0])?qe.win32.join(...t):qe.join(...t)}function Ri(...t){return qe.posix.isAbsolute(t[0])?qe.posix.resolve(...t):qe.win32.isAbsolute(t[0])?qe.win32.resolve(...t):qe.resolve(...t)}function Oh(t,e){return qe.posix.isAbsolute(t)?qe.posix.relative(t,e):qe.win32.isAbsolute(t)?qe.win32.relative(t,e):qe.relative(t,e)}var Aie=/\/|\\/,Mh="file:///",SM=t=>t.startsWith(Mh)&&t[Mh.length+1]===":",PS=t=>t.split(Aie);function LS(t,e=!1){if(!t)return t;if(SM(t)){let r=Mh.length;t=Mh+t[r].toLowerCase()+t.substr(r+1)}else Qy(t)&&(t=(e?t[0].toUpperCase():t[0].toLowerCase())+t.substr(1));return t}function Ft(t,e=!1){if(!t)return t;if(t=LS(t,e),SM(t)){let r=Mh.length;t=t.substr(0,r+1)+t.substr(r+1).replace(/\//g,"\\")}else Qy(t)&&(t=t.replace(/\//g,"\\"));return t}function rt(t){return t.replace(/\\\//g,"/").replace(/\\/g,"/")}var Jy=(t,e)=>{let r=qe.relative(t,e);return r.length&&!qe.isAbsolute(r)&&!r.startsWith("..")},Yy=(t,e)=>{let r=qe.relative(t,e);return!qe.isAbsolute(r)&&!r.startsWith("..")},TS=t=>t.startsWith("\\\\"),Qy=t=>/^[A-Za-z]:/.test(t)||TS(t);var Kl=class{get empty(){return this.patterns.length===0}constructor({rootPath:e,patterns:r}){!e||!r?(this.rootPath="",this.patterns=[]):(this.rootPath=e,this.patterns=r.map(i=>{let n=i.startsWith("!");return{negated:n,pattern:i.slice(n?1:0)}}))}*explode(){for(let e=0;e<this.patterns.length;e++){let{negated:r,pattern:i}=this.patterns[e];if(r)continue;let n=Nh.resolve(this.rootPath,i).split(/[\\/]/g),s=n.findIndex(u=>u.includes("*"));if(s===-1){yield{cwd:n.slice(0,-1).join("/"),pattern:n[n.length-1],negations:[]};continue}let o=n.slice(0,s).join("/"),a=[];for(let u=e+1;u<this.patterns.length;u++){let{negated:c,pattern:l}=this.patterns[u];if(c)if(l.startsWith("**"))a.push(rt(l));else{let p=Nh.relative(o,Nh.resolve(this.rootPath,l));p.startsWith("..")||a.push(rt(p))}}yield{cwd:o,negations:a,pattern:n.slice(s).join("/")}}}};Kl=$([(0,rc.injectable)()],Kl);var Es=class extends Kl{constructor({rootPath:e,outFiles:r}){super({rootPath:e,patterns:r})}};Es=$([(0,rc.injectable)(),w(0,(0,rc.inject)(je))],Es);var vo=class extends Kl{constructor(e){super({rootPath:e.rootPath,patterns:"vueComponentPaths"in e?e.vueComponentPaths:[]})}};vo=$([(0,rc.injectable)(),w(0,(0,rc.inject)(je))],vo);var xM=require("crypto"),CM=require("os"),DM=I(require("path"));var Fh=require("fs"),EM=require("path"),ev=require("zlib"),Sie=(t,e)=>e instanceof Error?{message:e.message,stack:e.stack}:typeof e=="bigint"?e.toString():e,Zy=class{constructor(e,r){this.file=e;this.dap=r;try{(0,Fh.mkdirSync)((0,EM.dirname)(e),{recursive:!0})}catch{}e.endsWith(".gz")?(this.stream=(0,ev.createGzip)(),this.stream.pipe((0,Fh.createWriteStream)(e))):this.stream=(0,Fh.createWriteStream)(e)}async setup(){var e;(e=this.dap)==null||e.output({category:"console",output:`Verbose logs are written to:
${this.file}
`})}dispose(){this.stream&&(this.stream.end(),this.stream=void 0)}write(e){var r,i;this.stream&&(this.stream.write(JSON.stringify(e,Sie)+`
`),(i=(r=this.stream).flush)==null||i.call(r,ev.constants.Z_SYNC_FLUSH))}};var Eie={["runtime"]:null,["runtime.sourcecreate"]:null,["runtime.assertion"]:null,["runtime.launch"]:null,["runtime.target"]:null,["runtime.welcome"]:null,["runtime.exception"]:null,["runtime.sourcemap"]:null,["runtime.breakpoints"]:null,["sourcemap.parsing"]:null,["perf.function"]:null,["cdp.send"]:null,["cdp.receive"]:null,["dap.send"]:null,["dap.receive"]:null,["internal"]:null,["proxyActivity"]:null},SSe=Object.keys(Eie),le=Symbol("ILogger");function $S(t,e=(0,CM.tmpdir)()){if(t===!1)return{stdio:!1,logFile:null};let r={stdio:!0,logFile:DM.join(e,`vscode-debugadapter-${(0,xM.randomBytes)(4).toString("hex")}.json.gz`)};return t===!0?r:{...r,...t}}function PM(t,e){let r=$S(e),i={sinks:[]};return r.logFile&&i.sinks.push(new Zy(r.logFile,t)),i}var $s=I(Y()),RN=I(ov());var av=class extends Error{constructor(r,i,n){super(`Unexpected ${r} response from ${i}: ${n??"<empty body>"}`);this.statusCode=r;this.url=i;this.body=n}},nc=Symbol("IResourceProvider");var Ne=t=>isFinite(t)?new Promise(e=>setTimeout(e,t)):new Promise(()=>{}),eO=(t,e)=>{let r=setTimeout(t,e);return{dispose:()=>clearTimeout(r)}};function Cs(t){return new Promise((e,r)=>{let i=t.length;for(let n of t)n.then(s=>{s?(e(s),i=-1):--i===0&&e(void 0)}).catch(r)})}function We(){let t=null,e=null,r=!1,i,n=new Promise((s,o)=>{t=a=>{r=!0,i=a,s(a)},e=a=>{r=!0,o(a)}});return{resolve:t,reject:e,promise:n,get settledValue(){return i},hasSettled:()=>r}}var gt=I(Se());var re=class extends Error{constructor(r){super("__errorMarker"in r?r.error.format:r.format);this._cause="__errorMarker"in r?r.error:r}get cause(){return this._cause}};function tO(t,e){t.output({category:"console",output:e+`
`})}function it(t,e=9222){return{__errorMarker:!0,error:{id:e,format:t,showUser:!1}}}function st(t,e=9223){return{__errorMarker:!0,error:{id:e,format:t,showUser:!0}}}var zS=()=>st(gt.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvs', 'nvm' or 'fnm' to be installed."),9224),rO=()=>st(gt.t("Attribute 'runtimeVersion' with a flavor/architecture requires 'nvs' to be installed."),9225),iO=()=>st(gt.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvm-windows' or 'nvs'."),9226),XS=(t,e)=>st(gt.t("Node.js version '{0}' not installed using version manager {1}.",t,e),9226),nO=t=>st(gt.t("Cannot launch debug target in terminal ({0}).",t),9227),sO=t=>st(gt.t("Can't load environment variables from file ({0}).",t),9228),oO=t=>st(gt.t("The configured `cwd` {0} does not exist.",t),9245),JS=(t,e)=>st(gt.t(`Can't find Node.js binary "{0}": {1}. Make sure Node.js is installed and in your PATH, or set the "runtimeExecutable" in your launch.json`,t,e),9229),aO=(t,e)=>st(gt.t('The Node version in "{0}" is outdated (version {1}), we require at least Node 8.x.',e,t),9230),uO=t=>st(gt.t('Invalid hit condition "{0}". Expected an expression like "> 42" or "== 2".',t),9231),Ql=()=>st(gt.t("An error occurred taking a profile from the target."),9235),cO=()=>st(gt.t("Please stop the running profile before starting a new one."),9236),lO=t=>it(t,9238),uv=(t,e,r)=>st(e==="*"&&!r.length?gt.t('Unable to find an installation of the browser on your system. Try installing it, or providing an absolute path to the browser in the "runtimeExecutable" in your launch.json.'):gt.t('Unable to find {0} version {1}. Available auto-discovered versions are: {2}. You can set the "runtimeExecutable" in your launch.json to one of these, or provide an absolute path to the browser executable.',t,e,JSON.stringify([...new Set(r)])),9233),pO=t=>st(gt.t('Unable to launch browser: "{0}"',t.message),9240),Gh=t=>st(t??gt.t("Unable to attach to browser"),9242),cv=()=>st(gt.t('Target page not found. You may need to update your "urlFilter" to match the page you want to debug.'),9241);var fO=()=>it(gt.t("Variables not available in async stacks"),9234),wa=(t,e)=>st(gt.t("Syntax error setting breakpoint with condition {0} on line {1}: {2}",JSON.stringify(t.condition),t.line,e),9237),YS=()=>it(gt.t("Thread not found"),9244),lv=(t,e)=>st(gt.t("Could not read source map for {0}: {1}",t,e)),dO=()=>st(gt.t("UWP webview debugging is not available on your platform.")),hO=()=>st(gt.t("Could not connect to any UWP Webview pipe. Make sure your webview is hosted in debug mode, and that the `pipeName` in your `launch.json` is correct.")),mO=t=>typeof t=="object"&&!!t&&"__errorMarker"in t,gO=(t,e)=>t instanceof re&&t.cause.id===e,HO=t=>st(gt.t("The browser process exited with code {0} before connecting to the debug server. Make sure the `runtimeExecutable` is configured correctly and that it can run without errors.",t));var yO=new WeakSet;var ine="Request",nne=t=>t.endsWith("Request"),gi=Symbol("IDapApi"),ep=Symbol("IRootDapApi"),Zl=class{constructor(e,r){this.transport=e;this.logger=r;this._pendingRequests=new Map;this._requestHandlers=new Map;this._eventListeners=new Map;this.disposables=[];this._initialized=We();this.closed=!1;this._sequence=1,this.disposables.push(this.transport.messageReceived(i=>this._onMessage(i.message,i.receivedTime))),this._dap=this._createApi()}get initializedBlocker(){return this._initialized.promise}attachTelemetry(e){this.telemetryReporter=e,e.attachDap(this._dap)}dap(){return this._dap}_createApi(){return new Proxy({},{get:(e,r)=>{if(r!=="then")return r==="on"?(i,n)=>(this._requestHandlers.set(i,n),()=>this._requestHandlers.delete(i)):r==="off"?i=>this._requestHandlers.delete(i):i=>{if(nne(r))return this.enqueueRequest(r.slice(0,-ine.length),i);this._send({seq:0,type:"event",event:r,body:i})}}})}createTestApi(){let e=(n,s)=>{let o=this._eventListeners.get(n);o||(o=new Set,this._eventListeners.set(n,o)),o.add(s)},r=(n,s)=>{let o=this._eventListeners.get(n);o&&o.delete(s)},i=(n,s)=>new Promise(o=>{let a=u=>{s&&!s(u)||(r(n,a),o(u))};e(n,a)});return new Proxy({},{get:(n,s)=>s==="on"?e:s==="off"?r:s==="once"?i:o=>this.enqueueRequest(s,o)})}enqueueRequest(e,r){return new Promise(i=>{let n={seq:0,type:"request",command:e,arguments:r||{}};this._send(n),this._pendingRequests.set(n.seq,i)})}stop(){this.closed=!0,this.transport.close()}_send(e,r){if(this.closed)this.logger.warn("dap.send","Not sending message because the connection has ended",e),r==null||r();else{e.seq=this._sequence++;let i=e.type!=="event"||!yO.has(e.body);this.transport.send(e,i,r)}}async _onMessage(e,r){var i,n,s,o;if(e.type==="request"){let a={seq:0,type:"response",request_seq:e.seq,command:e.command,success:!0};try{let u=this._requestHandlers.get(e.command);if(!u)console.error(`Unknown request: ${e.command}`);else{let c=await u(e.arguments);if(mO(c))this._send({...a,success:!1,message:c.error.format,body:{error:c.error}});else{let l={...a,body:c};a.command==="initialize"?(this._send(l),this._initialized.resolve(this)):a.command==="disconnect"?this._send({...a,body:c},()=>{this.stop()}):this._send(l)}}(i=this.telemetryReporter)==null||i.reportOperation("dapOperation",e.command,r.elapsed().ms)}catch(u){u instanceof re?this._send({...a,success:!1,body:{error:u.cause}}):(console.error(u),this._send({...a,success:!1,body:{error:{id:9221,format:`Error processing ${e.command}: ${u.stack||u.message}`,showUser:!1,sendTelemetry:!1}}})),(n=this.telemetryReporter)==null||n.reportOperation("dapOperation",e.command,r.elapsed().ms,u)}}if(e.type==="event"){let a=this._eventListeners.get(e.event)||new Set;for(let u of a)u(e.body)}if(e.type==="response"){let a=this._pendingRequests.get(e.request_seq);if(!this.logger.assert(a,`Expected callback for request sequence ID ${e.request_seq}`))return;if(this._pendingRequests.delete(e.request_seq),e.success)a(e.body);else{let u=(o=(s=e.body)==null?void 0:s.error)==null?void 0:o.format;a(u||e.message||"Unknown error")}}}};var fv=class{constructor(e,r){this.key=e;this.value=r}toString(){return`${this.key}: ${this.value}`}},Ds=class{constructor(e,r){this.projection=e;this.initialContents=r;let i=Array.from(r||[]).map(n=>[this.projection(n[0]),new fv(n[0],n[1])]);this.projectionToKeyAndValue=new Map(i)}clear(){this.projectionToKeyAndValue.clear()}delete(e){let r=this.projection(e);return this.projectionToKeyAndValue.delete(r)}forEach(e,r){this.projectionToKeyAndValue.forEach(i=>{e.call(r,i.value,i.key,this)},r)}get(e){let r=this.projection(e),i=this.projectionToKeyAndValue.get(r);return i?i.value:void 0}has(e){return this.projectionToKeyAndValue.has(this.projection(e))}set(e,r){return this.projectionToKeyAndValue.set(this.projection(e),new fv(e,r)),this}get size(){return this.projectionToKeyAndValue.size}*entries(){for(let e of this.projectionToKeyAndValue.values())yield[e.key,e.value]}*keys(){for(let e of this.projectionToKeyAndValue.values())yield e.key}*values(){for(let e of this.projectionToKeyAndValue.values())yield e.value}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return JSON.stringify(Array.from(this.entries()))}toString(){return`MapUsingProjection<${JSON.stringify([...this.entries()])}>`}};var ut=Symbol("ISourcePathResolver");var PN=require("dns"),Oi=I(require("path")),Io=require("url");var AN=require("url");var QS={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ZS="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",sne={5:ZS,"5module":ZS+" export import",6:ZS+" const class extends export import super"},one=/^in(stanceof)?$/,iE="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",AO="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",ane=new RegExp("["+iE+"]"),une=new RegExp("["+iE+AO+"]");iE=AO=null;var IO=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],cne=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239];function tE(t,e){for(var r=65536,i=0;i<e.length;i+=2){if(r+=e[i],r>t)return!1;if(r+=e[i+1],r>=t)return!0}}function wo(t,e){return t<65?t===36:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&ane.test(String.fromCharCode(t)):e===!1?!1:tE(t,IO)}function tp(t,e){return t<48?t===36:t<58?!0:t<65?!1:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&une.test(String.fromCharCode(t)):e===!1?!1:tE(t,IO)||tE(t,cne)}var Be=function(e,r){r===void 0&&(r={}),this.label=e,this.keyword=r.keyword,this.beforeExpr=!!r.beforeExpr,this.startsExpr=!!r.startsExpr,this.isLoop=!!r.isLoop,this.isAssign=!!r.isAssign,this.prefix=!!r.prefix,this.postfix=!!r.postfix,this.binop=r.binop||null,this.updateContext=null};function sn(t,e){return new Be(t,{beforeExpr:!0,binop:e})}var on={beforeExpr:!0},Hi={startsExpr:!0},nE={};function Me(t,e){return e===void 0&&(e={}),e.keyword=t,nE[t]=new Be(t,e)}var m={num:new Be("num",Hi),regexp:new Be("regexp",Hi),string:new Be("string",Hi),name:new Be("name",Hi),privateId:new Be("privateId",Hi),eof:new Be("eof"),bracketL:new Be("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Be("]"),braceL:new Be("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Be("}"),parenL:new Be("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Be(")"),comma:new Be(",",on),semi:new Be(";",on),colon:new Be(":",on),dot:new Be("."),question:new Be("?",on),questionDot:new Be("?."),arrow:new Be("=>",on),template:new Be("template"),invalidTemplate:new Be("invalidTemplate"),ellipsis:new Be("...",on),backQuote:new Be("`",Hi),dollarBraceL:new Be("${",{beforeExpr:!0,startsExpr:!0}),eq:new Be("=",{beforeExpr:!0,isAssign:!0}),assign:new Be("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Be("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Be("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:sn("||",1),logicalAND:sn("&&",2),bitwiseOR:sn("|",3),bitwiseXOR:sn("^",4),bitwiseAND:sn("&",5),equality:sn("==/!=/===/!==",6),relational:sn("</>/<=/>=",7),bitShift:sn("<</>>/>>>",8),plusMin:new Be("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:sn("%",10),star:sn("*",10),slash:sn("/",10),starstar:new Be("**",{beforeExpr:!0}),coalesce:sn("??",1),_break:Me("break"),_case:Me("case",on),_catch:Me("catch"),_continue:Me("continue"),_debugger:Me("debugger"),_default:Me("default",on),_do:Me("do",{isLoop:!0,beforeExpr:!0}),_else:Me("else",on),_finally:Me("finally"),_for:Me("for",{isLoop:!0}),_function:Me("function",Hi),_if:Me("if"),_return:Me("return",on),_switch:Me("switch"),_throw:Me("throw",on),_try:Me("try"),_var:Me("var"),_const:Me("const"),_while:Me("while",{isLoop:!0}),_with:Me("with"),_new:Me("new",{beforeExpr:!0,startsExpr:!0}),_this:Me("this",Hi),_super:Me("super",Hi),_class:Me("class",Hi),_extends:Me("extends",on),_export:Me("export"),_import:Me("import",Hi),_null:Me("null",Hi),_true:Me("true",Hi),_false:Me("false",Hi),_in:Me("in",{beforeExpr:!0,binop:7}),_instanceof:Me("instanceof",{beforeExpr:!0,binop:7}),_typeof:Me("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Me("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Me("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},yi=/\r\n?|\n|\u2028|\u2029/,yv=new RegExp(yi.source,"g");function Ps(t){return t===10||t===13||t===8232||t===8233}function SO(t,e,r){r===void 0&&(r=t.length);for(var i=e;i<r;i++){var n=t.charCodeAt(i);if(Ps(n))return i<r-1&&n===13&&t.charCodeAt(i+1)===10?i+2:i+1}return-1}var EO=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,an=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,xO=Object.prototype,lne=xO.hasOwnProperty,pne=xO.toString,Yh=Object.hasOwn||function(t,e){return lne.call(t,e)},vO=Array.isArray||function(t){return pne.call(t)==="[object Array]"};function sc(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var fne=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,zh=function(e,r){this.line=e,this.column=r};zh.prototype.offset=function(e){return new zh(this.line,this.column+e)};var oc=function(e,r,i){this.start=r,this.end=i,e.sourceFile!==null&&(this.source=e.sourceFile)};function rp(t,e){for(var r=1,i=0;;){var n=SO(t,i,e);if(n<0)return new zh(r,e-i);++r,i=n}}var Xh={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},bO=!1;function dne(t){var e={};for(var r in Xh)e[r]=t&&Yh(t,r)?t[r]:Xh[r];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!bO&&typeof console=="object"&&console.warn&&(bO=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),vO(e.onToken)){var i=e.onToken;e.onToken=function(n){return i.push(n)}}return vO(e.onComment)&&(e.onComment=hne(e,e.onComment)),e}function hne(t,e){return function(r,i,n,s,o,a){var u={type:r?"Block":"Line",value:i,start:n,end:s};t.locations&&(u.loc=new oc(this,o,a)),t.ranges&&(u.range=[n,s]),e.push(u)}}var Jh=1,ip=2,sE=4,CO=8,DO=16,PO=32,oE=64,LO=128,Qh=256,aE=Jh|ip|Qh;function uE(t,e){return ip|(t?sE:0)|(e?CO:0)}var hv=0,cE=1,bo=2,TO=3,$O=4,kO=5,At=function(e,r,i){this.options=e=dne(e),this.sourceFile=e.sourceFile,this.keywords=sc(sne[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var n="";e.allowReserved!==!0&&(n=QS[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(n+=" await")),this.reservedWords=sc(n);var s=(n?n+" ":"")+QS.strict;this.reservedWordsStrict=sc(s),this.reservedWordsStrictBind=sc(s+" "+QS.strictBind),this.input=String(r),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(`
`,i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(yi).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=m.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Jh),this.regexpState=null,this.privateNameStack=[]},Ls={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};At.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};Ls.inFunction.get=function(){return(this.currentVarScope().flags&ip)>0};Ls.inGenerator.get=function(){return(this.currentVarScope().flags&CO)>0&&!this.currentVarScope().inClassFieldInit};Ls.inAsync.get=function(){return(this.currentVarScope().flags&sE)>0&&!this.currentVarScope().inClassFieldInit};Ls.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&Qh)return!1;if(e.flags&ip)return(e.flags&sE)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Ls.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,r=t.inClassFieldInit;return(e&oE)>0||r||this.options.allowSuperOutsideMethod};Ls.allowDirectSuper.get=function(){return(this.currentThisScope().flags&LO)>0};Ls.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Ls.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,r=t.inClassFieldInit;return(e&(ip|Qh))>0||r};Ls.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Qh)>0};At.extend=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];for(var i=this,n=0;n<e.length;n++)i=e[n](i);return i};At.parse=function(e,r){return new this(r,e).parse()};At.parseExpressionAt=function(e,r,i){var n=new this(i,e,r);return n.nextToken(),n.parseExpression()};At.tokenizer=function(e,r){return new this(r,e)};Object.defineProperties(At.prototype,Ls);var ri=At.prototype,mne=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ri.strictDirective=function(t){for(;;){an.lastIndex=t,t+=an.exec(this.input)[0].length;var e=mne.exec(this.input.slice(t));if(!e)return!1;if((e[1]||e[2])==="use strict"){an.lastIndex=t+e[0].length;var r=an.exec(this.input),i=r.index+r[0].length,n=this.input.charAt(i);return n===";"||n==="}"||yi.test(r[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(n)||n==="!"&&this.input.charAt(i+1)==="=")}t+=e[0].length,an.lastIndex=t,t+=an.exec(this.input)[0].length,this.input[t]===";"&&t++}};ri.eat=function(t){return this.type===t?(this.next(),!0):!1};ri.isContextual=function(t){return this.type===m.name&&this.value===t&&!this.containsEsc};ri.eatContextual=function(t){return this.isContextual(t)?(this.next(),!0):!1};ri.expectContextual=function(t){this.eatContextual(t)||this.unexpected()};ri.canInsertSemicolon=function(){return this.type===m.eof||this.type===m.braceR||yi.test(this.input.slice(this.lastTokEnd,this.start))};ri.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ri.semicolon=function(){!this.eat(m.semi)&&!this.insertSemicolon()&&this.unexpected()};ri.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0};ri.expect=function(t){this.eat(t)||this.unexpected()};ri.unexpected=function(t){this.raise(t??this.start,"Unexpected token")};function vv(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}ri.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var r=e?t.parenthesizedAssign:t.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}};ri.checkExpressionErrors=function(t,e){if(!t)return!1;var r=t.shorthandAssign,i=t.doubleProto;if(!e)return r>=0||i>=0;r>=0&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")};ri.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ri.isSimpleAssignTarget=function(t){return t.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(t.expression):t.type==="Identifier"||t.type==="MemberExpression"};var we=At.prototype;we.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==m.eof;){var r=this.parseStatement(null,!0,e);t.body.push(r)}if(this.inModule)for(var i=0,n=Object.keys(this.undefinedExports);i<n.length;i+=1){var s=n[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var lE={kind:"loop"},gne={kind:"switch"};we.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;an.lastIndex=this.pos;var e=an.exec(this.input),r=this.pos+e[0].length,i=this.input.charCodeAt(r);if(i===91||i===92||i>55295&&i<56320)return!0;if(t)return!1;if(i===123)return!0;if(wo(i,!0)){for(var n=r+1;tp(i=this.input.charCodeAt(n),!0);)++n;if(i===92||i>55295&&i<56320)return!0;var s=this.input.slice(r,n);if(!one.test(s))return!0}return!1};we.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;an.lastIndex=this.pos;var t=an.exec(this.input),e=this.pos+t[0].length,r;return!yi.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(tp(r=this.input.charCodeAt(e+8))||r>55295&&r<56320))};we.parseStatement=function(t,e,r){var i=this.type,n=this.startNode(),s;switch(this.isLet(t)&&(i=m._var,s="let"),i){case m._break:case m._continue:return this.parseBreakContinueStatement(n,i.keyword);case m._debugger:return this.parseDebuggerStatement(n);case m._do:return this.parseDoStatement(n);case m._for:return this.parseForStatement(n);case m._function:return t&&(this.strict||t!=="if"&&t!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(n,!1,!t);case m._class:return t&&this.unexpected(),this.parseClass(n,!0);case m._if:return this.parseIfStatement(n);case m._return:return this.parseReturnStatement(n);case m._switch:return this.parseSwitchStatement(n);case m._throw:return this.parseThrowStatement(n);case m._try:return this.parseTryStatement(n);case m._const:case m._var:return s=s||this.value,t&&s!=="var"&&this.unexpected(),this.parseVarStatement(n,s);case m._while:return this.parseWhileStatement(n);case m._with:return this.parseWithStatement(n);case m.braceL:return this.parseBlock(!0,n);case m.semi:return this.parseEmptyStatement(n);case m._export:case m._import:if(this.options.ecmaVersion>10&&i===m._import){an.lastIndex=this.pos;var o=an.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(n,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===m._import?this.parseImport(n):this.parseExport(n,r);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!t);var c=this.value,l=this.parseExpression();return i===m.name&&l.type==="Identifier"&&this.eat(m.colon)?this.parseLabeledStatement(n,c,l,t):this.parseExpressionStatement(n,l)}};we.parseBreakContinueStatement=function(t,e){var r=e==="break";this.next(),this.eat(m.semi)||this.insertSemicolon()?t.label=null:this.type!==m.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var n=this.labels[i];if((t.label==null||n.name===t.label.name)&&(n.kind!=null&&(r||n.kind==="loop")||t.label&&r))break}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,r?"BreakStatement":"ContinueStatement")};we.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")};we.parseDoStatement=function(t){return this.next(),this.labels.push(lE),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(m._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(m.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")};we.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(lE),this.enterScope(0),this.expect(m.parenL),this.type===m.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var r=this.isLet();if(this.type===m._var||this.type===m._const||r){var i=this.startNode(),n=r?"let":this.value;return this.next(),this.parseVar(i,!0,n),this.finishNode(i,"VariableDeclaration"),(this.type===m._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&i.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===m._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=this.isContextual("let"),o=!1,a=new vv,u=this.parseExpression(e>-1?"await":!0,a);return this.type===m._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===m._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(t,u)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,u))};we.parseFunctionStatement=function(t,e,r){return this.next(),this.parseFunction(t,Kh|(r?0:rE),!1,e)};we.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(m._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")};we.parseReturnStatement=function(t){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(m.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")};we.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(m.braceL),this.labels.push(gne),this.enterScope(0);for(var e,r=!1;this.type!==m.braceR;)if(this.type===m._case||this.type===m._default){var i=this.type===m._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,e.test=null),this.expect(m.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")};we.parseThrowStatement=function(t){return this.next(),yi.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var Hne=[];we.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===m._catch){var e=this.startNode();if(this.next(),this.eat(m.parenL)){e.param=this.parseBindingAtom();var r=e.param.type==="Identifier";this.enterScope(r?PO:0),this.checkLValPattern(e.param,r?$O:bo),this.expect(m.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(m._finally)?this.parseBlock():null,!t.handler&&!t.finalizer&&this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")};we.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")};we.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(lE),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")};we.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")};we.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")};we.parseLabeledStatement=function(t,e,r,i){for(var n=0,s=this.labels;n<s.length;n+=1){var o=s[n];o.name===e&&this.raise(r.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===m._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart===t.start)c.statementStart=this.start,c.kind=a;else break}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.labels.pop(),t.label=r,this.finishNode(t,"LabeledStatement")};we.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")};we.parseBlock=function(t,e,r){for(t===void 0&&(t=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(m.braceL),t&&this.enterScope(0);this.type!==m.braceR;){var i=this.parseStatement(null);e.body.push(i)}return r&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")};we.parseFor=function(t,e){return t.init=e,this.expect(m.semi),t.test=this.type===m.semi?null:this.parseExpression(),this.expect(m.semi),t.update=this.type===m.parenR?null:this.parseExpression(),this.expect(m.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")};we.parseForIn=function(t,e){var r=this.type===m._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!r||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(r?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=r?this.parseExpression():this.parseMaybeAssign(),this.expect(m.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,r?"ForInStatement":"ForOfStatement")};we.parseVar=function(t,e,r){for(t.declarations=[],t.kind=r;;){var i=this.startNode();if(this.parseVarId(i,r),this.eat(m.eq)?i.init=this.parseMaybeAssign(e):r==="const"&&!(this.type===m._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():i.id.type!=="Identifier"&&!(e&&(this.type===m._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(m.comma))break}return t};we.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,e==="var"?cE:bo,!1)};var Kh=1,rE=2,RO=4;we.parseFunction=function(t,e,r,i,n){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===m.star&&e&rE&&this.unexpected(),t.generator=this.eat(m.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&Kh&&(t.id=e&RO&&this.type!==m.name?null:this.parseIdent(),t.id&&!(e&rE)&&this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?cE:bo:TO));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(uE(t.async,t.generator)),e&Kh||(t.id=this.type===m.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,r,!1,n),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(t,e&Kh?"FunctionDeclaration":"FunctionExpression")};we.parseFunctionParams=function(t){this.expect(m.parenL),t.params=this.parseBindingList(m.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};we.parseClass=function(t,e){this.next();var r=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.enterClassBody(),n=this.startNode(),s=!1;for(n.body=[],this.expect(m.braceL);this.type!==m.braceR;){var o=this.parseClassElement(t.superClass!==null);o&&(n.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raise(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&yne(i,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=r,this.next(),t.body=this.finishNode(n,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")};we.parseClassElement=function(t){if(this.eat(m.semi))return null;var e=this.options.ecmaVersion,r=this.startNode(),i="",n=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(m.braceL))return this.parseClassStaticBlock(r),r;this.isClassElementNameStart()||this.type===m.star?a=!0:i="static"}if(r.static=a,!i&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===m.star)&&!this.canInsertSemicolon()?s=!0:i="async"),!i&&(e>=9||!s)&&this.eat(m.star)&&(n=!0),!i&&!s&&!n){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:i=u)}if(i?(r.computed=!1,r.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),r.key.name=i,this.finishNode(r.key,"Identifier")):this.parseClassElementName(r),e<13||this.type===m.parenL||o!=="method"||n||s){var c=!r.static&&mv(r,"constructor"),l=c&&t;c&&o!=="method"&&this.raise(r.key.start,"Constructor can't have get/set modifier"),r.kind=c?"constructor":o,this.parseClassMethod(r,n,s,l)}else this.parseClassField(r);return r};we.isClassElementNameStart=function(){return this.type===m.name||this.type===m.privateId||this.type===m.num||this.type===m.string||this.type===m.bracketL||this.type.keyword};we.parseClassElementName=function(t){this.type===m.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)};we.parseClassMethod=function(t,e,r,i){var n=t.key;t.kind==="constructor"?(e&&this.raise(n.start,"Constructor can't be a generator"),r&&this.raise(n.start,"Constructor can't be an async method")):t.static&&mv(t,"prototype")&&this.raise(n.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,r,i);return t.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),t.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),t.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")};we.parseClassField=function(t){if(mv(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&mv(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(m.eq)){var e=this.currentThisScope(),r=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=r}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")};we.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(Qh|oE);this.type!==m.braceR;){var r=this.parseStatement(null);t.body.push(r)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")};we.parseClassId=function(t,e){this.type===m.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,bo,!1)):(e===!0&&this.unexpected(),t.id=null)};we.parseClassSuper=function(t){t.superClass=this.eat(m._extends)?this.parseExprSubscripts(!1):null};we.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared};we.exitClassBody=function(){for(var t=this.privateNameStack.pop(),e=t.declared,r=t.used,i=this.privateNameStack.length,n=i===0?null:this.privateNameStack[i-1],s=0;s<r.length;++s){var o=r[s];Yh(e,o.name)||(n?n.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function yne(t,e){var r=e.key.name,i=t[r],n="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(n=(e.static?"s":"i")+e.kind),i==="iget"&&n==="iset"||i==="iset"&&n==="iget"||i==="sget"&&n==="sset"||i==="sset"&&n==="sget"?(t[r]="true",!1):i?!0:(t[r]=n,!1)}function mv(t,e){var r=t.computed,i=t.key;return!r&&(i.type==="Identifier"&&i.name===e||i.type==="Literal"&&i.value===e)}we.parseExport=function(t,e){if(this.next(),this.eat(m.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported.name,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==m.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(m._default)){this.checkExport(e,"default",this.lastTokStart);var r;if(this.type===m._function||(r=this.isAsyncFunction())){var i=this.startNode();this.next(),r&&this.next(),t.declaration=this.parseFunction(i,Kh|RO,!1,r)}else if(this.type===m._class){var n=this.startNode();t.declaration=this.parseClass(n,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),t.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==m.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,o=t.specifiers;s<o.length;s+=1){var a=o[s];this.checkUnreserved(a.local),this.checkLocalExport(a.local),a.local.type==="Literal"&&this.raise(a.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")};we.checkExport=function(t,e,r){t&&(Yh(t,e)&&this.raiseRecoverable(r,"Duplicate export '"+e+"'"),t[e]=!0)};we.checkPatternExport=function(t,e){var r=e.type;if(r==="Identifier")this.checkExport(t,e.name,e.start);else if(r==="ObjectPattern")for(var i=0,n=e.properties;i<n.length;i+=1){var s=n[i];this.checkPatternExport(t,s)}else if(r==="ArrayPattern")for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(t,u)}else r==="Property"?this.checkPatternExport(t,e.value):r==="AssignmentPattern"?this.checkPatternExport(t,e.left):r==="RestElement"?this.checkPatternExport(t,e.argument):r==="ParenthesizedExpression"&&this.checkPatternExport(t,e.expression)};we.checkVariableExport=function(t,e){if(t)for(var r=0,i=e;r<i.length;r+=1){var n=i[r];this.checkPatternExport(t,n.id)}};we.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};we.parseExportSpecifiers=function(t){var e=[],r=!0;for(this.expect(m.braceL);!this.eat(m.braceR);){if(r)r=!1;else if(this.expect(m.comma),this.afterTrailingComma(m.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual("as")?this.parseModuleExportName():i.local,this.checkExport(t,i.exported[i.exported.type==="Identifier"?"name":"value"],i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e};we.parseImport=function(t){return this.next(),this.type===m.string?(t.specifiers=Hne,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===m.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")};we.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===m.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLValSimple(r.local,bo),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(m.comma))return t}if(this.type===m.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,bo),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(m.braceL);!this.eat(m.braceR);){if(e)e=!1;else if(this.expect(m.comma),this.afterTrailingComma(m.braceR))break;var n=this.startNode();n.imported=this.parseModuleExportName(),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLValSimple(n.local,bo),t.push(this.finishNode(n,"ImportSpecifier"))}return t};we.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===m.string){var t=this.parseLiteral(this.value);return fne.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)};we.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)};we.isDirectiveCandidate=function(t){return t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&(this.input[t.start]==='"'||this.input[t.start]==="'")};var Fn=At.prototype;Fn.toAssignable=function(t,e,r){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&t.name==="await"&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",r&&this.checkPatternErrors(r,!0);for(var i=0,n=t.properties;i<n.length;i+=1){var s=n[i];this.toAssignable(s,e),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":t.kind!=="init"&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",r&&this.checkPatternErrors(r,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),t.argument.type==="AssignmentPattern"&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":t.operator!=="="&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,r);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else r&&this.checkPatternErrors(r,!0);return t};Fn.toAssignableList=function(t,e){for(var r=t.length,i=0;i<r;i++){var n=t[i];n&&this.toAssignable(n,e)}if(r){var s=t[r-1];this.options.ecmaVersion===6&&e&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return t};Fn.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")};Fn.parseRestBinding=function(){var t=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==m.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")};Fn.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case m.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(m.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case m.braceL:return this.parseObj(!0)}return this.parseIdent()};Fn.parseBindingList=function(t,e,r){for(var i=[],n=!0;!this.eat(t);)if(n?n=!1:this.expect(m.comma),e&&this.type===m.comma)i.push(null);else{if(r&&this.afterTrailingComma(t))break;if(this.type===m.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===m.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}else{var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),i.push(o)}}return i};Fn.parseBindingListItem=function(t){return t};Fn.parseMaybeDefault=function(t,e,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(m.eq))return r;var i=this.startNodeAt(t,e);return i.left=r,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")};Fn.checkLValSimple=function(t,e,r){e===void 0&&(e=hv);var i=e!==hv;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(e===bo&&t.name==="let"&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),r&&(Yh(r,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),r[t.name]=!0),e!==kO&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,r);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}};Fn.checkLValPattern=function(t,e,r){switch(e===void 0&&(e=hv),t.type){case"ObjectPattern":for(var i=0,n=t.properties;i<n.length;i+=1){var s=n[i];this.checkLValInnerPattern(s,e,r)}break;case"ArrayPattern":for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,e,r)}break;default:this.checkLValSimple(t,e,r)}};Fn.checkLValInnerPattern=function(t,e,r){switch(e===void 0&&(e=hv),t.type){case"Property":this.checkLValInnerPattern(t.value,e,r);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,r);break;case"RestElement":this.checkLValPattern(t.argument,e,r);break;default:this.checkLValPattern(t,e,r)}};var Nn=function(e,r,i,n,s){this.token=e,this.isExpr=!!r,this.preserveSpace=!!i,this.override=n,this.generator=!!s},ct={b_stat:new Nn("{",!1),b_expr:new Nn("{",!0),b_tmpl:new Nn("${",!1),p_stat:new Nn("(",!1),p_expr:new Nn("(",!0),q_tmpl:new Nn("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new Nn("function",!1),f_expr:new Nn("function",!0),f_expr_gen:new Nn("function",!0,!1,null,!0),f_gen:new Nn("function",!1,!1,null,!0)},np=At.prototype;np.initialContext=function(){return[ct.b_stat]};np.curContext=function(){return this.context[this.context.length-1]};np.braceIsBlock=function(t){var e=this.curContext();return e===ct.f_expr||e===ct.f_stat?!0:t===m.colon&&(e===ct.b_stat||e===ct.b_expr)?!e.isExpr:t===m._return||t===m.name&&this.exprAllowed?yi.test(this.input.slice(this.lastTokEnd,this.start)):t===m._else||t===m.semi||t===m.eof||t===m.parenR||t===m.arrow?!0:t===m.braceL?e===ct.b_stat:t===m._var||t===m._const||t===m.name?!1:!this.exprAllowed};np.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(e.token==="function")return e.generator}return!1};np.updateContext=function(t){var e,r=this.type;r.keyword&&t===m.dot?this.exprAllowed=!1:(e=r.updateContext)?e.call(this,t):this.exprAllowed=r.beforeExpr};np.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)};m.parenR.updateContext=m.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var t=this.context.pop();t===ct.b_stat&&this.curContext().token==="function"&&(t=this.context.pop()),this.exprAllowed=!t.isExpr};m.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ct.b_stat:ct.b_expr),this.exprAllowed=!0};m.dollarBraceL.updateContext=function(){this.context.push(ct.b_tmpl),this.exprAllowed=!0};m.parenL.updateContext=function(t){var e=t===m._if||t===m._for||t===m._with||t===m._while;this.context.push(e?ct.p_stat:ct.p_expr),this.exprAllowed=!0};m.incDec.updateContext=function(){};m._function.updateContext=m._class.updateContext=function(t){t.beforeExpr&&t!==m._else&&!(t===m.semi&&this.curContext()!==ct.p_stat)&&!(t===m._return&&yi.test(this.input.slice(this.lastTokEnd,this.start)))&&!((t===m.colon||t===m.braceL)&&this.curContext()===ct.b_stat)?this.context.push(ct.f_expr):this.context.push(ct.f_stat),this.exprAllowed=!1};m.backQuote.updateContext=function(){this.curContext()===ct.q_tmpl?this.context.pop():this.context.push(ct.q_tmpl),this.exprAllowed=!1};m.star.updateContext=function(t){if(t===m._function){var e=this.context.length-1;this.context[e]===ct.f_expr?this.context[e]=ct.f_expr_gen:this.context[e]=ct.f_gen}this.exprAllowed=!0};m.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==m.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Ce=At.prototype;Ce.checkPropClash=function(t,e,r){if(!(this.options.ecmaVersion>=9&&t.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i=t.key,n;switch(i.type){case"Identifier":n=i.name;break;case"Literal":n=String(i.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6){n==="__proto__"&&s==="init"&&(e.proto&&(r?r.doubleProto<0&&(r.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);return}n="$"+n;var o=e[n];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(i.start,"Redefinition of property")}else o=e[n]={init:!1,get:!1,set:!1};o[s]=!0}};Ce.parseExpression=function(t,e){var r=this.start,i=this.startLoc,n=this.parseMaybeAssign(t,e);if(this.type===m.comma){var s=this.startNodeAt(r,i);for(s.expressions=[n];this.eat(m.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return n};Ce.parseMaybeAssign=function(t,e,r){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,n=-1,s=-1,o=-1;e?(n=e.parenthesizedAssign,s=e.trailingComma,o=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new vv,i=!0);var a=this.start,u=this.startLoc;(this.type===m.parenL||this.type===m.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=t==="await");var c=this.parseMaybeConditional(t,e);if(r&&(c=r.call(this,c,a,u)),this.type.isAssign){var l=this.startNodeAt(a,u);return l.operator=this.value,this.type===m.eq&&(c=this.toAssignable(c,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.start&&(e.shorthandAssign=-1),this.type===m.eq?this.checkLValPattern(c):this.checkLValSimple(c),l.left=c,this.next(),l.right=this.parseMaybeAssign(t),o>-1&&(e.doubleProto=o),this.finishNode(l,"AssignmentExpression")}else i&&this.checkExpressionErrors(e,!0);return n>-1&&(e.parenthesizedAssign=n),s>-1&&(e.trailingComma=s),c};Ce.parseMaybeConditional=function(t,e){var r=this.start,i=this.startLoc,n=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return n;if(this.eat(m.question)){var s=this.startNodeAt(r,i);return s.test=n,s.consequent=this.parseMaybeAssign(),this.expect(m.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return n};Ce.parseExprOps=function(t,e){var r=this.start,i=this.startLoc,n=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||n.start===r&&n.type==="ArrowFunctionExpression"?n:this.parseExprOp(n,r,i,-1,t)};Ce.parseExprOp=function(t,e,r,i,n){var s=this.type.binop;if(s!=null&&(!n||this.type!==m._in)&&s>i){var o=this.type===m.logicalOR||this.type===m.logicalAND,a=this.type===m.coalesce;a&&(s=m.logicalAND.binop);var u=this.value;this.next();var c=this.start,l=this.startLoc,p=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,n),c,l,s,n),f=this.buildBinary(e,r,t,p,u,o||a);return(o&&this.type===m.coalesce||a&&(this.type===m.logicalOR||this.type===m.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,e,r,i,n)}return t};Ce.buildBinary=function(t,e,r,i,n,s){i.type==="PrivateIdentifier"&&this.raise(i.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(t,e);return o.left=r,o.operator=n,o.right=i,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Ce.parseMaybeUnary=function(t,e,r,i){var n=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(i),e=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===m.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,i),this.checkExpressionErrors(t,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&MO(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):e=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===m.privateId)(i||this.privateNameStack.length===0)&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==m._in&&this.unexpected();else{if(o=this.parseExprSubscripts(t,i),this.checkExpressionErrors(t))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(n,s);c.operator=this.value,c.prefix=!1,c.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(c,"UpdateExpression")}}if(!r&&this.eat(m.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(n,s,o,this.parseMaybeUnary(null,!1,!1,i),"**",!1);else return o};function MO(t){return t.type==="MemberExpression"&&t.property.type==="PrivateIdentifier"||t.type==="ChainExpression"&&MO(t.expression)}Ce.parseExprSubscripts=function(t,e){var r=this.start,i=this.startLoc,n=this.parseExprAtom(t,e);if(n.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return n;var s=this.parseSubscripts(n,r,i,!1,e);return t&&s.type==="MemberExpression"&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s};Ce.parseSubscripts=function(t,e,r,i,n){for(var s=this.options.ecmaVersion>=8&&t.type==="Identifier"&&t.name==="async"&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,o=!1;;){var a=this.parseSubscript(t,e,r,i,s,o,n);if(a.optional&&(o=!0),a===t||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(e,r);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}t=a}};Ce.parseSubscript=function(t,e,r,i,n,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(m.questionDot);i&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(m.bracketL);if(c||u&&this.type!==m.parenL&&this.type!==m.backQuote||this.eat(m.dot)){var l=this.startNodeAt(e,r);l.object=t,c?(l.property=this.parseExpression(),this.expect(m.bracketR)):this.type===m.privateId&&t.type!=="Super"?l.property=this.parsePrivateIdent():l.property=this.parseIdent(this.options.allowReserved!=="never"),l.computed=!!c,a&&(l.optional=u),t=this.finishNode(l,"MemberExpression")}else if(!i&&this.eat(m.parenL)){var p=new vv,f=this.yieldPos,h=this.awaitPos,g=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var H=this.parseExprList(m.parenR,this.options.ecmaVersion>=8,!1,p);if(n&&!u&&!this.canInsertSemicolon()&&this.eat(m.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=h,this.awaitIdentPos=g,this.parseArrowExpression(this.startNodeAt(e,r),H,!0,o);this.checkExpressionErrors(p,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=g||this.awaitIdentPos;var b=this.startNodeAt(e,r);b.callee=t,b.arguments=H,a&&(b.optional=u),t=this.finishNode(b,"CallExpression")}else if(this.type===m.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var _=this.startNodeAt(e,r);_.tag=t,_.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(_,"TaggedTemplateExpression")}return t};Ce.parseExprAtom=function(t,e){this.type===m.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case m._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===m.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==m.dot&&this.type!==m.bracketL&&this.type!==m.parenL&&this.unexpected(),this.finishNode(r,"Super");case m._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case m.name:var n=this.start,s=this.startLoc,o=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&a.name==="async"&&!this.canInsertSemicolon()&&this.eat(m._function))return this.overrideContext(ct.f_expr),this.parseFunction(this.startNodeAt(n,s),0,!1,!0,e);if(i&&!this.canInsertSemicolon()){if(this.eat(m.arrow))return this.parseArrowExpression(this.startNodeAt(n,s),[a],!1,e);if(this.options.ecmaVersion>=8&&a.name==="async"&&this.type===m.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return a=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(m.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(n,s),[a],!0,e)}return a;case m.regexp:var u=this.value;return r=this.parseLiteral(u.value),r.regex={pattern:u.pattern,flags:u.flags},r;case m.num:case m.string:return this.parseLiteral(this.value);case m._null:case m._true:case m._false:return r=this.startNode(),r.value=this.type===m._null?null:this.type===m._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case m.parenL:var c=this.start,l=this.parseParenAndDistinguishExpression(i,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(t.parenthesizedAssign=c),t.parenthesizedBind<0&&(t.parenthesizedBind=c)),l;case m.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(m.bracketR,!0,!0,t),this.finishNode(r,"ArrayExpression");case m.braceL:return this.overrideContext(ct.b_expr),this.parseObj(!1,t);case m._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case m._class:return this.parseClass(this.startNode(),!1);case m._new:return this.parseNew();case m.backQuote:return this.parseTemplate();case m._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};Ce.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case m.parenL:return this.parseDynamicImport(t);case m.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}};Ce.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(m.parenR)){var e=this.start;this.eat(m.comma)&&this.eat(m.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")};Ce.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="meta"&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")};Ce.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")};Ce.parseParenExpression=function(){this.expect(m.parenL);var t=this.parseExpression();return this.expect(m.parenR),t};Ce.parseParenAndDistinguishExpression=function(t,e){var r=this.start,i=this.startLoc,n,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],c=!0,l=!1,p=new vv,f=this.yieldPos,h=this.awaitPos,g;for(this.yieldPos=0,this.awaitPos=0;this.type!==m.parenR;)if(c?c=!1:this.expect(m.comma),s&&this.afterTrailingComma(m.parenR,!0)){l=!0;break}else if(this.type===m.ellipsis){g=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===m.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,p,this.parseParenItem));var H=this.lastTokEnd,b=this.lastTokEndLoc;if(this.expect(m.parenR),t&&!this.canInsertSemicolon()&&this.eat(m.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=h,this.parseParenArrowList(r,i,u,e);(!u.length||l)&&this.unexpected(this.lastTokStart),g&&this.unexpected(g),this.checkExpressionErrors(p,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(n=this.startNodeAt(o,a),n.expressions=u,this.finishNodeAt(n,"SequenceExpression",H,b)):n=u[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var _=this.startNodeAt(r,i);return _.expression=n,this.finishNode(_,"ParenthesizedExpression")}else return n};Ce.parseParenItem=function(t){return t};Ce.parseParenArrowList=function(t,e,r,i){return this.parseArrowExpression(this.startNodeAt(t,e),r,!1,i)};var vne=[];Ce.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(m.dot)){t.meta=e;var r=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="target"&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),r&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var i=this.start,n=this.startLoc,s=this.type===m._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,n,!0,!1),s&&t.callee.type==="ImportExpression"&&this.raise(i,"Cannot use new with import()"),this.eat(m.parenL)?t.arguments=this.parseExprList(m.parenR,this.options.ecmaVersion>=8,!1):t.arguments=vne,this.finishNode(t,"NewExpression")};Ce.parseTemplateElement=function(t){var e=t.isTagged,r=this.startNode();return this.type===m.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),r.tail=this.type===m.backQuote,this.finishNode(r,"TemplateElement")};Ce.parseTemplate=function(t){t===void 0&&(t={});var e=t.isTagged;e===void 0&&(e=!1);var r=this.startNode();this.next(),r.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(r.quasis=[i];!i.tail;)this.type===m.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(m.dollarBraceL),r.expressions.push(this.parseExpression()),this.expect(m.braceR),r.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(r,"TemplateLiteral")};Ce.isAsyncProp=function(t){return!t.computed&&t.key.type==="Identifier"&&t.key.name==="async"&&(this.type===m.name||this.type===m.num||this.type===m.string||this.type===m.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===m.star)&&!yi.test(this.input.slice(this.lastTokEnd,this.start))};Ce.parseObj=function(t,e){var r=this.startNode(),i=!0,n={};for(r.properties=[],this.next();!this.eat(m.braceR);){if(i)i=!1;else if(this.expect(m.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(m.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,n,e),r.properties.push(s)}return this.finishNode(r,t?"ObjectPattern":"ObjectExpression")};Ce.parseProperty=function(t,e){var r=this.startNode(),i,n,s,o;if(this.options.ecmaVersion>=9&&this.eat(m.ellipsis))return t?(r.argument=this.parseIdent(!1),this.type===m.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(r,"RestElement")):(this.type===m.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),r.argument=this.parseMaybeAssign(!1,e),this.type===m.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(r,"SpreadElement"));this.options.ecmaVersion>=6&&(r.method=!1,r.shorthand=!1,(t||e)&&(s=this.start,o=this.startLoc),t||(i=this.eat(m.star)));var a=this.containsEsc;return this.parsePropertyName(r),!t&&!a&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(r)?(n=!0,i=this.options.ecmaVersion>=9&&this.eat(m.star),this.parsePropertyName(r,e)):n=!1,this.parsePropertyValue(r,t,i,n,s,o,e,a),this.finishNode(r,"Property")};Ce.parsePropertyValue=function(t,e,r,i,n,s,o,a){if((r||i)&&this.type===m.colon&&this.unexpected(),this.eat(m.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===m.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(r,i);else if(!e&&!a&&this.options.ecmaVersion>=5&&!t.computed&&t.key.type==="Identifier"&&(t.key.name==="get"||t.key.name==="set")&&this.type!==m.comma&&this.type!==m.braceR&&this.type!==m.eq){(r||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u=t.kind==="get"?0:1;if(t.value.params.length!==u){var c=t.value.start;t.kind==="get"?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else t.kind==="set"&&t.value.params[0].type==="RestElement"&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!t.computed&&t.key.type==="Identifier"?((r||i)&&this.unexpected(),this.checkUnreserved(t.key),t.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=n),t.kind="init",e?t.value=this.parseMaybeDefault(n,s,this.copyNode(t.key)):this.type===m.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(n,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected()};Ce.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(m.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(m.bracketR),t.key;t.computed=!1}return t.key=this.type===m.num||this.type===m.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Ce.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)};Ce.parseMethod=function(t,e,r){var i=this.startNode(),n=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(uE(e,i.generator)|oE|(r?LO:0)),this.expect(m.parenL),i.params=this.parseBindingList(m.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(i,"FunctionExpression")};Ce.parseArrowExpression=function(t,e,r,i){var n=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(uE(r,!1)|DO),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!r),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(t,"ArrowFunctionExpression")};Ce.parseFunctionBody=function(t,e,r,i){var n=e&&this.type!==m.braceL,s=this.strict,o=!1;if(n)t.body=this.parseMaybeAssign(i),t.expression=!0,this.checkParams(t,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(t,!s&&!o&&!e&&!r&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,kO),t.body=this.parseBlock(!1,void 0,o&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=u}this.exitScope()};Ce.isSimpleParamList=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(i.type!=="Identifier")return!1}return!0};Ce.checkParams=function(t,e){for(var r=Object.create(null),i=0,n=t.params;i<n.length;i+=1){var s=n[i];this.checkLValInnerPattern(s,cE,e?null:r)}};Ce.parseExprList=function(t,e,r,i){for(var n=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(m.comma),e&&this.afterTrailingComma(t))break;var o=void 0;r&&this.type===m.comma?o=null:this.type===m.ellipsis?(o=this.parseSpread(i),i&&this.type===m.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):o=this.parseMaybeAssign(!1,i),n.push(o)}return n};Ce.checkUnreserved=function(t){var e=t.start,r=t.end,i=t.name;if(this.inGenerator&&i==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&i==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&i==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(i==="arguments"||i==="await")&&this.raise(e,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,r).indexOf("\\")!==-1)){var n=this.strict?this.reservedWordsStrict:this.reservedWords;n.test(i)&&(!this.inAsync&&i==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))}};Ce.parseIdent=function(t,e){var r=this.startNode();return this.type===m.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,(r.name==="class"||r.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(r,"Identifier"),t||(this.checkUnreserved(r),r.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r.start)),r};Ce.parsePrivateIdent=function(){var t=this.startNode();return this.type===m.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t),t};Ce.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===m.semi||this.canInsertSemicolon()||this.type!==m.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(m.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")};Ce.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var gv=At.prototype;gv.raise=function(t,e){var r=rp(this.input,t);e+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=r,i.raisedAt=this.pos,i};gv.raiseRecoverable=gv.raise;gv.curPosition=function(){if(this.options.locations)return new zh(this.curLine,this.pos-this.lineStart)};var _a=At.prototype,bne=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};_a.enterScope=function(t){this.scopeStack.push(new bne(t))};_a.exitScope=function(){this.scopeStack.pop()};_a.treatFunctionsAsVarInScope=function(t){return t.flags&ip||!this.inModule&&t.flags&Jh};_a.declareName=function(t,e,r){var i=!1;if(e===bo){var n=this.currentScope();i=n.lexical.indexOf(t)>-1||n.functions.indexOf(t)>-1||n.var.indexOf(t)>-1,n.lexical.push(t),this.inModule&&n.flags&Jh&&delete this.undefinedExports[t]}else if(e===$O){var s=this.currentScope();s.lexical.push(t)}else if(e===TO){var o=this.currentScope();this.treatFunctionsAsVar?i=o.lexical.indexOf(t)>-1:i=o.lexical.indexOf(t)>-1||o.var.indexOf(t)>-1,o.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(t)>-1&&!(u.flags&PO&&u.lexical[0]===t)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(t)>-1){i=!0;break}if(u.var.push(t),this.inModule&&u.flags&Jh&&delete this.undefinedExports[t],u.flags&aE)break}i&&this.raiseRecoverable(r,"Identifier '"+t+"' has already been declared")};_a.checkLocalExport=function(t){this.scopeStack[0].lexical.indexOf(t.name)===-1&&this.scopeStack[0].var.indexOf(t.name)===-1&&(this.undefinedExports[t.name]=t)};_a.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};_a.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&aE)return e}};_a.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&aE&&!(e.flags&DO))return e}};var Aa=function(e,r,i){this.type="",this.start=r,this.end=0,e.options.locations&&(this.loc=new oc(e,i)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[r,0])},Zh=At.prototype;Zh.startNode=function(){return new Aa(this,this.start,this.startLoc)};Zh.startNodeAt=function(t,e){return new Aa(this,t,e)};function OO(t,e,r,i){return t.type=e,t.end=r,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=r),t}Zh.finishNode=function(t,e){return OO.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)};Zh.finishNodeAt=function(t,e,r,i){return OO.call(this,t,e,r,i)};Zh.copyNode=function(t){var e=new Aa(this,t.start,this.startLoc);for(var r in t)e[r]=t[r];return e};var NO="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",FO=NO+" Extended_Pictographic",BO=FO,UO=BO+" EBase EComp EMod EPres ExtPict",wne=UO,_ne={9:NO,10:FO,11:BO,12:UO,13:wne},wO="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",jO="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",qO=jO+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",WO=qO+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",VO=WO+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ane=VO+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ine={9:jO,10:qO,11:WO,12:VO,13:Ane},GO={};function Sne(t){var e=GO[t]={binary:sc(_ne[t]+" "+wO),nonBinary:{General_Category:sc(wO),Script:sc(Ine[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(dv=0,eE=[9,10,11,12,13];dv<eE.length;dv+=1)_O=eE[dv],Sne(_O);var _O,dv,eE,He=At.prototype,_o=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":""),this.unicodeProperties=GO[e.options.ecmaVersion>=13?13:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};_o.prototype.reset=function(e,r,i){var n=i.indexOf("u")!==-1;this.start=e|0,this.source=r+"",this.flags=i,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9};_o.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};_o.prototype.at=function(e,r){r===void 0&&(r=!1);var i=this.source,n=i.length;if(e>=n)return-1;var s=i.charCodeAt(e);if(!(r||this.switchU)||s<=55295||s>=57344||e+1>=n)return s;var o=i.charCodeAt(e+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};_o.prototype.nextIndex=function(e,r){r===void 0&&(r=!1);var i=this.source,n=i.length;if(e>=n)return n;var s=i.charCodeAt(e),o;return!(r||this.switchU)||s<=55295||s>=57344||e+1>=n||(o=i.charCodeAt(e+1))<56320||o>57343?e+1:e+2};_o.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};_o.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};_o.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};_o.prototype.eat=function(e,r){return r===void 0&&(r=!1),this.current(r)===e?(this.advance(r),!0):!1};function Hv(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}He.validateRegExpFlags=function(t){for(var e=t.validFlags,r=t.flags,i=0;i<r.length;i++){var n=r.charAt(i);e.indexOf(n)===-1&&this.raise(t.start,"Invalid regular expression flag"),r.indexOf(n,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}};He.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))};He.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,r=t.backReferenceNames;e<r.length;e+=1){var i=r[e];t.groupNames.indexOf(i)===-1&&t.raise("Invalid named capture referenced")}};He.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")};He.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););};He.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))?(this.regexp_eatQuantifier(t),!0):!1};He.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var r=!1;if(this.options.ecmaVersion>=9&&(r=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!r,!0}return t.pos=e,!1};He.regexp_eatQuantifier=function(t,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(t,e)?(t.eat(63),!0):!1};He.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)};He.regexp_eatBracedQuantifier=function(t,e){var r=t.pos;if(t.eat(123)){var i=0,n=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue),t.eat(125)))return n!==-1&&n<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=r}return!1};He.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)};He.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1};He.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1};He.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):t.current()===63&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1};He.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)};He.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1};He.regexp_eatSyntaxCharacter=function(t){var e=t.current();return KO(e)?(t.lastIntValue=e,t.advance(),!0):!1};function KO(t){return t===36||t>=40&&t<=43||t===46||t===63||t>=91&&t<=94||t>=123&&t<=125}He.regexp_eatPatternCharacters=function(t){for(var e=t.pos,r=0;(r=t.current())!==-1&&!KO(r);)t.advance();return t.pos!==e};He.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(t.advance(),!0):!1};He.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t)){t.groupNames.indexOf(t.lastStringValue)!==-1&&t.raise("Duplicate capture group name"),t.groupNames.push(t.lastStringValue);return}t.raise("Invalid group")}};He.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1};He.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Hv(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Hv(t.lastIntValue);return!0}return!1};He.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,r=this.options.ecmaVersion>=11,i=t.current(r);return t.advance(r),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,r)&&(i=t.lastIntValue),Ene(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)};function Ene(t){return wo(t,!0)||t===36||t===95}He.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,r=this.options.ecmaVersion>=11,i=t.current(r);return t.advance(r),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,r)&&(i=t.lastIntValue),xne(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)};function xne(t){return tp(t,!0)||t===36||t===95||t===8204||t===8205}He.regexp_eatAtomEscape=function(t){return this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t)?!0:(t.switchU&&(t.current()===99&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)};He.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var r=t.lastIntValue;if(t.switchU)return r>t.maxBackReference&&(t.maxBackReference=r),!0;if(r<=t.numCapturingParens)return!0;t.pos=e}return!1};He.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1};He.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)};He.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1};He.regexp_eatZero=function(t){return t.current()===48&&!bv(t.lookahead())?(t.lastIntValue=0,t.advance(),!0):!1};He.regexp_eatControlEscape=function(t){var e=t.current();return e===116?(t.lastIntValue=9,t.advance(),!0):e===110?(t.lastIntValue=10,t.advance(),!0):e===118?(t.lastIntValue=11,t.advance(),!0):e===102?(t.lastIntValue=12,t.advance(),!0):e===114?(t.lastIntValue=13,t.advance(),!0):!1};He.regexp_eatControlLetter=function(t){var e=t.current();return zO(e)?(t.lastIntValue=e%32,t.advance(),!0):!1};function zO(t){return t>=65&&t<=90||t>=97&&t<=122}He.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){e===void 0&&(e=!1);var r=t.pos,i=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var n=t.lastIntValue;if(i&&n>=55296&&n<=56319){var s=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=(n-55296)*1024+(o-56320)+65536,!0}t.pos=s,t.lastIntValue=n}return!0}if(i&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&Cne(t.lastIntValue))return!0;i&&t.raise("Invalid unicode escape"),t.pos=r}return!1};function Cne(t){return t>=0&&t<=1114111}He.regexp_eatIdentityEscape=function(t){if(t.switchU)return this.regexp_eatSyntaxCharacter(t)?!0:t.eat(47)?(t.lastIntValue=47,!0):!1;var e=t.current();return e!==99&&(!t.switchN||e!==107)?(t.lastIntValue=e,t.advance(),!0):!1};He.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do t.lastIntValue=10*t.lastIntValue+(e-48),t.advance();while((e=t.current())>=48&&e<=57);return!0}return!1};He.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(Dne(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(e===80||e===112)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1};function Dne(t){return t===100||t===68||t===115||t===83||t===119||t===87}He.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var r=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,r,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,n),!0}return!1};He.regexp_validateUnicodePropertyNameAndValue=function(t,e,r){Yh(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(r)||t.raise("Invalid property value")};He.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")};He.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";XO(e=t.current());)t.lastStringValue+=Hv(e),t.advance();return t.lastStringValue!==""};function XO(t){return zO(t)||t===95}He.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Pne(e=t.current());)t.lastStringValue+=Hv(e),t.advance();return t.lastStringValue!==""};function Pne(t){return XO(t)||bv(t)}He.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)};He.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1};He.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var r=t.lastIntValue;t.switchU&&(e===-1||r===-1)&&t.raise("Invalid character class"),e!==-1&&r!==-1&&e>r&&t.raise("Range out of order in character class")}}};He.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var r=t.current();(r===99||QO(r))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return i!==93?(t.lastIntValue=i,t.advance(),!0):!1};He.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)};He.regexp_eatClassControlLetter=function(t){var e=t.current();return bv(e)||e===95?(t.lastIntValue=e%32,t.advance(),!0):!1};He.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1};He.regexp_eatDecimalDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;bv(r=t.current());)t.lastIntValue=10*t.lastIntValue+(r-48),t.advance();return t.pos!==e};function bv(t){return t>=48&&t<=57}He.regexp_eatHexDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;JO(r=t.current());)t.lastIntValue=16*t.lastIntValue+YO(r),t.advance();return t.pos!==e};function JO(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function YO(t){return t>=65&&t<=70?10+(t-65):t>=97&&t<=102?10+(t-97):t-48}He.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var r=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=e*64+r*8+t.lastIntValue:t.lastIntValue=e*8+r}else t.lastIntValue=e;return!0}return!1};He.regexp_eatOctalDigit=function(t){var e=t.current();return QO(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)};function QO(t){return t>=48&&t<=55}He.regexp_eatFixedHexDigits=function(t,e){var r=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var n=t.current();if(!JO(n))return t.pos=r,!1;t.lastIntValue=16*t.lastIntValue+YO(n),t.advance()}return!0};var em=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new oc(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Re=At.prototype;Re.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new em(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Re.getToken=function(){return this.next(),new em(this)};typeof Symbol<"u"&&(Re[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===m.eof,value:e}}}});Re.nextToken=function(){var t=this.curContext();if((!t||!t.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(m.eof);if(t.override)return t.override(this);this.readToken(this.fullCharCodeAtPos())};Re.readToken=function(t){return wo(t,this.options.ecmaVersion>=6)||t===92?this.readWord():this.getTokenFromCode(t)};Re.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888};Re.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(r===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(var i=void 0,n=e;(i=SO(this.input,n,this.pos))>-1;)++this.curLine,n=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,r),e,this.pos,t,this.curPosition())};Re.skipLineComment=function(t){for(var e=this.pos,r=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!Ps(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,r,this.curPosition())};Re.skipSpace=function(){e:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(t>8&&t<14||t>=5760&&EO.test(String.fromCharCode(t)))++this.pos;else break e}}};Re.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=t,this.value=e,this.updateContext(r)};Re.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&t===46&&e===46?(this.pos+=3,this.finishToken(m.ellipsis)):(++this.pos,this.finishToken(m.dot))};Re.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):t===61?this.finishOp(m.assign,2):this.finishOp(m.slash,1)};Re.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),r=1,i=t===42?m.star:m.modulo;return this.options.ecmaVersion>=7&&t===42&&e===42&&(++r,i=m.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(m.assign,r+1):this.finishOp(i,r)};Re.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(m.assign,3)}return this.finishOp(t===124?m.logicalOR:m.logicalAND,2)}return e===61?this.finishOp(m.assign,2):this.finishOp(t===124?m.bitwiseOR:m.bitwiseAND,1)};Re.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(m.assign,2):this.finishOp(m.bitwiseXOR,1)};Re.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||yi.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(m.incDec,2):e===61?this.finishOp(m.assign,2):this.finishOp(m.plusMin,1)};Re.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return e===t?(r=t===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+r)===61?this.finishOp(m.assign,r+1):this.finishOp(m.bitShift,r)):e===33&&t===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(r=2),this.finishOp(m.relational,r))};Re.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(m.equality,this.input.charCodeAt(this.pos+2)===61?3:2):t===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(m.arrow)):this.finishOp(t===61?m.eq:m.prefix,1)};Re.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var r=this.input.charCodeAt(this.pos+2);if(r<48||r>57)return this.finishOp(m.questionDot,2)}if(e===63){if(t>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(m.assign,3)}return this.finishOp(m.coalesce,2)}}return this.finishOp(m.question,1)};Re.readToken_numberSign=function(){var t=this.options.ecmaVersion,e=35;if(t>=13&&(++this.pos,e=this.fullCharCodeAtPos(),wo(e,!0)||e===92))return this.finishToken(m.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+wv(e)+"'")};Re.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(m.parenL);case 41:return++this.pos,this.finishToken(m.parenR);case 59:return++this.pos,this.finishToken(m.semi);case 44:return++this.pos,this.finishToken(m.comma);case 91:return++this.pos,this.finishToken(m.bracketL);case 93:return++this.pos,this.finishToken(m.bracketR);case 123:return++this.pos,this.finishToken(m.braceL);case 125:return++this.pos,this.finishToken(m.braceR);case 58:return++this.pos,this.finishToken(m.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(m.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(m.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+wv(t)+"'")};Re.finishOp=function(t,e){var r=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,r)};Re.readRegexp=function(){for(var t,e,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(yi.test(i)&&this.raise(r,"Unterminated regular expression"),t)t=!1;else{if(i==="[")e=!0;else if(i==="]"&&e)e=!1;else if(i==="/"&&!e)break;t=i==="\\"}++this.pos}var n=this.input.slice(r,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new _o(this));a.reset(r,n,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(n,o)}catch{}return this.finishToken(m.regexp,{pattern:n,flags:o,value:u})};Re.readInt=function(t,e,r){for(var i=this.options.ecmaVersion>=12&&e===void 0,n=r&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,c=e??1/0;u<c;++u,++this.pos){var l=this.input.charCodeAt(this.pos),p=void 0;if(i&&l===95){n&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=l;continue}if(l>=97?p=l-97+10:l>=65?p=l-65+10:l>=48&&l<=57?p=l-48:p=1/0,p>=t)break;a=l,o=o*t+p}return i&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||e!=null&&this.pos-s!==e?null:o};function Lne(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function ZO(t){return typeof BigInt!="function"?null:BigInt(t.replace(/_/g,""))}Re.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var r=this.readInt(t);return r==null&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(r=ZO(this.input.slice(e,this.pos)),++this.pos):wo(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(m.num,r)};Re.readNumber=function(t){var e=this.pos;!t&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var r=this.pos-e>=2&&this.input.charCodeAt(e)===48;r&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!r&&!t&&this.options.ecmaVersion>=11&&i===110){var n=ZO(this.input.slice(e,this.pos));return++this.pos,wo(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(m.num,n)}r&&/[89]/.test(this.input.slice(e,this.pos))&&(r=!1),i===46&&!r&&(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),(i===69||i===101)&&!r&&(i=this.input.charCodeAt(++this.pos),(i===43||i===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),wo(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=Lne(this.input.slice(e,this.pos),r);return this.finishToken(m.num,s)};Re.readCodePoint=function(){var t=this.input.charCodeAt(this.pos),e;if(t===123){this.options.ecmaVersion<6&&this.unexpected();var r=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(r,"Code point out of bounds")}else e=this.readHexChar(4);return e};function wv(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}Re.readString=function(t){for(var e="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;i===92?(e+=this.input.slice(r,this.pos),e+=this.readEscapedChar(!1),r=this.pos):i===8232||i===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ps(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(r,this.pos++),this.finishToken(m.string,e)};var eN={};Re.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t===eN)this.readInvalidTemplateToken();else throw t}this.inTemplateElement=!1};Re.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw eN;this.raise(t,e)};Re.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(r===96||r===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===m.template||this.type===m.invalidTemplate)?r===36?(this.pos+=2,this.finishToken(m.dollarBraceL)):(++this.pos,this.finishToken(m.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(m.template,t));if(r===92)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(Ps(r)){switch(t+=this.input.slice(e,this.pos),++this.pos,r){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:t+=`
`;break;default:t+=String.fromCharCode(r);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}};Re.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(m.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Re.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return wv(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var r=this.pos-1;return this.invalidStringToken(r,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(i,8);return n>255&&(i=i.slice(0,-1),n=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),(i!=="0"||e===56||e===57)&&(this.strict||t)&&this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return Ps(e)?"":String.fromCharCode(e)}};Re.readHexChar=function(t){var e=this.pos,r=this.readInt(16,t);return r===null&&this.invalidStringToken(e,"Bad character escape sequence"),r};Re.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,r=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(tp(n,i))this.pos+=n<=65535?1:2;else if(n===92){this.containsEsc=!0,t+=this.input.slice(r,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?wo:tp)(o,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=wv(o),r=this.pos}else break;e=!1}return t+this.input.slice(r,this.pos)};Re.readWord=function(){var t=this.readWord1(),e=m.name;return this.keywords.test(t)&&(e=nE[t]),this.finishToken(e,t)};var Tne="8.7.0";At.acorn={Parser:At,version:Tne,defaultOptions:Xh,Position:zh,SourceLocation:oc,getLineInfo:rp,Node:Aa,TokenType:Be,tokTypes:m,keywordTypes:nE,TokContext:Nn,tokContexts:ct,isIdentifierChar:tp,isIdentifierStart:wo,Token:em,isNewLine:Ps,lineBreak:yi,lineBreakG:yv,nonASCIIwhitespace:EO};function tN(t,e){return At.parse(t,e)}function _v(t,e,r){return At.parseExpressionAt(t,e,r)}var wN=require("crypto");var{stringify:$ne}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");var Av={"||":3,"&&":4,"|":5,"??":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},Bn=17,kne={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:Bn,ClassExpression:Bn,FunctionExpression:Bn,ObjectExpression:Bn,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function sp(t,e){let{generator:r}=t;if(t.write("("),e!=null&&e.length>0){r[e[0].type](e[0],t);let{length:i}=e;for(let n=1;n<i;n++){let s=e[n];t.write(", "),r[s.type](s,t)}}t.write(")")}function uN(t,e,r,i){let n=t.expressionsPrecedence[e.type];if(n===Bn)return!0;let s=t.expressionsPrecedence[r.type];return n!==s?!i&&n===15&&s===14&&r.operator==="**"||n<s:n!==13&&n!==14?!1:e.operator==="**"&&r.operator==="**"?!i:i?Av[e.operator]<=Av[r.operator]:Av[e.operator]<Av[r.operator]}function Iv(t,e,r,i){let{generator:n}=t;uN(t,e,r,i)?(t.write("("),n[e.type](e,t),t.write(")")):n[e.type](e,t)}function Rne(t,e,r,i){let n=e.split(`
`),s=n.length-1;if(t.write(n[0].trim()),s>0){t.write(i);for(let o=1;o<s;o++)t.write(r+n[o].trim()+i);t.write(r+n[s].trim())}}function ii(t,e,r,i){let{length:n}=e;for(let s=0;s<n;s++){let o=e[s];t.write(r),o.type[0]==="L"?t.write("// "+o.value.trim()+`
`,o):(t.write("/*"),Rne(t,o.value,r,i),t.write("*/"+i))}}function Mne(t){let e=t;for(;e!=null;){let{type:r}=e;if(r[0]==="C"&&r[1]==="a")return!0;if(r[0]==="M"&&r[1]==="e"&&r[2]==="m")e=e.object;else return!1}}function pE(t,e){let{generator:r}=t,{declarations:i}=e;t.write(e.kind+" ");let{length:n}=i;if(n>0){r.VariableDeclarator(i[0],t);for(let s=1;s<n;s++)t.write(", "),r.VariableDeclarator(i[s],t)}}var rN,iN,nN,sN,oN,aN,One={Program(t,e){let r=e.indent.repeat(e.indentLevel),{lineEnd:i,writeComments:n}=e;n&&t.comments!=null&&ii(e,t.comments,r,i);let s=t.body,{length:o}=s;for(let a=0;a<o;a++){let u=s[a];n&&u.comments!=null&&ii(e,u.comments,r,i),e.write(r),this[u.type](u,e),e.write(i)}n&&t.trailingComments!=null&&ii(e,t.trailingComments,r,i)},BlockStatement:aN=function(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:i,writeComments:n}=e,s=r+e.indent;e.write("{");let o=t.body;if(o!=null&&o.length>0){e.write(i),n&&t.comments!=null&&ii(e,t.comments,s,i);let{length:a}=o;for(let u=0;u<a;u++){let c=o[u];n&&c.comments!=null&&ii(e,c.comments,s,i),e.write(s),this[c.type](c,e),e.write(i)}e.write(r)}else n&&t.comments!=null&&(e.write(i),ii(e,t.comments,s,i),e.write(r));n&&t.trailingComments!=null&&ii(e,t.trailingComments,s,i),e.write("}"),e.indentLevel--},ClassBody:aN,StaticBlock(t,e){e.write("static "),this.BlockStatement(t,e)},EmptyStatement(t,e){e.write(";")},ExpressionStatement(t,e){let r=e.expressionsPrecedence[t.expression.type];r===Bn||r===3&&t.expression.left.type[0]==="O"?(e.write("("),this[t.expression.type](t.expression,e),e.write(")")):this[t.expression.type](t.expression,e),e.write(";")},IfStatement(t,e){e.write("if ("),this[t.test.type](t.test,e),e.write(") "),this[t.consequent.type](t.consequent,e),t.alternate!=null&&(e.write(" else "),this[t.alternate.type](t.alternate,e))},LabeledStatement(t,e){this[t.label.type](t.label,e),e.write(": "),this[t.body.type](t.body,e)},BreakStatement(t,e){e.write("break"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},ContinueStatement(t,e){e.write("continue"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},WithStatement(t,e){e.write("with ("),this[t.object.type](t.object,e),e.write(") "),this[t.body.type](t.body,e)},SwitchStatement(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:i,writeComments:n}=e;e.indentLevel++;let s=r+e.indent,o=s+e.indent;e.write("switch ("),this[t.discriminant.type](t.discriminant,e),e.write(") {"+i);let{cases:a}=t,{length:u}=a;for(let c=0;c<u;c++){let l=a[c];n&&l.comments!=null&&ii(e,l.comments,s,i),l.test?(e.write(s+"case "),this[l.test.type](l.test,e),e.write(":"+i)):e.write(s+"default:"+i);let{consequent:p}=l,{length:f}=p;for(let h=0;h<f;h++){let g=p[h];n&&g.comments!=null&&ii(e,g.comments,o,i),e.write(o),this[g.type](g,e),e.write(i)}}e.indentLevel-=2,e.write(r+"}")},ReturnStatement(t,e){e.write("return"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e)),e.write(";")},ThrowStatement(t,e){e.write("throw "),this[t.argument.type](t.argument,e),e.write(";")},TryStatement(t,e){if(e.write("try "),this[t.block.type](t.block,e),t.handler){let{handler:r}=t;r.param==null?e.write(" catch "):(e.write(" catch ("),this[r.param.type](r.param,e),e.write(") ")),this[r.body.type](r.body,e)}t.finalizer&&(e.write(" finally "),this[t.finalizer.type](t.finalizer,e))},WhileStatement(t,e){e.write("while ("),this[t.test.type](t.test,e),e.write(") "),this[t.body.type](t.body,e)},DoWhileStatement(t,e){e.write("do "),this[t.body.type](t.body,e),e.write(" while ("),this[t.test.type](t.test,e),e.write(");")},ForStatement(t,e){if(e.write("for ("),t.init!=null){let{init:r}=t;r.type[0]==="V"?pE(e,r):this[r.type](r,e)}e.write("; "),t.test&&this[t.test.type](t.test,e),e.write("; "),t.update&&this[t.update.type](t.update,e),e.write(") "),this[t.body.type](t.body,e)},ForInStatement:rN=function(t,e){e.write(`for ${t.await?"await ":""}(`);let{left:r}=t;r.type[0]==="V"?pE(e,r):this[r.type](r,e),e.write(t.type[3]==="I"?" in ":" of "),this[t.right.type](t.right,e),e.write(") "),this[t.body.type](t.body,e)},ForOfStatement:rN,DebuggerStatement(t,e){e.write("debugger;",t)},FunctionDeclaration:iN=function(t,e){e.write((t.async?"async ":"")+(t.generator?"function* ":"function ")+(t.id?t.id.name:""),t),sp(e,t.params),e.write(" "),this[t.body.type](t.body,e)},FunctionExpression:iN,VariableDeclaration(t,e){pE(e,t),e.write(";")},VariableDeclarator(t,e){this[t.id.type](t.id,e),t.init!=null&&(e.write(" = "),this[t.init.type](t.init,e))},ClassDeclaration(t,e){if(e.write("class "+(t.id?`${t.id.name} `:""),t),t.superClass){e.write("extends ");let{superClass:r}=t,{type:i}=r,n=e.expressionsPrecedence[i];(i[0]!=="C"||i[1]!=="l"||i[5]!=="E")&&(n===Bn||n<e.expressionsPrecedence.ClassExpression)?(e.write("("),this[t.superClass.type](r,e),e.write(")")):this[r.type](r,e),e.write(" ")}this.ClassBody(t.body,e)},ImportDeclaration(t,e){e.write("import ");let{specifiers:r}=t,{length:i}=r,n=0;if(i>0){for(;n<i;){n>0&&e.write(", ");let s=r[n],o=s.type[6];if(o==="D")e.write(s.local.name,s),n++;else if(o==="N")e.write("* as "+s.local.name,s),n++;else break}if(n<i){for(e.write("{");;){let s=r[n],{name:o}=s.imported;if(e.write(o,s),o!==s.local.name&&e.write(" as "+s.local.name),++n<i)e.write(", ");else break}e.write("}")}e.write(" from ")}this.Literal(t.source,e),e.write(";")},ImportExpression(t,e){e.write("import("),this[t.source.type](t.source,e),e.write(")")},ExportDefaultDeclaration(t,e){e.write("export default "),this[t.declaration.type](t.declaration,e),e.expressionsPrecedence[t.declaration.type]!=null&&t.declaration.type[0]!=="F"&&e.write(";")},ExportNamedDeclaration(t,e){if(e.write("export "),t.declaration)this[t.declaration.type](t.declaration,e);else{e.write("{");let{specifiers:r}=t,{length:i}=r;if(i>0)for(let n=0;;){let s=r[n],{name:o}=s.local;if(e.write(o,s),o!==s.exported.name&&e.write(" as "+s.exported.name),++n<i)e.write(", ");else break}e.write("}"),t.source&&(e.write(" from "),this.Literal(t.source,e)),e.write(";")}},ExportAllDeclaration(t,e){t.exported!=null?e.write("export * as "+t.exported.name+" from "):e.write("export * from "),this.Literal(t.source,e),e.write(";")},MethodDefinition(t,e){t.static&&e.write("static ");let r=t.kind[0];(r==="g"||r==="s")&&e.write(t.kind+" "),t.value.async&&e.write("async "),t.value.generator&&e.write("*"),t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),sp(e,t.value.params),e.write(" "),this[t.value.body.type](t.value.body,e)},ClassExpression(t,e){this.ClassDeclaration(t,e)},ArrowFunctionExpression(t,e){e.write(t.async?"async ":"",t);let{params:r}=t;r!=null&&(r.length===1&&r[0].type[0]==="I"?e.write(r[0].name,r[0]):sp(e,t.params)),e.write(" => "),t.body.type[0]==="O"?(e.write("("),this.ObjectExpression(t.body,e),e.write(")")):this[t.body.type](t.body,e)},ThisExpression(t,e){e.write("this",t)},Super(t,e){e.write("super",t)},RestElement:nN=function(t,e){e.write("..."),this[t.argument.type](t.argument,e)},SpreadElement:nN,YieldExpression(t,e){e.write(t.delegate?"yield*":"yield"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e))},AwaitExpression(t,e){e.write("await ",t),Iv(e,t.argument,t)},TemplateLiteral(t,e){let{quasis:r,expressions:i}=t;e.write("`");let{length:n}=i;for(let o=0;o<n;o++){let a=i[o],u=r[o];e.write(u.value.raw,u),e.write("${"),this[a.type](a,e),e.write("}")}let s=r[r.length-1];e.write(s.value.raw,s),e.write("`")},TemplateElement(t,e){e.write(t.value.raw,t)},TaggedTemplateExpression(t,e){Iv(e,t.tag,t),this[t.quasi.type](t.quasi,e)},ArrayExpression:oN=function(t,e){if(e.write("["),t.elements.length>0){let{elements:r}=t,{length:i}=r;for(let n=0;;){let s=r[n];if(s!=null&&this[s.type](s,e),++n<i)e.write(", ");else{s==null&&e.write(", ");break}}}e.write("]")},ArrayPattern:oN,ObjectExpression(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:i,writeComments:n}=e,s=r+e.indent;if(e.write("{"),t.properties.length>0){e.write(i),n&&t.comments!=null&&ii(e,t.comments,s,i);let o=","+i,{properties:a}=t,{length:u}=a;for(let c=0;;){let l=a[c];if(n&&l.comments!=null&&ii(e,l.comments,s,i),e.write(s),this[l.type](l,e),++c<u)e.write(o);else break}e.write(i),n&&t.trailingComments!=null&&ii(e,t.trailingComments,s,i),e.write(r+"}")}else n?t.comments!=null?(e.write(i),ii(e,t.comments,s,i),t.trailingComments!=null&&ii(e,t.trailingComments,s,i),e.write(r+"}")):t.trailingComments!=null?(e.write(i),ii(e,t.trailingComments,s,i),e.write(r+"}")):e.write("}"):e.write("}");e.indentLevel--},Property(t,e){t.method||t.kind[0]!=="i"?this.MethodDefinition(t,e):(t.shorthand||(t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),e.write(": ")),this[t.value.type](t.value,e))},PropertyDefinition(t,e){t.static&&e.write("static "),this[t.key.type](t.key,e),e.write(" = "),this[t.value.type](t.value,e)},ObjectPattern(t,e){if(e.write("{"),t.properties.length>0){let{properties:r}=t,{length:i}=r;for(let n=0;this[r[n].type](r[n],e),++n<i;)e.write(", ")}e.write("}")},SequenceExpression(t,e){sp(e,t.expressions)},UnaryExpression(t,e){if(t.prefix){let{operator:r,argument:i,argument:{type:n}}=t;e.write(r);let s=uN(e,i,t);!s&&(r.length>1||n[0]==="U"&&(n[1]==="n"||n[1]==="p")&&i.prefix&&i.operator[0]===r&&(r==="+"||r==="-"))&&e.write(" "),s?(e.write(r.length>1?" (":"("),this[n](i,e),e.write(")")):this[n](i,e)}else this[t.argument.type](t.argument,e),e.write(t.operator)},UpdateExpression(t,e){t.prefix?(e.write(t.operator),this[t.argument.type](t.argument,e)):(this[t.argument.type](t.argument,e),e.write(t.operator))},AssignmentExpression(t,e){this[t.left.type](t.left,e),e.write(" "+t.operator+" "),this[t.right.type](t.right,e)},AssignmentPattern(t,e){this[t.left.type](t.left,e),e.write(" = "),this[t.right.type](t.right,e)},BinaryExpression:sN=function(t,e){let r=t.operator==="in";r&&e.write("("),Iv(e,t.left,t,!1),e.write(" "+t.operator+" "),Iv(e,t.right,t,!0),r&&e.write(")")},LogicalExpression:sN,ConditionalExpression(t,e){let{test:r}=t,i=e.expressionsPrecedence[r.type];i===Bn||i<=e.expressionsPrecedence.ConditionalExpression?(e.write("("),this[r.type](r,e),e.write(")")):this[r.type](r,e),e.write(" ? "),this[t.consequent.type](t.consequent,e),e.write(" : "),this[t.alternate.type](t.alternate,e)},NewExpression(t,e){e.write("new ");let r=e.expressionsPrecedence[t.callee.type];r===Bn||r<e.expressionsPrecedence.CallExpression||Mne(t.callee)?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),sp(e,t.arguments)},CallExpression(t,e){let r=e.expressionsPrecedence[t.callee.type];r===Bn||r<e.expressionsPrecedence.CallExpression?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),t.optional&&e.write("?."),sp(e,t.arguments)},ChainExpression(t,e){this[t.expression.type](t.expression,e)},MemberExpression(t,e){let r=e.expressionsPrecedence[t.object.type];r===Bn||r<e.expressionsPrecedence.MemberExpression?(e.write("("),this[t.object.type](t.object,e),e.write(")")):this[t.object.type](t.object,e),t.computed?(t.optional&&e.write("?."),e.write("["),this[t.property.type](t.property,e),e.write("]")):(t.optional?e.write("?."):e.write("."),this[t.property.type](t.property,e))},MetaProperty(t,e){e.write(t.meta.name+"."+t.property.name,t)},Identifier(t,e){e.write(t.name,t)},PrivateIdentifier(t,e){e.write(`#${t.name}`,t)},Literal(t,e){t.raw!=null?e.write(t.raw,t):t.regex!=null?this.RegExpLiteral(t,e):t.bigint!=null?e.write(t.bigint+"n",t):e.write($ne(t.value),t)},RegExpLiteral(t,e){let{regex:r}=t;e.write(`/${r.pattern}/${r.flags}`,t)}},Nne={};var fE=class{constructor(e){let r=e??Nne;this.output="",r.output!=null?(this.output=r.output,this.write=this.writeToStream):this.output="",this.generator=r.generator!=null?r.generator:One,this.expressionsPrecedence=r.expressionsPrecedence!=null?r.expressionsPrecedence:kne,this.indent=r.indent!=null?r.indent:"  ",this.lineEnd=r.lineEnd!=null?r.lineEnd:`
`,this.indentLevel=r.startingIndentLevel!=null?r.startingIndentLevel:0,this.writeComments=r.comments?r.comments:!1,r.sourceMap!=null&&(this.write=r.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=r.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:r.sourceMap.file||r.sourceMap._file})}write(e){this.output+=e}writeToStream(e){this.output.write(e)}writeAndMap(e,r){this.output+=e,this.map(e,r)}writeToStreamAndMap(e,r){this.output.write(e),this.map(e,r)}map(e,r){if(r!=null){let{type:s}=r;if(s[0]==="L"&&s[2]==="n"){this.column=0,this.line++;return}if(r.loc!=null){let{mapping:o}=this;o.original=r.loc.start,o.name=r.name,this.sourceMap.addMapping(o)}if(s[0]==="T"&&s[8]==="E"||s[0]==="L"&&s[1]==="i"&&typeof r.value=="string"){let{length:o}=e,{column:a,line:u}=this;for(let c=0;c<o;c++)e[c]===`
`?(a=0,u++):a++;this.column=a,this.line=u;return}}let{length:i}=e,{lineEnd:n}=this;i>0&&(this.lineEndSize>0&&(n.length===1?e[i-1]===n:e.endsWith(n))?(this.line+=this.lineEndSize,this.column=0):this.column+=i)}toString(){return this.output}};function Ao(t,e){let r=new fE(e);return r.generator[t.type](t,r),r.output}var op=I(Sv()),tm=I(ov());var Ev="\u2716";function Mi(t){return t.name===Ev}function lN(){}var ot=function(e,r){if(r===void 0&&(r={}),this.toks=this.constructor.BaseParser.tokenizer(e,r),this.options=this.toks.options,this.input=this.toks.input,this.tok=this.last={type:m.eof,start:0,end:0},this.tok.validateRegExpFlags=lN,this.tok.validateRegExpPattern=lN,this.options.locations){var i=this.toks.curPosition();this.tok.loc=new oc(this.toks,i,i)}this.ahead=[],this.context=[],this.curIndent=0,this.curLineStart=0,this.nextLineStart=this.lineEnd(this.curLineStart)+1,this.inAsync=!1,this.inGenerator=!1,this.inFunction=!1};ot.prototype.startNode=function(){return new Aa(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};ot.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};ot.prototype.startNodeAt=function(e){return this.options.locations?new Aa(this.toks,e[0],e[1]):new Aa(this.toks,e)};ot.prototype.finishNode=function(e,r){return e.type=r,e.end=this.last.end,this.options.locations&&(e.loc.end=this.last.loc.end),this.options.ranges&&(e.range[1]=this.last.end),e};ot.prototype.dummyNode=function(e){var r=this.startNode();return r.type=e,r.end=r.start,this.options.locations&&(r.loc.end=r.loc.start),this.options.ranges&&(r.range[1]=r.start),this.last={type:m.name,start:r.start,end:r.start,loc:r.loc},r};ot.prototype.dummyIdent=function(){var e=this.dummyNode("Identifier");return e.name=Ev,e};ot.prototype.dummyString=function(){var e=this.dummyNode("Literal");return e.value=e.raw=Ev,e};ot.prototype.eat=function(e){return this.tok.type===e?(this.next(),!0):!1};ot.prototype.isContextual=function(e){return this.tok.type===m.name&&this.tok.value===e};ot.prototype.eatContextual=function(e){return this.tok.value===e&&this.eat(m.name)};ot.prototype.canInsertSemicolon=function(){return this.tok.type===m.eof||this.tok.type===m.braceR||yi.test(this.input.slice(this.last.end,this.tok.start))};ot.prototype.semicolon=function(){return this.eat(m.semi)};ot.prototype.expect=function(e){if(this.eat(e))return!0;for(var r=1;r<=2;r++)if(this.lookAhead(r).type===e){for(var i=0;i<r;i++)this.next();return!0}};ot.prototype.pushCx=function(){this.context.push(this.curIndent)};ot.prototype.popCx=function(){this.curIndent=this.context.pop()};ot.prototype.lineEnd=function(e){for(;e<this.input.length&&!Ps(this.input.charCodeAt(e));)++e;return e};ot.prototype.indentationAfter=function(e){for(var r=0;;++e){var i=this.input.charCodeAt(e);if(i===32)++r;else if(i===9)r+=this.options.tabSize;else return r}};ot.prototype.closes=function(e,r,i,n){return this.tok.type===e||this.tok.type===m.eof?!0:i!==this.curLineStart&&this.curIndent<r&&this.tokenStartsLine()&&(!n||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<r)};ot.prototype.tokenStartsLine=function(){for(var e=this.tok.start-1;e>=this.curLineStart;--e){var r=this.input.charCodeAt(e);if(r!==9&&r!==32)return!1}return!0};ot.prototype.extend=function(e,r){this[e]=r(this[e])};ot.prototype.parse=function(){return this.next(),this.parseTopLevel()};ot.extend=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];for(var i=this,n=0;n<e.length;n++)i=e[n](i);return i};ot.parse=function(e,r){return new this(e,r).parse()};ot.BaseParser=At;var xv=ot.prototype;function Fne(t){return t<14&&t>8||t===32||t===160||Ps(t)}xv.next=function(){if(this.last=this.tok,this.ahead.length?this.tok=this.ahead.shift():this.tok=this.readToken(),this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};xv.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===m.dot&&this.input.substr(this.toks.end,1)==="."&&this.options.ecmaVersion>=6&&(this.toks.end++,this.toks.type=m.ellipsis),new em(this.toks)}catch(s){if(!(s instanceof SyntaxError))throw s;var t=s.message,e=s.raisedAt,r=!0;if(/unterminated/i.test(t))if(e=this.lineEnd(s.pos+1),/string/.test(t))r={start:s.pos,end:e,type:m.string,value:this.input.slice(s.pos+1,e)};else if(/regular expr/i.test(t)){var i=this.input.slice(s.pos,e);try{i=new RegExp(i)}catch{}r={start:s.pos,end:e,type:m.regexp,value:i}}else/template/.test(t)?r={start:s.pos,end:e,type:m.template,value:this.input.slice(s.pos,e)}:r=!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(t))for(;e<this.input.length&&!Fne(this.input.charCodeAt(e));)++e;else if(/character escape|expected hexadecimal/i.test(t))for(;e<this.input.length;){var n=this.input.charCodeAt(e++);if(n===34||n===39||Ps(n))break}else if(/unexpected character/i.test(t))e++,r=!1;else if(/regular expression/i.test(t))r=!0;else throw s;if(this.resetTo(e),r===!0&&(r={start:e,end:e,type:m.name,value:Ev}),r)return this.options.locations&&(r.loc=new oc(this.toks,rp(this.input,r.start),rp(this.input,r.end))),r}};xv.resetTo=function(t){this.toks.pos=t;var e=this.input.charAt(t-1);if(this.toks.exprAllowed=!e||/[[{(,;:?/*=+\-~!|&%^<>]/.test(e)||/[enwfd]/.test(e)&&/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(t-10,t)),this.options.locations){this.toks.curLine=1,this.toks.lineStart=yv.lastIndex=0;for(var r;(r=yv.exec(this.input))&&r.index<t;)++this.toks.curLine,this.toks.lineStart=r.index+r[0].length}};xv.lookAhead=function(t){for(;t>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[t-1]};var Sr=ot.prototype;Sr.parseTopLevel=function(){var t=this.startNodeAt(this.options.locations?[0,rp(this.input,0)]:0);for(t.body=[];this.tok.type!==m.eof;)t.body.push(this.parseStatement());return this.toks.adaptDirectivePrologue(t.body),this.last=this.tok,t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};Sr.parseStatement=function(){var t=this.tok.type,e=this.startNode(),r;switch(this.toks.isLet()&&(t=m._var,r="let"),t){case m._break:case m._continue:this.next();var i=t===m._break;return this.semicolon()||this.canInsertSemicolon()?e.label=null:(e.label=this.tok.type===m.name?this.parseIdent():null,this.semicolon()),this.finishNode(e,i?"BreakStatement":"ContinueStatement");case m._debugger:return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement");case m._do:return this.next(),e.body=this.parseStatement(),e.test=this.eat(m._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(e,"DoWhileStatement");case m._for:this.next();var n=this.options.ecmaVersion>=9&&this.eatContextual("await");if(this.pushCx(),this.expect(m.parenL),this.tok.type===m.semi)return this.parseFor(e,null);var s=this.toks.isLet();if(s||this.tok.type===m._var||this.tok.type===m._const){var o=this.parseVar(this.startNode(),!0,s?"let":this.tok.value);return o.declarations.length===1&&(this.tok.type===m._in||this.isContextual("of"))?(this.options.ecmaVersion>=9&&this.tok.type!==m._in&&(e.await=n),this.parseForIn(e,o)):this.parseFor(e,o)}var a=this.parseExpression(!0);return this.tok.type===m._in||this.isContextual("of")?(this.options.ecmaVersion>=9&&this.tok.type!==m._in&&(e.await=n),this.parseForIn(e,this.toAssignable(a))):this.parseFor(e,a);case m._function:return this.next(),this.parseFunction(e,!0);case m._if:return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(),e.alternate=this.eat(m._else)?this.parseStatement():null,this.finishNode(e,"IfStatement");case m._return:return this.next(),this.eat(m.semi)||this.canInsertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement");case m._switch:var u=this.curIndent,c=this.curLineStart;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.pushCx(),this.expect(m.braceL);for(var l;!this.closes(m.braceR,u,c,!0);)if(this.tok.type===m._case||this.tok.type===m._default){var p=this.tok.type===m._case;l&&this.finishNode(l,"SwitchCase"),e.cases.push(l=this.startNode()),l.consequent=[],this.next(),p?l.test=this.parseExpression():l.test=null,this.expect(m.colon)}else l||(e.cases.push(l=this.startNode()),l.consequent=[],l.test=null),l.consequent.push(this.parseStatement());return l&&this.finishNode(l,"SwitchCase"),this.popCx(),this.eat(m.braceR),this.finishNode(e,"SwitchStatement");case m._throw:return this.next(),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement");case m._try:if(this.next(),e.block=this.parseBlock(),e.handler=null,this.tok.type===m._catch){var f=this.startNode();this.next(),this.eat(m.parenL)?(f.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(m.parenR)):f.param=null,f.body=this.parseBlock(),e.handler=this.finishNode(f,"CatchClause")}return e.finalizer=this.eat(m._finally)?this.parseBlock():null,!e.handler&&!e.finalizer?e.block:this.finishNode(e,"TryStatement");case m._var:case m._const:return this.parseVar(e,!1,r||this.tok.value);case m._while:return this.next(),e.test=this.parseParenExpression(),e.body=this.parseStatement(),this.finishNode(e,"WhileStatement");case m._with:return this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(),this.finishNode(e,"WithStatement");case m.braceL:return this.parseBlock();case m.semi:return this.next(),this.finishNode(e,"EmptyStatement");case m._class:return this.parseClass(!0);case m._import:if(this.options.ecmaVersion>10){var h=this.lookAhead(1).type;if(h===m.parenL||h===m.dot)return e.expression=this.parseExpression(),this.semicolon(),this.finishNode(e,"ExpressionStatement")}return this.parseImport();case m._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),this.next(),this.parseFunction(e,!0,!0);var g=this.parseExpression();return Mi(g)?(this.next(),this.tok.type===m.eof?this.finishNode(e,"EmptyStatement"):this.parseStatement()):t===m.name&&g.type==="Identifier"&&this.eat(m.colon)?(e.body=this.parseStatement(),e.label=g,this.finishNode(e,"LabeledStatement")):(e.expression=g,this.semicolon(),this.finishNode(e,"ExpressionStatement"))}};Sr.parseBlock=function(){var t=this.startNode();this.pushCx(),this.expect(m.braceL);var e=this.curIndent,r=this.curLineStart;for(t.body=[];!this.closes(m.braceR,e,r,!0);)t.body.push(this.parseStatement());return this.popCx(),this.eat(m.braceR),this.finishNode(t,"BlockStatement")};Sr.parseFor=function(t,e){return t.init=e,t.test=t.update=null,this.eat(m.semi)&&this.tok.type!==m.semi&&(t.test=this.parseExpression()),this.eat(m.semi)&&this.tok.type!==m.parenR&&(t.update=this.parseExpression()),this.popCx(),this.expect(m.parenR),t.body=this.parseStatement(),this.finishNode(t,"ForStatement")};Sr.parseForIn=function(t,e){var r=this.tok.type===m._in?"ForInStatement":"ForOfStatement";return this.next(),t.left=e,t.right=this.parseExpression(),this.popCx(),this.expect(m.parenR),t.body=this.parseStatement(),this.finishNode(t,r)};Sr.parseVar=function(t,e,r){t.kind=r,this.next(),t.declarations=[];do{var i=this.startNode();i.id=this.options.ecmaVersion>=6?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),i.init=this.eat(m.eq)?this.parseMaybeAssign(e):null,t.declarations.push(this.finishNode(i,"VariableDeclarator"))}while(this.eat(m.comma));if(!t.declarations.length){var n=this.startNode();n.id=this.dummyIdent(),t.declarations.push(this.finishNode(n,"VariableDeclarator"))}return e||this.semicolon(),this.finishNode(t,"VariableDeclaration")};Sr.parseClass=function(t){var e=this.startNode();this.next(),this.tok.type===m.name?e.id=this.parseIdent():t===!0?e.id=this.dummyIdent():e.id=null,e.superClass=this.eat(m._extends)?this.parseExpression():null,e.body=this.startNode(),e.body.body=[],this.pushCx();var r=this.curIndent+1,i=this.curLineStart;for(this.eat(m.braceL),this.curIndent+1<r&&(r=this.curIndent,i=this.curLineStart);!this.closes(m.braceR,r,i);){var n=this.parseClassElement();n&&e.body.body.push(n)}return this.popCx(),this.eat(m.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.semicolon(),this.finishNode(e.body,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Sr.parseClassElement=function(){if(this.eat(m.semi))return null;var t=this.options,e=t.ecmaVersion,r=t.locations,i=this.curIndent,n=this.curLineStart,s=this.startNode(),o="",a=!1,u=!1,c="method",l=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(m.braceL))return this.parseClassStaticBlock(s),s;this.isClassElementNameStart()||this.toks.type===m.star?l=!0:o="static"}if(s.static=l,!o&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.toks.type===m.star)&&!this.canInsertSemicolon()?u=!0:o="async"),!o){a=this.eat(m.star);var p=this.toks.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?c=p:o=p)}if(o)s.computed=!1,s.key=this.startNodeAt(r?[this.toks.lastTokStart,this.toks.lastTokStartLoc]:this.toks.lastTokStart),s.key.name=o,this.finishNode(s.key,"Identifier");else if(this.parseClassElementName(s),Mi(s.key))return Mi(this.parseMaybeAssign())&&this.next(),this.eat(m.comma),null;if(e<13||this.toks.type===m.parenL||c!=="method"||a||u){var f=!s.computed&&!s.static&&!a&&!u&&c==="method"&&(s.key.type==="Identifier"&&s.key.name==="constructor"||s.key.type==="Literal"&&s.key.value==="constructor");s.kind=f?"constructor":c,s.value=this.parseMethod(a,u),this.finishNode(s,"MethodDefinition")}else{if(this.eat(m.eq))if(this.curLineStart!==n&&this.curIndent<=i&&this.tokenStartsLine())s.value=null;else{var h=this.inAsync,g=this.inGenerator;this.inAsync=!1,this.inGenerator=!1,s.value=this.parseMaybeAssign(),this.inAsync=h,this.inGenerator=g}else s.value=null;this.semicolon(),this.finishNode(s,"PropertyDefinition")}return s};Sr.parseClassStaticBlock=function(t){var e=this.curIndent,r=this.curLineStart;for(t.body=[],this.pushCx();!this.closes(m.braceR,e,r,!0);)t.body.push(this.parseStatement());return this.popCx(),this.eat(m.braceR),this.finishNode(t,"StaticBlock")};Sr.isClassElementNameStart=function(){return this.toks.isClassElementNameStart()};Sr.parseClassElementName=function(t){this.toks.type===m.privateId?(t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)};Sr.parseFunction=function(t,e,r){var i=this.inAsync,n=this.inGenerator,s=this.inFunction;return this.initFunction(t),this.options.ecmaVersion>=6&&(t.generator=this.eat(m.star)),this.options.ecmaVersion>=8&&(t.async=!!r),this.tok.type===m.name?t.id=this.parseIdent():e===!0&&(t.id=this.dummyIdent()),this.inAsync=t.async,this.inGenerator=t.generator,this.inFunction=!0,t.params=this.parseFunctionParams(),t.body=this.parseBlock(),this.toks.adaptDirectivePrologue(t.body.body),this.inAsync=i,this.inGenerator=n,this.inFunction=s,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")};Sr.parseExport=function(){var t=this.startNode();if(this.next(),this.eat(m.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?t.exported=this.parseExprAtom():t.exported=null),t.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(m._default)){var e;if(this.tok.type===m._function||(e=this.toks.isAsyncFunction())){var r=this.startNode();this.next(),e&&this.next(),t.declaration=this.parseFunction(r,"nullableID",e)}else this.tok.type===m._class?t.declaration=this.parseClass("nullableID"):(t.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(t,"ExportDefaultDeclaration")}return this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(t.declaration=this.parseStatement(),t.specifiers=[],t.source=null):(t.declaration=null,t.specifiers=this.parseExportSpecifierList(),t.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon()),this.finishNode(t,"ExportNamedDeclaration")};Sr.parseImport=function(){var t=this.startNode();if(this.next(),this.tok.type===m.string)t.specifiers=[],t.source=this.parseExprAtom();else{var e;this.tok.type===m.name&&this.tok.value!=="from"&&(e=this.startNode(),e.local=this.parseIdent(),this.finishNode(e,"ImportDefaultSpecifier"),this.eat(m.comma)),t.specifiers=this.parseImportSpecifiers(),t.source=this.eatContextual("from")&&this.tok.type===m.string?this.parseExprAtom():this.dummyString(),e&&t.specifiers.unshift(e)}return this.semicolon(),this.finishNode(t,"ImportDeclaration")};Sr.parseImportSpecifiers=function(){var t=[];if(this.tok.type===m.star){var e=this.startNode();this.next(),e.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),t.push(this.finishNode(e,"ImportNamespaceSpecifier"))}else{var r=this.curIndent,i=this.curLineStart,n=this.nextLineStart;for(this.pushCx(),this.eat(m.braceL),this.curLineStart>n&&(n=this.curLineStart);!this.closes(m.braceR,r+(this.curLineStart<=n?1:0),i);){var s=this.startNode();if(this.eat(m.star))s.local=this.eatContextual("as")?this.parseModuleExportName():this.dummyIdent(),this.finishNode(s,"ImportNamespaceSpecifier");else{if(this.isContextual("from")||(s.imported=this.parseModuleExportName(),Mi(s.imported)))break;s.local=this.eatContextual("as")?this.parseModuleExportName():s.imported,this.finishNode(s,"ImportSpecifier")}t.push(s),this.eat(m.comma)}this.eat(m.braceR),this.popCx()}return t};Sr.parseExportSpecifierList=function(){var t=[],e=this.curIndent,r=this.curLineStart,i=this.nextLineStart;for(this.pushCx(),this.eat(m.braceL),this.curLineStart>i&&(i=this.curLineStart);!this.closes(m.braceR,e+(this.curLineStart<=i?1:0),r)&&!this.isContextual("from");){var n=this.startNode();if(n.local=this.parseModuleExportName(),Mi(n.local))break;n.exported=this.eatContextual("as")?this.parseModuleExportName():n.local,this.finishNode(n,"ExportSpecifier"),t.push(n),this.eat(m.comma)}return this.eat(m.braceR),this.popCx(),t};Sr.parseModuleExportName=function(){return this.options.ecmaVersion>=13&&this.tok.type===m.string?this.parseExprAtom():this.parseIdent()};var Ye=ot.prototype;Ye.checkLVal=function(t){if(!t)return t;switch(t.type){case"Identifier":case"MemberExpression":return t;case"ParenthesizedExpression":return t.expression=this.checkLVal(t.expression),t;default:return this.dummyIdent()}};Ye.parseExpression=function(t){var e=this.storeCurrentPos(),r=this.parseMaybeAssign(t);if(this.tok.type===m.comma){var i=this.startNodeAt(e);for(i.expressions=[r];this.eat(m.comma);)i.expressions.push(this.parseMaybeAssign(t));return this.finishNode(i,"SequenceExpression")}return r};Ye.parseParenExpression=function(){this.pushCx(),this.expect(m.parenL);var t=this.parseExpression();return this.popCx(),this.expect(m.parenR),t};Ye.parseMaybeAssign=function(t){if(this.inGenerator&&this.toks.isContextual("yield")){var e=this.startNode();return this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==m.star&&!this.tok.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(m.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")}var r=this.storeCurrentPos(),i=this.parseMaybeConditional(t);if(this.tok.type.isAssign){var n=this.startNodeAt(r);return n.operator=this.tok.value,n.left=this.tok.type===m.eq?this.toAssignable(i):this.checkLVal(i),this.next(),n.right=this.parseMaybeAssign(t),this.finishNode(n,"AssignmentExpression")}return i};Ye.parseMaybeConditional=function(t){var e=this.storeCurrentPos(),r=this.parseExprOps(t);if(this.eat(m.question)){var i=this.startNodeAt(e);return i.test=r,i.consequent=this.parseMaybeAssign(),i.alternate=this.expect(m.colon)?this.parseMaybeAssign(t):this.dummyIdent(),this.finishNode(i,"ConditionalExpression")}return r};Ye.parseExprOps=function(t){var e=this.storeCurrentPos(),r=this.curIndent,i=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),e,-1,t,r,i)};Ye.parseExprOp=function(t,e,r,i,n,s){if(this.curLineStart!==s&&this.curIndent<n&&this.tokenStartsLine())return t;var o=this.tok.type.binop;if(o!=null&&(!i||this.tok.type!==m._in)&&o>r){var a=this.startNodeAt(e);if(a.left=t,a.operator=this.tok.value,this.next(),this.curLineStart!==s&&this.curIndent<n&&this.tokenStartsLine())a.right=this.dummyIdent();else{var u=this.storeCurrentPos();a.right=this.parseExprOp(this.parseMaybeUnary(!1),u,o,i,n,s)}return this.finishNode(a,/&&|\|\||\?\?/.test(a.operator)?"LogicalExpression":"BinaryExpression"),this.parseExprOp(a,e,r,i,n,s)}return t};Ye.parseMaybeUnary=function(t){var e=this.storeCurrentPos(),r;if(this.options.ecmaVersion>=8&&this.toks.isContextual("await")&&(this.inAsync||this.toks.inModule&&this.options.ecmaVersion>=13||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),t=!0;else if(this.tok.type.prefix){var i=this.startNode(),n=this.tok.type===m.incDec;n||(t=!0),i.operator=this.tok.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(!0),n&&(i.argument=this.checkLVal(i.argument)),r=this.finishNode(i,n?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===m.ellipsis){var s=this.startNode();this.next(),s.argument=this.parseMaybeUnary(t),r=this.finishNode(s,"SpreadElement")}else if(!t&&this.tok.type===m.privateId)r=this.parsePrivateIdent();else for(r=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(e);o.operator=this.tok.value,o.prefix=!1,o.argument=this.checkLVal(r),this.next(),r=this.finishNode(o,"UpdateExpression")}if(!t&&this.eat(m.starstar)){var a=this.startNodeAt(e);return a.operator="**",a.left=r,a.right=this.parseMaybeUnary(!1),this.finishNode(a,"BinaryExpression")}return r};Ye.parseExprSubscripts=function(){var t=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),t,!1,this.curIndent,this.curLineStart)};Ye.parseSubscripts=function(t,e,r,i,n){for(var s=this.options.ecmaVersion>=11,o=!1;;){if(this.curLineStart!==n&&this.curIndent<=i&&this.tokenStartsLine())if(this.tok.type===m.dot&&this.curIndent===i)--i;else break;var a=t.type==="Identifier"&&t.name==="async"&&!this.canInsertSemicolon(),u=s&&this.eat(m.questionDot);if(u&&(o=!0),u&&this.tok.type!==m.parenL&&this.tok.type!==m.bracketL&&this.tok.type!==m.backQuote||this.eat(m.dot)){var c=this.startNodeAt(e);c.object=t,this.curLineStart!==n&&this.curIndent<=i&&this.tokenStartsLine()?c.property=this.dummyIdent():c.property=this.parsePropertyAccessor()||this.dummyIdent(),c.computed=!1,s&&(c.optional=u),t=this.finishNode(c,"MemberExpression")}else if(this.tok.type===m.bracketL){this.pushCx(),this.next();var l=this.startNodeAt(e);l.object=t,l.property=this.parseExpression(),l.computed=!0,s&&(l.optional=u),this.popCx(),this.expect(m.bracketR),t=this.finishNode(l,"MemberExpression")}else if(!r&&this.tok.type===m.parenL){var p=this.parseExprList(m.parenR);if(a&&this.eat(m.arrow))return this.parseArrowExpression(this.startNodeAt(e),p,!0);var f=this.startNodeAt(e);f.callee=t,f.arguments=p,s&&(f.optional=u),t=this.finishNode(f,"CallExpression")}else if(this.tok.type===m.backQuote){var h=this.startNodeAt(e);h.tag=t,h.quasi=this.parseTemplate(),t=this.finishNode(h,"TaggedTemplateExpression")}else break}if(o){var g=this.startNodeAt(e);g.expression=t,t=this.finishNode(g,"ChainExpression")}return t};Ye.parseExprAtom=function(){var t;switch(this.tok.type){case m._this:case m._super:var e=this.tok.type===m._this?"ThisExpression":"Super";return t=this.startNode(),this.next(),this.finishNode(t,e);case m.name:var r=this.storeCurrentPos(),i=this.parseIdent(),n=!1;if(i.name==="async"&&!this.canInsertSemicolon()){if(this.eat(m._function))return this.toks.overrideContext(ct.f_expr),this.parseFunction(this.startNodeAt(r),!1,!0);this.tok.type===m.name&&(i=this.parseIdent(),n=!0)}return this.eat(m.arrow)?this.parseArrowExpression(this.startNodeAt(r),[i],n):i;case m.regexp:t=this.startNode();var s=this.tok.value;return t.regex={pattern:s.pattern,flags:s.flags},t.value=s.value,t.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(t,"Literal");case m.num:case m.string:return t=this.startNode(),t.value=this.tok.value,t.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===m.num&&t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal");case m._null:case m._true:case m._false:return t=this.startNode(),t.value=this.tok.type===m._null?null:this.tok.type===m._true,t.raw=this.tok.type.keyword,this.next(),this.finishNode(t,"Literal");case m.parenL:var o=this.storeCurrentPos();this.next();var a=this.parseExpression();if(this.expect(m.parenR),this.eat(m.arrow)){var u=a.expressions||[a];return u.length&&Mi(u[u.length-1])&&u.pop(),this.parseArrowExpression(this.startNodeAt(o),u)}if(this.options.preserveParens){var c=this.startNodeAt(o);c.expression=a,a=this.finishNode(c,"ParenthesizedExpression")}return a;case m.bracketL:return t=this.startNode(),t.elements=this.parseExprList(m.bracketR,!0),this.finishNode(t,"ArrayExpression");case m.braceL:return this.toks.overrideContext(ct.b_expr),this.parseObj();case m._class:return this.parseClass(!1);case m._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case m._new:return this.parseNew();case m.backQuote:return this.parseTemplate();case m._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};Ye.parseExprImport=function(){var t=this.startNode(),e=this.parseIdent(!0);switch(this.tok.type){case m.parenL:return this.parseDynamicImport(t);case m.dot:return t.meta=e,this.parseImportMeta(t);default:return t.name="import",this.finishNode(t,"Identifier")}};Ye.parseDynamicImport=function(t){return t.source=this.parseExprList(m.parenR)[0]||this.dummyString(),this.finishNode(t,"ImportExpression")};Ye.parseImportMeta=function(t){return this.next(),t.property=this.parseIdent(!0),this.finishNode(t,"MetaProperty")};Ye.parseNew=function(){var t=this.startNode(),e=this.curIndent,r=this.curLineStart,i=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(m.dot))return t.meta=i,t.property=this.parseIdent(!0),this.finishNode(t,"MetaProperty");var n=this.storeCurrentPos();return t.callee=this.parseSubscripts(this.parseExprAtom(),n,!0,e,r),this.tok.type===m.parenL?t.arguments=this.parseExprList(m.parenR):t.arguments=[],this.finishNode(t,"NewExpression")};Ye.parseTemplateElement=function(){var t=this.startNode();return this.tok.type===m.invalidTemplate?t.value={raw:this.tok.value,cooked:null}:t.value={raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,`
`),cooked:this.tok.value},this.next(),t.tail=this.tok.type===m.backQuote,this.finishNode(t,"TemplateElement")};Ye.parseTemplate=function(){var t=this.startNode();this.next(),t.expressions=[];var e=this.parseTemplateElement();for(t.quasis=[e];!e.tail;)this.next(),t.expressions.push(this.parseExpression()),this.expect(m.braceR)?e=this.parseTemplateElement():(e=this.startNode(),e.value={cooked:"",raw:""},e.tail=!0,this.finishNode(e,"TemplateElement")),t.quasis.push(e);return this.expect(m.backQuote),this.finishNode(t,"TemplateLiteral")};Ye.parseObj=function(){var t=this.startNode();t.properties=[],this.pushCx();var e=this.curIndent+1,r=this.curLineStart;for(this.eat(m.braceL),this.curIndent+1<e&&(e=this.curIndent,r=this.curLineStart);!this.closes(m.braceR,e,r);){var i=this.startNode(),n=void 0,s=void 0,o=void 0;if(this.options.ecmaVersion>=9&&this.eat(m.ellipsis)){i.argument=this.parseMaybeAssign(),t.properties.push(this.finishNode(i,"SpreadElement")),this.eat(m.comma);continue}if(this.options.ecmaVersion>=6&&(o=this.storeCurrentPos(),i.method=!1,i.shorthand=!1,n=this.eat(m.star)),this.parsePropertyName(i),this.toks.isAsyncProp(i)?(s=!0,n=this.options.ecmaVersion>=9&&this.eat(m.star),this.parsePropertyName(i)):s=!1,Mi(i.key)){Mi(this.parseMaybeAssign())&&this.next(),this.eat(m.comma);continue}if(this.eat(m.colon))i.kind="init",i.value=this.parseMaybeAssign();else if(this.options.ecmaVersion>=6&&(this.tok.type===m.parenL||this.tok.type===m.braceL))i.kind="init",i.method=!0,i.value=this.parseMethod(n,s);else if(this.options.ecmaVersion>=5&&i.key.type==="Identifier"&&!i.computed&&(i.key.name==="get"||i.key.name==="set")&&this.tok.type!==m.comma&&this.tok.type!==m.braceR&&this.tok.type!==m.eq)i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);else{if(i.kind="init",this.options.ecmaVersion>=6)if(this.eat(m.eq)){var a=this.startNodeAt(o);a.operator="=",a.left=i.key,a.right=this.parseMaybeAssign(),i.value=this.finishNode(a,"AssignmentExpression")}else i.value=i.key;else i.value=this.dummyIdent();i.shorthand=!0}t.properties.push(this.finishNode(i,"Property")),this.eat(m.comma)}return this.popCx(),this.eat(m.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.finishNode(t,"ObjectExpression")};Ye.parsePropertyName=function(t){if(this.options.ecmaVersion>=6)if(this.eat(m.bracketL)){t.computed=!0,t.key=this.parseExpression(),this.expect(m.bracketR);return}else t.computed=!1;var e=this.tok.type===m.num||this.tok.type===m.string?this.parseExprAtom():this.parseIdent();t.key=e||this.dummyIdent()};Ye.parsePropertyAccessor=function(){if(this.tok.type===m.name||this.tok.type.keyword)return this.parseIdent();if(this.tok.type===m.privateId)return this.parsePrivateIdent()};Ye.parseIdent=function(){var t=this.tok.type===m.name?this.tok.value:this.tok.type.keyword;if(!t)return this.dummyIdent();var e=this.startNode();return this.next(),e.name=t,this.finishNode(e,"Identifier")};Ye.parsePrivateIdent=function(){var t=this.startNode();return t.name=this.tok.value,this.next(),this.finishNode(t,"PrivateIdentifier")};Ye.initFunction=function(t){t.id=null,t.params=[],this.options.ecmaVersion>=6&&(t.generator=!1,t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)};Ye.toAssignable=function(t,e){if(!(!t||t.type==="Identifier"||t.type==="MemberExpression"&&!e))if(t.type==="ParenthesizedExpression")this.toAssignable(t.expression,e);else{if(this.options.ecmaVersion<6)return this.dummyIdent();if(t.type==="ObjectExpression"){t.type="ObjectPattern";for(var r=0,i=t.properties;r<i.length;r+=1){var n=i[r];this.toAssignable(n,e)}}else if(t.type==="ArrayExpression")t.type="ArrayPattern",this.toAssignableList(t.elements,e);else if(t.type==="Property")this.toAssignable(t.value,e);else if(t.type==="SpreadElement")t.type="RestElement",this.toAssignable(t.argument,e);else if(t.type==="AssignmentExpression")t.type="AssignmentPattern",delete t.operator;else return this.dummyIdent()}return t};Ye.toAssignableList=function(t,e){for(var r=0,i=t;r<i.length;r+=1){var n=i[r];this.toAssignable(n,e)}return t};Ye.parseFunctionParams=function(t){return t=this.parseExprList(m.parenR),this.toAssignableList(t,!0)};Ye.parseMethod=function(t,e){var r=this.startNode(),i=this.inAsync,n=this.inGenerator,s=this.inFunction;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=!!t),this.options.ecmaVersion>=8&&(r.async=!!e),this.inAsync=r.async,this.inGenerator=r.generator,this.inFunction=!0,r.params=this.parseFunctionParams(),r.body=this.parseBlock(),this.toks.adaptDirectivePrologue(r.body.body),this.inAsync=i,this.inGenerator=n,this.inFunction=s,this.finishNode(r,"FunctionExpression")};Ye.parseArrowExpression=function(t,e,r){var i=this.inAsync,n=this.inGenerator,s=this.inFunction;return this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!r),this.inAsync=t.async,this.inGenerator=!1,this.inFunction=!0,t.params=this.toAssignableList(e,!0),t.expression=this.tok.type!==m.braceL,t.expression?t.body=this.parseMaybeAssign():(t.body=this.parseBlock(),this.toks.adaptDirectivePrologue(t.body.body)),this.inAsync=i,this.inGenerator=n,this.inFunction=s,this.finishNode(t,"ArrowFunctionExpression")};Ye.parseExprList=function(t,e){this.pushCx();var r=this.curIndent,i=this.curLineStart,n=[];for(this.next();!this.closes(t,r+1,i);){if(this.eat(m.comma)){n.push(e?null:this.dummyIdent());continue}var s=this.parseMaybeAssign();if(Mi(s)){if(this.closes(t,r,i))break;this.next()}else n.push(s);this.eat(m.comma)}return this.popCx(),this.eat(t)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),n};Ye.parseAwait=function(){var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(),this.finishNode(t,"AwaitExpression")};Xh.tabSize=4;function pN(t,e){return ot.parse(t,e)}var dE={ecmaVersion:"latest",locations:!0,allowAwaitOutsideFunction:!0,allowImportExportEverywhere:!0,allowReserved:!0,allowReturnOutsideFunction:!0},Ia=t=>t.start,hE=t=>t.end,fN=(t,e)=>t.slice(Ia(e),hE(e)),Sa=(t,e=!1)=>(e?tN:pN)(t,dE),Cv=t=>{let e=Sa(t);for(let r of e.body)r.type==="FunctionDeclaration"&&r.id&&Mi(r.id)&&(r.id=null);return e.body};function dN(t,e,r){return e.length>1||e[0].type!=="FunctionDeclaration"?gN(t,e,!0,r):hN(t,[{type:"ReturnStatement",argument:{type:"CallExpression",optional:!1,arguments:[{type:"ThisExpression"},...t.map(i=>({type:"Identifier",name:i}))],callee:{type:"MemberExpression",property:{type:"Identifier",name:"call"},computed:!1,optional:!1,object:{type:"FunctionExpression",params:e[0].params,body:e[0].body}}}}],!0,r)}var hN=(t,e,r,i)=>{let n={type:"Identifier",name:"e"},o=i?[{type:"TryStatement",block:{type:"BlockStatement",body:e},handler:{type:"CatchClause",param:n,body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"MemberExpression",object:n,property:{type:"Identifier",name:"stack"},computed:!1,optional:!1},operator:"||",right:{type:"MemberExpression",object:n,property:{type:"Identifier",name:"message"},computed:!1,optional:!1}},operator:"||",right:{type:"CallExpression",callee:{type:"Identifier",name:"String"},arguments:[n],optional:!1}}}]}}}]:e;return r?{type:"FunctionExpression",id:{type:"Identifier",name:"_generatedCode"},params:t.map(a=>({type:"Identifier",name:a})),body:{type:"BlockStatement",body:o}}:{type:"ArrowFunctionExpression",params:t.map(a=>({type:"Identifier",name:a})),expression:!1,body:{type:"BlockStatement",body:o}}},Bne=(t,e)=>({type:"CallExpression",arguments:t.map(r=>({type:"Identifier",name:r})),callee:e,optional:!1}),mN=(t,e,r)=>Bne(t,gN(t,e,r,!0));function gN(t,e,r,i){let n=e[e.length-1];if(n.type!=="ReturnStatement"){let s=Une(n);s&&(e=[...e.slice(0,-1),{type:"ReturnStatement",argument:s}])}return hN(t,e,r,i)}function Une(t){switch(t.type){case"ExpressionStatement":return t.expression;case"BlockStatement":return{type:"CallExpression",arguments:[],callee:{type:"ArrowFunctionExpression",params:[],expression:!1,body:t},optional:!1};case"ReturnStatement":return t.argument||void 0;default:return}}var mE=class{constructor(e,r,i,n,s){this.original=e;this.metadata=r;this.actualRoot=i;this.actualSources=n;this.hasNames=s;this.sourceActualToOriginal=new Map;this.sourceOriginalToActual=new Map;this.id=mE.idCounter++;if(n.length!==e.sources.length)throw new Error("Expected actualSources.length === original.source.length");for(let o=0;o<n.length;o++)this.sourceActualToOriginal.set(n[o],e.sources[o]),this.sourceOriginalToActual.set(e.sources[o],n[o])}get sources(){return this.actualSources.slice()}get sourceRoot(){return this.actualRoot}computedSourceUrl(e){return Ft(Dv(Er(this.metadata.sourceMapUrl)?this.metadata.compiledPath:this.metadata.sourceMapUrl,this.sourceRoot+e))}computeColumnSpans(){this.original.computeColumnSpans()}originalPositionFor(e){let r=this.original.originalPositionFor(e);return r.source&&(r.source=this.sourceOriginalToActual.get(r.source)??r.source),r}generatedPositionFor(e){return this.original.generatedPositionFor({...e,source:this.sourceActualToOriginal.get(e.source)??e.source})}allGeneratedPositionsFor(e){return this.original.allGeneratedPositionsFor({...e,source:this.sourceActualToOriginal.get(e.source)??e.source})}hasContentsOfAllSources(){return this.original.hasContentsOfAllSources()}sourceContentFor(e,r){return this.original.sourceContentFor(this.sourceActualToOriginal.get(e)??e,r)}eachMapping(e,r,i){return this.original.eachMapping(e,r,i)}destroy(){this.original.destroy()}},ac=mE;ac.idCounter=0;async function yN(t,e,r,i){let n=At.parse(e,{locations:!0,ecmaVersion:"latest"}),s=new tm.SourceMapGenerator({file:t}),o=Ao(n,{sourceMap:{setSourceContent:(a,u)=>s.setSourceContent(a,u),applySourceMap:(a,u,c)=>s.applySourceMap(a,u,c),toJSON:()=>s.toJSON(),toString:()=>s.toString(),addMapping:a=>s.addMapping({generated:a.original,original:{column:a.generated.column,line:a.generated.line},source:t,name:a.name})}});return s.setSourceContent(t,o),new ac(await tm.SourceMapConsumer.fromSourceMap(s),{sourceMapUrl:i,compiledPath:r},"",[t],!1)}function vN(t){let e;try{e=Sa(t,!0)}catch{return}let r=(u,c)=>({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:u,right:c}}),i=!1,n=!1,s=(0,op.replace)(e,{enter(u,c){switch(u.type){case"ClassDeclaration":return r(u.id||{type:"Identifier",name:"_default"},{...u,type:"ClassExpression"});case"FunctionDeclaration":return this.skip(),r(u.id||{type:"Identifier",name:"_default"},{...u,type:"FunctionExpression"});case"FunctionExpression":case"ArrowFunctionExpression":case"MethodDefinition":return op.VisitorOption.Skip;case"AwaitExpression":i=!0;return;case"ForOfStatement":u.await&&(i=!0);return;case"ReturnStatement":n=!0;return;case"VariableDeclaration":if(!c||!("body"in c)||!(c.body instanceof Array))return;let l=c.body,p=u.declarations.map(f=>({type:"ExpressionStatement",expression:{type:"UnaryExpression",operator:"void",prefix:!0,argument:{type:"AssignmentExpression",operator:"=",left:f.id,right:f.init||{type:"Identifier",name:"undefined"}}}}));l.splice(l.indexOf(u),1,...p)}}});if(!i||n)return;let o=s.body[s.body.length-1];o.type==="ExpressionStatement"&&(s.body[s.body.length-1]={type:"ReturnStatement",argument:o.expression});let a={type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"ArrowFunctionExpression",params:[],generator:!1,expression:!1,async:!0,body:{type:"BlockStatement",body:s.body}},arguments:[],optional:!1}};return Ao(a)}function rm(t){try{let e=_v(t,0,dE);return e.end<t.length||e.type!=="ObjectExpression"?t:`(${t})`}catch{return t}}function ap(t){if(!t)return;let e="sourceMappingURL",r=t.length,i=e.length,n=r,s=0;for(;;){if(n=t.lastIndexOf(e,n),n===-1||n<4)return;if(n-=4,t[n]==="/"&&t[n+1]==="/"&&!(t[n+2]!=="#"&&t[n+2]!=="@")&&!(t[n+3]!==" "&&t[n+3]!=="	")&&(s=n+4+i,!(s<r&&t[s]!=="=")))break}let o=t.substring(s+1),a=o.indexOf(`
`);return a!==-1&&(o=o.substring(0,a)),o.trim()}function Pv(t,e,r){let i=r.generatedPositionFor({source:t,line:e.lineNumber,column:e.columnNumber-1,bias:tm.SourceMapConsumer.GREATEST_LOWER_BOUND}),n=a=>{if(a.line===null||a.column===null)return 1e11;let u=r.originalPositionFor(a);return u.line!==null?Math.abs(e.lineNumber-u.line):1e11},s=n(i),o=r.allGeneratedPositionsFor({source:t,line:e.lineNumber,column:e.columnNumber-1}).filter(a=>a.line!==null&&a.column!==null).sort((a,u)=>a.line!==u.line?a.line-u.line:a.column-u.column).map(a=>[a,n(a)]);return o.push([i,s]),o.sort(([a,u],[c,l])=>u-l||a.line-c.line||a.column-c.column),o[0][0]}var gE=(t,e)=>!!e&&((e.type==="FunctionExpression"||e.type==="FunctionDeclaration"||e.type==="ArrowFunctionExpression")&&e.params.includes(t)||(e.type==="ForInStatement"||e.type==="ForOfStatement")&&e.left===t||e.type==="VariableDeclarator"&&e.id===t||e.type==="AssignmentPattern"&&e.left===t||e.type==="CatchClause"&&e.param===t||"kind"in e&&e.kind==="init"&&e.value===t||e.type==="RestElement"&&e.argument===t||e.type==="AssignmentPattern"&&e.left===t);function Ea(t){try{new Function(t)}catch(e){return e}}function jne(t,e){let r=Sa(t),i,n;return(0,op.traverse)(r,{enter:s=>{let o=s;e>=o.start&&e<o.end&&(s.type==="CallExpression"||s.type==="NewExpression"?n=s:i=s)}}),n||i}var HN=/^[^()]+/g;function bN(t,e){try{let i=jne(t,e);if(i&&"callee"in i){let n=i.callee;return{text:`${t.slice(n.start,n.end)}(...)`,start:n.start,end:n.end}}else{let n=i;return{text:t.slice(n.start,n.end),start:n.start,end:n.end}}}catch{}HN.lastIndex=e-1;let r=HN.exec(t);if(r)return{text:r[0],start:e,end:e+r[0].length}}var It=()=>`
//# sourceURL=eval-${(0,wN.randomBytes)(4).toString("hex")}${".cdp"}
`;function cc(t){return qne(""+t)}function qne(t){let e=_v(t,0,{ecmaVersion:"latest",locations:!0});if(e.type!=="FunctionExpression")throw new Error(`Could not find function declaration for:

${t}`);let r=e.params.map(o=>{if(o.type!=="Identifier")throw new Error("Parameter must be identifier");return o.name}),{start:i,end:n}=e.body,s=o=>`
    ${o.map((a,u)=>`let ${r[u]} = ${a}`).join("; ")};
    ${t.slice(i+1,n-1)}
  `;return{expr:(...o)=>`(()=>{${s(o)}})();
${It()}`,decl:(...o)=>`function(...runtimeArgs){${s(o)};
${It()}}`}}var uc=class extends Error{constructor(r){super(r.text);this.details=r}},im=class{constructor(e){this.objectId=e}};function fr(t){let e=(""+t).replace("}",It()+"}"),r=async({cdp:i,args:n,...s})=>{let o=await i.Runtime.callFunctionOn({functionDeclaration:e,arguments:n.map(a=>a instanceof im?{objectId:a.objectId}:{value:a}),...s});if(!o)throw new uc({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});if(o.exceptionDetails)throw new uc(o.exceptionDetails);return o.result};return r.source=e,r}var _N=()=>"globalThis.__jsDebugIsReady = true; "+It();var nm=new Set(["page","iframe","worker","service_worker"]),vE=new Set(["page","iframe"]),yE=new Set(["page","iframe"]),Wne=yE,up=class{constructor(e,r,i,n,s,o,a,u,c){this._manager=e;this._targetInfo=r;this.launchConfig=o;this.sessionId=a;this.logger=u;this._attached=!1;this._onNameChangedEmitter=new X;this.onNameChanged=this._onNameChangedEmitter.event;this.entryBreakpoint=void 0;this._children=new Map;this.sourcePathResolver=this._manager._sourcePathResolver;this._cdp=i,i.pause(),this.parentTarget=n,this._waitingForDebugger=s,this._updateFromInfo(r),this._ondispose=c}get targetInfo(){return this._targetInfo}get targetId(){return this._targetInfo.targetId}get independentLifeycle(){return yE.has(this.type())}get supplementalConfig(){let e=this.type();return{__browserTargetType:e,__usePerformanceFromParent:e!=="page"}}targetOrigin(){return this._manager._targetOrigin}id(){return this.sessionId}cdp(){return this._cdp}name(){return this._computeName()}fileName(){return this._targetInfo.url}type(){return this._targetInfo.type}afterBind(){return this._cdp.resume(),Promise.resolve()}initialize(){return Promise.resolve()}async runIfWaitingForDebugger(){await Promise.all([this._cdp.Runtime.runIfWaitingForDebugger({}),this._cdp.Runtime.evaluate({expression:_N()})])}parent(){return this.parentTarget&&!nm.has(this.parentTarget.type())?this.parentTarget.parentTarget:this.parentTarget}children(){let e=[];for(let r of this._children.values())nm.has(r.type())?e.push(r):e.push(...r.children());return e}canStop(){return Wne.has(this.type())}stop(){if(this._manager.targetList().includes(this))if(this.type()==="service_worker"){if(this._manager.serviceWorkerModel.stopWorker(this.id()),!this.parentTarget)return;this._manager.serviceWorkerModel.stopWorker(this.parentTarget.id())}else this._cdp.Target.closeTarget({targetId:this._targetInfo.targetId})}canRestart(){return yE.has(this.type())}restart(){this._cdp.Page.reload({})}waitingForDebugger(){return this._waitingForDebugger}canAttach(){return!this._attached}async attach(){return this._waitingForDebugger=!1,this._attached=!0,Promise.resolve(this._cdp)}canDetach(){return this._attached}async detach(){this._attached=!1,this._manager._detachedFromTarget(this.sessionId)}executionContextName(e){let r=e.auxData,i=e.name;if(!r)return i;let n=r.frameId,s=n?this._manager.frameModel.frameForId(n):void 0;return s&&r.isDefault&&!s.parentFrame()?"top":s&&r.isDefault?s.displayName():s?`${i}`:i}supportsCustomBreakpoints(){return vE.has(this.type())}scriptUrlToUrl(e){return xa(this._targetInfo.url,e)||e}_updateFromInfo(e){this._targetInfo={...e,type:this._targetInfo.type},this._onNameChangedEmitter.fire()}setComputeNameFn(e){this._customNameComputeFn=e,this._onNameChangedEmitter.fire()}_computeName(){var n;let e=(n=this._customNameComputeFn)==null?void 0:n.call(this,this);if(e)return e;if(this.type()==="service_worker"){let s=this._manager.serviceWorkerModel.version(this.id());if(s)return s.label()+" [Service Worker]"}let r=this._targetInfo.title;if(!(r&&this._manager.targetList().some(s=>s instanceof up&&s!==this&&s._targetInfo.title===this._targetInfo.title)))return r;try{let s=new AN.URL(this._targetInfo.url);s.protocol==="data:"?r=" <data>":s?r+=` (${this._targetInfo.url.replace(/^[a-z]+:\/\/|\/$/gi,"")})`:r+=` (${this._targetInfo.url})`}catch{r+=` (${this._targetInfo.url})`}return r}async _detached(){await this._manager.serviceWorkerModel.detached(this._cdp),this._ondispose(this)}};function sm(t){return t instanceof Array?t:[t]}function IN(t,e,r){let i=0,n=t.length-1;for(;i<=n;){let s=(i+n)/2|0,o=r(t[s],e);if(o<0)i=s+1;else if(o>0)n=s-1;else return s}return i}function SN(t,e){let r=new Map;for(let i of t){let n=e(i),s=r.get(n);s?s.push(i):r.set(n,[i])}return r}function Ca(t){return t.next().value}function Ts(t,e){return t.length<=e?t:t.substr(0,e-1)+"\u2026"}function cp(t,e){if(t.length<=e)return t;let r=e>>1,i=e-r-1,n=t.codePointAt(t.length-i-1);n&&n>=65536&&(--i,++r);let s=t.codePointAt(r-1);return r>0&&s&&s>=65536&&--r,t.substr(0,r)+"\u2026"+t.substr(t.length-i,i)}var EN="/\\.?*()^${}|[]+",xN=t=>EN.includes(t);function ni(t,e){let r=EN.split("").filter(n=>!e||e.indexOf(n)<0).join("").replace(/[\\\]]/g,"\\$&"),i=new RegExp(`[${r}]`,"g");return t.replace(i,"\\$&")}var Da=class{constructor(e){this.source=e;this.lines=[];this.lines.push(0);for(let r=e.indexOf(`
`);r!==-1;r=e.indexOf(`
`,r+1))this.lines.push(r+1)}getLineOffset(e){return e>=this.lines.length?this.source.length:this.lines[e]}convert(e){let r=e.base0;if(r.lineNumber>this.lines.length)return this.source.length;let i=this.lines[r.lineNumber],n=this.lines[r.lineNumber+1]??this.source.length+1;return i+Math.min(n-i-1,r.columnNumber)}};var $v=process.platform!=="win32";function _E(){return $v}function kv(t){return $v?t:t.toLowerCase()}function Rv(t,e){return $v?t===e:t.toLowerCase()===e.toLowerCase()}function lc(){return _E()?new Map:new Ds(kv)}var DN,CN=process.platform==="win32"?(DN=process.env.PATHEXT)==null?void 0:DN.toLowerCase().split(";"):void 0,Mv=t=>{let e=kv(Oi.basename(t));if(CN){for(let r of CN)if(e.endsWith(r))return e.slice(0,-r.length)}return e},AE=async(t,e)=>{for(;;){if(await e(t))return t;let r=Oi.dirname(t);if(r===t)return;t=r}},lp=(t,e,r)=>AE(e,i=>t.exists(Oi.join(i,r))),Gne=new Set(["localhost","127.0.0.1","::1"]),Kne=new Set(["0.0.0.0","::","0000:0000:0000:0000:0000:0000:0000:0000"]),Tv=t=>Gne.has(t.toLowerCase()),LN=t=>{try{return new Io.URL(t).hostname.replace(/^\[|\]$/g,"")}catch{return t}},TN=t=>Kne.has(LN(t)),pp=ho(async t=>{let e=LN(t);if(Tv(e))return!0;try{let r=await PN.promises.lookup(e);return Tv(r.address)}catch{return!1}});function xa(t,e){try{return new Io.URL(e,t).href}catch{}}function Dv(t,e){try{return new Io.URL(e),e}catch{}let r;try{r=new Io.URL(t||"")}catch{return e}let i=r.protocol+"//";return r.username&&(i+=r.username+":"+r.password+"@"),i+=r.host,i+=Oi.dirname(r.pathname),i[i.length-1]!=="/"&&(i+="/"),i+=e,i}function Ov(t){try{return new Io.URL(t),!0}catch{return!1}}function $N(t){return t.replace(/\/$/,"").replace(/\\$/,"")}var zne=/^https:\/\/([a-z0-9\-]+)\+\.vscode-resource\.vscode-(?:webview|cdn)\.net\/(.+)/i;function Dt(t){let e=zne.exec(t);if(e)t=`${e[1]}:///${e[2]}`;else if(t.startsWith("vscode-webview-resource://"))t=new Io.URL(t).pathname.replace(/%2F/gi,"/").replace(/^\/([a-z0-9\-]+)(\/{1,2})/i,(i,n,s)=>s.length===1?`${n}:///`:`${n}://`);else if(!bi(t))return;return t=t.replace("file:///",""),t=decodeURIComponent(t),t.startsWith("/")&&process.platform==="win32"&&t[1]!=="/"&&(t="/"+t),t[0]!=="/"&&!t.match(/^[A-Za-z]:/)&&(t="/"+t),Ft(t)}function kN(t){return bi(t)&&(t=t.replace("file:///","\\\\"),t=t.replace(/\//g,"\\"),t=decodeURIComponent(t)),t}function Ve(t){return IE==="win32"?"file:///"+Pa(t):"file://"+Pa(t)}function fp(t){return t.startsWith("/")?"file://"+Pa(t):"file:///"+Pa(t)}function Kr(t){return Oi.posix.isAbsolute(t)||Oi.win32.isAbsolute(t)}function Er(t){return!!t&&t.startsWith("data:")}var bE=(t,e,r)=>{if(!r||t===":"){e.add(t);return}if(t==="/"){e.add(`\\${t}`);return}xN(t)?e.add(`\\${t}`):e.add(t);let i=encodeURIComponent(t);t!=="\\"&&i!==t&&e.add(i)},Xne=t=>{switch(t.size){case 0:return"";case 1:return Ca(t.values());default:let e=[...t];return e.some(r=>r.length>1)?`(?:${e.join("|")})`:`[${e.join("")}]`}},om=new Set,wE=(t,e,r,i)=>{let n="";for(let s of t.slice(e,r))$v?bE(s,om,i):(bE(s.toLowerCase(),om,i),bE(s.toUpperCase(),om,i)),n+=Xne(om),om.clear();return n};function un(t,[e,r]=[0,t.length]){if(r<=e)return t;let i=[],n=wE(t,0,e,!1),s=wE(t,r,t.length,!1),o=t.slice(e,r);for(let a of[decodeURIComponent(o),Dt(o)]){if(!a)continue;let u=wE(a,0,a.length,!0);i.push(Jne(`${n}${u}${s}`).concat("($|\\?)"))}return i.join("|")}var Jne=t=>t.replace(/^(file:\\\/\\\/\\\/)?([a-z]):/i,(e,r="",i)=>`${r}[${i.toUpperCase()}${i.toLowerCase()}]:`);function bi(t){return t.startsWith("file:///")}var IE=process.platform;function Pa(t){return t=Un(t),IE==="win32"?(TS(t)&&(t=t.slice(1)),t.split(/[\\//]/g).map((e,r)=>r>0?encodeURIComponent(e):e).join("/")):t.split("/").map(encodeURIComponent).join("/")}function Un(t){return t&&IE==="win32"&&t[1]===":"?t[0].toUpperCase()+t.substring(1):t}var La=(t,e=[])=>{let r=t.urlFilter||"file"in t&&t.file||t.url,i=r?Qne(r,...e):void 0;return n=>!n.url.startsWith("devtools://")&&(i==null?void 0:i(n.url))!==!1},dp=t=>e=>e.type==="page"&&t(e);function Yne(t){return!!t&&!Oi.isAbsolute(t)&&!!(0,Io.parse)(t).protocol}var Qne=(...t)=>{let e=n=>{n=n.toLowerCase();let s=Dt(n);s?n=s:Yne(n)&&n.includes("://")&&(n=n.substr(n.indexOf("://")+3)),n.endsWith("/")&&(n=n.substr(0,n.length-1));let o=n.indexOf("#");return o!==-1&&(n=n.slice(0,n[o-1]==="/"?o-1:o)),n},r=t.map(n=>ni(e(n),"/*").replace(/(\/\*$)|\*/g,".*")),i=new RegExp("^("+r.join("|")+")$","g");return n=>(i.lastIndex=0,i.test(e(n)))};var ks=Symbol("ISourceMapFactory"),SE=Symbol("IRootSourceMapFactory"),pc=class{constructor(e,r){this.root=e;this.resourceProvider=r}load(e){return this.root.load(this.resourceProvider,e)}guardSourceMapFn(e,r,i){return this.root.guardSourceMapFn(e,r,i)}};pc=$([(0,$s.injectable)(),w(0,(0,$s.inject)(SE)),w(1,(0,$s.inject)(nc))],pc);var um=class{constructor(e,r,i){this.pathResolve=e;this.dap=r;this.logger=i;this.hasWarnedAboutMaps=new WeakSet}async load(e,r){var a,u;let i=await this.parseSourceMap(e,r.sourceMapUrl),n=i.sourceRoot;i.sourceRoot=void 0;let s=!1,o=[];if("sections"in i){o=[];let c=0;for(let l of i.sections)o.push(...l.map.sources),l.map.sources=l.map.sources.map(()=>`source${c++}.js`),s||=!!((a=l.map.names)!=null&&a.length)}else"sources"in i&&Array.isArray(i.sources)&&(o=i.sources,i.sources=i.sources.map((c,l)=>`source${l}.js`),s=!!((u=i.names)!=null&&u.length));return new ac(await new RN.SourceMapConsumer(i),r,n??"",o,s)}async parseSourceMap(e,r){let i;try{i=await this.parseSourceMapDirect(e,r)}catch(n){if(i=await this.parsePathMappedSourceMap(e,r),!i)throw n}if("sections"in i){let n=await Promise.all(i.sections.map((s,o)=>"url"in s?this.parseSourceMap(e,s.url).then(a=>({offset:s.offset,map:a})).catch(a=>{this.logger.warn("sourcemap.parsing",`Error parsing nested map ${o}: ${a}`)}):s));i.sections=n.filter(Mt)}return i}async parsePathMappedSourceMap(e,r){if(Er(r))return;let i=await this.pathResolve.urlToAbsolutePath({url:r});if(i)try{return this.parseSourceMapDirect(e,i)}catch(n){this.logger.info("sourcemap.parsing","Parsing path mapped source map failed.",n)}}guardSourceMapFn(e,r,i){try{return r()}catch(n){if(!/error parsing/i.test(String(n.message)))throw n;if(!this.hasWarnedAboutMaps.has(e)){let s=lv(e.metadata.compiledPath,n.message).error;this.dap.output({output:s.format+`
`,category:"stderr"}),this.hasWarnedAboutMaps.add(e)}return i()}}dispose(){}async parseSourceMapDirect(e,r){let i=Dt(r);i&&(i=this.pathResolve.rebaseRemoteToLocal(i));let n=await e.fetch(i||r);if(!n.ok)throw n.error;let s=n.body;return s.slice(0,3)===")]}"&&(s=s.substring(s.indexOf(`
`))),JSON.parse(s)}};um=$([(0,$s.injectable)(),w(0,(0,$s.inject)(ut)),w(1,(0,$s.inject)(ep)),w(2,(0,$s.inject)(le))],um);var Ta=class extends um{constructor(){super(...arguments);this.knownMaps=new Ds(r=>r.toLowerCase());this.overwrittenSourceMaps=[]}load(r,i){let n=this.knownMaps.get(i.sourceMapUrl);if(!n)return this.loadNewSourceMap(r,i);let s=i.cacheKey,o=n.metadata.cacheKey;return n.reloadIfNoMtime?s&&o&&s===o?(n.reloadIfNoMtime=!1,n.prom):(this.overwrittenSourceMaps.push(n.prom),this.loadNewSourceMap(r,i)):o&&s&&s!==o?(this.overwrittenSourceMaps.push(n.prom),this.loadNewSourceMap(r,i)):n.prom}loadNewSourceMap(r,i){let n=super.load(r,i);return this.knownMaps.set(i.sourceMapUrl,{metadata:i,reloadIfNoMtime:!1,prom:n}),n}dispose(){for(let r of this.knownMaps.values())r.prom.then(i=>i.destroy(),()=>{});for(let r of this.overwrittenSourceMaps)r.then(i=>i.destroy(),()=>{});this.knownMaps.clear()}invalidateCache(){for(let r of this.knownMaps.values())r.reloadIfNoMtime=!0}};Ta=$([(0,$s.injectable)()],Ta);var MN=require("path");var hp=Symbol("ISearchStrategy"),ixe=Symbol("ISearchStrategyFallback"),ON=async(t,e,r)=>{let i,s=`${(0,MN.basename)(t)}.map`;if(e.siblings.includes(s)&&(i=s),i||(typeof r>"u"&&(r=await Ky(t)),i=ap(r)),!(!i||(Er(i)||(i=xa(Ve(t),i)),!i))&&!(!i.startsWith("data:")&&!i.startsWith("file://")))return{compiledPath:t,sourceMapUrl:i,cacheKey:e.mtime}};var Nv=async(t,e,r,i={})=>{let n=Date.now();try{return await r()}finally{t.verbose("perf.function","",{method:e,duration:Date.now()-n,...i})}};var EE=Symbol("InlineSourceMapUrl"),NN=10*1e3,fc=class{constructor(e){e.__workspaceCachePath&&(this.path=Fv.join(e.__workspaceCachePath,"bp-predict.json"))}async load(){if(this.value||!this.path)return this.value;try{this.value=JSON.parse(await cm.promises.readFile(this.path,"utf-8"))}catch{}return this.value}async store(e){this.value=e,this.path&&(await cm.promises.mkdir(Fv.dirname(this.path),{recursive:!0}),await cm.promises.writeFile(this.path,JSON.stringify(e)))}};fc=$([(0,dr.injectable)(),w(0,(0,dr.inject)(je))],fc);var Rs=class{constructor(e,r,i,n,s,o){this.outFiles=e;this.repo=r;this.logger=i;this.sourceMapFactory=n;this.sourcePathResolver=s;this.state=o}async createMapping(e){if(this.outFiles.empty)return new Map;let r=lc(),i=await this.state.load();try{let{state:n}=await this.repo.streamChildrenWithSourcemaps({files:this.outFiles,processMap:async s=>{let o=[],a=await this.sourceMapFactory.load(s);for(let u of a.sources){let c=this.sourcePathResolver?await this.sourcePathResolver.urlToAbsolutePath({url:u,map:a}):Dt(u);c&&o.push({...s,sourceMapUrl:Er(s.sourceMapUrl)?{[EE]:s.sourceMapUrl}:s.sourceMapUrl,resolvedPath:c,sourceUrl:u})}return{discovered:o,compiledPath:Ft(s.compiledPath)}},onProcessedMap:({discovered:s})=>{for(let o of s){let a=r.get(o.resolvedPath);a||(a=new Set,r.set(o.resolvedPath,a)),a.add(o)}},lastState:i,...e});n&&this.state.store(n).catch(s=>this.logger.warn("runtime.exception","Error saving sourcemap cache",{error:s}))}catch(n){this.logger.warn("runtime.exception","Error reading sourcemaps from disk",{error:n})}return r}};Rs=$([(0,dr.injectable)(),w(0,(0,dr.inject)(Es)),w(1,(0,dr.inject)(hp)),w(2,(0,dr.inject)(le)),w(3,(0,dr.inject)(ks)),w(4,(0,dr.inject)(ut)),w(5,(0,dr.inject)(fc))],Rs);var mp=class extends Rs{async getMetadataForPaths(r){this.sourcePathToCompiled||(this.sourcePathToCompiled=this.createInitialMapping());let i=await this.sourcePathToCompiled;return r.map(n=>i.get(n))}async createInitialMapping(){return Nv(this.logger,"BreakpointsPredictor.createInitialMapping",()=>this.createMapping())}};mp=$([(0,dr.injectable)()],mp);var gp=class extends Rs{constructor(){super(...arguments);this.sourcePathToCompiled=new Map}async getMetadataForPaths(r){let i=r.map(o=>this.sourcePathToCompiled.get(o)),n=r.map((o,a)=>a).filter(o=>!i[o]);if(n.length){let o=new Set(n.map(u=>Ft(r[u]))),a=this.createMapping({filter:(u,c)=>!c||c.discovered.some(l=>o.has(l.resolvedPath))});for(let u of n)this.sourcePathToCompiled.set(r[u],a),i[u]=a}return await Promise.all(i.map(async(o,a)=>(await o).get(r[a])))}};gp=$([(0,dr.injectable)()],gp);var hc=Symbol("IBreakpointsPredictor"),dc=class{constructor(e,r,i,n){this.bpSearch=e;this.outFiles=r;this.logger=i;this.sourceMapFactory=n;this.predictedLocations=new Map;this.longParseEmitter=new X;this.targetedMode=!1;this.onLongParse=this.longParseEmitter.event}async predictBreakpoints(e){var n;if(!e.source.path||!((n=e.breakpoints)!=null&&n.length))return;let r=await this.getMetadataForPaths([e.source.path]).then(s=>s[0]);if(!r)return;let i=async(s,o,a)=>{let u=typeof a.sourceMapUrl=="string"?a.sourceMapUrl:a.sourceMapUrl.hasOwnProperty(EE)?a.sourceMapUrl[EE]:await cm.promises.readFile(a.compiledPath,"utf8").then(ap);if(!u)return[];let c=await this.sourceMapFactory.load({...a,sourceMapUrl:u}),l=this.sourceMapFactory.guardSourceMapFn(c,()=>Pv(a.sourceUrl,{lineNumber:s,columnNumber:o||1},c),()=>null);if(!l||l.line===null)return[];let p=await this.getMetadataForPaths([a.compiledPath]).then(f=>f[0]);return p?(await Promise.all([...p].map(h=>i(l.line,l.column,h)))).flat():[{absolutePath:a.compiledPath,lineNumber:l.line||1,columnNumber:l.column?l.column+1:1}]};for(let s of e.breakpoints??[]){let o=`${e.source.path}:${s.line}:${s.column||1}`;if(this.predictedLocations.has(o))return;let a=[];this.predictedLocations.set(o,a);for(let u of r)a.push(...await i(s.line,s.column||0,u))}}async getPredictionForSource(e){return this.getMetadataForPaths([e]).then(r=>r[0])}async getMetadataForPaths(e){let r=setTimeout(()=>{this.longParseEmitter.fire(),this.logger.warn("runtime.sourcemap","Long breakpoint predictor runtime",{longPredictionWarning:NN,patterns:[...this.outFiles.explode()].join(", ")})},NN),i=await this.bpSearch.getMetadataForPaths(e);return clearTimeout(r),i}predictedResolvedLocations(e){let r=`${e.absolutePath}:${e.lineNumber}:${e.columnNumber||1}`;return this.predictedLocations.get(r)??[]}};dc=$([(0,dr.injectable)(),w(0,(0,dr.inject)(Rs)),w(1,(0,dr.inject)(Es)),w(2,(0,dr.inject)(le)),w(3,(0,dr.inject)(ks))],dc);var Bs=I(Y());var Bv=class{constructor(e=!1,r=!1){this.verified=e;this.hit=r}},Uv=class{constructor(){this._statisticsById=new Map}registerBreakpoints(e){e.forEach(r=>{r.id!==void 0&&!this._statisticsById.has(r.id)&&this._statisticsById.set(r.id,new Bv(r.verified,!1))})}registerResolvedBreakpoint(e){this.getStatistics(e).verified=!0}registerBreakpointHit(e){this.getStatistics(e).hit=!0}getStatistics(e){let r=this._statisticsById.get(e);if(r!==void 0)return r;{let i=new Bv;return this._statisticsById.set(e,i),i}}statistics(){let e=0,r=0,i=0;for(let n of this._statisticsById.values())e++,n.hit&&i++,n.verified&&r++;return{set:e,verified:r,hit:i}}};var Ap=I(Y());var lF=require("crypto"),pF=I(Sv()),dm=I(Y());var Zne=0,St=Symbol("ICdpApi"),mc=class extends Error{constructor(r){super("<<message>>");this.method=r}setCause(r,i){var n;return this.cause={code:r,message:i},this.message=`CDP error ${r} calling method ${this.method}: ${i}`,this.stack=(n=this.stack)==null?void 0:n.replace("<<message>>",this.message),this}},Xt=class{constructor(e,r,i){this.logger=r;this.telemetryReporter=i;this._connectionId=Zne++;this._lastId=1e3;this._disposedSessions=new Map;this._onDisconnectedEmitter=new X;this.waitWrapper=tse();this.onDisconnected=this._onDisconnectedEmitter.event;this._transport=e,this._transport.onMessage(([n,s])=>this._onMessage(n,s)),this._transport.onEnd(()=>this._onTransportClose()),this._sessions=new Map,this._closed=!1,this._rootSession=new jv(this,"",this.logger),this._sessions.set("",this._rootSession)}rootSession(){return this._rootSession.cdp()}_send(e,r={},i){let n=++this._lastId,s={id:n,method:e,params:r};i&&(s.sessionId=i);let o=JSON.stringify(s);return this.logger.verbose("cdp.send",void 0,{connectionId:this._connectionId,message:s}),this._transport.send(o),n}_onMessage(e,r){let i=JSON.parse(e),n=i;i.result&&i.result.scriptSource?n={...i,result:{...i.result,scriptSource:"<script source>"}}:i.method==="Debugger.scriptParsed"&&i.params&&Er(i.params.sourceMapURL)&&(n={...i,params:{...i.params,sourceMapURL:"<data source map url>"}}),this.logger.verbose("cdp.receive",void 0,{connectionId:this._connectionId,message:n});let s=this._sessions.get(i.sessionId||"");if(!s){let u=this._disposedSessions.get(i.sessionId);if(u){let c=(Date.now()-u.getTime())/1e3;this.logger.warn("internal",`Got message for a session disposed ${c} seconds ago`,{sessionId:i.sessionId,disposeOn:u});return}else throw new Error(`Unknown session id: ${i.sessionId} while processing: ${i.method}`)}let o=i.method,a;try{s._onMessage(i)}catch(u){a=u}o&&this.telemetryReporter.reportOperation("cdpOperation",o,r.elapsed().ms,a)}_onTransportClose(){if(!this._closed){this._closed=!0,this._transport.dispose(),this.logger.info("cdp.receive","Connection closed",{connectionId:this._connectionId});for(let e of this._sessions.values())e._onClose();this._sessions.clear(),this._onDisconnectedEmitter.fire()}}close(){this._onTransportClose()}isClosed(){return this._closed}createSession(e){let r=new jv(this,e,this.logger);return this._sessions.set(e,r),r.cdp()}disposeSession(e){let r=this._sessions.get(e);r&&(r._onClose(),this._disposedSessions.set(r.sessionId(),new Date),this._sessions.delete(r.sessionId()))}},ese=+process.version.substring(1).split(".")[0]<11,jv=class{constructor(e,r,i){this.logger=i;this._queue=[];this._prefixListeners=new Rh;this._directListeners=new Rh;this.paused=!1;this._callbacks=new Map,this._connection=e,this._sessionId=r,this._cdp=this._createApi()}pause(){this.paused=!0}resume(){if(!this.paused)return;this.paused=!1;let e=this._queue;this._queue=[],this.logger.verbose("cdp.receive","Dequeue messages",{message:e});for(let r of e)this._processResponse(r)}cdp(){return this._cdp}sessionId(){return this._sessionId}_createApi(){return new Proxy({},{get:(e,r)=>r==="pause"?()=>this.pause():r==="resume"?()=>this.resume():r==="session"?this:new Proxy({},{get:(i,n)=>{if(n!=="then")return n==="on"?(s,o)=>this.on(`${r}.${s}`,o):s=>this.send(`${r}.${n}`,s)}})})}on(e,r){return this._directListeners.listen(e,r)}onPrefix(e,r){return this._prefixListeners.listen(e,r)}send(e,r={}){return this.sendOrDie(e,r).catch(()=>{})}sendOrDie(e,r={}){if(!this._connection)return Promise.reject(new mc(e).setCause(0,"Connection is closed"));let i=this._connection._send(e,r,this._sessionId);return new Promise((n,s)=>{this._callbacks.set(i,{resolve:n,reject:s,from:new mc(e),method:e})})}_onMessage(e){if(this.paused&&e.id){this._processResponse(e);return}if(this._queue.length>0){this._queue.push(e);return}if(!ese&&!this.paused){this._processResponse(e);return}this._queue.push(e),this.paused||this._processQueue()}_processQueue(){var e;(e=this._connection)==null||e.waitWrapper(()=>{if(this.paused)return;let r=this._queue.shift();r&&(this._processResponse(r),this._queue.length&&this._processQueue())})}_processResponse(e){if(e.id===void 0){let i=e;this._directListeners.emit(i.method,i.params);for(let[n,s]of this._prefixListeners.listeners)i.method.startsWith(n)&&s.fire(i);return}let r=this._callbacks.get(e.id);r&&(this._callbacks.delete(e.id),"error"in e?r.reject(r.from.setCause(e.error.code,e.error.message)):"result"in e&&r.resolve(e.result))}async detach(){if(!this._connection)throw new Error("Session already detached. Most likely the target has been closed.");this._connection._send("Target.detachFromTarget",{},this._sessionId)}isClosed(){return!this._connection}_onClose(){for(let e of this._callbacks.values())e.reject(e.from.setCause(0,"Connection is closed"));this._callbacks.clear(),this._connection=void 0}};function tse(){if(parseInt(process.versions.node,10)>=11)return setImmediate;let t=!1,e=[],r=()=>{let i=e.shift();if(!i){t=!1;return}setImmediate(r),i()};return i=>{e.push(i),t||(t=!0,setImmediate(r))}}var fm=I(Y());var rF=I(Se()),iF=require("path"),nF=require("url");var YN=require("path"),QN=require("worker_threads");var gc=I(zN()),DE=require("fs"),PE=require("worker_threads");var hse=Buffer.from("(function (exports, require, module, __filename, __dirname) { "),mse=Buffer.from(`
});`),gse=Buffer.from("(function (exports, require, module, __filename, __dirname, process, global, Buffer) { return function (exports, require, module, __filename, __dirname) { "),Hse=Buffer.from(`
}.call(this, exports, require, module, __filename, __dirname); });`),yse=Buffer.from("#!"),vse=Buffer.from("\r")[0],bse=Buffer.from(`
`)[0],wse=(t,e)=>t.slice(0,e.length).equals(e),XN=(t,e,r)=>{let i=e.length===64?gc.shaHash:gc.hash;if(i(t)===e)return!0;if(r){if(wse(t,yse)){let n=t.indexOf(bse);return t[n-1]===vse&&n--,i(t.slice(n))===e}if(i(Buffer.concat([hse,t,mse]))===e)return!0}return i(Buffer.concat([gse,t,Hse]))===e},JN=t=>t instanceof Buffer?t:Buffer.from(t,"utf-8");async function _se(t){switch(t.type){case 0:try{let e=await DE.promises.readFile(t.file);return{id:t.id,hash:t.mode===0?(0,gc.hash)(e):(0,gc.shaHash)(e)}}catch{return{id:t.id}}case 1:try{return{id:t.id,hash:(0,gc.hash)(JN(t.data))}}catch{return{id:t.id}}case 2:try{let e=await DE.promises.readFile(t.file);return{id:t.id,matches:XN(e,t.expected,t.checkNode)}}catch{return{id:t.id,matches:!1}}case 3:try{return{id:t.id,matches:XN(JN(t.data),t.expected,t.checkNode)}}catch{return{id:t.id,matches:!1}}}}function Ase(t){t.on("message",e=>{_se(e).then(r=>t.postMessage(r))})}PE.parentPort&&Ase(PE.parentPort);var Xv=class{constructor(e=3,r=(0,YN.join)(__dirname,"hash.js")){this.maxFailures=e;this.hasherScriptPath=r;this.idCounter=0;this.failureCount=0;this.deferredMap=new Map;this.deferCleanup=X$(3e4,()=>this.cleanup())}async hashBytes(e,r){return(await this.send({type:1,data:r,mode:e,id:this.idCounter++})).hash}async hashFile(e,r){return(await this.send({type:0,file:r,mode:e,id:this.idCounter++})).hash}async verifyBytes(e,r,i){return(await this.send({type:3,data:e,id:this.idCounter++,expected:r,checkNode:i})).matches}async verifyFile(e,r,i){return(await this.send({type:2,file:e,id:this.idCounter++,expected:r,checkNode:i})).matches}dispose(){this.cleanup(),this.deferCleanup.clear()}send(e){let r=this.getProcess();if(!r)throw new Error("hash.js process unexpectedly exited");this.deferCleanup();let i=We();return this.deferredMap.set(e.id,{deferred:i,request:e}),r.postMessage(e),i.promise}cleanup(){this.instance&&(this.instance.removeAllListeners("exit"),this.instance.terminate(),this.instance=void 0,this.failureCount=0)}getProcess(){if(this.instance)return this.instance;if(this.failureCount>this.maxFailures)return;let e=this.instance=new QN.Worker(this.hasherScriptPath);return e.setMaxListeners(1/0),e.on("message",r=>{let i=r,n=this.deferredMap.get(i.id);n&&(n.deferred.resolve(i),this.deferredMap.delete(i.id))}),e.on("exit",()=>{this.instance=void 0,this.failureCount++;let r=this.getProcess();if(r){this.deferCleanup();for(let{request:i}of this.deferredMap.values())r.postMessage(i)}else{for(let{deferred:i}of this.deferredMap.values())i.reject(new Error("hash.js process unexpectedly exited"));this.deferredMap.clear(),this.deferCleanup.clear()}}),e}};var eF=require("fs"),ZN=new Xv;async function tF(t,e,r){return!t||IM(t)?void 0:e?(typeof r=="string"?await ZN.verifyBytes(r,e,!0):await ZN.verifyFile(t,e,!0))?t:void 0:await new $i(eF.promises).exists(t)?t:void 0}var Hc=class{constructor(e,r,i,n,s,o,a,u){this.url=r;this.inlineScriptOffset=o;this.runtimeScriptOffset=a;this.contentHash=u;this._scripts=[];this.sourceReference=e.getSourceReference(r),this._contentGetter=Ee(n),this._container=e,this.absolutePath=i||"",this._fqname=this._fullyQualifiedName(),this._name=this._humanName(),this.setSourceMapUrl(s),this._existingAbsolutePath=this.checkContentHash(u)}checkContentHash(e){return tF(this.absolutePath,this.inlineScriptOffset||this.runtimeScriptOffset?void 0:e,this._container._fileContentOverridesForTest.get(this.absolutePath))}offsetScriptToSource(e){return this.runtimeScriptOffset?{...e,lineNumber:e.lineNumber-this.runtimeScriptOffset.lineOffset,columnNumber:e.columnNumber-this.runtimeScriptOffset.columnOffset}:e}offsetSourceToScript(e){return this.runtimeScriptOffset?{...e,lineNumber:e.lineNumber+this.runtimeScriptOffset.lineOffset,columnNumber:e.columnNumber+this.runtimeScriptOffset.columnOffset}:e}setSourceMapUrl(e){if(!e){this.sourceMap=void 0;return}this.sourceMap={type:0,sourceByUrl:new Map,value:We(),metadata:{sourceMapUrl:e,compiledPath:this.absolutePath||this.url}}}addScript(e){this._scripts.push(e)}filterScripts(e){this._scripts=this._scripts.filter(e)}get scripts(){return this._scripts}get getSuggestedMimeType(){if(this.url.endsWith(".wat"))return"text/wat";if(!/\.[^/]+$/.test(this.url)||this.url.includes("?"))return"text/javascript"}async content(){var r;let e=await this._contentGetter();return(r=this.inlineScriptOffset)!=null&&r.lineOffset&&(e=`
`.repeat(this.inlineScriptOffset.lineOffset)+e),e}async prettyPrint(){if(!this._container)return;if($a(this)&&this.sourceMap.metadata.sourceMapUrl.endsWith("-pretty.map")){let u=this.sourceMap.value.settledValue;return u&&{map:u,source:[...this.sourceMap.sourceByUrl.values()][0]}}let e=await this.content();if(!e)return;let r=this.url||`eval://${this.sourceReference}.js`,i=r+"-pretty.map",s=r.split(/[\/\\]/).pop()+"-pretty.js",o=await yN(s,e,r,i);if(!o)return;this.setSourceMapUrl(i);let a=this;return this.sourceMap={type:0,metadata:{compiledPath:this.absolutePath,sourceMapUrl:""},sourceByUrl:new Map,value:We()},this.sourceMap.value.resolve(o),await this._container._addSourceMapSources(a,o),{map:o,source:[...a.sourceMap.sourceByUrl.values()][0]}}async toDap(){return this.toDapShallow()}async toDapShallow(){let e=await this._existingAbsolutePath,r={name:this._name,path:this._fqname,sourceReference:this.sourceReference,presentationHint:this.blackboxed()?"deemphasize":void 0,origin:this.blackboxed()?rF.t("Skipped by skipFiles"):void 0};return e&&(r.sourceReference=0,r.path=e),r}existingAbsolutePath(){return this._existingAbsolutePath}async prettyName(){let e=await this._existingAbsolutePath;return e||this._fqname}_humanName(){if(Kr(this._fqname)){for(let e of this._container.rootPaths)if(Jy(e,this._fqname))return rt((0,iF.relative)(e,this._fqname))}return this._fqname}_fullyQualifiedName(){var i;if(!this.url)return"<eval>/VM"+this.sourceReference;if(this.url.endsWith(".repl"))return"repl";if(this.absolutePath.startsWith("<node_internals>"))return this.absolutePath;if(Kr(this.url))return this.url;let e=Dt(this.url);if(e)return e;let r=this.url;try{let n=[],s=new nF.URL(this.url);if(s.protocol==="data:")return"<eval>/VM"+this.sourceReference;s.hostname&&n.push(s.hostname),s.port&&n.push("\uA789"+s.port),s.pathname&&n.push(/^\/[a-z]:/.test(s.pathname)?s.pathname.slice(1):s.pathname);let o=(i=s.searchParams)==null?void 0:i.toString();o&&n.push("?"+o),r=n.join("")}catch{}return r.endsWith("/")&&(r+="(index)"),this.inlineScriptOffset&&(r+=`\uA789${this.inlineScriptOffset.lineOffset+1}:${this.inlineScriptOffset.columnOffset+1}`),r}blackboxed(){return this._container.isSourceSkipped(this.url)}};var pm;(i=>{async function t(n){return n.value.promise}i.waitForValue=t;function e(n,s){return n.type===0&&n.value.settledValue?Promise.resolve(n.value.settledValue):Promise.race([t(n),Ne(s)])}i.waitForValueWithTimeout=e;async function r(n){return await t(n),n.sourceByUrl}i.waitForSources=r})(pm||={});var Ut=class extends Hc{constructor(){super(...arguments);this.compiledToSourceUrl=new Map}},Jv=class extends Hc{constructor(r,i,n){super(r,i.url,n,()=>Promise.resolve("Binary content not shown, see the decompiled WAT file"),void 0,void 0,void 0,void 0);this.event=i;this.sourceMap={type:1,value:We(),sourceByUrl:new Map}}checkContentHash(){return Promise.resolve(void 0)}offsetScriptToSource(r){return r}offsetSourceToScript(r){return r}},si=t=>!!t&&t instanceof Hc&&!!t.sourceMap,$a=t=>si(t)&&t.sourceMap.type===0,yc=t=>si(t)&&t.sourceMap.type===1,LE=t=>!!t&&typeof t.getDisassembly=="function";function sF(t,e){if(!e)return t;let{lineNumber:r,columnNumber:i}=t;return e&&(r+=e.lineOffset,r<=1&&(i+=e.columnOffset)),{...t,lineNumber:r,columnNumber:i}}function oF(t,e){if(!e)return t;let{lineNumber:r,columnNumber:i}=t;return e&&(r=Math.max(1,r-e.lineOffset),r<=1&&(i=Math.max(1,i-e.columnOffset))),{...t,lineNumber:r,columnNumber:i}}var aF=t=>({lineNumber:t.lineNumber+1,columnNumber:t.columnNumber+1}),So=t=>({lineNumber:t.lineNumber-1,columnNumber:t.columnNumber-1});var xr=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return this}get base1(){return new rr(this.lineNumber+1,this.columnNumber+1)}get base01(){return new ka(this.lineNumber,this.columnNumber+1)}compare(e){let r=e.base0;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber}},rr=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return new xr(this.lineNumber-1,this.columnNumber-1)}get base1(){return this}get base01(){return new ka(this.lineNumber-1,this.columnNumber)}compare(e){let r=e.base1;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber||0}},ka=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return new xr(this.lineNumber-1,this.columnNumber)}get base1(){return new rr(this.lineNumber,this.columnNumber+1)}get base01(){return this}compare(e){let r=e.base01;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber}},Ra=class{constructor(e,r){this.begin=e;this.end=r}static simplify(e){if(e.length===0)return[];let r=e.slice().sort((s,o)=>s.begin.compare(o.begin)),i=[],n=r[0];for(let s=1;s<r.length;s++){let o=r[s];n.end.compare(o.begin)>=0?n=new Ra(n.begin,o.end):(i.push(n),n=o)}return i.push(n),i}toString(){let e=this.begin.base0,r=this.end.base0;return`Range[${e.lineNumber}:${e.columnNumber} -> ${r.lineNumber}:${r.columnNumber}]`}};var uF=/[$a-z_][$0-9A-Z_$]*/iy,Ma=Symbol("IRenameProvider"),yp=class{constructor(e,r){this.sourceMapFactory=e;this.launchConfig=r;this.renames=new Map}provideOnStackframe(e){if(!this.launchConfig.sourceMapRenames)return cn.None;let r=e.uiLocation();return r===void 0?cn.None:"then"in r?r.then(i=>this.provideForSource(i==null?void 0:i.source)):this.provideForSource(r==null?void 0:r.source)}provideForSource(e){if(!this.launchConfig.sourceMapRenames||!(e instanceof Ut))return cn.None;let r=Ca(e.compiledToSourceUrl.keys());if(!r)throw new Error("unreachable");if(!$a(r))return cn.None;let i=this.renames.get(r.url);if(i)return i;let n=this.sourceMapFactory.load(r.sourceMap.metadata).then(async s=>{if(!(s!=null&&s.hasNames))return cn.None;let o=await r.content();return o?this.createFromSourceMap(s,o):cn.None}).catch(()=>cn.None);return this.renames.set(r.url,n),n}createFromSourceMap(e,r){let i=new Da(r),n=[];return e.eachMapping(s=>{if(!s.name)return;let o=new ka(s.generatedLine,s.generatedColumn),a=i.convert(o);uF.lastIndex=a;let u=uF.exec(r);u&&n.push({compiled:u[0],original:s.name,position:o})}),n.sort((s,o)=>s.position.compare(o.position)),new cn(n)}};yp=$([(0,fm.injectable)(),w(0,(0,fm.inject)(ks)),w(1,(0,fm.inject)(je))],yp);var TE=class{constructor(e){this.renames=e}getOriginalName(e,r){var i;return(i=this.getClosestRename(r,n=>n.compiled===e))==null?void 0:i.original}getCompiledName(e,r){var i;return(i=this.getClosestRename(r,n=>n.original===e))==null?void 0:i.compiled}getClosestRename(e,r){let i=e.base01,n;for(let s of this.renames){if(!r(s))continue;if(!(s.position.compare(i)<0)&&n)return n;n=s}return n}},cn=TE;cn.None=new TE([]);var Eo="$returnValue",Ise="__js_debug_hoisted_",cF=()=>Ise+(0,lF.randomBytes)(8).toString("hex"),ln=Symbol("IEvaluator"),vp=class{constructor(e,r){this.cdp=e;this.renameProvider=r}get hasReturnValue(){return!!this.returnValue}setReturnedValue(e){this.returnValue=e}prepare(e,{isInternalScript:r,hoist:i,renames:n}={}){r!==!1&&(e+=It());let s=new Map;s.set(Eo,cF());for(let u of i??[])s.set(u,cF());let{transformed:o,hoisted:a}=this.replaceVariableInExpression(e,s,n);return a.size?{canEvaluateDirectly:!1,invoke:(u,c={})=>Promise.all([...s].map(([l,p])=>this.hoistValue(l===Eo?this.returnValue:c[l],p))).then(()=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:o}))}:{canEvaluateDirectly:!0,invoke:u=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:o})}}async evaluate(e,r){if(!("callFrameId"in e))return this.cdp.Runtime.evaluate(e);let i=r;if(r!=null&&r.stackFrame){let n=await this.renameProvider.provideOnStackframe(r.stackFrame);i={...i,renames:{mapping:n,position:r.stackFrame.rawPosition}}}return this.prepare(e.expression,i).invoke(e)}async hoistValue(e,r){let i=e==null?void 0:e.objectId,n=`setTimeout(() => { delete globalThis.${r} }, 0)`;i?await this.cdp.Runtime.callFunctionOn({objectId:i,functionDeclaration:`function() { globalThis.${r} = this; ${n}; ${It()} }`}):await this.cdp.Runtime.evaluate({expression:`globalThis.${r} = ${JSON.stringify(e==null?void 0:e.value)};${n};`+It()})}replaceVariableInExpression(e,r,i){let n=new Set,s=!1,o=(p,f)=>({type:"ConditionalExpression",test:{type:"BinaryExpression",left:{type:"UnaryExpression",operator:"typeof",prefix:!0,argument:{type:"Identifier",name:p}},operator:"!==",right:{type:"Literal",value:"undefined"}},consequent:{type:"Identifier",name:p},alternate:f}),a=[],u=Sa(e),c=(0,pF.replace)(u,{enter(p,f){let h=p;if(p.type!=="Identifier"||e[h.start-1]===".")return;let g=r.get(p.name);if(g)return n.add(p.name),s=!0,this.skip(),gE(p,f)?{type:"Identifier",name:g}:o(g,Sse);let H=i==null?void 0:i.mapping.getCompiledName(p.name,i.position);if(H)return s=!0,this.skip(),gE(p,f)?{type:"Identifier",name:H}:o(H,p)},leave:()=>{a.pop()}});if(!s)return{hoisted:n,transformed:e};let l=u.body[u.body.length-1].end;return{hoisted:n,transformed:Ao(c)+e.slice(l)}}};vp=$([(0,dm.injectable)(),w(0,(0,dm.inject)(St)),w(1,(0,dm.inject)(Ma))],vp);var Sse={type:"Identifier",name:"undefined"};var bp=class{static parse(e,r,i,n){i&&(r=$E(r));let s=r&&Ea(r);if(s)throw new re(wa(e,s.message));let{canEvaluateDirectly:o,invoke:a}=n.prepare(r);return new bp(o?r:a)}constructor(e){typeof e=="function"?this.invoke=e:this.breakCondition=e}async shouldStayPaused(e){if(!this.invoke)return Promise.resolve(!0);let r=await this.invoke({callFrameId:e.callFrames[0].callFrameId,returnByValue:!0});return(r==null?void 0:r.result.value)===!0}},$E=t=>`(()=>{try{return ${t};}catch(e){console.error(e);return true}})()`;var Ese=/^(>|>=|={1,3}|<|<=|%)?\s*([0-9]+)$/,Oa=class{constructor(e){this.predicate=e;this.hits=0;this.breakCondition=void 0}shouldStayPaused(){return Promise.resolve(this.predicate(++this.hits))}static parse(e){let r=Ese.exec(e);if(!r)throw new re(uO(e));let[,i="=",n]=r,s=i==="%"?`return (numHits % ${n}) === 0;`:i[0]==="="?`return numHits === ${n};`:`return numHits ${i} ${n};`;return new Oa(new Function("numHits",s))}};var fF=require("crypto"),Qv=I(Y());var Yv=class{constructor(e){this.invoke=e;this.breakCondition=void 0}async shouldStayPaused(e){return await this.invoke({callFrameId:e.callFrames[0].callFrameId}),!1}};var wp=class{constructor(e,r){this.breakCondition=r;let i=r&&Ea(r);if(i)throw new re(wa(e,i.message))}shouldStayPaused(){return Promise.resolve(!0)}};var Na=class{constructor(e){this.evaluator=e}compile(e,r){let i=this.logMessageToExpression(r),n=Ea(i);if(n)throw new re(wa(e,n.message));let{canEvaluateDirectly:s,invoke:o}=this.evaluator.prepare(i);return s?new wp(e,this.logMessageToExpression(r)):new Yv(o)}serializeLogStatements(e){return mN([],e,!1)}logMessageToExpression(e){let r=c=>c.replace(/%/g,"%%"),i=[],n=[],s=0;for(;;){let c=e.indexOf("{",s);if(c===-1){i.push(r(e.slice(s)));break}i.push(r(e.slice(s,c)));let[l]=Cv(e.slice(c));if(s=c+l.end,s-1===c+1||e[s-1]!=="}"){i.push(r(e.slice(c,s)));continue}if(l.type!=="BlockStatement")break;n.push(Ao(this.serializeLogStatements(l.body))),i.push("%O")}let a=`console.log(${[JSON.stringify(i.join("")),...n].join(", ")}), false`,u=(0,fF.createHash)("sha1").update(a).digest("hex").slice(0,7);return a+`
//# sourceURL=logpoint-${u}.cdp`}};Na=$([(0,Qv.injectable)(),w(0,(0,Qv.inject)(ln))],Na);var xse=new wp({line:0},void 0),Zv=Symbol("IBreakpointConditionFactory"),_p=class{constructor(e,r,i){this.logPointCompiler=e;this.evaluator=r;this.breakOnError=i.__breakOnConditionalError}getConditionFor(e){return e.condition?bp.parse(e,e.condition,this.breakOnError,this.evaluator):e.logMessage?this.logPointCompiler.compile(e,e.logMessage):e.hitCondition?Oa.parse(e.hitCondition):xse}};_p=$([(0,Ap.injectable)(),w(0,(0,Ap.inject)(Na)),w(1,(0,Ap.inject)(ln)),w(2,(0,Ap.inject)(je))],_p);var rb=require("path");var eb=(t,e)=>t.lineNumber===e.lineNumber&&t.columnNumber===e.columnNumber;var tb=t=>!("location"in t),dF=t=>"location"in t,Cse=(t,e)=>t.url&&e===t.url||t.urlRegex&&new RegExp(t.urlRegex).test(e),Ip=class{constructor(e,r,i){this._manager=e;this._source=r;this._originalPosition=i;this.isEnabled=!1;this.setInCdpScriptIds=new Set;this.cdpScriptIds=this.setInCdpScriptIds;this.cdpBreakpoints=[];this._cdpIds=new Set}get enabled(){return this.isEnabled}get cdpIds(){return this._cdpIds}get source(){return this._source}get originalPosition(){return this._originalPosition}async updateSourceLocation(e,r,i){this._source=r,this._originalPosition=i;let n=[];for(let s of this.cdpBreakpoints)s.state===1&&n.push(this.updateUiLocations(e,s.cdpId,s.locations));await Promise.all(n)}async refreshUiLocations(e){await Promise.all(this.cdpBreakpoints.filter(r=>r.state===1).map(r=>this.updateUiLocations(e,r.cdpId,r.locations)))}async enable(e){if(this.isEnabled)return;this.isEnabled=!0;let r=[this._setPredicted(e)],i=this._manager._sourceContainer.source(this.source);if((!i||!(i instanceof Ut))&&r.push(this._setByPath(e,(i==null?void 0:i.offsetSourceToScript(this.originalPosition))||this.originalPosition)),await Promise.all(r),i&&this.isEnabled){let n=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:i});await Promise.all(n.map(s=>this._setByUiLocation(e,i.offsetSourceToScript(s))))}}async updateUiLocations(e,r,i){this.updateExistingCdpRef(r,a=>({...a,locations:i}));let n=(await Promise.all(i.map(a=>e.rawLocationToUiLocation(e.rawLocation(a))))).find(a=>!!a);if(!n)return;let s=this._manager._sourceContainer.source(this.source);if(!s)return;let o=await this._manager._sourceContainer.currentSiblingUiLocations(n);this.updateExistingCdpRef(r,a=>{let u=o.filter(c=>c.source===s);return{...a,locations:i,uiLocations:u.length?u:o}})}compare(e){let r=this.originalPosition,i=e.originalPosition;return r.lineNumber!==i.lineNumber?r.lineNumber-i.lineNumber:r.columnNumber-i.columnNumber}async disable(){if(!this.isEnabled)return;this.isEnabled=!1;let e=this.cdpBreakpoints.map(r=>this.removeCdpBreakpoint(r));await Promise.all(e)}async updateForNewLocations(e,r){let i=this._manager._sourceContainer.source(this.source);if(!i)return[];let n=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:i},await r.source);if(!n.length)return[];let s=[];for(let o of n)s.push(this._setForSpecific(e,r,i.offsetSourceToScript(o)));for(let o of this.cdpBreakpoints){if(!tb(o.args)||!Cse(o.args,r.url))continue;let a=o.args;n.some(u=>u.columnNumber-1===a.columnNumber&&u.lineNumber-1===a.lineNumber)||(this._manager.logger.verbose("runtime.sourcemap","Adjusted breakpoint due to overlaid sourcemap",{url:i.url}),s.push(this.removeCdpBreakpoint(o)))}return await Promise.all(s),n}executionContextWasCleared(){this.updateCdpRefs(e=>e.filter(r=>tb(r.args)))}hasResolvedAt(e,r){let{lineNumber:i,columnNumber:n}=r.base0;return this.cdpBreakpoints.some(s=>s.state===1&&s.locations.some(o=>o.scriptId===e&&o.lineNumber===i&&(o.columnNumber===void 0||o.columnNumber===n)))}getBreakCondition(){}updateExistingCdpRef(e,r){this.updateCdpRefs(i=>i.map(n=>n.state!==1||n.cdpId!==e?n:r(n)))}updateCdpRefs(e){let r=this;r.cdpBreakpoints=e(this.cdpBreakpoints);let i=new Set;this.setInCdpScriptIds.clear();for(let n of this.cdpBreakpoints)if(n.state===1){i.add(n.cdpId);for(let s of n.locations)this.setInCdpScriptIds.add(s.scriptId)}this._cdpIds=i}async _setPredicted(e){if(!this.source.path||!this._manager._breakpointsPredictor)return;let r=this._manager._breakpointsPredictor.predictedResolvedLocations({absolutePath:this.source.path,lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber}),i=[];for(let n of r){let s=this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(n.absolutePath);s!==void 0&&(typeof s=="string"?i.push(this._setByUrlRegexp(e,s,n)):i.push(s.then(o=>o?this._setByUrlRegexp(e,o,n):void 0)))}await Promise.all(i)}async _setByUiLocation(e,r){await Promise.all(r.source.scripts.map(i=>this._setForSpecific(e,i,r)))}async _setByPath(e,r){let i=this._manager._sourceContainer.source({path:this.source.path});if(!(i instanceof Ut&&[...i.compiledToSourceUrl.keys()].some(s=>s.absolutePath===this.source.path)))if(this.source.path){let n=await this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(this.source.path);if(!n)return;await this._setByUrlRegexp(e,n,r)}else{let n=this._manager._sourceContainer.source(this.source),s=n==null?void 0:n.url;if(!s)return;await this._setByUrl(e,s,r),this.source.path!==s&&this.source.path!==void 0&&await this._setByUrl(e,Ve(this.source.path),r)}}hasSetOnLocation(e,r){return this.cdpBreakpoints.find(i=>e.scriptId&&dF(i.args)&&i.args.location.scriptId===e.scriptId&&eb(i.args.location,r)||e.url&&!e.hasSourceURL&&tb(i.args)&&(i.args.urlRegex?new RegExp(i.args.urlRegex).test(e.url):e.url===i.args.url)&&eb(i.args,r))}hasSetOnLocationByUrl(e,r,i){return this.cdpBreakpoints.find(n=>{if(tb(n.args))return eb(n.args,i)?e==="url"?n.args.urlRegex?new RegExp(n.args.urlRegex).test(r):n.args.url===r:e==="re"&&n.args.urlRegex===r:!1;let s=this._manager._sourceContainer.getScriptById(n.args.location.scriptId);if(s)return eb(n.args.location,i)&&e==="re"?new RegExp(r).test(s.url):s.url===r})}async _setForSpecific(e,r,i){return r.url&&!r.hasSourceURL?this._setByUrl(e,r.url,i):this._setByScriptId(e,r,i)}async _setByUrl(e,r,i){i=So(i);let n=this.hasSetOnLocationByUrl("url",r,i);if(n){n.state===0&&await n.done;return}return this._setAny(e,{url:r,condition:this.getBreakCondition(),...i})}async _setByUrlRegexp(e,r,i){i=So(i);let n=this.hasSetOnLocationByUrl("re",r,i);if(n){n.state===0&&await n.done;return}return this._setAny(e,{urlRegex:r,condition:this.getBreakCondition(),...i})}async _setByScriptId(e,r,i){i=So(i);let n=this.hasSetOnLocation(r,i);if(n){n.state===0&&await n.done;return}return this._setAny(e,{condition:this.getBreakCondition(),location:{scriptId:r.scriptId,...i}})}async _setAny(e,r){if(!this.isEnabled)return;let i={state:0,args:r,deadletter:!1};i.done=(async()=>{let n=dF(r)?await e.cdp().Debugger.setBreakpoint(r):await e.cdp().Debugger.setBreakpointByUrl(r);if(!n)return;if(i.deadletter){await e.cdp().Debugger.removeBreakpoint({breakpointId:n.breakpointId});return}let s="actualLocation"in n?[n.actualLocation]:n.locations;this._manager._resolvedBreakpoints.set(n.breakpointId,this);let o={state:1,cdpId:n.breakpointId,args:r,locations:s,uiLocations:[]};return this.updateCdpRefs(a=>a.map(u=>u===i?o:u)),await this.updateUiLocations(e,n.breakpointId,s),o})(),this.updateCdpRefs(n=>[...n,i]),await i.done}async removeCdpBreakpoint(e){var r;this.updateCdpRefs(i=>i.filter(n=>n!==e)),e.state===0?(e.deadletter=!0,await e.done):(await((r=this._manager._thread)==null?void 0:r.cdp().Debugger.removeBreakpoint({breakpointId:e.cdpId})),this._manager._resolvedBreakpoints.delete(e.cdpId))}};var qn=class extends Ip{constructor(r,i,n){super(r,i,{lineNumber:1,columnNumber:1});this.mode=n}static getModeKeyForSource(r,i){return r===1?(0,rb.basename)(i,(0,rb.extname)(i)||void 0):i}_setPredicted(){return Promise.resolve()}_setByPath(r,i){if(!this.source.path)return Promise.resolve();let n=qn.getModeKeyForSource(this.mode,this.source.path);return this.mode===1?super._setByUrlRegexp(r,ni(n),i):super._setByPath(r,i)}};var mF=I(Se());var pn=class extends Ip{constructor(r,i,n,s,o){super(r,n,{lineNumber:s.line,columnNumber:s.column||1});this.dapId=i;this.dapParams=s;this.condition=o;this.completedSet=We()}equivalentTo(r){return r.dapParams.column===this.dapParams.column&&r.dapParams.line===this.dapParams.line&&r.dapParams.hitCondition===this.dapParams.hitCondition&&r.dapParams.condition===this.dapParams.condition&&r.dapParams.logMessage===this.dapParams.logMessage}untilSetCompleted(){return this.completedSet.promise}markSetCompleted(){this.completedSet.resolve()}testHitCondition(r){return this.condition.shouldStayPaused(r)}async toDap(){let r=this.enabled&&this.getResolvedUiLocation();return r?{id:this.dapId,verified:!0,source:await r.source.toDap(),line:r.lineNumber,column:r.columnNumber}:{id:this.dapId,verified:!1,message:mF.t("Unbound breakpoint")}}diagnosticDump(){return{source:this.source,params:this.dapParams,cdp:this.cdpBreakpoints}}getBreakCondition(){return this.condition.breakCondition}updateCdpRefs(r){let i=this.getResolvedUiLocation();super.updateCdpRefs(r),this.getResolvedUiLocation()!==i&&this.notifyResolved()}getResolvedUiLocation(){for(let r of this.cdpBreakpoints)if(r.state===1&&r.uiLocations.length)return r.uiLocations[0]}async notifyResolved(){await this._manager.notifyBreakpointChange(this,this.completedSet.hasSettled())}};var ib=class extends pn{constructor(e,r,i,n){super(e,r,i,n,new Oa(()=>!1))}getResolvedUiLocation(){}};var AB=I(ym());var xp=class extends qn{constructor(r,i){super(r,{path:i},1);this.pattern=i}async enable(r){if(this.isEnabled)return;this.isEnabled=!0;let i=(0,AB.makeRe)(rt(this.pattern),{contains:!0,lookbehinds:!1});await this._setAny(r,{urlRegex:i.source.replace(/([a-z]):/i,(n,s)=>`[${s.toLowerCase()}${s.toUpperCase()}]:`),lineNumber:0,columnNumber:0})}};var Pp=I(Y());var Cp={dispose:()=>{}},De=class{constructor(e){this.disposed=!1;this.items=[];e&&(this.items=e.slice())}get isDisposed(){return this.disposed}callback(...e){for(let r of e)this.push({dispose:r})}push(...e){return this.disposed?(e.forEach(r=>r.dispose()),e[0]):(this.items.push(...e),e[0])}disposeObject(e){this.items=this.items.filter(r=>r!==e),e.dispose()}dispose(){let e=Promise.all(this.items.map(r=>r.dispose()));return this.items=[],this.disposed=!0,e}};var Dp=Symbol("IExperimentationService");var ir=Symbol("ITelemetryReporter");var Woe=/\/node_modules\/|^node\:/,Voe=2,IB=5e3,Goe=IB/2,xt=class{constructor(e,r,i){this.telemetry=r;this.experimentation=i;this.disposable=new De;this.hadBreakpoint=!1;this.didVerifyBreakpoint=!1;this.hadNonModuleSourcemap=!1;this.startedAt=Date.now();this.disposable.push(xt.didVerifyEmitter.event(()=>{this.didVerifyBreakpoint=!0})),xt.consecutiveQualifyingSessions>=Voe&&this.disposable.push(eO(async()=>{this.currentlyQualifying&&await this.experimentation.getTreatment("diagnosticPrompt",!0)&&(r.report("diagnosticPrompt",{event:"suggested"}),xt.didSuggest=!0,e.suggestDiagnosticTool({}))},IB))}get currentlyQualifying(){return this.hadBreakpoint&&!this.didVerifyBreakpoint&&this.hadNonModuleSourcemap}notifyHadBreakpoint(){this.hadBreakpoint=!0}notifyVerifiedBreakpoint(){this.didVerifyBreakpoint||(xt.didVerifyEmitter.fire(),xt.didSuggest&&(xt.didSuggest=!1,this.telemetry.report("diagnosticPrompt",{event:"resolved"})))}attach(e){if(!this.hadNonModuleSourcemap){let r=this.disposable.push(e.Debugger.on("scriptParsed",i=>{i.sourceMapURL&&!Woe.test(i.url)&&(this.hadNonModuleSourcemap=!0,this.disposable.disposeObject(r))}))}}dispose(){this.currentlyQualifying&&Date.now()-Goe>this.startedAt?xt.consecutiveQualifyingSessions++:xt.consecutiveQualifyingSessions=0,this.disposable.dispose()}};xt.consecutiveQualifyingSessions=0,xt.didVerifyEmitter=new X,xt.didSuggest=!1,xt=$([(0,Pp.injectable)(),w(0,(0,Pp.inject)(ep)),w(1,(0,Pp.inject)(ir)),w(2,(0,Pp.inject)(Dp))],xt);var hn=I(Y()),BB=I(PB()),rx=I(ov());var $p=Symbol("IContainer"),Fs=Symbol("StoragePath"),_i=Symbol("IInitializeParams"),dn=Symbol("VSCodeApi"),kp=Symbol("IsVSCode"),ht=Symbol("ExtensionContext"),QE=Symbol("ProcessEnv"),vm=Symbol("execa"),Ie=Symbol("FS"),Co="ExtensionLocation",wc=Symbol("IBrowserFinder"),XDe=Symbol("DwarfDebugging"),Rp=Symbol("SessionSubStates"),YE=new WeakMap,Pt=(t,e)=>{if(!(typeof e=="object"&&e&&"dispose"in e))return e;let r=e,i=YE.get(t.container);return i?i.push(r):YE.set(t.container,[r]),e},fb=t=>{var e;(e=YE.get(t))==null||e.forEach(r=>r.dispose())},Ai=Symbol("IExtensionContribution");var hb=I(Y());var LB=I(require("fs")),db=I(require("path")),TB=t=>{let e={};f(e);function r(g,H){return t({category:"telemetry",output:g,data:H})}let i=g=>r("js-debug/dap/operation",{...e,...g}),n=g=>r("js-debug/cdp/operation",{...e,...g}),s=g=>r("js-debug/error",{...e,...g}),o=g=>{e.browser=(g.targetProject||g.targetProject)+"/"+g.targetVersion,r("js-debug/browserVersion",{...e,...g})},a=g=>r("js-debug/breakpointStats",{...e,...g}),u=g=>r("js-debug/statistics",{...e,...g}),c=g=>{e.nodeVersion=g.version,r("js-debug/nodeRuntime",{...e,...g})},l=g=>{r("js-debug/launch",{...e,...g,parameters:JSON.stringify(g.parameters)})},p=g=>{r("js-debug/diagnosticPrompt",{...e,...g})};function f(g){try{let H=db.resolve(db.dirname(__filename),"..","..",".gitcommit");g.jsDebugCommitId=LB.readFileSync(H,"utf8")}catch{}}return{breakpointStats:a,statistics:u,browserVersion:o,cdpOperation:n,dapOperation:i,error:s,launch:l,nodeRuntime:c,diagnosticPrompt:p,setGlobalMetric:(g,H)=>{e[g]=H}}};var bm=class{constructor(e=!0){this.isVSCode=e;this.measurements=Object.create(null)}add(e,r,i){let n=this.measurements[e];n||(n=this.measurements[e]={times:[],errors:[]}),n.times.push(r),i&&n.errors.push(i)}flush(){let e={errors:[]};for(let r in this.measurements){let{times:i,errors:n}=this.measurements[r],s={operation:r,totalTime:0,max:0,avg:0,stddev:0,count:i.length,failed:n.length};for(let o of i)s.totalTime+=o,s.max=Math.max(s.max,o);s.avg=s.totalTime/s.count;for(let o of i)s.stddev+=(o-s.avg)**2;s.stddev=Math.sqrt(s.stddev/(i.length-1)),e[s.operation]=s,e[`!${s.operation}.errors`]=n,this.isVSCode||(e[`${s.operation}.errors`]=n)}return this.measurements=Object.create(null),e}};var Ii=class{constructor(e=!0){this.isVsCode=e;this.target=[];this.flushEmitter=new X;this.loggers=TB(e=>this.pushOutput(e));this.batchFlushTimeout={};this.batchers={dapOperation:new bm(this.isVsCode),cdpOperation:new bm(this.isVsCode)};this.onFlush=this.flushEmitter.event;this.setGlobalMetric=this.loggers.setGlobalMetric}report(e,...r){let i=this.loggers[e];i(...r)}reportOperation(e,r,i,n){this.batchers[e].add(r,i,n),this.batchFlushTimeout[e]===void 0&&(this.batchFlushTimeout[e]=setTimeout(()=>{this.report(e,this.batchers[e].flush()),this.batchFlushTimeout[e]=void 0},Ii.batchFlushInterval))}attachDap(e){this.target instanceof Array&&this.target.forEach(r=>e.output(r)),this.target=e}flush(){this.flushEmitter.fire();let e=Object.entries(this.batchFlushTimeout);for(let[r,i]of e){let n=this.batchers[r].flush();n.length&&this.report(r,n),this.batchFlushTimeout[r]=void 0,clearTimeout(i)}}dispose(){for(let e of Object.values(this.batchFlushTimeout))e&&clearTimeout(e)}pushOutput(e){e.data=ZE(e.data),this.target instanceof Array?this.target.push(e):this.target.output(e)}};Ii.batchFlushInterval=5e3,Ii=$([(0,hb.injectable)(),w(0,(0,hb.inject)(kp))],Ii);var ZE=t=>typeof t=="number"?Number(t.toFixed(1)):typeof t!="object"||!t?t:t instanceof Error?ex(t):t instanceof Array?t.map(ZE):fo(t,ZE),$B=/(?:[A-z]:)?(?:[\\/][^:]*)+[\\/]([^:]*:)/g;function ex(t){let e=String(t.message),r=String(t.name);$B.lastIndex=0;let i=typeof t.stack=="string"?t.stack.replace($B,"$1"):void 0;return{error:{message:e,name:r,stack:i}}}var RB=require("crypto"),Ac=I(Y());var _c=Symbol("IDwarfModuleProvider");var gb=Symbol("IWasmSymbolProvider"),Mp=class{constructor(e,r,i,n){this.dwarf=e;this.cdp=r;this.logger=i;this.launchConfig=n;this.doPrompt=Ee(()=>this.dwarf.prompt())}async loadWasmSymbols(e){var o;if(!this.launchConfig.enableDWARF)return this.defaultSymbols(e);let r=await this.getWorker();if(!r){let a=this.defaultSymbols(e);return a.onDidDisassemble=this.doPrompt,a}let i=(0,RB.randomUUID)(),n=(o=e.debugSymbols)==null?void 0:o.externalURL,s;try{s=await r.sendMessage("addRawModule",i,n,{url:e.url,code:!n&&e.url.startsWith("wasm://")?await this.getBytecode(e.scriptId):void 0})}catch{return this.defaultSymbols(e)}return!(s instanceof Array)||s.length===0?(r.sendMessage("removeRawModule",i),this.defaultSymbols(e)):(this.logger.info("sourcemap.parsing","parsed files from wasm",{files:s}),new tx(e,this.cdp,i,r,s))}dispose(){var e;(e=this.worker)==null||e.dispose(),this.worker=void 0}defaultSymbols(e){return new mb(e,this.cdp,[])}async getBytecode(e){let r=await this.cdp.Debugger.getScriptSource({scriptId:e}),i=r==null?void 0:r.bytecode;return i?Buffer.from(i,"base64").buffer:void 0}async getWorker(){var r;if(this.worker!==void 0)return(r=this.worker)==null?void 0:r.rpc;let e=await this.dwarf.load();if(!e){this.worker=null;return}return this.worker=e.spawn({getWasmGlobal:(i,n)=>this.loadWasmValue(`globals[${i}]`,n),getWasmLocal:(i,n)=>this.loadWasmValue(`locals[${i}]`,n),getWasmOp:(i,n)=>this.loadWasmValue(`stack[${i}]`,n),getWasmLinearMemory:(i,n,s)=>this.loadWasmValue(`[].slice.call(new Uint8Array(memories[0].buffer, ${+i}, ${+n}))`,s).then(o=>new Uint8Array(o).buffer)}),this.worker.rpc.sendMessage("hello",[],!1),this.worker.rpc}async loadWasmValue(e,r){var s;let i=r,n=await this.cdp.Debugger.evaluateOnCallFrame({callFrameId:i,expression:e+It(),silent:!0,returnByValue:!0,throwOnSideEffect:!0});if(!n||n.exceptionDetails)throw new Error(`evaluate failed: ${((s=n==null?void 0:n.exceptionDetails)==null?void 0:s.text)||"unknown"}`);return n.result.value}};Mp=$([(0,Ac.injectable)(),w(0,(0,Ac.inject)(_c)),w(1,(0,Ac.inject)(St)),w(2,(0,Ac.inject)(le)),w(3,(0,Ac.inject)(je))],Mp);var mb=class{constructor(e,r,i){this.event=e;this.cdp=r;this.doDisassemble=Ee(async()=>{let e=[],r;for await(let i of this.getDisassembledStream()){e=e.concat(i.lines);let n;if(r){let s=new Uint32Array(r.length+i.lines.length);n=r.length,s.set(r),r=s}else r=new Uint32Array(i.lines.length),n=0;for(let s=0;s<i.lines.length;s++)r[n+s]=i.bytecodeOffsets[s]}return r??=new Uint32Array(0),{lines:e,byteOffsetsOfLines:r}});i.push(this.decompiledUrl=e.url.replace(".wasm",".wat")),this.files=i}async getDisassembly(){var r;let{lines:e}=await this.doDisassemble();return(r=this.onDidDisassemble)==null||r.call(this),e.join(`
`)}originalPositionFor(e){return this.disassembledPositionFor(e)}async disassembledPositionFor(e){let{byteOffsetsOfLines:r}=await this.doDisassemble(),i=IN(r,e.base0.columnNumber,(n,s)=>n-s);if(i!==r.length)return{url:this.decompiledUrl,position:new xr(i,0)}}async compiledPositionFor(e,r){if(e!==this.decompiledUrl)return[];let{byteOffsetsOfLines:i}=await this.doDisassemble(),{lineNumber:n}=r.base0;if(n>=i.length)return[];let s=i[r.base0.lineNumber];return[new xr(0,s)]}dispose(){}async*getDisassembledStream(){let{scriptId:e}=this.event,r=await this.cdp.Debugger.disassembleWasmModule({scriptId:e});if(r)for(yield r.chunk;r.streamId;){let i=await this.cdp.Debugger.nextWasmDisassemblyChunk({streamId:r.streamId});if(!i)return;yield i.chunk}}},tx=class extends mb{constructor(r,i,n,s,o){super(r,i,o);this.moduleId=n;this.rpc=s;this.mappedLines=new Map}get codeOffset(){return this.event.codeOffset||0}async originalPositionFor(r){let i=await this.rpc.sendMessage("rawLocationToSourceLocation",{codeOffset:r.base0.columnNumber-this.codeOffset,inlineFrameIndex:r.base0.lineNumber,rawModuleId:this.moduleId});return i.length?{position:new xr(i[0].lineNumber,i[0].columnNumber),url:i[0].sourceFileURL}:super.originalPositionFor(r)}async compiledPositionFor(r,i){if(r===this.decompiledUrl)return super.compiledPositionFor(r,i);let{lineNumber:n,columnNumber:s}=i.base0,o=await this.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:n,columnNumber:s===0?-1:s,rawModuleId:this.moduleId,sourceFileURL:r});if(s===0&&o.length===0){let a=await this.getMappedLines(r),u=a.find(c=>c>n);if(!a.includes(n)&&u)return this.compiledPositionFor(r,new xr(u,0))}return o.filter(a=>a.rawModuleId===this.moduleId).map(a=>new xr(0,this.codeOffset+a.startOffset))}dispose(){return this.rpc.sendMessage("removeRawModule",this.moduleId)}async getVariablesInScope(r,i){let n={codeOffset:i.base0.columnNumber-this.codeOffset,inlineFrameIndex:i.base0.lineNumber,rawModuleId:this.moduleId};return(await this.rpc.sendMessage("listVariablesInScope",n)).map(o=>({name:o.name,scope:o.scope,type:o.type,evaluate:async()=>{let a=await this.rpc.sendMessage("evaluate",o.name,n,r);return a?new wm(a,this.rpc):Qoe}}))}async getFunctionStack(r){let i=await this.rpc.sendMessage("getFunctionInfo",{codeOffset:r.base0.columnNumber-this.codeOffset,inlineFrameIndex:r.base0.lineNumber,rawModuleId:this.moduleId});return"frames"in i?i.frames:[]}async getStepSkipList(r,i,n,s){if(n===this.decompiledUrl)return[];let o={codeOffset:i.base0.columnNumber-this.codeOffset,inlineFrameIndex:i.base0.lineNumber,rawModuleId:this.moduleId},a=()=>s&&n?this.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:s.base0.lineNumber,columnNumber:-1,rawModuleId:this.moduleId,sourceFileURL:n}):[],u;switch(r){case 2:{u=await this.rpc.sendMessage("getInlinedFunctionRanges",o);break}case 1:{let c=await Promise.all([this.rpc.sendMessage("getInlinedCalleesRanges",o),a()]);u=mo(c);break}case 0:u=await a();break;default:u=[];break}return u.map(c=>new Ra(new xr(0,c.startOffset+this.codeOffset),new xr(0,c.endOffset+this.codeOffset)))}async evaluate(r,i,n){try{return await this.rpc.sendMessage("evaluate",n,{codeOffset:i.base0.columnNumber-this.codeOffset,inlineFrameIndex:i.base0.lineNumber,rawModuleId:this.moduleId},r)??void 0}catch(s){throw new re(it(s.message))}}getMappedLines(r){let i=this.mappedLines.get(r);if(i)return i;let n=(async()=>{try{let s=await this.rpc.sendMessage("getMappedLines",this.moduleId,r);return new Uint32Array((s==null?void 0:s.sort((o,a)=>o-a))||[])}catch{return new Uint32Array}})();return this.mappedLines.set(r,n),n}},Qoe={type:"null",description:"no properties"},wm=class{constructor(e,r){if(this.type=e.type,this.description=e.description,this.linearMemoryAddress=e.linearMemoryAddress,this.linearMemorySize=e.linearMemoryAddress,e.objectId&&e.hasChildren){let i=e.objectId;this.getChildren=Ee(()=>this._getChildren(r,i))}}async _getChildren(e,r){return(await e.sendMessage("getProperties",r)).map(n=>({name:n.name,value:new wm(n.value,e)}))}};var Ba=Symbol("IScriptSkipper");function MB(t){return typeof t.lineNumber=="number"&&typeof t.columnNumber=="number"&&!!t.source}var OB=()=>({source:null,line:null,column:null,name:null,lastColumn:null,isSourceMapLoadFailure:!0}),Zoe=/\?t=[0-9]+$/,eae=t=>t.endsWith(".hot-update.js")||Zoe.test(t),tae={load:0,resolveLocation:2e3,sourceMapMinPause:1e3,output:1e3,sourceMapCumulativePause:1e4},NB=(t,e)=>e instanceof Ut&&e.compiledToSourceUrl.has(t);var FB=2**31-1,hr=class{constructor(e,r,i,n,s,o,a,u,c){this.sourceMapFactory=r;this.logger=i;this.launchConfig=n;this.initializeConfig=s;this.sourcePathResolver=o;this.scriptSkipper=a;this.resourceProvider=u;this.wasmSymbols=c;this.rootPaths=[];this.scriptsById=new Map;this.onSourceMappedSteppingChangeEmitter=new X;this.onScriptEmitter=new X;this._sourceByOriginalUrl=new Ds(e=>e.toLowerCase());this._sourceByReference=new Map;this._sourceMapSourcesByUrl=new Map;this._sourceByAbsolutePath=lc();this._sourceMapTimeouts=tae;this._fileContentOverridesForTest=new Map;this._temporarilyDisabledSourceMaps=new Set;this._permanentlyDisabledSourceMaps=new Set;this.onScript=this.onScriptEmitter.event;this._statistics={fallbackSourceMapCount:0};this._doSourceMappedStepping=this.launchConfig.sourceMaps;this.onSourceMappedSteppingChange=this.onSourceMappedSteppingChangeEmitter.event;this._dap=e;let l="webRoot"in n?n.webRoot:n.rootPath;l&&(this.rootPaths=[l,Ri(l,"..","ClientApp")]),a.setSourceContainer(this),this.setSourceMapTimeouts({...this.sourceMapTimeouts(),...n.timeouts})}get sources(){return this._sourceByReference.values()}statistics(){return this._statistics}get doSourceMappedStepping(){return this._doSourceMappedStepping}set doSourceMappedStepping(e){e!==this._doSourceMappedStepping&&(this._doSourceMappedStepping=e,this.onSourceMappedSteppingChangeEmitter.fire(e))}setSourceMapTimeouts(e){this._sourceMapTimeouts=e}sourceMapTimeouts(){return this._sourceMapTimeouts}setFileContentOverrideForTest(e,r){r===void 0?this._fileContentOverridesForTest.delete(e):this._fileContentOverridesForTest.set(e,r)}async loadedSources(){let e=[];for(let r of this._sourceByReference.values())e.push(r.toDap());return await Promise.all(e)}source(e){if(e.sourceReference)return this._sourceByReference.get(e.sourceReference);if(e.path)return this._sourceByAbsolutePath.get(e.path)}isSourceSkipped(e){return this.scriptSkipper.isScriptSkipped(e)}addScriptById(e){this.scriptsById.set(e.scriptId,e),this.onScriptEmitter.fire(e)}getScriptById(e){return this.scriptsById.get(e)}getSourceByOriginalUrl(e){return this._sourceByOriginalUrl.get(e)}getSourceReference(e){let r=(0,BB.xxHash32)(e)&FB;for(let i=0;i<65535;i++){if(!this._sourceByReference.has(r))return r;r===FB&&(r=0),r++}return this.logger.assert(!1,"Max iterations exceeding for source reference assignment"),r}async preferredUiLocation(e){let r=!1,i=4;for(;;){let n=await this._originalPositionFor(e);if(!MB(n)){i=r?void 0:n;break}e=n,r=!0,i=void 0}return{...e,isMapped:r,unmappedReason:i}}async currentSiblingUiLocations(e,r){let i=await this._uiLocations(e);return r?i.filter(n=>n.source===r):i}clear(e){this.scriptsById.clear();for(let r of this._sourceByReference.values())this.removeSource(r,e);this._sourceByReference.clear(),this.sourceMapFactory instanceof Ta&&this.sourceMapFactory.invalidateCache()}async _uiLocations(e){let[r,i]=await Promise.all([this.getSourceMapUiLocations(e),this.getCompiledLocations(e)]);return[...r,e,...i]}async getSourceMapUiLocations(e){let r=await this._originalPositionFor(e);if(!MB(r))return[];let i=await this.getSourceMapUiLocations(r);return i.push(r),i}async _originalPositionFor(e){if(!si(e.source))return 1;let r=await pm.waitForValueWithTimeout(e.source.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!r)return 2;if(this._doSourceMappedStepping)return this._originalPositionForMap(e,r);if(LE(r)){let i=await r.disassembledPositionFor(new rr(e.lineNumber,e.columnNumber)),n=i&&e.source.sourceMap.sourceByUrl.get(i.url);if(n)return n?{columnNumber:i.position.base1.lineNumber,lineNumber:i.position.base1.lineNumber,source:n}:3}return 0}async _originalPositionForMap(e,r){let i=e.source;if(!si(i))return 1;if(this._temporarilyDisabledSourceMaps.has(i)||this._permanentlyDisabledSourceMaps.has(i))return 0;let n=await this.getOptiminalOriginalPosition(r,oF(e,i.inlineScriptOffset));if(!n)return 3;let s=i.sourceMap.sourceByUrl.get(n.url);if(!s)return 3;let o=n.position.base1;return{lineNumber:o.lineNumber,columnNumber:o.columnNumber,source:s}}async getCompiledLocations(e){if(!(e.source instanceof Ut))return[];let r=[];for(let[i,n]of e.source.compiledToSourceUrl){let s=await pm.waitForValueWithTimeout(i.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!s)continue;let o;if("decompiledUrl"in s){let a=await s.compiledPositionFor(n,new rr(e.lineNumber,e.columnNumber));if(!a)continue;o=a.map(u=>({lineNumber:u.base1.lineNumber,columnNumber:u.base1.columnNumber,source:i}))}else{let a=this.sourceMapFactory.guardSourceMapFn(s,()=>Pv(n,e,s),OB);if(!a)continue;let{lineNumber:u,columnNumber:c}=sF({lineNumber:a.line||1,columnNumber:(a.column||0)+1},i.inlineScriptOffset),l={lineNumber:u,columnNumber:c,source:i};o=[l,...await this.getCompiledLocations(l)]}r=r.concat(o)}return r}async getOptiminalOriginalPosition(e,r){if(LE(e))return await e.originalPositionFor(new rr(r.lineNumber,r.columnNumber));let i=this.sourceMapFactory.guardSourceMapFn(e,()=>{let n=e.originalPositionFor({line:r.lineNumber,column:r.columnNumber-1,bias:rx.SourceMapConsumer.GREATEST_LOWER_BOUND});return n.line!==null?n:e.originalPositionFor({line:r.lineNumber,column:r.columnNumber-1,bias:rx.SourceMapConsumer.LEAST_UPPER_BOUND})},OB);if(!(i.column===null||i.line===null||i.source===null))return{position:new ka(i.line,i.column),url:i.source}}async addSource(e,r,i,n,s,o){let a=await this.sourcePathResolver.urlToAbsolutePath({url:e.url});this.logger.verbose("runtime.sourcecreate","Creating source from url",{inputUrl:e.url,absolutePath:a});let u;return e.scriptLanguage==="WebAssembly"?u=new Jv(this,e,a):u=new Hc(this,e.url,a,r,i&&this.sourcePathResolver.shouldResolveSourceMap({sourceMapUrl:i,compiledPath:a||e.url})?i:void 0,n,s,o),this._addSource(u),u}async _addSource(e){let r=e.url&&this._sourceByOriginalUrl.get(e.url);r&&!NB(r,e)&&this.removeSource(r,!0),this._sourceByOriginalUrl.set(e.url,e),this._sourceByReference.set(e.sourceReference,e),e instanceof Ut&&this._sourceMapSourcesByUrl.set(e.url,e);let i=this._sourceByAbsolutePath.get(e.absolutePath);(i===void 0||i.url.length>=e.url.length||NB(i,e))&&this._sourceByAbsolutePath.set(e.absolutePath,e),this.scriptSkipper.initializeSkippingValueForSource(e),e.toDap().then(n=>this._dap.loadedSource({reason:"new",source:n})),$a(e)?this._finishAddSourceWithSourceMap(e):yc(e)&&this._finishAddSourceWithWasm(e)}async _finishAddSourceWithWasm(e){let r=await this.wasmSymbols.loadWasmSymbols(e.event),i=[];for(let n of r.files){let s=await this.sourcePathResolver.urlToAbsolutePath({url:n}),o=s?Ve(s):n;this.logger.verbose("runtime.sourcecreate","Creating wasm source from source map",{inputUrl:n,absolutePath:s,resolvedUrl:o});let a=s&&Ve(s),u=n===r.decompiledUrl?()=>r.getDisassembly():()=>a?this.resourceProvider.fetch(a).then(l=>l.body):Promise.resolve(`Could not read ${n}`),c=new Ut(this,o,s,u);c.compiledToSourceUrl.set(e,n),e.sourceMap.sourceByUrl.set(n,c),i.push(this._addSource(c))}await Promise.all(i),e.sourceMap.value.resolve(r)}async _finishAddSourceWithSourceMap(e){let r=e.sourceMap.value,i;try{i=await this.sourceMapFactory.load(e.sourceMap.metadata)}catch(n){if(this.initializeConfig.clientID==="visualstudio"){let s=e.sourceMap.metadata.sourceMapUrl;try{let o=await this.sourcePathResolver.urlToAbsolutePath({url:s});o&&(e.sourceMap.metadata.sourceMapUrl=Ve(o)),i=await this.sourceMapFactory.load(e.sourceMap.metadata),this._statistics.fallbackSourceMapCount++,this.logger.info("sourcemap.parsing","Failed to process original source-map; falling back to storage source-map",{fallbackSourceMapUrl:e.sourceMap.metadata.sourceMapUrl,originalSourceMapUrl:s,originalSourceMapError:ex(n)})}catch{}}if(i===void 0)return this._dap.output({output:lv(e.url,n.message).error.format+`
`,category:"stderr"}),r.resolve(void 0)}if(this._sourceByReference.get(e.sourceReference)!==e)return r.resolve(void 0);this.logger.verbose("sourcemap.parsing","Creating sources from source map",{sourceMapId:i.id,metadata:i.metadata});try{await this._addSourceMapSources(e,i)}finally{r.resolve(i)}this.scriptSkipper.initializeSkippingValueForSource(e)}removeSource(e,r=!1){var n;let i=this._sourceByReference.get(e.sourceReference);if(i!==void 0){if(this.logger.assert(e===i,"Expected source to be the same as the existing reference"),this._sourceByReference.delete(e.sourceReference),this._sourceByOriginalUrl.get(e.url)===e&&this._sourceByOriginalUrl.delete(e.url),e instanceof Ut){this._sourceMapSourcesByUrl.delete(e.url);for(let[s,o]of e.compiledToSourceUrl)s.sourceMap.sourceByUrl.delete(o)}this._sourceByAbsolutePath.delete(e.absolutePath),si(e)&&(this._permanentlyDisabledSourceMaps.delete(e),this._temporarilyDisabledSourceMaps.delete(e)),r||e.toDap().then(s=>this._dap.loadedSource({reason:"removed",source:s})),$a(e)?(n=e.sourceMap.value.settledValue)==null||n.destroy():yc(e)&&e.sourceMap.value.promise.then(s=>s==null?void 0:s.dispose()),si(e)&&this._removeSourceMapSources(e,r)}}async _addSourceMapSources(e,r){let i=[];for(let n of r.sources){let s=await this.sourcePathResolver.urlToAbsolutePath({url:n,map:r}),o=s?Ve(s):r.computedSourceUrl(n),a=this._sourceMapSourcesByUrl.get(o);if(e===a)continue;if(a)if(eae(e.url))this.removeSource(a);else{a.compiledToSourceUrl.set(e,n),e.sourceMap.sourceByUrl.set(n,a);continue}this.logger.verbose("runtime.sourcecreate","Creating source from source map",{inputUrl:n,sourceMapId:r.id,absolutePath:s,resolvedUrl:o});let u=s&&Ve(s),c=this.sourceMapFactory.guardSourceMapFn(r,()=>r.sourceContentFor(n,!0),()=>null),l;if(c){let f=ap(c);if(f&&(!Er(f)&&s?l=xa(s?Ve(s):n,f):l=f),s&&l){let h={sourceMapUrl:l,compiledPath:s};this.sourcePathResolver.shouldResolveSourceMap(h)||(l=void 0)}}let p=new Ut(this,o,s,c!==null?()=>Promise.resolve(c):u?()=>this.resourceProvider.fetch(u).then(f=>f.body):()=>e.content(),l,void 0,e.runtimeScriptOffset);p.compiledToSourceUrl.set(e,n),e.sourceMap.sourceByUrl.set(n,p),i.push(this._addSource(p))}await Promise.all(i)}_removeSourceMapSources(e,r){for(let i of e.sourceMap.sourceByUrl.keys()){let n=e.sourceMap.sourceByUrl.get(i);n&&(e.sourceMap.sourceByUrl.delete(i),n.compiledToSourceUrl.delete(e),!n.compiledToSourceUrl.size&&this.removeSource(n,r))}}async waitForSourceMapSources(e){return si(e)?[...(await pm.waitForSources(e.sourceMap)).values()]:[]}async revealUiLocation(e){this._dap.revealLocationRequested({source:await e.source.toDap(),line:e.lineNumber,column:e.columnNumber})}disableSourceMapForSource(e,r=!1){r?this._permanentlyDisabledSourceMaps.add(e):this._temporarilyDisabledSourceMaps.add(e)}clearDisabledSourceMaps(e){e?this._temporarilyDisabledSourceMaps.delete(e):this._temporarilyDisabledSourceMaps.clear()}};hr=$([(0,hn.injectable)(),w(0,(0,hn.inject)(gi)),w(1,(0,hn.inject)(ks)),w(2,(0,hn.inject)(le)),w(3,(0,hn.inject)(je)),w(4,(0,hn.inject)(_i)),w(5,(0,hn.inject)(ut)),w(6,(0,hn.inject)(Ba)),w(7,(0,hn.inject)(nc)),w(8,(0,hn.inject)(gb))],hr);var UB=t=>t.originalPosition.columnNumber===1&&t.originalPosition.lineNumber===1,jB=500,qB=Symbol("DontCompare");var mn=class{constructor(e,r,i,n,s,o,a){this.logger=i;this.launchConfig=n;this.conditionFactory=s;this.suggester=o;this._breakpointsPredictor=a;this._resolvedBreakpoints=new Map;this._totalBreakpointsCount=0;this._launchBlocker=new Set;this._predictorDisabledForTest=!1;this._breakpointsStatisticsCalculator=new Uv;this.entryBreakpointMode=0;this._enabledFilter=()=>!0;this._byDapId=new Map;this._byPath=lc();this._byRef=new Map;this.moduleEntryBreakpoints=lc();this._dap=e,this._sourceContainer=r,a==null||a.onLongParse(()=>e.longPrediction({})),r.onScript(u=>{u.source.then(c=>{var p;let l=this._thread;l&&((p=this._byRef.get(c.sourceReference))==null||p.forEach(f=>f.updateForNewLocations(l,u)))})}),r.onSourceMappedSteppingChange(()=>{if(this._thread)for(let u of this._byDapId.values())u.refreshUiLocations(this._thread)}),this._scriptSourceMapHandler=async(u,c)=>{if(!i.assert(this._thread,"Expected thread to be set for the breakpoint source map handler"))return[];let l=[],p=[c];for(let f=0;f<p.length;f++)for(let h of p[f]){let g=h.absolutePath,H=g?this._byPath.get(g):void 0;for(let _ of H||[])l.push(_.updateForNewLocations(this._thread,u));let b=this._byRef.get(h.sourceReference);for(let _ of b||[])l.push(_.updateForNewLocations(this._thread,u));h.sourceMap&&p.push(h.sourceMap.sourceByUrl.values())}return mo(await Promise.all(l))}}get appliedByPath(){return this._byPath}get appliedByRef(){return this._byRef}hasAtLocation(e){let r=this._byPath.get(e.source.absolutePath)||[],i=this._byRef.get(e.source.sourceReference)||[];return r.concat(i).some(n=>n.originalPosition.columnNumber===e.columnNumber&&n.originalPosition.lineNumber===e.lineNumber)}async moveBreakpoints(e,r,i,n){let s=l=>Y$(l,async p=>{let f=await this._sourceContainer.getOptiminalOriginalPosition(i,p.originalPosition);if(!f)return!1;let h=f.position.base1;return p.updateSourceLocation(e,{path:n.absolutePath,sourceReference:n.sourceReference},{lineNumber:h.lineNumber,columnNumber:h.columnNumber,source:n}),!1}),o=r.absolutePath,a=n.absolutePath,u=o?this._byPath.get(o):void 0;if(u&&a){let[l,p]=await s(u);this._byPath.set(o,l),this._byPath.set(a,p)}let c=this._byRef.get(r.sourceReference);if(c){let[l,p]=await s(c);this._byRef.set(r.sourceReference,l),this._byRef.set(n.sourceReference,p)}}async updateEntryBreakpointMode(e,r){if(r===this.entryBreakpointMode)return;let i=[...this.moduleEntryBreakpoints.values()];this.moduleEntryBreakpoints.clear(),this.entryBreakpointMode=r,await Promise.all(i.map(n=>this.ensureModuleEntryBreakpoint(e,n.source)))}async applyEnabledFilter(e,r=qB){if(r!==qB&&this._enabledFilter!==r)return;this._enabledFilter=e||(()=>!0);let i=this._thread;i&&await Promise.all([...this._byDapId.values()].map(n=>this._enabledFilter(n)?n.enable(i):n.disable()))}async getBreakpointLocations(e,r,i,n){let s=i.base1,o=n.base1,[a,u]=await Promise.all([this._sourceContainer.currentSiblingUiLocations({source:r,lineNumber:s.lineNumber,columnNumber:s.columnNumber}),this._sourceContainer.currentSiblingUiLocations({source:r,lineNumber:o.lineNumber,columnNumber:o.columnNumber})]);if(a.length!==u.length)return this.logger.warn("internal","Expected to have the same number of start and end locations"),[];let c=[],l=[];for(let p=0;p<a.length;p++){let f=a[p],h=u[p];if(f.source!==h.source){this.logger.warn("internal","Expected to have the same number of start and end scripts");continue}let g=f.source;if(!g.scripts.length)continue;let{scriptId:H}=g.scripts[g.scripts.length-1];c.push(e.cdp().Debugger.getPossibleBreakpoints({restrictToFunction:!1,start:{scriptId:H,...g.offsetSourceToScript(So(f))},end:{scriptId:H,...g.offsetSourceToScript(So(h))}}).then(b=>{if(b)return Promise.all(b.locations.map(async _=>{let{lineNumber:k,columnNumber:U=0}=_,C=await this._sourceContainer.currentSiblingUiLocations({source:g,...g.offsetScriptToSource(aF({lineNumber:k,columnNumber:U}))});l.push({breakLocation:_,uiLocations:C})}))}))}return await Promise.all(c),l}setThread(e){var r;this._thread=e,this._thread.cdp().Debugger.on("breakpointResolved",i=>{let n=this._resolvedBreakpoints.get(i.breakpointId);n&&n.updateUiLocations(e,i.breakpointId,[i.location])}),this._thread.setSourceMapDisabler(i=>{let n=[];for(let s of i){let o=this._resolvedBreakpoints.get(s);if(o){let a=this._sourceContainer.source(o.source);si(a)&&n.push(a)}}return n});for(let i of this._byPath.values())i.forEach(n=>this._setBreakpoint(n,e)),this.ensureModuleEntryBreakpoint(e,(r=i[0])==null?void 0:r.source);for(let i of this._byRef.values())i.forEach(n=>this._setBreakpoint(n,e));"runtimeSourcemapPausePatterns"in this.launchConfig&&this.launchConfig.runtimeSourcemapPausePatterns.length&&this.setRuntimeSourcemapPausePatterns(e,this.launchConfig.runtimeSourcemapPausePatterns),this._byDapId.size>0&&this._installSourceMapHandler(this._thread)}async launchBlocker(){Nv(this.logger,"BreakpointManager.launchBlocker",async()=>{this._predictorDisabledForTest||await Promise.all([...this._launchBlocker])})}setRuntimeSourcemapPausePatterns(e,r){return Promise.all(r.map(i=>this._setBreakpoint(new xp(this,i),e)))}addLaunchBlocker(...e){for(let r of e)this._launchBlocker.add(r),r.finally(()=>this._launchBlocker.delete(r))}setPredictorDisabledForTest(e){this._predictorDisabledForTest=e}_installSourceMapHandler(e){let r=this.launchConfig.perScriptSourcemaps==="yes",i;r?i=Promise.all([this.updateEntryBreakpointMode(e,1),e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler)]).then(()=>!0):this._breakpointsPredictor&&!this.launchConfig.pauseForSourceMap?i=e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler):i=e.setScriptSourceMapHandler(!0,this._scriptSourceMapHandler),this._sourceMapHandlerInstalled={entryBpSet:i}}async _uninstallSourceMapHandler(e){e.setScriptSourceMapHandler(!1),this._sourceMapHandlerInstalled=void 0}_setBreakpoint(e,r){this._enabledFilter(e)&&this.addLaunchBlocker(Promise.race([Ne(jB),e.enable(r)]))}async setBreakpoints(e,r){var l,p;!this._sourceMapHandlerInstalled&&this._thread&&((l=e.breakpoints)!=null&&l.length)&&this._installSourceMapHandler(this._thread);let i=await((p=this._sourceMapHandlerInstalled)==null?void 0:p.entryBpSet);e.source.path=Un(e.source.path);let n=this._sourceContainer.source(e.source);if(!i&&this._breakpointsPredictor&&!n){let f=this._breakpointsPredictor.predictBreakpoints(e);this.addLaunchBlocker(f),await f}let s=this._thread;if((s==null?void 0:s.debuggerReady.hasSettled())===!1){let f=s.debuggerReady.promise;this.addLaunchBlocker(f),await f}let o=f=>{var g;let h={unbound:f.slice(),new:[],list:[]};if(!e.breakpoints)return h;for(let H=0;H<e.breakpoints.length;H++){let b=e.breakpoints[H],_;try{_=new pn(this,r[H],e.source,b,this.conditionFactory.getConditionFor(b))}catch(C){if(!(C instanceof re))throw C;this._dap.output({category:"stderr",output:C.message}),_=new ib(this,r[H],e.source,b)}let k=h.unbound.findIndex(C=>C.equivalentTo(_)),U=h.unbound[k];(g=U==null?void 0:U.equivalentTo)!=null&&g.call(U,_)?(h.list.push(U),h.unbound.splice(k,1)):(h.new.push(_),h.list.push(_),this._byDapId.set(_.dapId,_))}return h},a=()=>e.source.sourceReference?this._byRef.get(e.source.sourceReference):e.source.path?this._byPath.get(e.source.path):void 0,u=o(a()??[]);if(e.source.sourceReference)this._byRef.set(e.source.sourceReference,u.list);else if(e.source.path)this._byPath.set(e.source.path,u.list);else return{breakpoints:[]};if(u.unbound.length===0&&u.new.length===0)return{breakpoints:[]};if(this._totalBreakpointsCount-=u.unbound.length,await Promise.all(u.unbound.map(f=>(this._byDapId.delete(f.dapId),f.disable()))),this._totalBreakpointsCount+=u.new.length,this._thread&&(this._totalBreakpointsCount===0&&this._sourceMapHandlerInstalled?this._uninstallSourceMapHandler(this._thread):this._totalBreakpointsCount>0&&!this._sourceMapHandlerInstalled&&this._installSourceMapHandler(this._thread)),s&&u.new.length){this.ensureModuleEntryBreakpoint(s,e.source);let f=a(),h=Promise.all(u.new.filter(this._enabledFilter).filter(g=>f==null?void 0:f.includes(g)).map(g=>g.enable(s)));this.addLaunchBlocker(Promise.race([Ne(jB),h])),await h}let c=await Promise.all(u.list.map(f=>f.toDap()));return this._breakpointsStatisticsCalculator.registerBreakpoints(c),Ne(0).then(()=>u.new.forEach(f=>f.markSetCompleted())),{breakpoints:c}}async notifyBreakpointChange(e,r){if(!this._byDapId.has(e.dapId))return;let i=await e.toDap();i.verified&&(this._breakpointsStatisticsCalculator.registerResolvedBreakpoint(e.dapId),this.suggester.notifyVerifiedBreakpoint()),r&&this._dap.breakpoint({reason:"changed",breakpoint:i})}isEntrypointBreak(e,r){let i=[...this.moduleEntryBreakpoints.values()].filter(n=>n.enabled&&n.cdpScriptIds.has(r));if(i.length){for(let n of i)n instanceof xp||n.disable();return!0}return e.some(n=>{let s=this._resolvedBreakpoints.get(n);return s&&(s instanceof qn||UB(s))})}async shouldPauseAt(e,r,i,n=!1){if(!r.length)return e.reason!=="instrumentation";let s=0,o=n?1:0;return await Promise.all(r.map(async a=>{if((i==null?void 0:i.cdpId)===a){s++;return}let u=this._resolvedBreakpoints.get(a);if(u instanceof qn){this.entryBreakpointMode===0&&!(u instanceof xp)&&u.disable(),o++;return}u instanceof pn&&(await u.testHitCondition(e)?s++:o++)})),s>0||o===0}registerBreakpointsHit(e){for(let r of e){let i=this._resolvedBreakpoints.get(r);i instanceof pn&&this._breakpointsStatisticsCalculator.registerBreakpointHit(i.dapId)}}statisticsForTelemetry(){return this._breakpointsStatisticsCalculator.statistics()}ensureModuleEntryBreakpoint(e,r){if(!r.path||(this._byPath.get(r.path)??[]).some(UB))return;let n=qn.getModeKeyForSource(this.entryBreakpointMode,r.path);if(!r.path||this.moduleEntryBreakpoints.has(n))return;let s=new qn(this,r,this.entryBreakpointMode);this.moduleEntryBreakpoints.set(r.path,s),this._setBreakpoint(s,e)}executionContextWasCleared(){for(let e of this._byDapId.values())e.executionContextWasCleared()}async reapply(){let e=[...this._byDapId.values()];if(await Promise.all(e.map(r=>r.disable())),this._thread){let r=this._thread;await Promise.all(e.map(i=>i.enable(r)))}}};mn=$([(0,Bs.injectable)(),w(0,(0,Bs.inject)(gi)),w(1,(0,Bs.inject)(hr)),w(2,(0,Bs.inject)(le)),w(3,(0,Bs.inject)(je)),w(4,(0,Bs.inject)(Zv)),w(5,(0,Bs.inject)(xt)),w(6,(0,Bs.inject)(hc))],mn);var s3=require("crypto"),Wp=I(Y());var _m=class{constructor(e){this.element=e,this.next=_m.Undefined,this.prev=_m.Undefined}},lt=_m;lt.Undefined=new _m(void 0);var Am=class{constructor(){this._first=lt.Undefined;this._last=lt.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===lt.Undefined}clear(){let e=this._first;for(;e!==lt.Undefined;){let r=e.next;e.prev=lt.Undefined,e.next=lt.Undefined,e=r}this._first=lt.Undefined,this._last=lt.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let i=new lt(e);if(this._first===lt.Undefined)this._first=i,this._last=i;else if(r){let s=this._last;this._last=i,i.prev=s,s.next=i}else{let s=this._first;this._first=i,i.next=s,s.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==lt.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==lt.Undefined){let e=this._last.element;return this._remove(this._last),e}}applyFilter(e){let r=this._first;for(;r!==lt.Undefined;){let i=r.next;e(r.element)||this._remove(r),r=i}}_remove(e){if(e.prev!==lt.Undefined&&e.next!==lt.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===lt.Undefined&&e.next===lt.Undefined?(this._first=lt.Undefined,this._last=lt.Undefined):e.next===lt.Undefined?(this._last=this._last.prev,this._last.next=lt.Undefined):e.prev===lt.Undefined&&(this._first=this._first.next,this._first.prev=lt.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==lt.Undefined;)yield e.element,e=e.next}};var Db=I(Y()),t3=I(require("net"));var Us=class extends re{constructor(e){super({id:9243,format:e,showUser:!0}),this._cause={id:9243,format:e,showUser:!0}}};function js(t,e,r){if(e.isCancellationRequested)return Promise.reject(new Us(r||"Task cancelled"));let i=We(),n=e.onCancellationRequested(i.resolve);return Promise.race([i.promise.then(()=>{throw new Us(r||"Task cancelled")}),t.then(s=>(n.dispose(),s)).catch(s=>{throw n.dispose(),s})])}function WB(t,e){let r=new mr(e),i=t.map(async n=>{try{return await n(r.token)}finally{r.cancel()}});return Promise.race(i)}var VB=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),gr=Object.freeze({isCancellationRequested:!1,onCancellationRequested:()=>({dispose:()=>{}})}),rae=Object.freeze({isCancellationRequested:!0,onCancellationRequested:VB}),mr=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static withTimeout(e,r){let i=new mr(r),n=i._token=new Op,s=setTimeout(()=>n.cancel(),e);return n.onCancellationRequested(()=>clearTimeout(s)),i}get token(){return this._token||(this._token=new Op),this._token}cancel(){this._token?this._token instanceof Op&&this._token.cancel():this._token=rae}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Op&&this._token.dispose():this._token=gr}},Op=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?VB:(this._emitter||(this._emitter=new X),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}};var Sx=I(require("net"));var Hue=I(XB(),1),yue=I(hx(),1),vue=I(mx(),1),z2=I(_x(),1),Ix=I(K2(),1);var X2=z2.default;var J2=(t,e)=>t+Math.floor(Math.random()*(e-t));async function Wa({min:t=53e3,max:e=54e3,attempts:r=1e3,tester:i=Q2}={},n=gr){let s=J2(t,e);for(let o=Math.min(r,e-t);;o--)try{return await i(s,n)}catch(a){if(o===0||a instanceof Us)throw a;s=s===e-1?t:s+1}}async function Y2(t,e){try{return await Q2(t,e),!0}catch{return!1}}function Q2(t,e=gr){let r;return new Promise((i,n)=>{let s=Sx.createServer();s.listen(t,"127.0.0.1",()=>{let o=s.address();s.close(()=>i(o.port))}),s.on("error",n),r=e.onCancellationRequested(()=>{s.close(),n(new Us("Port open lookup cancelled"))})}).finally(()=>r==null?void 0:r.dispose())}var Z2=(t,e)=>(r,i)=>{let n=Sx.createServer(t);return n.listen(r,e),Cb(n,i)},e3=t=>(e,r)=>Cb(new Ix.default({host:"127.0.0.1",...t,port:e}),r),Cb=(t,e)=>{let r;return new Promise((i,n)=>{t.on("error",n),t.on("listening",()=>i(t)),r=e.onCancellationRequested(()=>{t.close(),n(new Us("Port open lookup cancelled"))})}).finally(()=>r==null?void 0:r.dispose())};var r3=async(t,e,r,i,n=gr)=>{let s=r?await Cb(t3.createServer(e).listen(r,i),n):await Wa({tester:Z2(e,i)},n),o=t.register(s.address().port);return s.on("close",()=>o.dispose()),s.on("error",()=>o.dispose()),s},Pb=async(t,e,r)=>{let i=await Wa({tester:e3(e)},r),n=t.register(i.address().port);return i.on("close",()=>n.dispose()),i.on("error",()=>n.dispose()),i},Ht=Symbol("IPortLeaseTracker"),jp=class{constructor(e){this.usedPorts=new Set;this.onRegistered=new X;this.isMandated=e==="remote"}register(e){return this.usedPorts.add(e),this.onRegistered.fire(e),{dispose:()=>this.usedPorts.delete(e)}}isRegistered(e,r=2e3){return this.usedPorts.has(e)?Promise.resolve(!0):e<53e3||e>=54e3?Promise.resolve(!1):WB([()=>Ne(r).then(()=>!1),i=>new Promise(n=>{let s=this.onRegistered.event(o=>{o===e&&n(!0)});i.onCancellationRequested(()=>s.dispose())})])}};jp=$([(0,Db.injectable)(),w(0,(0,Db.inject)(Co))],jp);var i3="JsDebug",n3="*";var Ex=class{constructor(){this.replays=new Map}addReplay(e,r,i){let n=this.replays.get(e);return n||(n=new Am,this.replays.set(e,n)),n.push({event:`${e}.${r}`,params:i})}capture(e,r,i,n){let s=e[r];if(n===0)s.on(i,o=>this.addReplay(r,i,o));else if(n===2){let o;s.on(i,a=>{o==null||o(),o=this.addReplay(r,i,a)})}else{let o=new Am;s.on(i,a=>{var u;o.size===n.cap&&((u=o.shift())==null||u()),o.push(this.addReplay(r,i,a))})}}filter(e,r){let i=this.replays.get(e);i&&i.applyFilter(r)}clearEvent(e,r){let i=`${e}.${r}`;this.filter(e,n=>n.event!==i)}clearDomain(e){this.replays.delete(e)}read(e){return this.replays.get(e)??[]}},Lb=Symbol("ICdpProxyProvider"),qp=class{constructor(e,r,i){this.cdp=e;this.portTracker=r;this.logger=i;this.disposables=new De;this.replay=new Ex;this.jsDebugApi={subscribe:(e,{events:r})=>{for(let i of r)i.endsWith(n3)?e.pushDisposable(this.cdp.session.onPrefix(i.slice(0,-n3.length),n=>e.send({method:n.method,params:n.params}))):e.pushDisposable(this.cdp.session.on(i,n=>e.send({method:i,params:n})));return{}}};this.replay.capture(e,"CSS","styleSheetAdded",0),this.replay.capture(e,"Debugger","paused",2),this.replay.capture(e,"Runtime","executionContextCreated",{cap:50,type:1}),this.replay.capture(e,"Runtime","consoleAPICalled",{cap:50,type:1}),e.Debugger.on("resumed",()=>{this.replay.clearEvent("Debugger","paused")}),e.CSS.on("fontsUpdated",n=>{n.font&&this.replay.addReplay("CSS","fontsUpdated",n)}),e.CSS.on("styleSheetRemoved",n=>this.replay.filter("CSS",s=>s.params.styleSheetId!==n.styleSheetId))}async proxy(){this.server||(this.server=this.createServer());let{server:e,path:r}=await this.server,i=e.address();return{host:i.address,port:i.port,path:r}}async createServer(){let e=`/${(0,s3.randomBytes)(20).toString("hex")}`,r=await Pb(this.portTracker,{perMessageDeflate:!0,path:e});return this.logger.info("proxyActivity","activated cdp proxy"),r.on("connection",i=>{let n=new xx(i,this.logger);this.logger.info("proxyActivity","accepted proxy connection",{id:n.id}),i.on("close",()=>{this.logger.verbose("proxyActivity","closed proxy connection",{id:n.id}),this.disposables.disposeObject(n)}),i.on("message",async s=>{let o;try{o=JSON.parse(s.toString())}catch(f){return n.send({id:0,error:{code:-32700,message:f.message}})}this.logger.verbose("proxyActivity","received proxy message",o);let{method:a,params:u,id:c=0}=o,[l,p]=a.split(".");try{let f=l===i3?await this.invokeJsDebugDomainMethod(n,p,u):await this.invokeCdpMethod(n,l,p,u);n.send({id:c,result:f})}catch(f){let h=f instanceof mc&&f.cause?f.cause:{code:0,message:f.message};n.send({id:c,error:h})}})}),{server:r,path:e}}dispose(){var e;this.disposables.dispose(),(e=this.server)==null||e.then(r=>r.server.close()),this.server=void 0}invokeCdpMethod(e,r,i,n){let s=this.cdp.session.sendOrDie(`${r}.${i}`,n);switch(i){case"enable":for(let o of this.replay.read(r))e.send({method:o.event,params:o.params});break;case"disable":this.replay.clearDomain(r);break;default:}return s}invokeJsDebugDomainMethod(e,r,i){if(!this.jsDebugApi.hasOwnProperty(r))throw new mc(r).setCause(-32601,`${i3}.${r} not found`);return this.jsDebugApi[r](e,i)}};qp=$([(0,Wp.injectable)(),w(0,(0,Wp.inject)(St)),w(1,(0,Wp.inject)(Ht)),w(2,(0,Wp.inject)(le))],qp);var _ue=0,xx=class{constructor(e,r){this.webSocket=e;this.logger=r;this.disposables=new De;this.id=_ue++}pushDisposable(e){this.disposables.push(e)}dispose(){this.disposables.dispose(),this.webSocket.close()}send(e){this.logger.verbose("proxyActivity","send proxy message",e),this.webSocket.send(JSON.stringify(e))}};var Gp=I(Sv()),km=I(Y());var Cx=fr(function(t,e,r){let i=r?"variable":"property",n=(l,p,f)=>{if(p!=="function")return i;if(l==="constructor")return"class";let h=String(f);return h.startsWith("class ")||h.includes("[native code]")&&/^[A-Z]/.test(l)?"class":r?"function":"method"},s=l=>{switch(typeof l){case"number":case"boolean":return`${l}`;case"object":return l===null?"null":l.constructor.name||"object";case"function":return`fn(${new Array(l.length).fill("?").join(", ")})`;default:return typeof l}},o=[],a=new Set,u="~",c=t===void 0?this:t;for(;c!=null;c=c.__proto__){u+="~";let l=Object.getOwnPropertyNames(c).filter(p=>p.startsWith(e)&&!p.match(/^\d+$/));for(let p of l){if(a.has(p))continue;a.add(p);let f=Object.getOwnPropertyDescriptor(c,p),h=i,g;try{let H=c[p];h=n(p,typeof(f==null?void 0:f.value),H),g=s(H)}catch{}o.push({label:p,sortText:u+p.replace(/^_+/,H=>"{".repeat(H.length)),type:h,detail:g})}r=!1}return{result:o,isArray:this instanceof Array}}),o3=cc(Cx.source);var Aue=t=>{var e,r,i;switch(t.type){case"ClassDeclaration":case"ClassExpression":return{type:"class",id:t.id};case"MethodDefinition":return{type:((e=t.key)==null?void 0:e.type)==="Identifier"&&t.key.name==="constructor"?"constructor":"method",id:t.key};case"VariableDeclarator":return{type:((r=t.init)==null?void 0:r.type)==="FunctionExpression"||((i=t.init)==null?void 0:i.type)==="ArrowFunctionExpression"?"function":"variable",id:t.id}}};function Iue(t){let e=!1;return(0,Gp.traverse)(t,{enter(r){if(r.type==="CallExpression"||r.type==="NewExpression"||r.type==="UnaryExpression"&&r.operator==="delete"||r.type==="ClassBody")return e=!0,Gp.VisitorOption.Break}}),e}var Tb=Symbol("ICompletions"),Vp=class{constructor(e,r){this.evaluator=e;this.cdp=r}async completions(e){let r=Sa(e.expression),i=new Da(e.expression).convert(e.position),n=()=>Promise.resolve([]);return(0,Gp.traverse)(r,{enter:(s,o)=>{let a=s;if(a.start<i&&i<=a.end){if(s.type==="MemberExpression"||s.type==="Identifier"&&(o==null?void 0:o.type)==="MemberExpression"&&!o.computed&&o.object!==s){let u=s.type==="MemberExpression"?s:o;n=u.computed?()=>this.elementAccessCompleter(e,u,i):()=>this.propertyAccessCompleter(e,u,i)}else s.type==="Identifier"&&(n=()=>this.identifierCompleter(e,r,s,i));o=s}}}),n().then(s=>s.sort((o,a)=>o.sortText>a.sortText?1:-1))}async elementAccessCompleter(e,r,i){if(r.property.type!=="Literal"||typeof r.property.value!="string")return[];let n=e.expression.slice(Ia(r.property)+1,i);return(await this.defaultCompletions(e,n)).filter(o=>o.sortText!=="~~[").map(o=>({...o,text:JSON.stringify(o.text??o.label)+"]",start:Ia(r.property),length:hE(r.property)-Ia(r.property)}))}async identifierCompleter(e,r,i,n){let s=[];(0,Gp.traverse)(r,{enter(u){var l;let c=Aue(u);((l=c==null?void 0:c.id)==null?void 0:l.type)==="Identifier"&&s.push({label:c.id.name,type:c.type,sortText:c.id.name})}});let o=e.expression.slice(Ia(i),n),a=[...s,...await this.defaultCompletions(e,o)];return this.evaluator.hasReturnValue&&e.executionContextId!==void 0&&Eo.startsWith(o)&&a.push({sortText:`~${Eo}`,label:Eo,type:"variable"}),a}async propertyAccessCompleter(e,r,i){let{result:n,isArray:s}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:fN(e.expression,r.object),prefix:Mi(r.property)?"":e.expression.slice(Ia(r.property),i),throwOnSideEffect:Iue(r)}),o=Ia(r.property)-1,a=/^[$a-z_][0-9a-z_$]*$/i;for(let u of n)a.test(u.label)||(u.text=`[${JSON.stringify(u.label)}]`,u.start=o,u.length=1);if(s){let u="index";n.unshift({label:`[${u}]`,text:`[${u}]`,type:"property",sortText:"~~[",start:o,selectionStart:1,selectionLength:u.length,length:1})}return n}async completePropertyAccess({executionContextId:e,stackFrame:r,expression:i,prefix:n,isInGlobalScope:s=!1,throwOnSideEffect:o=!1}){let a={expression:`(${i})`,objectGroup:"console",silent:!0,throwOnSideEffect:o},u=r&&r.callFrameId(),c=await this.evaluator.evaluate(u?{...a,callFrameId:u}:{...a,contextId:e},{stackFrame:r});if(!c||c.exceptionDetails)return{result:[],isArray:!1};if(!c.result.objectId){let l={...a,returnByValue:!0,throwOnSideEffect:!1,expression:o3.expr(`(${i})`,JSON.stringify(n),JSON.stringify(s))},p=await this.evaluator.evaluate(u?{...l,callFrameId:u}:{...l,contextId:e});return!p||p.exceptionDetails?{result:[],isArray:!1}:p.result.value}try{return(await Cx({cdp:this.cdp,args:[void 0,n,s],objectId:c.result.objectId,returnByValue:!0})).value}catch{return{result:[],isArray:!1}}finally{this.cdp.Runtime.releaseObject({objectId:c.result.objectId})}}async defaultCompletions(e,r=""){for(let i of["self","global","this"]){let{result:n}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:i,prefix:r,isInGlobalScope:!0});if(e.stackFrame){let s=r.toLowerCase(),o=new Set(n.map(a=>a.label));for(let a of await e.stackFrame.completions())o.has(a.label)||!a.label.toLowerCase().includes(s)||(o.add(a.label),n.push(a))}return n.push(...this.syntheticCompletions(e,r)),n}return this.syntheticCompletions(e,r)}syntheticCompletions(e,r){return this.evaluator.hasReturnValue&&Eo.startsWith(r)?[{sortText:`~${Eo}`,label:Eo,type:"variable"}]:[]}};Vp=$([(0,km.injectable)(),w(0,(0,km.inject)(ln)),w(1,(0,km.inject)(St))],Vp);var Bb=I(Se());var Vs=class{constructor(e,r){this._tokens=[];this._separator=r||"",this._budget=e-1-this._separator.length}append(e){if(e.length>this.budget()){this.appendEllipsis();return}this._append(e)}_append(e){this._tokens.length&&(this._budget-=this._separator.length),this._tokens.push(e),this._budget-=e.length}appendEllipsis(){this._tokens[this._tokens.length-1]!=="\u2026"&&this._append("\u2026")}checkBudget(){return this._budget<=0&&this.appendEllipsis(),this._budget>0}budget(){return this._budget-(this._tokens.length?this._separator.length:0)}build(){return this._tokens.join(this._separator)}isEmpty(){return!this._tokens.length}};var P3=I(C3());var Bue=1e4;function Uue(t,e){if(!t.includes("%"))return[{type:"string",value:t}];let r=[];function i(u){if(!u)return;let c=r[r.length-1];(c==null?void 0:c.type)==="string"?c.value+=u:r.push({type:"string",value:u})}function n(u,c,l){r.push({type:"specifier",specifier:u,precision:c,substitutionIndex:l})}let s=0,o=0,a=new RegExp(`%%|%(?:(\\d+)\\$)?(?:\\.(\\d*))?([${e.join("")}])`,"g");for(let u=a.exec(t);u;u=a.exec(t)){let c=u.index;if(c>s&&i(t.substring(s,c)),u[0]==="%%")i("%");else{let[,l,p,f]=u;l&&Number(l)>0&&(o=Number(l)-1);let h=p?Number(p):void 0;n(f,h,o),++o}s=c+u[0].length}return i(t.substring(s)),r}function kx(t,e,r){let i=Uue(t,Array.from(r.keys())),n=new Set,s=r.get("");if(!s)throw new Error("Expected to hav a default formatter");let o=new Vs(Bue),a=!1;for(let u=0;o.checkBudget()&&u<i.length;++u){let c=i[u];if(c.type==="string"){o.append(c.value);continue}let l=c.substitutionIndex;if(l>=e.length){o.append("%"+(c.precision||"")+c.specifier);continue}n.add(l),c.specifier==="c"&&(a=!0);let p=r.get(c.specifier)||s;o.append(p(e[l],{budget:o.budget(),quoted:!1}))}a&&o.append("\x1B[0m");for(let u=0;o.checkBudget()&&u<e.length;++u)n.has(u)||(n.add(u),(t||u)&&o.append(" "),o.append(s(e[u],{budget:o.budget(),quoted:!1})));return{result:o.build(),usedAllSubs:n.size===e.length}}function D3(t){try{return new P3.default(t).ansi256().object().ansi256}catch{}}function L3(t){let e=/\s*(.*?)\s*:\s*(.*?)\s*(?:;|$)/g,r="\x1B[0m",i=e.exec(t);for(;i!==null;){if(i.length===3)switch(i[1]){case"color":let n=D3(i[2]);n&&(r+=`\x1B[38;5;${n}m`);break;case"background":case"background-color":let s=D3(i[2]);s&&(r+=`\x1B[48;5;${s}m`);break;case"font-weight":i[2]==="bold"&&(r+="\x1B[1m");break;case"font-style":i[2]==="italic"&&(r+="\x1B[3m");break;case"text-decoration":i[2]==="underline"&&(r+="\x1B[4m");break;default:}i=e.exec(t)}return r}var $3=t=>t.replace(/\\/gm,"\\\\").replace(/\n/gm,"\\n").replace(/\r/gm,"\\r").replace(/\t/gm,"\\t"),que={budget:1e5,quoted:!0},T3={budget:1e3,quoted:!0,postProcess:$3},Wue={budget:1/0,quoted:!1},Vue={budget:1e3,quoted:!0,postProcess:$3},Gue={budget:1e5,quoted:!0},Ob=t=>{switch(t){case"repl":return que;case"hover":return T3;case"propertyValue":return T3;case"watch":return Vue;case"copy":case"clipboard":return Wue;default:return Gue}};var Kue=30,zue=100,Rx=20,Xue=1e4,Jue=3,k3=120,Mx=new Set(["null","regexp","date"]);function xc(t){return t.type==="function"||t.type==="object"&&!Mx.has(t.subtype)}function Ox(t){return t.subtype==="array"||t.subtype==="typedarray"}function Cc(t,e,r){var s,o;let i=Ob(e),n=Nb(t,i,r);return((s=t.preview)==null?void 0:s.subtype)==="regexp"?n:((o=i.postProcess)==null?void 0:o.call(i,n))??n}function Nb(t,e,r){return t.type==="function"?t.description?N3(t.description,e.budget):"<function>":t.type==="object"&&t.subtype==="node"?t.description:"preview"in t&&t.preview?Fb(t.preview,e.budget,r):O3(t,e.budget,e.quoted,r)}function Fb(t,e,r){return Ox(t)?Yue(t,e):t.subtype==="internal#entry"?Ts(t.description||"",e):t.type==="function"?N3(t.description,e):xc(t)?Que(t,e,r):ece(t,e,r)}function Yue(t,e){let r=new Vs(e),i=t.description,n=i.match(/[^(]*\(([\d]+)\)/);if(!n)return i;let s=parseInt(n[1],10);i.startsWith("Array(")&&(i=i.substring(5)),r.append(Ts(i,r.budget())),r.append(" ");let o=new Vs(r.budget()-2,", "),a=-1;for(let u of t.properties){if(!o.checkBudget())break;if(isNaN(u.name))continue;let c=parseInt(u.name,10);c>a+1&&o.appendEllipsis(),a=c,o.append(Nm(u,o.budget()))}s>a+1&&o.appendEllipsis();for(let u of t.properties){if(!o.checkBudget())break;isNaN(u.name)&&o.append(Nm(u,o.budget(),u.name))}return t.overflow&&o.appendEllipsis(),r.append("["+o.build()+"]"),r.build()}function Que(t,e,r){let i=new Vs(e," ");t.description!=="Object"&&i.append(Ts(t.description,i.budget()));let n=new Map,s=t.properties||[];for(let f of s)n.set(f.name,f);let o=n.get("[[PrimitiveValue]]");if(o)return i.append(`(${Nm(o,i.budget()-2)})`),i.build();let a=n.get("[[PromiseStatus]]"),u=n.get("[[PromiseValue]]");if(a&&u)return a.value==="pending"?i.append(`{<${a.value}>}`):i.append(`{${Nm(u,i.budget()-2,`<${a.value}>`)}}`),i.build();let c=n.get("[[GeneratorStatus]]");if(c)return i.append(`{<${c.value}>}`),i.build();let l=new Vs(i.budget()-2,", ");for(let f of s){if(!l.checkBudget())break;l.append(Nm(f,l.budget(),f.name))}for(let f of t.entries||[]){if(!l.checkBudget())break;if(f.key){let h=Fb(f.key,Math.min(Rx,l.budget()),r),g=Fb(f.value,Math.min(Rx,l.budget()-h.length-4),r);l.append(Xp(h," => ",g,l.budget()))}else l.append(Fb(f.value,Math.min(Rx,l.budget()),r))}t.overflow&&l.appendEllipsis();let p=l.build();return p?i.append("{"+p+"}"):i.isEmpty()&&i.append("{}"),i.build()}function R3(t,e){return t.length<=e?t:"\u2026"}function Zue(t,e){return t.length>=e?t.slice(0,e-1)+"\u2026":t}function ece(t,e,r){if(t.type==="object"&&t.subtype==="null")return R3("null",e);if(t.type==="undefined")return R3("undefined",e);if(t.type==="string"){let i=t.description??t.value;return r!=null&&r.hex&&(i=Buffer.from(i,"utf8").toString("hex")),cp(i,e)}return t.type==="number"||t.type==="bigint"?Fm(t,!1,e,r):Zue(t.description||"",e)}function Xp(t,e,r,i){return t===void 0?cp(r,i):t.length+e.length>i?Ts(t,i):`${t}${e}${cp(r,i-t.length-e.length)}`}function Nm(t,e,r){return e=Math.min(e,zue),t.type==="function"?Xp(r,": ","\u0192",e):t.type==="object"&&t.value==="Object"?Xp(r,": ","{\u2026}",e):typeof t.value>"u"?Xp(r,": ",`<${t.type}>`,e):t.type==="string"?Xp(r,": ",`'${t.value}'`,e):Xp(r,": ",t.value??"unknown",e)}function O3(t,e,r,i){if(t.type==="string"){let n=t.value||(t.description?t.description:"");i!=null&&i.hex&&(n=Buffer.from(n,"utf8").toString("hex"),r=!1);let s=cp(n,r?e-2:e);return r?`'${s}'`:s}return t.type==="undefined"?"undefined":t.subtype==="null"?"null":t.type==="bigint"||t.type==="number"?Fm(t,!1,e,i):t.description?Ts(t.description,Math.max(e,1e5)):Ts(String("value"in t?t.value:t.description),e)}function N3(t,e){let r=new Vs(e),i=t.replace(/^function [gs]et /,"function ").replace(/^function [gs]et\(/,"function(").replace(/^[gs]et /,""),n=i.match(/^(async\s+function)/),s=i.startsWith("function*"),o=i.startsWith("*"),a=!s&&i.startsWith("function"),u=i.startsWith("class ")||i.startsWith("class{"),c=i.indexOf("=>"),l=!n&&!s&&!a&&!u&&c>0,p;if(u){p=i.substring(5);let g=/^[^{\s]+/.exec(p.trim()),H="";g&&(H=g[0].trim()||""),h("class",p,H)}else if(n)p=i.substring(n[1].length),h("async \u0192",p,f(p));else if(s)p=i.substring(9),h("\u0192*",p,f(p));else if(o)p=i.substring(1),h("\u0192*",p,f(p));else if(a)p=i.substring(8),h("\u0192",p,f(p));else if(l){let g=i;i.length>Kue&&(g=i.substring(0,c+2)+" {\u2026}"),h("",i,g)}else h("\u0192",i,f(i));return r.build();function f(g){let H=g.indexOf("("),b=g.match(/\)\s*{/),_=b&&b.index||0;if(H!==-1&&b&&_>H){let k=g.substring(0,H).trim()||"",U=g.substring(H,_+1);return k+U}return"()"}function h(g,H,b){r.checkBudget()&&(g.length&&r.append(g+" "),H=H.trim(),H.endsWith(" { [native code] }")&&(H=H.substring(0,H.length-18)),r.budget()>=H.length?r.append(H):r.append(b.replace(/\n/g," ")))}}function Dc(t){let e=t;if(e.type!=="object"||e.subtype==="null")return{title:O3(e,Xue,!1,void 0)};let r=e.description??e.className??"Error",i=/^\s+at\s/m.exec(r);if(!i){let n=r.lastIndexOf(`
`);return n===-1?{title:r}:{title:r.substring(0,n)}}return{title:r.substring(0,i.index-1),stackTrace:r.substring(i.index+2)}}function Fm(t,e,r,i){if(t.type==="number"){if("unserializableValue"in t)return t.unserializableValue;let o=t.value||+t.description;return i!=null&&i.hex?o.toString(16):String(o)}if(t.type==="bigint"){let o=t.unserializableValue||t.description;return i!=null&&i.hex?BigInt(o.slice(0,-1)).toString(16):o}let n=t,s=typeof n.value=="number"?n.value:+String(n.description);return Ts(String(e?Math.floor(s):s),r)}function tce(t,e){return cp(String(typeof t.value<"u"?t.value:t.description),e)}function F3(t){var l;let e=[],r=new Set([void 0]),i=new Map;for(let p of t.properties.filter(f=>f.valuePreview)){let f=new Map;f.set(void 0,p.name),i.set(void 0,Math.max(i.get(void 0)||0,p.name.length)),e.push(f),(l=p.valuePreview)==null||l.properties.map(h=>{h.value&&(r.add(h.name),f.set(h.name,h.value),i.set(h.name,Math.max(i.get(h.name)||0,h.value.length)))})}for(let p of r.values())p&&i.set(p,Math.max(i.get(p)||0,p.length));let n=Array.from(i.values()).reduce((p,f)=>p+f,0),s=k3-4-(r.size-1)*3;if(n>s){let p=s/n;for(let f of i.keys()){let h=Math.max(Jue,i.get(f)*p|0);i.set(f,h)}}let o=[];for(let p of r.values())o.push("-".repeat(i.get(p)));let a="[-"+o.join("-|-")+"-]",u=[];u.push(a.replace("[","\u256D").replace(/\|/g,"\u252C").replace("]","\u256E").replace(/-/g,"\u2504"));let c=[];for(let p of r.values())c.push(M3(p||"",i.get(p)));u.push("\u250A "+c.join(" \u250A ")+" \u250A"),u.push(a.replace("[","\u251C").replace(/\|/g,"\u253C").replace("]","\u2524").replace(/-/g,"\u2504"));for(let p of e){let f=[];for(let h of r.values())f.push(M3(p.get(h)||"",i.get(h)));u.push("\u250A "+f.join(" \u250A ")+" \u250A")}return u.push(a.replace("[","\u2570").replace(/\|/g,"\u2534").replace("]","\u256F").replace(/-/g,"\u2504")),u.map(p=>Ts(p,k3)).join(`
`)}var Nx=new Map([["",(t,e)=>Nb(t,e)],["s",(t,e)=>tce(t,e.budget)],["i",(t,e)=>Fm(t,!0,e.budget,void 0)],["d",(t,e)=>Fm(t,!0,e.budget,void 0)],["f",(t,e)=>Fm(t,!1,e.budget,void 0)],["c",t=>L3(t.value)],["o",(t,e)=>Nb(t,e)],["O",(t,e)=>Nb(t,e)]]);function M3(t,e){return t.length===e?t:t.length<e?t+" ".repeat(e-t.length):Ts(t,e)}var U3=fr(function(){return this});var Ub=class{constructor(e,r){this.protoObj=e;this.cdp=r}async toDap(e){if(!this.protoObj.objectId)return{category:"stderr",output:Bb.t("Only objects can be queried")};let r=await this.cdp.Runtime.queryObjects({prototypeObjectId:this.protoObj.objectId,objectGroup:"console"});if(await this.cdp.Runtime.releaseObject({objectId:this.protoObj.objectId}),!r)return{category:"stderr",output:Bb.t("Could not query the provided object")};let i;try{i=await U3({cdp:this.cdp,args:[],objectId:r.objects.objectId,objectGroup:"console",generatePreview:!0})}catch(o){return{category:"stderr",output:Bb.t(o.message)}}let n="\x1B[32mobjects: "+Cc(i,"repl")+"\x1B[0m";return{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput(n,[i]).id}}};var j3=/^(\W*at .*\()(.*):(\d+):(\d+)(\))$/,q3=/^(\W*at )(.*):(\d+):(\d+)$/,Ga=class{constructor(e){this.stack=e}static isStackLike(e){return j3.test(e)||q3.test(e)}*[Symbol.iterator](){for(let e of this.stack.split(`
`)){let r=j3.exec(e)||q3.exec(e);if(!r){yield e+`
`;continue}let[,i,n,s,o,a]=r;i&&(yield i),yield new Fx(n,new rr(Number(s),Number(o))),a&&(yield a),yield`
`}}},Fx=class{constructor(e,r){this.path=e;this.position=r}toString(){return`${this.path}:${this.position.lineNumber}:${this.position.columnNumber}`}};var Si=I(Se());var Bm=I(Y());async function Bx(t){let e=await t.uiLocation();return e?e.source.blackboxed()?2:si(e.source)&&!e.isMapped&&e.unmappedReason===3?1:0:0}var rce=new Set(["breakpoint","exception","entry"]),ice=256,Ka=class{constructor(e,r){this.launchConfig=e;this.logger=r;this._smartStepCount=0}resetSmartStepCount(){this._smartStepCount>0&&(this.logger.verbose("internal",`smartStep: skipped ${this._smartStepCount} steps`),this._smartStepCount=0)}async getSmartStepDirection(e,r){if(!this.launchConfig.smartStep||rce.has(e.reason))return;let i=(await e.stackTrace.loadFrames(1)).find(Xu(Jt));if((i&&await Bx(i))===0){this.resetSmartStepCount();return}return this._smartStepCount++>ice?2:(r==null?void 0:r.reason)==="step"?r.direction:0}};Ka=$([(0,Bm.injectable)(),w(0,(0,Bm.inject)(je)),w(1,(0,Bm.inject)(le))],Ka);var W3=fr(function(){return[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")]}),V3=cc(function(t,e){let r={},i="<<default preview>>";if(typeof this!="object"||!this)return r;for(let[n,s]of Object.entries(this)){if(e)try{let o=e.call(s,i);if(o!==i){r[n]=String(o);continue}}catch(o){r[n]=`<<indescribable>>${JSON.stringify([String(o),n])}`;continue}if(typeof s=="object"&&s){let o;for(let a of runtimeArgs[0])try{o=s[a]();break}catch{}!o&&!String(s.toString).includes("[native code]")&&(o=String(s)),o&&!o.startsWith("[object ")&&(r[n]=o.length>=t?o.slice(0,t)+"\u2026":o)}}return r}),jb=cc(function(t,e){if(e)try{let r="<<default preview>>",i=e.call(this,r);if(i!==r)return String(i)}catch(r){return`<<indescribable>>${JSON.stringify([String(r),"object"])}`}if(typeof this=="object"&&this){let r;for(let i of[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")])try{r=this[i]();break}catch{}if(!r&&!String(this.toString).includes("[native code]")&&(r=String(this)),r&&!r.startsWith("[object "))return r.length>=t?r.slice(0,t)+"\u2026":r}});var Ge=I(Se()),oU=require("crypto");var oi=class{constructor(e=process.hrtime()){this.value=e}get ms(){return this.s*1e3}get s(){return this.value[0]+this.value[1]/1e9}elapsed(){return new oi().subtract(this)}subtract(e){let r=this.value[1]-e.value[1],i=this.value[0]-e.value[0];return r<0&&(r+=1e9,i--),new oi([i,r])}};var Jp=class{constructor(e,r,i,n,s,o){this.launchConfig=e;this.targetInfo=r;this.parentTarget=i;this.targetOriginValue=n;this.cdp=s;this.logger=o;this.onNameChanged=new X().event;this.attached=!1;this.isWaitingForDebugger=!0;s.pause()}id(){return this.targetInfo.targetId}name(){return this.targetInfo.title}fileName(){return this.targetInfo.url}type(){return"node"}parent(){return this.parentTarget}children(){return[]}canStop(){return!1}stop(){}canRestart(){return!1}restart(){}canAttach(){return!this.attached}async attach(){return await this.cdp.Runtime.enable({}),await this.cdp.Debugger.enable({}),this.attached=!0,this.cdp}canDetach(){return this.attached}async detach(){await this.cdp.Debugger.resume({}),await this.cdp.NodeWorker.detach({sessionId:this.targetInfo.targetId}),this.attached=!1}targetOrigin(){return this.targetOriginValue}afterBind(){return this.cdp.resume(),Promise.resolve()}async runIfWaitingForDebugger(){this.isWaitingForDebugger=!1,await this.cdp.Runtime.runIfWaitingForDebugger({})}initialize(){return Promise.resolve()}waitingForDebugger(){return this.isWaitingForDebugger}supportsCustomBreakpoints(){return!1}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?Ve(e):e}executionContextName(){return this.targetInfo.title}};var qt=I(Se()),qb=new Map;function Um(){if(qb.size)return qb;function t(s,o){for(let a of o)a.group=s,qb.set(a.id,a)}function e(s,o){let a=o||s;return{id:"instrumentation:"+s,title:a,group:"",details:u=>{if(s==="webglErrorFired"){let c=u.webglErrorName;return c=c.replace(/^.*(0x[0-9a-f]+).*$/i,"$1"),{short:c,long:qt.t('Paused on WebGL Error instrumentation breakpoint, error "{0}"',c)}}return s==="scriptBlockedByCSP"&&u.directiveText?{short:qt.t('CSP violation "{0}"',u.directiveText),long:qt.t('Paused on Content Security Policy violation instrumentation breakpoint, directive "{0}"',u.directiveText)}:{short:a,long:qt.t('Paused on instrumentation breakpoint "{0}"',a)}},apply:async(u,c)=>c?!!await u.DOMDebugger.setInstrumentationBreakpoint({eventName:s}):!!await u.DOMDebugger.removeInstrumentationBreakpoint({eventName:s})}}function r(s,o,a){let u=o===void 0?"*":typeof o=="string"?[o]:o;return{id:"listener:"+s,title:a||s,group:"",details:c=>{let l=(c.targetName||"*").toLowerCase();return{short:l+"."+s,long:qt.t('Paused on event listener breakpoint "{0}", triggered on "{1}"',s,l)}},apply:async(c,l)=>{let p=!0;for(let f of u)l?p=p&&!!await c.DOMDebugger.setEventListenerBreakpoint({eventName:s,targetName:f}):p=p&&!!await c.DOMDebugger.removeEventListenerBreakpoint({eventName:s,targetName:f});return p}}}t("Animation",[e("requestAnimationFrame",qt.t("Request Animation Frame")),e("cancelAnimationFrame",qt.t("Cancel Animation Frame")),e("requestAnimationFrame.callback",qt.t("Animation Frame Fired"))]),t("Canvas",[e("canvasContextCreated",qt.t("Create canvas context")),e("webglErrorFired",qt.t("WebGL Error Fired")),e("webglWarningFired",qt.t("WebGL Warning Fired"))]),t("Script",[e("scriptFirstStatement",qt.t("Script First Statement")),e("scriptBlockedByCSP",qt.t("Script Blocked by Content Security Policy"))]),t("Geolocation",[e("Geolocation.getCurrentPosition","getCurrentPosition"),e("Geolocation.watchPosition","watchPosition")]),t("Notification",[e("Notification.requestPermission","requestPermission")]),t("Parse",[e("Element.setInnerHTML",qt.t("Set innerHTML")),e("Document.write","document.write")]),t("Timer",[e("setTimeout"),e("clearTimeout"),e("setInterval"),e("clearInterval"),e("setTimeout.callback",qt.t("setTimeout fired")),e("setInterval.callback",qt.t("setInterval fired"))]),t("Window",[e("DOMWindow.close","window.close")]),t("WebAudio",[e("audioContextCreated",qt.t("Create AudioContext")),e("audioContextClosed",qt.t("Close AudioContext")),e("audioContextResumed",qt.t("Resume AudioContext")),e("audioContextSuspended",qt.t("Suspend AudioContext"))]);let i=["audio","video"];t("Media",[r("play",i),r("pause",i),r("playing",i),r("canplay",i),r("canplaythrough",i),r("seeking",i),r("seeked",i),r("timeupdate",i),r("ended",i),r("ratechange",i),r("durationchange",i),r("volumechange",i),r("loadstart",i),r("progress",i),r("suspend",i),r("abort",i),r("error",i),r("emptied",i),r("stalled",i),r("loadedmetadata",i),r("loadeddata",i),r("waiting",i)]),t("Picture-in-Picture",[r("enterpictureinpicture","video"),r("leavepictureinpicture","video"),r("resize","PictureInPictureWindow")]),t("Clipboard",[r("copy"),r("cut"),r("paste"),r("beforecopy"),r("beforecut"),r("beforepaste")]),t("Control",[r("resize"),r("scroll"),r("zoom"),r("focus"),r("blur"),r("select"),r("change"),r("submit"),r("reset")]),t("Device",[r("deviceorientation"),r("devicemotion")]),t("DOM Mutation",[r("DOMActivate"),r("DOMFocusIn"),r("DOMFocusOut"),r("DOMAttrModified"),r("DOMCharacterDataModified"),r("DOMNodeInserted"),r("DOMNodeInsertedIntoDocument"),r("DOMNodeRemoved"),r("DOMNodeRemovedFromDocument"),r("DOMSubtreeModified"),r("DOMContentLoaded")]),t("Drag / drop",[r("drag"),r("dragstart"),r("dragend"),r("dragenter"),r("dragover"),r("dragleave"),r("drop")]),t("Keyboard",[r("keydown"),r("keyup"),r("keypress"),r("input")]),t("Load",[r("load"),r("beforeunload"),r("unload"),r("abort"),r("error"),r("hashchange"),r("popstate")]),t("Mouse",[r("auxclick"),r("click"),r("dblclick"),r("mousedown"),r("mouseup"),r("mouseover"),r("mousemove"),r("mouseout"),r("mouseenter"),r("mouseleave"),r("mousewheel"),r("wheel"),r("contextmenu")]),t("Pointer",[r("pointerover"),r("pointerout"),r("pointerenter"),r("pointerleave"),r("pointerdown"),r("pointerup"),r("pointermove"),r("pointercancel"),r("gotpointercapture"),r("lostpointercapture")]),t("Touch",[r("touchstart"),r("touchmove"),r("touchend"),r("touchcancel")]),t("Worker",[r("message"),r("messageerror")]);let n=["xmlhttprequest","xmlhttprequestupload"];return t("XHR",[r("readystatechange",n),r("load",n),r("loadstart",n),r("loadend",n),r("abort",n),r("error",n),r("progress",n),r("timeout",n)]),qb}var Ux=cc(function(t,e){let r=" ".repeat(e),i=`
`;function n(o){if(o instanceof Uint8Array)return Uint8Array;if(o instanceof Uint8ClampedArray)return Uint8ClampedArray;if(o instanceof Uint16Array)return Uint16Array;if(o instanceof Uint32Array)return Uint32Array;if(o instanceof BigUint64Array)return BigUint64Array;if(o instanceof Int8Array)return Int8Array;if(o instanceof Int32Array)return Int32Array;if(o instanceof BigInt64Array)return BigInt64Array;if(o instanceof Float32Array)return Float32Array;if(o instanceof Float64Array)return Float64Array}function s(o,a=0,u=[]){switch(typeof o){case"bigint":return`${o}n`;case"boolean":return o.toString();case"function":{let p=o.toString().replace(/^[^\s]+\(/,"function(").split(/\r?\n/g),f=/^$/;for(let h of p){let g=/^[ \t]+/.exec(h);if(g){f=new RegExp(`^[ \\t]{0,${g[0].length}}`);break}}return p.map((h,g)=>g===0?h:(h=h.replace(f,""),g===p.length-1?r.repeat(a)+h:r.repeat(a+1)+h)).join(i)}case"number":return`${o}`;case"object":if(o===null)return"null";if(u.includes(o))return"[Circular]";if(o instanceof Date)return`"${o.toISOString()}"`;if(typeof Node<"u"&&t instanceof Node)return t.outerHTML;let c=n(o);if(c)return`new ${c.name}([${o.join(", ")}])`;if(o instanceof ArrayBuffer)return`new Uint8Array([${new Uint8Array(o).join(", ")}]).buffer`;if(o instanceof Array)return["[",...o.map(p=>r.repeat(a+1)+s(p,a+1,[...u,o])+","),r.repeat(a)+"]"].join(i);let l=o;return["{",...Object.keys(l).map(p=>r.repeat(a+1)+(/^[$a-z_][0-9a-z_$]*$/i.test(p)?p:JSON.stringify(p))+": "+s(l[p],a+1,[...u,o])+","),r.repeat(a)+"}"].join(i);case"string":return JSON.stringify(o);case"symbol":return o.toString();case"undefined":return"undefined";default:return String(o)}}try{return s(t)}catch{return""+t}}),G3=fr(`
  function(spaces2) {
    const result = ${Ux.expr("this","spaces2")};
    return result;
  }
`);var Vn=I(Se());var Pc=I(Y());var K3=fr(function(){let t={__proto__:this.__proto__},e=Object.getOwnPropertyNames(this);for(let r=0;r<e.length;++r){let i=e[r],n=i>>>0;if(String(n>>>0)===i&&n>>>0!==4294967295)continue;let s=Object.getOwnPropertyDescriptor(this,i);s&&Object.defineProperty(t,i,s)}return t});var z3=fr(function(t,e){let r={},i=t===-1?0:t,n=e===-1?this.length:t+e;for(let s=i;s<n&&s<this.length;++s){let o=Object.getOwnPropertyDescriptor(this,s);o&&Object.defineProperty(r,s,o)}return r});var X3=fr(function(t){return t.call(this)});var jx=fr(function(t,e){let{buffer:r,byteLength:i,byteOffset:n}=this instanceof ArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,s=n+Math.min(t,i),o=Math.max(0,Math.min(e,i-t));return a(new Uint8Array(r,s,o));function a(u){let c="0123456789abcdef",l="";for(let p=0;p<u.length;p++){let f=u[p];l+=c[f>>>4]+c[f&15]}return l}});var qx=fr(function(t,e){let r=u(e),{buffer:i,byteLength:n,byteOffset:s}=this instanceof ArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,o=s+Math.min(t,n),a=Math.max(0,Math.min(r.length,n-t));return new Uint8Array(i,o,a).set(r.subarray(0,a)),a;function u(c){let l=new Uint8Array(c.length>>>1);for(let p=0;p<c.length;p+=2)l[p>>>1]=parseInt(c.slice(p,p+2),16);return l}});var Vm=(()=>{let t=0,e=2147483647-1;return()=>t++%e+1})(),tC=t=>{if(typeof t=="string")return{value:t};let e=t;return e.objectId?{objectId:e.objectId}:e.unserializableValue?{unserializableValue:e.unserializableValue}:{value:e.value}},sce=new Set(["typedarray","dataview","arraybuffer","webassemblymemory"]);var rU=1024,oce=/^[$a-z_][0-9a-z_$]*$/i,ace=/^#[0-9a-z_$]+$/i,uce=t=>t.hasOwnProperty("configurable"),J3=(t,e,r)=>{let i=dN(t,Cv(e),r);return Ao(i)},Y3="<<indescribable>>",iU=t=>{if(!t.startsWith(Y3))return t;let e,r;try{[e,r]=JSON.parse(t.slice(Y3.length))}catch{return t}return Vn.t("{0} (couldn't describe: {1})",e,r)},Wx=t=>!!t&&typeof t=="object"&&"readMemory"in t&&"writeMemory"in t,Q3={["PARAMETER"]:{name:Vn.t("Parameters"),sortOrder:-10},["LOCAL"]:{name:Vn.t("Locals"),sortOrder:-9},["GLOBAL"]:{name:Vn.t("Globals"),sortOrder:-8}},Lc=class{constructor(e,r,i,n,s,o,a){this.cdp=e;this.parent=r;this.vars=n;this.locationProvider=s;this.currentRef=o;this.settings=a;this.name=i.name,this.presentationHint=i.presentationHint,this.sortOrder=i.sortOrder||0}get customDescriptionGenerator(){return this.settings.customDescriptionGenerator}createVariable(e,r,...i){var s;let n=new e(new Lc(this.cdp,(s=this.currentRef)==null?void 0:s.call(this),r,this.vars,this.locationProvider,()=>n,this.settings),...i);return n.id>0&&this.vars.add(n),n}createVariableByType(e,r,i){if(Ox(r))return this.createVariable(Gb,e,r);if(r.objectId){if(r.subtype==="map"||r.subtype==="set")return this.createVariable(Xx,e,r,i);if(!Mx.has(r.subtype))return this.createVariable(qm,e,r,i)}return this.createVariable(ai,e,r)}async getDescriptionSymbols(e){return this.settings.descriptionSymbols??=W3({cdp:this.cdp,args:[],objectId:e}).then(r=>({objectId:r.objectId}),()=>({value:[]})),await this.settings.descriptionSymbols}async createObjectPropertyVars(e,r){var c;let i=[];if(this.settings.customPropertiesGenerator){let{result:l,errorDescription:p}=await this.evaluateCodeForObject(e,this.settings.customPropertiesGenerator,[]);l&&l.type!=="undefined"?e=l:i.push([this.createVariable(zx,{name:"",sortOrder:-1},l,(l==null?void 0:l.description)||p||Vn.t("Unknown error"))])}if(!e.objectId)return[];r&&this.cdp.DotnetDebugger.setEvaluationOptions({options:r,type:"variable"});let[n,s,o]=await Promise.all([this.cdp.Runtime.getProperties({objectId:e.objectId,accessorPropertiesOnly:!0,ownProperties:!1,generatePreview:!0}),this.cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0,generatePreview:!0}),this.cdp.Runtime.callFunctionOn({functionDeclaration:V3.decl(`${rU}`,this.settings.customDescriptionGenerator||"null"),arguments:[await this.getDescriptionSymbols(e.objectId)],objectId:e.objectId,throwOnSideEffect:!0,returnByValue:!0}).then(l=>(l==null?void 0:l.result.value)||{}).catch(()=>({}))]);if(!n||!s)return[];let a=new Map,u=[];for(let l of n.result){if(l.symbol){u.push(l);continue}l.name==="__proto__"&&((c=s.internalProperties)!=null&&c.some(p=>p.name==="[[Prototype]]"))||a.set(l.name,l)}for(let l of s.result)l.get||l.set||(l.symbol?u.push(l):a.set(l.name,l));for(let l of[a.values(),u.values()])for(let p of l)i.push(this.createPropertyVar(p,e,o!=null&&o.hasOwnProperty(p.name)?iU(o[p.name]):void 0));for(let l of s.privateProperties??[])i.push(this.createPropertyVar(l,e,void 0,{presentationHint:{visibility:"private"},sortOrder:1}));for(let l of s.internalProperties||[]){if(l.name==="[[StableObjectId]]")continue;let p;l.name==="[[FunctionLocation]]"&&l.value&&l.value.subtype==="internal#location"?p=this.createVariable(Kx,{name:l.name,presentationHint:{visibility:"internal",attributes:["readOnly"]},sortOrder:2},l.value):l.value!==void 0&&(p=this.createVariableByType({name:l.name,presentationHint:{visibility:"internal"},sortOrder:2},l.value)),p&&i.push([p])}return mo(await Promise.all(i))}async createPropertyVar(e,r,i,n){let s=[],o=e.get&&e.get.type!=="undefined",a=e.set&&e.set.type!=="undefined",u={name:e.name,presentationHint:{},sortOrder:0,...n};return n||(uce(e)?(e.enumerable===!1&&!o&&(u.presentationHint.visibility="internal",u.sortOrder=1),(e.writable===!1||o&&!a)&&(u.presentationHint.attributes=["readOnly"])):(u.presentationHint.visibility="private",u.sortOrder=1)),"value"in e&&e.value&&s.push(this.createVariableByType(u,e.value,i)),o?s.push(this.createVariable(Qx,u,e.get,r)):a&&s.push(this.createVariable(Yx,u,e.set)),s}async evaluateCodeForObject(e,r,i){try{let n=await this.cdp.Runtime.callFunctionOn({objectId:e.objectId,functionDeclaration:r,arguments:i.map(tC)});if(n){if(n.exceptionDetails===void 0)return{result:n.result};if(n&&n.result.description)return{errorDescription:n.result.description}}return{errorDescription:Vn.t("Unknown error")}}catch(n){return{errorDescription:n.stack||n.message||String(n)}}}},cce=t=>typeof t=="number"||/^[0-9]+$/.test(t),ai=class{constructor(e,r){this.context=e;this.remoteObject=r;this.id=Vm()}get name(){return this.context.name}get sortOrder(){return this.context.sortOrder}get accessor(){let{parent:e,name:r}=this.context;if(e instanceof Wm)return e.accessor;if(!(e instanceof ai))return this.context.name;let i=e.context.parent;if(i instanceof ai){if(this.remoteObject.subtype==="internal#entry")return`[...${i.accessor}.entries()][${+r}]`;if(e.remoteObject.subtype==="internal#entry")return`${e.accessor}[${this.name==="key"?0:1}]`}return cce(r)?`${e.accessor}[${r}]`:oce.test(r)?`${e.accessor}.${r}`:e.accessor==="this"&&ace.test(r)?`${e.accessor}.${r}`:`${e.accessor}[${JSON.stringify(r)}]`}async toDap(e,r){let i=this.context.name;return this.context.parent instanceof Yp&&(i=await this.context.parent.getRename(i)),Promise.resolve({name:i,value:Cc(this.remoteObject,e,r),evaluateName:this.accessor,type:this.remoteObject.type,variablesReference:0,presentationHint:this.context.presentationHint})}async setProperty(e,r){let i=await this.context.cdp.Runtime.callFunctionOn({objectId:this.remoteObject.objectId,functionDeclaration:`function(a) { return this[a] = ${r}; ${It()} }`,arguments:[tC(e)],silent:!0});if(!i)throw new re(it(Vn.t("Unable to set variable value")));if(i.exceptionDetails)throw new re(nU(i.exceptionDetails));return this.context.createVariableByType({name:e},i.result)}async getChildren(e){return Promise.resolve([])}},Wb=class{constructor(e){this.child=e;this.id=Vm()}getChildren(){return Promise.resolve([this.child])}},Vx=class extends ai{constructor(r,i,n,s){var o;super(r,{type:((o=n[0])==null?void 0:o.type)??"string"});this.value=i;this.args=n;this.stackTrace=s}toDap(){return Promise.resolve({name:this.context.name,value:this.value,variablesReference:this.stackTrace||this.args.some(xc)?this.id:0})}getChildren(r){let i=[],{args:n,stackTrace:s}=this;for(let o=0;o<n.length;++o)xc(n[o])&&i.push(this.context.createVariableByType({name:`arg${o}`,sortOrder:o},n[o]));return s&&i.push(this.context.createVariable(Gx,{name:"",sortOrder:Number.MAX_SAFE_INTEGER},this.remoteObject,s)),Promise.resolve(i)}},Gx=class extends ai{constructor(r,i,n){super(r,i);this.stacktrace=n}async toDap(){return{name:"",value:await this.stacktrace.format(),variablesReference:0}}},Kx=class extends ai{constructor(r,i){super(r,i);this.location=i.value}async toDap(){return{name:this.context.name,value:await this.context.locationProvider.renderDebuggerLocation(this.location),variablesReference:0,presentationHint:{visibility:"internal"}}}},zx=class extends ai{constructor(r,i,n){super(r,i);this.message=n}get accessor(){if(!(this.context.parent instanceof ai))throw new Error("ErrorVariable must have a parent Variable");return this.context.parent.accessor}toDap(){return Promise.resolve({name:this.context.name,value:this.message,variablesReference:0})}},Vb=Symbol("NoStringRepr"),qm=class extends ai{constructor(r,i,n){super(r,i);this.customStringRepr=n}async toDap(r,i){let[n,s]=await Promise.all([await super.toDap(r,i),await this.getValueRepresentation(r)]);return{...n,type:this.remoteObject.className||this.remoteObject.subtype||this.remoteObject.type,variablesReference:this.id,memoryReference:sce.has(this.remoteObject.subtype)?String(this.id):void 0,value:s}}async getValueRepresentation(r){if(typeof this.customStringRepr=="string")return this.customStringRepr;if(!this.context.parent&&this.remoteObject.objectId&&this.customStringRepr!==Vb)try{let i=await this.context.cdp.Runtime.callFunctionOn({functionDeclaration:jb.decl(`${rU}`,this.context.customDescriptionGenerator||"null"),objectId:this.remoteObject.objectId,returnByValue:!0});if(i!=null&&i.result.value)return this.customStringRepr=iU(i.result.value)}catch{this.customStringRepr=Vb}return this.context.name==="__proto__"&&this.remoteObject.description||Cc(this.remoteObject,r)}async readMemory(r,i){let n=await jx({cdp:this.context.cdp,args:[r,i],objectId:this.remoteObject.objectId,returnByValue:!0});return Buffer.from(n.value,"hex")}async writeMemory(r,i){return(await qx({cdp:this.context.cdp,args:[r,i.toString("hex")],objectId:this.remoteObject.objectId,returnByValue:!0})).value}getChildren(r){return this.context.createObjectPropertyVars(this.remoteObject,r.evaluationOptions)}},Z3="[[Entries]]",Xx=class extends qm{constructor(r,i){var s;super(r,i,Vb);this.baseChildren=Ee(()=>super.getChildren({variablesReference:this.id}));let n=i.preview;this.isMap=n.subtype==="map",this.size=Number((s=n.properties.find(o=>o.name==="size"))==null?void 0:s.value)??void 0}async toDap(r){let i=await super.toDap(r);return this.size&&this.size>100&&(i.indexedVariables=this.size),i}async getChildren(r){var s;let i=await this.baseChildren();return[...(await((s=i.find(o=>o.name===Z3))==null?void 0:s.getChildren(r))||[]).filter(o=>o.sortOrder===0),...i.filter(o=>o.name!==Z3)]}},Gb=class extends qm{constructor(r,i){super(r,i,Vb);this.length=0;let n=String(i.description).match(/\(([0-9]+)\)/);this.length=n?+n[1]:0}async toDap(r){return{...await super.toDap(r),indexedVariables:this.length>100?this.length:void 0,namedVariables:this.length>100?1:void 0}}async getChildren(r){switch(r==null?void 0:r.filter){case"indexed":return this.getArraySlots(r);case"named":return this.getArrayProperties();default:return Promise.all([this.getArrayProperties(),this.getArraySlots()]).then(mo)}}async getArrayProperties(){try{let r=await K3({cdp:this.context.cdp,args:[],objectId:this.remoteObject.objectId,generatePreview:!0});return this.context.createObjectPropertyVars(r)}catch{return[]}}async getArraySlots(r){let i=r&&typeof r.start<"u"?r.start:-1,n=r&&typeof r.count<"u"?r.count:-1,s;try{s=await z3({cdp:this.context.cdp,generatePreview:!1,args:[i,n],objectId:this.remoteObject.objectId})}catch{return[]}let o=await this.context.createObjectPropertyVars(s);return s.objectId&&await this.context.cdp.Runtime.releaseObject({objectId:s.objectId}),o}},Jx=class extends Gb{async toDap(e){return this.remoteObject.preview?{...await super.toDap(e),name:F3(this.remoteObject.preview)}:super.toDap(e)}},Wm=class extends ai{constructor(e,r){super(e,r)}getChildren(e){return this.context.createObjectPropertyVars(this.remoteObject)}},Yx=class extends Wm{async toDap(e,r){return{...await super.toDap(e,r),value:"write-only",variablesReference:this.id}}},Qx=class extends Wm{constructor(r,i,n){super(r,i);this.parentObject=n}async toDap(r,i){let n=await super.toDap(r,i);return n.variablesReference=this.id,n.presentationHint={...n.presentationHint,lazy:!0},n}async getChildren(r){try{let i=await X3({cdp:this.context.cdp,objectId:this.parentObject.objectId,args:[new im(this.remoteObject.objectId)]});return[this.context.createVariableByType({name:this.name,presentationHint:this.context.presentationHint},i)]}catch(i){if(!(i instanceof uc))throw i}return super.getChildren(r)}},Kb=class{constructor(e,r,i){this.context=e;this.variable=r;this.scopeRef=i;this.id=Vm();this.sortOrder=0}toDap(){return Promise.resolve({name:this.context.name,value:this.variable.description||"",variablesReference:this.variable.getChildren?this.id:0,memoryReference:this.variable.linearMemoryAddress?String(this.id):void 0,presentationHint:this.context.presentationHint})}async getChildren(){var r,i;return(await((i=(r=this.variable).getChildren)==null?void 0:i.call(r))||[]).map(n=>this.context.createVariable(Kb,{name:n.name,presentationHint:Kb.presentationHint},n.value,this.scopeRef))}async readMemory(e,r){let i=this.variable.linearMemoryAddress;if(i===void 0)return;let n=await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${jx.source}).call(memories[0].buffer, ${+i+e}, ${+r}) ${It()}`,returnByValue:!0});if(!n)throw new uc({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});return Buffer.from(n.result.value,"hex")}async writeMemory(e,r){let i=this.variable.linearMemoryAddress;if(i===void 0)return 0;let n=await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${qx.source}).call(memories[0].buffer, ${+i+e}, ${JSON.stringify(r.toString("hex"))}) ${It()}`,returnByValue:!0});return(n==null?void 0:n.result.value)||0}},jm=Kb;jm.presentationHint={attributes:["readOnly"]};var eU,Zx=class{constructor(e,r,i,n){this.context=e;this.kind=r;this.variables=i;this.scopeRef=n;this.id=Vm();this.sortOrder=((eU=Q3[this.kind])==null?void 0:eU.sortOrder)||0}toDap(){var e;return Promise.resolve({name:((e=Q3[this.kind])==null?void 0:e.name)||this.kind,value:"",variablesReference:this.id})}getChildren(){return Promise.all(this.variables.map(async e=>{let r=await e.evaluate();return this.context.createVariable(jm,{name:e.name,presentationHint:jm.presentationHint},r,this.scopeRef)}))}},Yp=class{constructor(e,r,i,n,s){this.remoteObject=e;this.context=r;this.ref=i;this.extraProperties=n;this.renameProvider=s;this.id=Vm()}async getChildren(e){let r=await this.context.createObjectPropertyVars(this.remoteObject),i=new Set(r.map(n=>n.name));for(let n of this.extraProperties)i.has(n.name)||r.push(this.context.createVariableByType({name:n.name},n.value));return r}async getRename(e){return(await this.renameProvider.provideOnStackframe(this.ref.stackFrame)).getOriginalName(e,this.ref.stackFrame.rawPosition)||e}async setProperty(e,r){let i=await this.context.cdp.Debugger.evaluateOnCallFrame({expression:`${r} ${It()}`,callFrameId:this.ref.callFrameId});if(!i)throw new re(st(Vn.t("Invalid expression")));if(i.exceptionDetails)throw new re(nU(i.exceptionDetails));return await this.context.cdp.Debugger.setVariableValue({callFrameId:this.ref.callFrameId,scopeNumber:this.ref.scopeNumber,variableName:e,newValue:tC(i.result)}),this.context.createVariableByType({name:e},i.result)}},eC=class{constructor(){this.value=new Map}get(e){return this.value.get(e)}add(e){this.value.set(e.id,e)}clear(){this.value.clear()}},za=class{constructor(e,r,i,n,s){this.renameProvider=e;this.cdp=r;this.dap=i;this.launchConfig=n;this.locationProvider=s;this.vars=new eC;this.contextSettings={customDescriptionGenerator:n.customDescriptionGenerator&&J3(["defaultValue"],n.customDescriptionGenerator,!1),customPropertiesGenerator:n.customPropertiesGenerator&&J3([],n.customPropertiesGenerator,!1)}}createDetached(){return new za(this.renameProvider,this.cdp,this.dap,this.launchConfig,this.locationProvider)}clear(){this.vars.clear()}createFloatingVariable(e,r){return this.createFloatingContext().createVariableByType({name:e},r)}createVariableForOutput(e,r,i,n){let s=this.createFloatingContext(),o=r.length===1&&n==="table"?s.createVariable(Jx,{name:""},r[0]):r.length===1&&xc(r[0])&&!i?s.createVariableByType({name:""},r[0]):s.createVariable(Vx,{name:""},e,r,i),a=new Wb(o);return this.vars.add(a),a}createScope(e,r,i){let n=new Yp(e,new Lc(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>n,this.contextSettings),r,i,this.renameProvider);return this.vars.add(n),n}createWasmScope(e,r,i){let n=new Zx(new Lc(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>n,this.contextSettings),e,r,i);return this.vars.add(n),n}hasVariable(e){return!!this.vars.get(e)}hasMemory(e){return Wx(this.vars.get(Number(e)))}async readMemory(e,r,i){let n=this.vars.get(Number(e));return Wx(n)?n.readMemory(r,i):void 0}async writeMemory(e,r,i){let n=this.vars.get(Number(e)),s=Wx(n)?await n.writeMemory(r,i):0;return s>0&&this.dap.invalidated({areas:["variables"]}),s}async getVariableNames(e){let r=this.vars.get(e.variablesReference);return r?(await r.getChildren(e)).filter(Xu(ai)).map(n=>n.name):[]}async getVariables(e){let r=this.vars.get(e.variablesReference);if(!r)return[];let i=await r.getChildren(e);return(await Promise.all(i.map(s=>s.toDap(r instanceof Yp||r instanceof Wb?"repl":"propertyValue",e.format).then(o=>({v:s,dap:o}))))).sort((s,o)=>s.v.sortOrder-o.v.sortOrder||+s.dap.name-+o.dap.name||s.dap.name.localeCompare(o.dap.name)).map(s=>s.dap)}async setVariable(e){let r=this.vars.get(e.variablesReference);if(!e.value)throw new re(st(Vn.t("Cannot set an empty value")));if(r instanceof Yp||r instanceof ai)return await(await r.setProperty(e.name,e.value)).toDap("propertyValue",e.format);throw new re(it(Vn.t("Variable not found")))}createFloatingContext(){return new Lc(this.cdp,void 0,{name:"<unnamed>"},this.vars,this.locationProvider,void 0,this.contextSettings)}};za=$([(0,Pc.injectable)(),w(0,(0,Pc.inject)(Ma)),w(1,(0,Pc.inject)(St)),w(2,(0,Pc.inject)(gi)),w(3,(0,Pc.inject)(je))],za);function nU(t){let e=t.exception&&Dc(t.exception).title||t.text;return st(e)}var zb=class{constructor(e){this.description=e;this.sourceMapLoads=new Map;this.scripts=[]}get isDefault(){return this.description.auxData&&this.description.auxData.isDefault}async remove(e){await Promise.all(this.scripts.map(async r=>{let i=await r.source;i.filterScripts(n=>n.executionContextId!==this.description.id),i.scripts.length||e.removeSource(i)}))}},rC=class{constructor(e){this._obj=e;this._dapDeferred=We()}resolve(){this._dapDeferred.resolve(this._obj)}with(e){return this._dapDeferred.hasSettled()?e(this._obj):this._dapDeferred.promise.then(r=>e(r))}},pce=50,sU=(t,e)=>t.sourceReference===e.sourceReference&&Rv(t.path||"",e.path||""),fce=()=>`
//# sourceURL=eval-${(0,oU.randomBytes)(4).toString("hex")}${".repl"}
`,iC=class{enqueue(e,r){var i;if(!this.queue||this.queue.operation!==e){let n=((i=this.queue)==null?void 0:i.result.then(r,r))??r(),s=this.queue={operation:e,result:n.finally(()=>{this.queue===s&&(this.queue=void 0)})}}return this.queue.result}},Xa=class{constructor(e,r,i,n,s,o,a,u,c,l,p,f,h,g){this.target=n;this.logger=o;this.evaluator=a;this.completer=u;this.launchConfig=c;this._breakpointManager=l;this.console=p;this.exceptionPause=f;this._smartStepper=h;this.shutdown=g;this._executionContexts=new Map;this._excludedCallers=[];this.stateQueue=new iC;this._onPausedEmitter=new X;this.disposed=!1;this.debuggerReady=We();this.onPaused=this._onPausedEmitter.event;this._dap=new rC(i),this._sourceContainer=e,this._cdp=r,this.id=Xa._lastThreadId++,this.replVariables=new za(s,this._cdp,i,c,this),e.onSourceMappedSteppingChange(()=>this.refreshStackTrace()),this._initialize()}setExcludedCallers(e){this._excludedCallers=e}cdp(){return this._cdp}name(){return this.target.name()}pausedDetails(){return this._pausedDetails}pausedVariables(){return this._pausedVariables}defaultExecutionContext(){for(let e of this._executionContexts.values())if(e.isDefault)return e}resume(){return this.stateQueue.enqueue("resume",async()=>(this._sourceContainer.clearDisabledSourceMaps(),!await this._cdp.Debugger.resume({})&&this._pausedDetails!==void 0?it(Ge.t("Unable to resume")):{allThreadsContinued:!1}))}pause(){return this.stateQueue.enqueue("pause",async()=>(this._expectedPauseReason={reason:"pause"},await this._cdp.Debugger.pause({})?{}:it(Ge.t("Unable to pause"))))}stepOver(){return this.stateQueue.enqueue("stepOver",async()=>{this._expectedPauseReason={reason:"step",direction:1};let e=await this.getCurrentSkipList(1);return await this._cdp.Debugger.stepOver({skipList:e})?{}:it(Ge.t("Unable to step next"))})}stepInto(e){return this.stateQueue.enqueue("stepInto",async()=>{var i,n;this._waitingForStepIn={lastDetails:this._pausedDetails},this._expectedPauseReason={reason:"step",direction:0};let r=(n=(i=this._pausedDetails)==null?void 0:i.stepInTargets)==null?void 0:n[e];if(r){let s=await this._cdp.Debugger.setBreakpoint({location:r.breakLocation});if(this._waitingForStepIn.intoTargetBreakpoint=s==null?void 0:s.breakpointId,await this._cdp.Debugger.resume({}))return{}}else{let s=await this.getCurrentSkipList(0);if(await this._cdp.Debugger.stepInto({breakOnAsyncCall:!0,skipList:s}))return{}}return it(Ge.t("Unable to step in"))})}stepOut(){return this.stateQueue.enqueue("stepOut",async()=>(this._expectedPauseReason={reason:"step",direction:2},await this._cdp.Debugger.stepOut({})?{}:it(Ge.t("Unable to step out"))))}async getCurrentSkipList(e){if(!this._pausedDetails)return;let[r]=await this._pausedDetails.stackTrace.loadFrames(1);if(!r||!aU(r))return;let i=await r.getStepSkipList(e);if(i)return Ra.simplify(i).map(n=>({start:n.begin.base0,end:n.end.base0,scriptId:r.root.scriptId}))}_stackFrameNotFoundError(){return it(Ge.t("Stack frame not found"))}_evaluateOnAsyncFrameError(){return it(Ge.t("Unable to evaluate on async stack frame"))}async restartFrame(e){var s,o;let r=(o=(s=this._pausedDetails)==null?void 0:s.stackTrace.frame(e.frameId))==null?void 0:o.root;if(!r)return this._stackFrameNotFoundError();let i=r.callFrameId();return i?await this._cdp.Debugger.restartFrame({callFrameId:i,mode:"StepInto"})?(this._expectedPauseReason={reason:"frame_entry",description:Ge.t("Paused on frame entry")},r.canExplicitlyBeRestarted||await this._cdp.Debugger.stepInto({}),{}):st(Ge.t("Frame could not be restarted")):st(Ge.t("Cannot restart asynchronous frame"))}async stackTrace(e){return this._pausedDetails?this._pausedDetails.stackTrace.toDap(e):it(Ge.t("Thread is not paused"))}async scopes(e){let r=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0;return r?r.scopes():this._stackFrameNotFoundError()}async exceptionInfo(){let e=this._pausedDetails&&this._pausedDetails.exception;if(!e)return it(Ge.t("Thread is not paused on exception"));let r=Dc(e);return{exceptionId:r.title,breakMode:"all",details:{stackTrace:r.stackTrace,evaluateName:void 0}}}async revealPage(){return this._cdp.Page.bringToFront({}),{}}async completions(e){var n;let r;if(e.frameId!==void 0){if(r=this._pausedDetails?(n=this._pausedDetails.stackTrace.frame(e.frameId))==null?void 0:n.root:void 0,!r)return this._stackFrameNotFoundError();if(!r.callFrameId())return this._evaluateOnAsyncFrameError()}if(e.line===1&&e.text.startsWith("cd "))return{targets:this.getExecutionContextCompletions(e)};let i=await this.completer.completions({executionContextId:this._selectedContext?this._selectedContext.description.id:void 0,stackFrame:r,expression:e.text,position:new rr(e.line||1,e.column)});return{targets:[...this.getExecutionContextCompletions(e),...i]}}getExecutionContextCompletions(e){if(e.line&&e.line>1)return[];let r=e.text.slice(0,e.column).trim();return[...this._executionContexts.values()].map(i=>`cd ${this.target.executionContextName(i.description)}`).filter(i=>i.startsWith(r)).map(i=>({label:i,start:0,length:e.text.length}))}async _evaluteWasm(e,r,i){var l;if(!e)return;let n=e.root,s=n.callFrameId(),o=await((l=n.scriptSource)==null?void 0:l.source);if(!yc(o)||!s)return;let a=await o.sourceMap.value.promise;if(!a.evaluate)return;let u=new xr(e instanceof Km?e.inlineFrameIndex:0,n.rawPosition.base0.columnNumber),c=await a.evaluate(s,u,r.expression);if(c)return await i.createFloatingVariable(r.expression,c).toDap(r.context,r.format)}async _evaluteJs(e,r,i){let n=e==null?void 0:e.root.callFrameId(),s=r.context==="clipboard"?{expression:Ux.expr(r.expression,"2"),includeCommandLineAPI:!0,returnByValue:!0,objectGroup:"console"}:{expression:r.expression,includeCommandLineAPI:!0,objectGroup:"console",generatePreview:!0,timeout:r.context==="hover"?this.getHoverEvalTimeout():void 0};if(r.context==="repl"){if(s.expression=rm(s.expression),s.expression.indexOf("await")!==-1){let u=vN(s.expression);u&&(s.expression=u,s.awaitPromise=!0)}s.expression+=fce()}r.evaluationOptions&&this.cdp().DotnetDebugger.setEvaluationOptions({options:r.evaluationOptions,type:"evaluation"});let o=this.evaluator.evaluate(n?{...s,callFrameId:n}:{...s,contextId:this._selectedContext?this._selectedContext.description.id:void 0},{isInternalScript:!1,stackFrame:e==null?void 0:e.root});if(r.context==="repl")return await this._evaluateRepl(r,o,r.format);let a=await o;if(!a)throw new re(it(Ge.t("Unable to evaluate")));if(a.exceptionDetails){let u=a.exceptionDetails.exception?Dc(a.exceptionDetails.exception).title:a.exceptionDetails.text;throw u.startsWith("Uncaught")||(u="Uncaught "+u),new re(it(u))}return i.createFloatingVariable(s.expression,a.result).toDap(r.context,r.format)}async evaluate(e){let r,i;if(e.frameId!==void 0){if(i=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0,!i)throw new re(this._stackFrameNotFoundError());if(r=i.root.callFrameId(),!r)throw new re(this._evaluateOnAsyncFrameError())}if(e.context==="repl"&&e.expression.startsWith("cd ")){let o=e.expression.substring(3).trim();for(let a of this._executionContexts.values())if(this.target.executionContextName(a.description)===o)return this._selectedContext=a,{result:`[${o}]`,variablesReference:0}}let n=r?this._pausedVariables:this.replVariables;if(!n)throw new re(it(Ge.t("Unable to evaluate")));let s=await this._evaluteWasm(i,e,n)??await this._evaluteJs(i,e,n);return{type:s.type,result:s.value,variablesReference:s.variablesReference,namedVariables:s.namedVariables,indexedVariables:s.indexedVariables,memoryReference:s.memoryReference}}getHoverEvalTimeout(){var r;let e=(r=this.launchConfig.timeouts)==null?void 0:r.hoverEvaluation;if(e===void 0)return 500;if(!(e<=0))return e}async _evaluateRepl(e,r,i){let n=await r;if(!n)return{name:e.expression,value:"",variablesReference:0};if(n.exceptionDetails){let u=await new Gm(n.exceptionDetails).toDap(this);throw new re(lO(u.output))}let s=this._selectedContext&&this.defaultExecutionContext()!==this._selectedContext?`\x1B[33m[${this.target.executionContextName(this._selectedContext.description)}] `:"",o=await this.replVariables.createFloatingVariable(e.expression,n.result).toDap("repl",i),a=Ob("repl").budget;return o.variablesReference===0&&o.value.length===a&&setImmediate(()=>this.console.enqueue(this,{toDap:()=>({output:Ge.t("Output has been truncated to the first {0} characters. Run `{1}` to copy the full output.",a,`copy(${e.expression.trim()})`),category:"stdout"})})),{...o,value:`${s}${o.value}`}}_initialize(){this._cdp.Runtime.on("executionContextCreated",e=>{this._executionContextCreated(e.context)}),this._cdp.Runtime.on("executionContextDestroyed",e=>{this._executionContextDestroyed(e.executionContextId)}),this._cdp.Runtime.on("executionContextsCleared",()=>{this.launchConfig.noDebug||this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.replVariables.clear(),this._executionContextsCleared()}),this._cdp.Inspector.on("targetReloadedAfterCrash",()=>{this._breakpointManager.reapply()}),this.launchConfig.outputCapture==="console"&&(this._cdp.Runtime.on("consoleAPICalled",e=>{this.console.dispatch(this,e)}),this._cdp.Runtime.on("exceptionThrown",e=>{this.console.enqueue(this,new Gm(e.exceptionDetails))})),this._cdp.Runtime.on("inspectRequested",e=>{e.hints.copyToClipboard?this._copyObjectToClipboard(e.object):e.hints.queryObjects?this.console.enqueue(this,new Ub(e.object,this.cdp())):this._revealObject(e.object)}),this._cdp.Debugger.on("paused",async e=>this._onPaused(e)),this._cdp.Debugger.on("resumed",()=>this.onResumed()),this._cdp.Debugger.on("scriptParsed",e=>this._onScriptParsed(e)),this._cdp.Debugger.on("scriptFailedToParse",e=>this._onScriptParsed(e)),this._cdp.Runtime.enable({}),this._cdp.Profiler.enable({}),this.launchConfig.noDebug?this.logger.info("runtime.launch","Running with noDebug, so debug domains are disabled"):this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.target.initialize(),this._dap.with(e=>e.thread({reason:"started",threadId:this.id}))}dapInitialized(){this._dap.resolve()}async getStepInTargets(e){var l,p;let r=this._pausedDetails;if(!r)return[];let i=r.stackTrace.frames.find(f=>f.frameId===e);if(!(i instanceof Jt))return[];let n=await i.uiLocation();if(!n)return[];let s=r.event.callFrames[0].location,[o,a]=await Promise.all([this._breakpointManager.getBreakpointLocations(this,n.source,new rr(n.lineNumber,1),new rr(n.lineNumber+1,1)).then(f=>f.filter(h=>h.breakLocation.lineNumber!==s.lineNumber||h.breakLocation.columnNumber!==s.columnNumber)),n.source.content()]),u=((l=r.stepInTargets)==null?void 0:l.length)||0;r.stepInTargets=((p=r.stepInTargets)==null?void 0:p.concat(o))||o;let c=a&&new Da(a);return o.map((f,h)=>{let g=f.uiLocations.find(b=>b.source===n.source);if(!g)return;if(!c)return{id:u+h,label:`Column ${g}`,line:g.lineNumber,column:g.columnNumber};let H=bN(a.slice(c.getLineOffset(g.lineNumber-1),c.getLineOffset(g.lineNumber)),g.columnNumber-1);if(H)return{id:u+h,label:H.text,line:g.lineNumber,column:H.start+1,endLine:g.lineNumber,endColumn:H.end+1}}).filter(Mt)}async refreshStackTrace(){this._pausedDetails&&(this._pausedDetails=await this._createPausedDetails(this._pausedDetails.event),this._onThreadResumed(),await this._onThreadPaused(this._pausedDetails))}_executionContextCreated(e){let r=new zb(e);this._executionContexts.set(e.id,r)}_executionContextDestroyed(e){let r=this._executionContexts.get(e);r&&(this._executionContexts.delete(e),r.remove(this._sourceContainer))}_executionContextsCleared(){this._removeAllScripts(),this._breakpointManager.executionContextWasCleared(),this._pausedDetails&&this.onResumed(),this._executionContexts.clear()}_ensureDebuggerEnabledAndRefreshDebuggerId(){this._cdp.Debugger.enable({}).then(e=>{this.debuggerReady.resolve(),e&&Xa._allThreadsByDebuggerId.set(e.debuggerId,this)}),this.exceptionPause.apply(this._cdp)}async _onPaused(e){var l,p,f,h,g;let r=e.hitBreakpoints??[],i=e.reason==="Break on start"||e.reason==="debugCommand",n=(l=e.callFrames[0])==null?void 0:l.location,s=((p=e.data)==null?void 0:p.scriptId)||(n==null?void 0:n.scriptId),o=s&&(e.reason==="instrumentation"||this._breakpointManager.isEntrypointBreak(r,s)||r.some(H=>{var b;return(b=this._pauseOnSourceMapBreakpointIds)==null?void 0:b.includes(H)}));if(this.evaluator.setReturnedValue((f=e.callFrames[0])==null?void 0:f.returnValue),o){this.launchConfig.perScriptSourcemaps==="auto"&&this._shouldEnablePerScriptSms(e)&&await this._enablePerScriptSourcemaps(),e.data&&!i&&(e.data.__rewriteAs="breakpoint");let H=this._expectedPauseReason;if(!(s&&await this._handleSourceMapPause(s,n))){if(!i){if(await this.isCrossThreadStep(e))e.data={...e.data,__rewriteAs:"step"};else if(!await this._breakpointManager.shouldPauseAt(e,r,this.target.entryBreakpoint,!0))if((H==null?void 0:H.reason)==="step"){if(H.direction!==0)return this._cdp.Debugger.stepOut({})}else return this.resume()}}}else if(!(e.reason==="exception"||e.reason==="promiseRejection"?await this.exceptionPause.shouldPauseAt(e):await this._breakpointManager.shouldPauseAt(e,r,this.target.entryBreakpoint,!1)))return this.resume();let a=(h=this._waitingForStepIn)==null?void 0:h.intoTargetBreakpoint;if(a){(g=e.hitBreakpoints)!=null&&g.includes(a)?(this._waitingForStepIn.intoTargetBreakpoint=void 0,await this._cdp.Debugger.removeBreakpoint({breakpointId:a}),await this._cdp.Debugger.stepInto({breakOnAsyncCall:!1})):this.resume();return}if(i&&("continueOnAttach"in this.launchConfig&&this.launchConfig.continueOnAttach||this.launchConfig.type==="pwa-extensionHost"||this.target instanceof Jp)){this.resume();return}let u=this._pausedDetails=await this._createPausedDetails(e);if(this._excludedCallers.length&&await this._matchesExcludedCaller(this._pausedDetails.stackTrace)){this.logger.info("runtime","Skipping pause due to excluded caller"),this.resume();return}let c=await this._smartStepper.getSmartStepDirection(u,this._expectedPauseReason);if(this._pausedDetails===u){switch(c){case 0:return this.stepInto();case 2:return this.stepOut();case 1:return this.stepOver();default:}this._waitingForStepIn=void 0,this._pausedVariables=this.replVariables.createDetached(),await this._onThreadPaused(u)}}async _matchesExcludedCaller(e){if(!this._excludedCallers.length)return!1;let r=e.frames[0],i=r instanceof Jt&&await r.uiLocation();if(!i)return!1;let n,s,o=[];for(let{caller:a,target:u}of this._excludedCallers)if(!(u.line!==i.lineNumber||u.column!==i.columnNumber)&&(n??=await i.source.toDapShallow(),!!sU(n,u.source))){s||(s=await e.loadFrames(pce).then(l=>Promise.all(l.slice(1).filter(Xu(Jt)).map(p=>p.uiLocation()))));for(let c=0;c<s.length;c++){let l=s[c];if(!l||l.lineNumber!==a.line||l.columnNumber!==a.column)continue;let p=o[c]??=await l.source.toDapShallow();if(sU(p,a.source))return!0}}return!1}onResumed(){this._pausedDetails=void 0,this._pausedVariables=void 0,this.evaluator.setReturnedValue(void 0),this._onThreadResumed()}async dispose(){this.disposed=!0,await this.shutdown.shutdown();for(let[e,r]of Xa._allThreadsByDebuggerId)r===this&&Xa._allThreadsByDebuggerId.delete(e);this._removeAllScripts(!0),this._executionContextsCleared(),await this._dap.with(e=>e.thread({reason:"exited",threadId:this.id}))}rawLocation(e){if("location"in e){let r=e;return{lineNumber:Math.max(0,r.location.lineNumber)+1,columnNumber:Math.max(0,r.location.columnNumber||0)+1,scriptId:r.location.scriptId}}return{lineNumber:Math.max(0,e.lineNumber)+1,columnNumber:Math.max(0,e.columnNumber||0)+1,scriptId:e.scriptId}}rawLocationToUiLocation(e){if(!e.scriptId||this.disposed||this.launchConfig.noDebug)return;let r=this._sourceContainer.getScriptById(e.scriptId);return r?r.resolvedSource?this._sourceContainer.preferredUiLocation({...r.resolvedSource.offsetScriptToSource(e),source:r.resolvedSource}):r.source.then(i=>this._sourceContainer.preferredUiLocation({...i.offsetSourceToScript(e),source:i})):this.rawLocationToUiLocationWithWaiting(e)}async rawLocationToUiLocationWithWaiting(e){let r=e.scriptId?await this.getScriptByIdOrWait(e.scriptId):void 0;if(!r)return;let i=await r.source;return this._sourceContainer.preferredUiLocation({...i.offsetScriptToSource(e),source:i})}getScriptById(e){return this._sourceContainer.getScriptById(e)}getScriptByIdOrWait(e,r=500){return this._sourceContainer.getScriptById(e)||this.waitForScriptId(e,r)}waitForScriptId(e,r){return new Promise(i=>{let n=this._sourceContainer.onScript(o=>{o.scriptId===e&&(i(o),n.dispose(),clearTimeout(s))}),s=setTimeout(()=>{i(void 0),n.dispose()},r)})}async renderDebuggerLocation(e){let r=this.rawLocation(e),i=await this.rawLocationToUiLocation(r);return i?`@ ${await i.source.prettyName()}:${i.lineNumber}`:`@ VM${r.scriptId||"XX"}:${r.lineNumber}`}async updateCustomBreakpoint(e,r){if(!this.target.supportsCustomBreakpoints())return;let i=Um().get(e);i&&await i.apply(this._cdp,r)}async _createPausedDetails(e){var s,o;let r=e.reason==="assert"||e.reason==="exception"||e.reason==="promiseRejection"||e.reason==="other"||e.reason==="ambiguous";if((!!(e.hitBreakpoints&&e.hitBreakpoints.length)||!r)&&this._sourceContainer.clearDisabledSourceMaps(),e.hitBreakpoints&&this._sourceMapDisabler)for(let a of this._sourceMapDisabler(e.hitBreakpoints))this._sourceContainer.disableSourceMapForSource(a);let n=gn.fromDebugger(this,e.callFrames,e.asyncStackTrace,e.asyncStackTraceId);if(((s=e.data)==null?void 0:s.__rewriteAs)==="breakpoint")return{thread:this,event:e,stackTrace:n,reason:"breakpoint",description:Ge.t("Paused on breakpoint")};if(((o=e.data)==null?void 0:o.__rewriteAs)==="step")return{thread:this,event:e,stackTrace:n,reason:"step",description:Ge.t("Paused")};switch(e.reason){case"assert":return{thread:this,event:e,stackTrace:n,reason:"exception",description:Ge.t("Paused on assert")};case"debugCommand":return{thread:this,event:e,stackTrace:n,reason:"pause",description:Ge.t("Paused on debug() call")};case"DOM":return{thread:this,event:e,stackTrace:n,reason:"data breakpoint",description:Ge.t("Paused on DOM breakpoint")};case"EventListener":return this._resolveEventListenerBreakpointDetails(n,e);case"exception":return{thread:this,event:e,stackTrace:n,reason:"exception",description:Ge.t("Paused on exception"),exception:e.data};case"promiseRejection":return{thread:this,event:e,stackTrace:n,reason:"exception",description:Ge.t("Paused on {0}","promise rejection"),exception:e.data};case"instrumentation":return e.data&&e.data.scriptId?{thread:this,event:e,stackTrace:n,reason:"step",description:Ge.t("Paused")}:{thread:this,event:e,stackTrace:n,reason:"function breakpoint",description:Ge.t("Paused on instrumentation breakpoint")};case"XHR":return{thread:this,event:e,stackTrace:n,reason:"data breakpoint",description:Ge.t("Paused on XMLHttpRequest or fetch")};case"OOM":return{thread:this,event:e,stackTrace:n,reason:"exception",description:Ge.t("Paused before Out Of Memory exception")};default:if(e.hitBreakpoints&&e.hitBreakpoints.length){let a=!1,u=this.target.entryBreakpoint;if(u&&e.hitBreakpoints.includes(u.cdpId)){a=!0;let c=this._sourceContainer.source({path:Dt(u.path)});if(c!==void 0){let l=await this._sourceContainer.currentSiblingUiLocations({lineNumber:e.callFrames[0].location.lineNumber+1,columnNumber:(e.callFrames[0].location.columnNumber||0)+1,source:c});a=!(l!=null&&l.some(p=>this._breakpointManager.hasAtLocation(p)))}}return a||this._breakpointManager.registerBreakpointsHit(e.hitBreakpoints),{thread:this,event:e,stackTrace:n,hitBreakpoints:e.hitBreakpoints,reason:a?"entry":"breakpoint",description:Ge.t("Paused on breakpoint")}}return this._expectedPauseReason?{thread:this,event:e,stackTrace:n,description:Ge.t("Paused"),...this._expectedPauseReason}:{thread:this,event:e,stackTrace:n,reason:"pause",description:Ge.t("Paused on debugger statement")}}}_resolveEventListenerBreakpointDetails(e,r){let i=r.data,n=i&&i.eventName||"",s=Um().get(n);if(s){let o=s.details(i);return{thread:this,event:r,stackTrace:e,reason:"function breakpoint",description:o.short,text:o.long}}return{thread:this,event:r,stackTrace:e,reason:"function breakpoint",description:Ge.t("Paused on event listener")}}_clearDebuggerConsole(){return{category:"console",output:"\x1B[2J"}}_removeAllScripts(e=!1){this._sourceContainer.clear(e)}_onScriptParsed(e){if(e.url.endsWith(".cdp")||(Kr(e.url)&&(e.url=Ve(e.url)),this._sourceContainer.getScriptById(e.scriptId)))return;e.url&&(e.url=this.target.scriptUrlToUrl(e.url));let r=this._executionContexts.get(e.executionContextId);r||(this.logger.info("internal","Creating missing execution context id",e),r=new zb({id:e.executionContextId,name:"<autofilled>",origin:"",uniqueId:String(e.executionContextId)}),this._executionContexts.set(e.executionContextId,r));let i=async()=>{let s=this._sourceContainer.getSourceByOriginalUrl(e.url);if(e.hash&&(s==null?void 0:s.contentHash)===e.hash)return s.addScript({scriptId:e.scriptId,url:e.url,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),s;let o=async()=>{let p=await this._cdp.Debugger.getScriptSource({scriptId:e.scriptId});return p?p.scriptSource:void 0},a=e.startLine||e.startColumn?{lineOffset:e.startLine,columnOffset:e.startColumn}:void 0,u=e.url.endsWith("#vscode-extension")?{lineOffset:2,columnOffset:0}:void 0,c;e.sourceMapURL&&(c=Er(e.sourceMapURL)?e.sourceMapURL:e.url&&xa(e.url,e.sourceMapURL)||e.url,c||this._dap.with(p=>tO(p,`Could not load source map from ${e.sourceMapURL}`)));let l=await this._sourceContainer.addSource(e,o,c,a,u,!e.hasSourceURL&&this.launchConfig.enableContentValidation?e.hash:void 0);return l.addScript({scriptId:e.scriptId,url:e.url,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),l},n={url:e.url,hasSourceURL:!!e.hasSourceURL,scriptId:e.scriptId,executionContextId:e.executionContextId,source:i()};n.source.then(s=>n.resolvedSource=s),r.scripts.push(n),this._sourceContainer.addScriptById(n),(e.sourceMapURL||e.scriptLanguage==="WebAssembly")&&this._getOrStartLoadingSourceMaps(n)}async _handleSourceMapPause(e,r){this._pausedForSourceMapScriptId=e;let i=this._sourceContainer.sourceMapTimeouts().sourceMapMinPause,n=i+this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause,s=this._sourceContainer.getScriptById(e);if(!s)return this._pausedForSourceMapScriptId=void 0,!1;let o=new oi,a=await Promise.race([this._getOrStartLoadingSourceMaps(s),Ne(n)]),u=o.elapsed().ms,c=this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause-Math.max(u-i,0);this._sourceContainer.setSourceMapTimeouts({...this._sourceContainer.sourceMapTimeouts(),sourceMapCumulativePause:c}),this.logger.verbose("internal","Blocked execution waiting for source-map",{timeSpentWallClockInMs:u,sourceMapCumulativePause:c}),a||this._dap.with(f=>f.output({category:"stderr",output:Ge.t("WARNING: Processing source-maps of {0} took longer than {1} ms so we continued execution without waiting for all the breakpoints for the script to be set.",s.url||s.scriptId,n)})),console.assert(this._pausedForSourceMapScriptId===e),this._pausedForSourceMapScriptId=void 0;let l=(r==null?void 0:r.lineNumber)||0,p=r==null?void 0:r.columnNumber;return!!(a!=null&&a.map(So).some(f=>f.lineNumber===l&&(p===void 0||p===f.columnNumber)))}_getOrStartLoadingSourceMaps(e){let r=this._executionContexts.get(e.executionContextId);if(!r)return Promise.resolve([]);let i=r.sourceMapLoads.get(e.scriptId);if(i)return i;let n=e.source.then(s=>this._sourceContainer.waitForSourceMapSources(s)).then(s=>s.length&&this._scriptWithSourceMapHandler?this._scriptWithSourceMapHandler(e,s):[]);return r.sourceMapLoads.set(e.scriptId,n),n}async _revealObject(e){if(e.type!=="function"||e.objectId===void 0)return;let r=await this._cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0});if(r)for(let i of r.internalProperties||[]){if(i.name!=="[[FunctionLocation]]"||!i.value||i.value.subtype!=="internal#location")continue;let n=await this.rawLocationToUiLocation(this.rawLocation(i.value.value));n&&this._sourceContainer.revealUiLocation(n);break}}async _copyObjectToClipboard(e){if(!e.objectId){this._dap.with(r=>r.copyRequested({text:Cc(e,"copy")}));return}try{let r=await G3({cdp:this.cdp(),objectId:e.objectId,args:[2],silent:!0,returnByValue:!0});this._dap.with(i=>i.copyRequested({text:r.value}))}catch{}finally{this.cdp().Runtime.releaseObject({objectId:e.objectId}).catch(()=>{})}}async _onThreadPaused(e){this._expectedPauseReason=void 0,this._onPausedEmitter.fire(e);let r;e.hitBreakpoints&&(r=await Promise.race([Ne(1e3).then(()=>{}),Promise.all(e.hitBreakpoints.map(i=>this._breakpointManager._resolvedBreakpoints.get(i)).filter(Xu(pn)).map(i=>i.untilSetCompleted().then(()=>i.dapId)))])),await Ne(0),this._dap.with(i=>i.stopped({reason:e.reason,description:e.description,threadId:this.id,text:e.text,hitBreakpointIds:r,allThreadsStopped:!1}))}_onThreadResumed(){this._dap.with(e=>e.continued({threadId:this.id,allThreadsContinued:!1}))}isCrossThreadStep(e){var n;if(!e.asyncStackTraceId||!e.asyncStackTraceId.debuggerId)return!1;let r=Xa.threadForDebuggerId(e.asyncStackTraceId.debuggerId);if(!r||!((n=r._waitingForStepIn)!=null&&n.lastDetails))return!1;let i=r._waitingForStepIn.lastDetails.stackTrace;return r._cdp.Debugger.getStackTrace({stackTraceId:e.asyncStackTraceId}).then(s=>!s||!s.stackTrace.callFrames.length||!Jt.fromRuntime(r,s.stackTrace.callFrames[0],!1).equivalentTo(i.frames[0])?!1:(r._waitingForStepIn=void 0,!0))}async setScriptSourceMapHandler(e,r){var n,s,o;this._scriptWithSourceMapHandler=r;let i=e&&this._sourceContainer.sourceMapTimeouts().sourceMapMinPause&&r;if(i&&!((n=this._pauseOnSourceMapBreakpointIds)!=null&&n.length)){await this.debuggerReady.promise;let a=await Promise.all([this._cdp.Debugger.setInstrumentationBreakpoint({instrumentation:"beforeScriptWithSourceMapExecution"}),this._cdp.Debugger.setBreakpointByUrl({lineNumber:0,columnNumber:0,urlRegex:"\\.[wW][aA][sS][mM]"})]);this._pauseOnSourceMapBreakpointIds=a.map(u=>u==null?void 0:u.breakpointId).filter(Mt)}else if(!i&&((s=this._pauseOnSourceMapBreakpointIds)!=null&&s.length)){let a=this._pauseOnSourceMapBreakpointIds;this._pauseOnSourceMapBreakpointIds=void 0,await Promise.all(a.map(u=>this._cdp.Debugger.removeBreakpoint({breakpointId:u})))}return!!((o=this._pauseOnSourceMapBreakpointIds)!=null&&o.length)}async _enablePerScriptSourcemaps(){await this._breakpointManager.updateEntryBreakpointMode(this,1),await this.setScriptSourceMapHandler(!1,this._scriptWithSourceMapHandler)}_shouldEnablePerScriptSms(e){var r,i,n,s;return(r=e.data)!=null&&r.url.includes("@vite/client")?!0:e.reason!=="instrumentation"||!Er((i=e.data)==null?void 0:i.sourceMapURL)?!1:((n=e.data.url)==null?void 0:n.startsWith("webpack"))||((s=e.data.url)==null?void 0:s.startsWith("ng:"))}setSourceMapDisabler(e){this._sourceMapDisabler=e}static threadForDebuggerId(e){return Xa._allThreadsByDebuggerId.get(e)}async replacePathsInStackTrace(e){let r=[];for(let n of new Ga(e)){if(typeof n=="string"){r.push(n);continue}let s=this._sourceContainer.getSourceByOriginalUrl(Ve(n.path))||this._sourceContainer.getSourceByOriginalUrl(n.path);if(!s){r.push(n.toString());continue}r.push(this._sourceContainer.preferredUiLocation({columnNumber:n.position.base1.columnNumber,lineNumber:n.position.base1.lineNumber,source:s}).then(({source:o,lineNumber:a,columnNumber:u})=>`${o.absolutePath}:${a}:${u}`))}return(await Promise.all(r)).join("")}},Ja=Xa;Ja._lastThreadId=0,Ja._allThreadsByDebuggerId=new Map;var aU=t=>typeof t.uiLocation=="function",gn=class{constructor(e){this.thread=e;this.frames=[];this._frameById=new Map;this._lastInlineWasmExpanded=Promise.resolve(0);this._lastFrameThread=e}static fromRuntime(e,r){let i=new gn(e);for(let n of r.callFrames)n.url.endsWith(".cdp")||i.frames.push(Jt.fromRuntime(e,n,!1));return r.parentId?(i._asyncStackTraceId=r.parentId,console.assert(!r.parent)):i._appendStackTrace(e,r.parent),i}static fromDebugger(e,r,i,n){let s=new gn(e);for(let o of r)s._appendFrame(Jt.fromDebugger(e,o));return n?(s._asyncStackTraceId=n,console.assert(!i)):s._appendStackTrace(e,i),s}async loadFrames(e,r){return await this.expandAsyncStack(e,r),await this.expandWasmFrames(),this.frames}async expandAsyncStack(e,r){for(;this.frames.length<e&&this._asyncStackTraceId;){if(this._asyncStackTraceId.debuggerId&&(this._lastFrameThread=Ja.threadForDebuggerId(this._asyncStackTraceId.debuggerId)),!this._lastFrameThread){this._asyncStackTraceId=void 0;break}r&&this._lastFrameThread.cdp().DotnetDebugger.setEvaluationOptions({options:{noFuncEval:r},type:"stackFrame"});let i=await this._lastFrameThread.cdp().Debugger.getStackTrace({stackTraceId:this._asyncStackTraceId});this._asyncStackTraceId=void 0,i&&this._appendStackTrace(this._lastFrameThread,i.stackTrace)}}expandWasmFrames(){return this._lastInlineWasmExpanded=this._lastInlineWasmExpanded.then(async e=>{var r;for(;e<this.frames.length;e++){let i=this.frames[e];if(!(i instanceof Jt))continue;let n=(r=i.scriptSource)==null?void 0:r.resolvedSource;if(!yc(n))continue;let s=await n.sourceMap.value.promise;if(!s.getFunctionStack)continue;let o=await s.getFunctionStack(i.rawPosition);if(o.length===0)continue;let a=[];for(let u=0;u<o.length;u++){let c=new Km({source:n,thread:this.thread,inlineFrameIndex:u,name:o[u].name,root:i});this._frameById.set(c.frameId,c),a.push(c)}this._spliceFrames(e,1,...a),e+=o.length-1}return e})}frame(e){return this._frameById.get(e)}_appendStackTrace(e,r){for(console.assert(!r||!this._asyncStackTraceId);r;){if(r.description==="async function"&&r.callFrames.length&&r.callFrames.shift(),r.callFrames.length){this._appendFrame(new Xb(r.description||"async"));for(let i of r.callFrames)this._appendFrame(Jt.fromRuntime(e,i,!0))}r.parentId&&(this._asyncStackTraceId=r.parentId,console.assert(!r.parent)),r=r.parent}}_spliceFrames(e,r,...i){this.frames.splice(e,r,...i);for(let n of i)n instanceof Xb||this._frameById.set(n.frameId,n)}_appendFrame(e){this._spliceFrames(this.frames.length,0,e)}async formatAsNative(){return await this.formatWithMapper(e=>e.formatAsNative())}async format(){return await this.formatWithMapper(e=>e.format())}async formatWithMapper(e){let r=await this.loadFrames(50);for(let n=r.length-1;n>=0;n--){let s=r[n];if(s instanceof Jt&&s.isReplEval){r=r.slice(0,n+1);break}}let i=r.map(e);return(await Promise.all(i)).join(`
`)+`
`}async toDap(e){let r=e.startFrame||0,i=(e.levels||50)+r,n=await this.loadFrames(i,e.noFuncEval);i=Math.min(n.length,e.levels?i:n.length);let s=[];for(let o=r;o<i;o++)s.push(n[o].toDap(e.format));return{stackFrames:await Promise.all(s),totalFrames:this._asyncStackTraceId?1e6:n.length}}},sC=jH(),Xb=class{constructor(e="async"){this.label=e;this.frameId=sC()}async toDap(){return{name:this.label,id:0,line:0,column:0,presentationHint:"label"}}async formatAsNative(){return`    --- ${this.label} ---`}async format(){return`\u25C0 ${this.label} \u25B6`}},uU="<anonymous>",dce=/^class\s+(.+) {($|\n)/;async function hce(t,e,r){if(!e.functionName)return uU;if(e.functionName.includes("."))return e.functionName;let i;if(e.this.objectId&&r){let o=await t.cdp().Runtime.callFunctionOn({functionDeclaration:jb.decl("64","null"),objectId:e.this.objectId,returnByValue:!0});i=o==null?void 0:o.result.value}if(!i&&e.this.description){i=e.this.description;let o=dce.exec(i);o&&(i=o[1])}if(!i)return e.functionName;let n=i.indexOf(`
`);n!==-1&&(i=i.slice(0,n).trim());let s=e.functionName;return i===s?`${i}.constructor`:i?`${i}.${s}`:s}function mce(t){return t.functionName||uU}var Jt=class{constructor(e,r,i,n=!1){this.callFrame=r;this.isAsync=n;this.frameId=sC();this.root=this;this.getLocationInfo=Ee(async()=>{let e=this.uiLocation(),r=await Bx(this),i=this.overrideName||("this"in this.callFrame?await hce(this._thread,this.callFrame,r===0):mce(this.callFrame));return{isSmartStepped:r,name:i,uiLocation:await e}});this.completions=Ee(async()=>{if(!this._scope)return[];let e=this._thread.pausedVariables();if(!e)return[];let r=[];for(let n=0;n<this._scope.chain.length;n++){let s=this._scopeVariable(n,this._scope);s&&r.push(e.getVariableNames({variablesReference:s.id}).then(o=>o.map(a=>({label:a,type:"property"}))))}let i=await Promise.all(r);return[].concat(...i)});this._rawLocation=i,this.uiLocation=Ee(()=>e.rawLocationToUiLocation(i)),this._thread=e;let s=i.scriptId?e.getScriptById(i.scriptId):void 0;this.isReplEval=s?s.url.endsWith(".repl"):!1}get rawPosition(){return new xr(this._rawLocation.lineNumber,this._rawLocation.columnNumber)}static fromRuntime(e,r,i){return new Jt(e,r,e.rawLocation(r),i)}static fromDebugger(e,r){let i=new Jt(e,r,e.rawLocation(r));return i._scope={chain:r.scopeChain,thisObject:r.this,returnValue:r.returnValue,variables:new Array(r.scopeChain.length).fill(void 0),callFrameId:r.callFrameId},i}get scriptId(){return"scriptId"in this.callFrame?this.callFrame.scriptId:this.callFrame.location.scriptId}get scriptSource(){return this._thread._sourceContainer.getScriptById(this.scriptId)}get canExplicitlyBeRestarted(){return!!this.callFrame.canBeRestarted}equivalentTo(e){return e instanceof Jt&&e._rawLocation.columnNumber===this._rawLocation.columnNumber&&e._rawLocation.lineNumber===this._rawLocation.lineNumber&&e._rawLocation.scriptId===this._rawLocation.scriptId}callFrameId(){return this._scope?this._scope.callFrameId:void 0}async scopes(){let e=this._scope;if(!e)throw new re(fO());return{scopes:(await Promise.all(e.chain.map(async(i,n)=>{let s="",o;switch(i.type){case"global":s=Si.t("Global");break;case"local":s=Si.t("Local"),o="locals";break;case"with":s=Si.t("With Block"),o="locals";break;case"closure":s=Si.t("Closure"),o="arguments";break;case"catch":s=Si.t("Catch Block"),o="locals";break;case"block":s=Si.t("Block"),o="locals";break;case"script":s=Si.t("Script");break;case"eval":s=Si.t("Eval");break;case"module":s=Si.t("Module");break;default:s=i.type.substr(0,1).toUpperCase()+i.type.substr(1);break}i.name&&i.type==="closure"?s=Si.t("Closure ({0})",i.name):i.name&&(s=`${s}: ${i.name}`);let a=this._scopeVariable(n,e);if(!a)return;let u={name:s,presentationHint:o,expensive:i.type==="global",variablesReference:a.id};if(i.startLocation){let c=this._thread.rawLocation(i.startLocation),l=await this._thread.rawLocationToUiLocation(c);if(u.line=(l||c).lineNumber,u.column=(l||c).columnNumber,l&&(u.source=await l.source.toDap()),i.endLocation){let p=this._thread.rawLocation(i.endLocation),f=await this._thread.rawLocationToUiLocation(p);u.endLine=(f||p).lineNumber,u.endColumn=(f||p).columnNumber}}return u}))).filter(Mt)}}getStepSkipList(e){return Promise.resolve(void 0)}async toDap(e){let{isSmartStepped:r,name:i,uiLocation:n}=await this.getLocationInfo(),s=n?await n.source.toDap():void 0,o=r?"deemphasize":"normal";r&&s&&(s.origin=r===1?Si.t("Skipped by smartStep"):Si.t("Skipped by skipFiles"));let a=(n||this._rawLocation).lineNumber,u=(n||this._rawLocation).columnNumber,c=i;return s&&e&&(e.module&&(c+=` [${s.name}]`),e.line&&(c+=` Line ${a}`)),{id:this.frameId,name:c,line:a,column:u,source:s,presentationHint:o,canRestart:this.callFrame.canBeRestarted??!this.isAsync}}async formatAsNative(){let{name:e,uiLocation:r}=await this.getLocationInfo(),i=await(r==null?void 0:r.source.existingAbsolutePath())||await(r==null?void 0:r.source.prettyName())||this.callFrame.url,{lineNumber:n,columnNumber:s}=r||this._rawLocation;return`    at ${e} (${i}:${n}:${s})`}async format(){let{name:e,uiLocation:r}=await this.getLocationInfo(),i=await(r==null?void 0:r.source.prettyName())||"<unknown>",n=r||this._rawLocation,s=`${e} @ ${i}:${n.lineNumber}`;return n.columnNumber>1&&(s+=`:${n.columnNumber}`),s}_scopeVariable(e,r){let i=r.variables[e];if(i)return i;let n={stackFrame:this,callFrameId:r.callFrameId,scopeNumber:e},s=[];e===0&&(r.thisObject&&s.push({name:"this",value:r.thisObject}),r.returnValue&&s.push({name:Si.t("Return value"),value:r.returnValue}));let o=this._thread.pausedVariables();if(!o)return;let a=o.createScope(r.chain[e].object,n,s);return r.variables[e]=a}},nC={scopes:[]},Km=class{constructor(e){this.frameId=sC();this.name=e.name,this.root=e.root,this.thread=e.thread,this.source=e.source,this.inlineFrameIndex=e.inlineFrameIndex,this.wasmPosition=new xr(this.inlineFrameIndex,this.root.rawPosition.base0.columnNumber),this.uiLocation=Ee(()=>e.thread._sourceContainer.preferredUiLocation({columnNumber:e.root.rawPosition.base1.columnNumber,lineNumber:e.inlineFrameIndex+1,source:e.source}))}async formatAsNative(){let{columnNumber:e,lineNumber:r,source:i}=await this.uiLocation();return`    at ${this.name} (${i.url}:${r}:${e})`}async format(){let{columnNumber:e,lineNumber:r,source:i}=await this.uiLocation(),n=await i.prettyName()||"<unknown>";return`${this.name} @ ${n}:${r}:${e}`}async toDap(){let{columnNumber:e,lineNumber:r,source:i}=await this.uiLocation();return Promise.resolve({id:this.frameId,name:this.name,column:e,line:r,source:await i.toDapShallow()})}async getStepSkipList(e){let r=this.source.sourceMap.value.settledValue;if(!(r!=null&&r.getStepSkipList))return;let i=await this.uiLocation();return i?r.getStepSkipList(e,this.wasmPosition,i.source.compiledToSourceUrl.get(this.source),new rr(i.lineNumber,i.columnNumber)):r.getStepSkipList(e,this.root.rawPosition)}async scopes(){var o;let e=this.source.sourceMap.value.settledValue,r=this.root.callFrameId();if(!e||!r)return nC;let i=await((o=e.getVariablesInScope)==null?void 0:o.call(e,r,this.wasmPosition));if(!i)return nC;let n=this.thread.pausedVariables();if(!n)return nC;let s={stackFrame:this.root,callFrameId:r,scopeNumber:0};return{scopes:await Promise.all([...SN(i,a=>a.scope)].map(([a,u])=>n.createWasmScope(a,u,s).toDap("propertyValue").then(c=>({name:c.name,variablesReference:c.variablesReference,expensive:a!=="LOCAL"}))))}}};var cU=I(Se());var Tc=class{constructor(e){this.event=e;this.stackTrace=Ee(e=>this.event.stackTrace?gn.fromRuntime(e,this.event.stackTrace):void 0);this.getUiLocation=Ee(async e=>{let r=this.stackTrace(e);if(!r)return;let i;for(let n of r.frames){if(!(n instanceof Jt))continue;let s=await n.uiLocation();if(s&&(i||(i=s),!s.source.blackboxed()))return{source:await s.source.toDap(),line:s.lineNumber,column:s.columnNumber}}if(i)return{source:await i.source.toDap(),line:i.lineNumber,column:i.columnNumber}})}formatDefaultString(e,r,i=!1){let s=r.length>1&&r[0].type==="string"?kx(r[0].value,r.slice(1),Nx):kx("",r,Nx),o=s.result+`
`;return s.usedAllSubs&&!r.some(xc)?{output:o}:this.formatComplexStringOutput(e,o,r,i)}async formatComplexStringOutput(e,r,i,n){(i.some(o=>o.subtype==="error")||Ga.isStackLike(r))&&(await this.getUiLocation(e),r=await e.replacePathsInStackTrace(r),n=!0);let s=e.replVariables.createVariableForOutput(r,i,n?this.stackTrace(e):void 0);return{output:r,variablesReference:s.id}}},Jb=class extends Tc{async toDap(e){var r;return((r=this.event.args[0])==null?void 0:r.value)==="console.assert"&&(this.event.args[0].value=cU.t("Assertion failed")),{category:"stderr",...await this.formatDefaultString(e,this.event.args,!0),...await this.getUiLocation(e)}}},$c=class extends Tc{constructor(r,i,n){super(r);this.includeStack=i;this.category=n}async toDap(r){return{category:this.category,...await this.formatDefaultString(r,this.event.args,this.includeStack),...await this.getUiLocation(r)}}},Ya=class extends $c{constructor(e){super(e,!1,"stdout")}},Yb=class extends $c{constructor(e){super(e,!0,"stdout")}},Qb=class extends $c{constructor(e){super(e,!0,"stderr")}},Zb=class extends $c{constructor(e){super(e,!0,"stderr")}},e0=class extends Tc{async toDap(e){return{category:"stdout",group:this.event.type==="startGroupCollapsed"?"startCollapsed":"start",...await this.formatDefaultString(e,this.event.args),...await this.getUiLocation(e)}}},t0=class extends $c{constructor(e){super(e,!1,"stdout")}async toDap(e){var r;return(r=this.event.args[0])!=null&&r.preview?{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput("",this.event.args,void 0,this.event.type).id,...await this.getUiLocation(e)}:super.toDap(e)}};var Gm=class extends Tc{constructor(){super(...arguments);this.stackTrace=Ee(r=>{if(this.event.stackTrace)return gn.fromRuntime(r,this.event.stackTrace);if(this.event.scriptId)return gn.fromRuntime(r,{callFrames:[{functionName:"(program)",lineNumber:this.event.lineNumber,columnNumber:this.event.columnNumber,scriptId:this.event.scriptId,url:this.event.url||""}]})})}async toDap(r){var a;let i=this.event.exception?Dc(this.event.exception):{title:""},n=i.title;n.startsWith("Uncaught")||(n=`Uncaught ${((a=this.event.exception)==null?void 0:a.className)??"Error"} `+n);let s=this.stackTrace(r),o=this.event.exception&&!i.stackTrace?[this.event.exception]:[];return Ga.isStackLike(n)?n=await r.replacePathsInStackTrace(n):s&&(n+=`
`+await s.formatAsNative()),{category:"stderr",output:n,variablesReference:s||o.length?r.replVariables.createVariableForOutput(n,o,s).id:void 0,...await this.getUiLocation(r)}}};var r0=Symbol("IConsole");var Xm=I(Y());var lU=I(Y());var Qa=Symbol("IShutdownParticipants"),Qp=class{constructor(){this.participants=[]}register(e,r){if(this.shutdownStage!==void 0&&this.shutdownStage>=e)return r(),Cp;for(;this.participants.length<=e;)this.participants.push(new Set);return this.participants[e].add(r),{dispose:()=>this.participants[e].delete(r)}}async shutdown(){for(this.shutdownStage=0;this.shutdownStage<this.participants.length;this.shutdownStage++)await Promise.all([...this.participants[this.shutdownStage]].map(e=>e()))}};Qp=$([(0,lU.injectable)()],Qp);var zm=class{toDap(){return{category:"console",output:"\x1B[2J"}}},i0=class{toDap(){return{category:"stdout",output:"",group:"end"}}};var n0=class{constructor(e){this.sink=e;this.q=[];this.disposed=!1;this.onDrainedEmitter=new X;this.onDrained=this.onDrainedEmitter.event}get length(){return this.q.length}enqueue(e){this.disposed||(this.q.push(new oC(e)),this.q.length===1&&this.process())}dispose(){this.disposed=!0,this.q=[]}async process(){let e=this.q.findIndex(r=>r.value===fU);e===0?await this.q[0].wait:e===-1?(this.sink(pU(this.q)),this.q=[]):(this.sink(pU(this.q.slice(0,e))),this.q=this.q.slice(e)),this.q.length?this.process():this.onDrainedEmitter.fire()}},pU=t=>t.map(e=>e.value).filter(e=>e!==dU),fU=Symbol("unsettled"),dU=Symbol("unsettled"),oC=class{constructor(e){this.value=fU;e instanceof Promise?this.wait=e.then(r=>{this.value=r},()=>{this.value=dU}):(this.value=e,this.wait=Promise.resolve())}};var Hce=new Set(["group","assert","count"]),Zp=class{constructor(e,r){this.dap=e;this.isDirty=!1;this.queue=new n0(e=>{for(let r of e)this.dap.output(r)});this.onDrained=this.queue.onDrained;r.register(0,async()=>{this.length&&await new Promise(i=>this.onDrained(i)),this.dispose()})}get length(){return this.queue.length}dispose(){this.queue.dispose()}dispatch(e,r){let i=this.parse(r);i&&this.enqueue(e,i)}enqueue(e,r){if(!(r instanceof zm))this.isDirty=!0;else if(this.isDirty)this.isDirty=!1;else return;this.queue.enqueue(r.toDap(e))}parse(e){var r;if(e.type==="log"){let i=(r=e.stackTrace)==null?void 0:r.callFrames[0];if(i&&i.url==="internal/console/constructor.js"&&Hce.has(i.functionName))return}switch(e.type){case"clear":return new zm;case"endGroup":return new i0;case"assert":return new Jb(e);case"table":return new t0(e);case"startGroup":case"startGroupCollapsed":return new e0(e);case"debug":case"log":case"info":return new Ya(e);case"trace":return new Yb(e);case"error":return new Zb(e);case"warning":return new Qb(e);case"dir":case"dirxml":return new Ya(e);case"count":return new Ya(e);case"profile":case"profileEnd":return new Ya(e);case"timeEnd":return new Ya(e);default:try{BH(e.type,"unknown console message type")}catch{}}}};Zp=$([(0,Xm.injectable)(),w(0,(0,Xm.inject)(gi)),w(1,(0,Xm.inject)(Qa))],Zp);var kc=I(Y()),gU=require("os"),HU=require("path");var aC=require("path"),hU=(0,aC.join)(__dirname,"diagnosticTool.js"),mU=(0,aC.join)(__dirname,"diagnosticTool.css");var Gs=Symbol("ITarget"),Cr=Symbol("ILauncher");var Za=class{constructor(e,r,i,n){this.fs=e;this.sources=r;this.breakpoints=i;this.target=n}async generateObject(){let[e]=await Promise.all([this.dumpSources()]);return{breakpoints:this.dumpBreakpoints(),sources:e,config:this.target.launchConfig}}async generateHtml(e=(0,HU.join)((0,gU.tmpdir)(),"js-debug-diagnostics.html")){return await this.fs.writeFile(e,`<!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <style>${await this.fs.readFile(mU,"utf-8")}<</style>
      </head>
      <body>
        <script>window.DUMP=${JSON.stringify(await this.generateObject())}</script>
        <script>${await this.fs.readFile(hU,"utf-8")}</script>
      </body>
      </html>`),e}dumpBreakpoints(){let e=[];for(let r of[this.breakpoints.appliedByPath,this.breakpoints.appliedByRef])for(let i of r.values())for(let n of i){let s=n.diagnosticDump();e.push({source:s.source,params:s.params,cdp:s.cdp.map(o=>o.state===1?{...o,uiLocations:o.uiLocations.map(a=>this.dumpUiLocation(a))}:{...o,done:void 0})})}return e}dumpSources(){let e=[],r=0;for(let i of this.sources.sources)e.push((async()=>({uniqueId:r++,url:i.url,sourceReference:i.sourceReference,absolutePath:i.absolutePath,actualAbsolutePath:await i.existingAbsolutePath(),scriptIds:i.scripts.map(n=>n.scriptId),prettyName:await i.prettyName(),compiledSourceRefToUrl:i instanceof Ut?[...i.compiledToSourceUrl.entries()].map(([n,s])=>[n.sourceReference,s]):void 0,sourceMap:$a(i)?{url:i.sourceMap.metadata.sourceMapUrl,metadata:i.sourceMap.metadata,sources:fo(Object.fromEntries(i.sourceMap.sourceByUrl),n=>n.sourceReference)}:void 0}))());return Promise.all(e)}dumpUiLocation(e){return{lineNumber:e.lineNumber,columnNumber:e.columnNumber,sourceReference:e.source.sourceReference}}};Za=$([(0,kc.injectable)(),w(0,(0,kc.inject)(Ie)),w(1,(0,kc.inject)(hr)),w(2,(0,kc.inject)(mn)),w(3,(0,kc.inject)(Gs))],Za);var eu=I(Y());var tf=Symbol("IExceptionPauseService");var ef=class{constructor(e,r,i,n,s){this.evaluator=e;this.scriptSkipper=r;this.dap=i;this.sourceContainer=s;this.state={cdp:"none"};this.blocker=We();this.noDebug=!!n.noDebug,this.breakOnError=n.__breakOnConditionalError,this.blocker.resolve()}get launchBlocker(){return this.blocker.promise}async setBreakpoints(e){if(!this.noDebug){try{this.state=this.parseBreakpointRequest(e)}catch(r){if(!(r instanceof re))throw r;this.dap.output({category:"stderr",output:r.message});return}this.cdp?await this.sendToCdp(this.cdp):this.state.cdp!=="none"&&this.blocker.hasSettled()&&(this.blocker=We())}}async shouldPauseAt(e){var i;if(e.reason!=="exception"&&e.reason!=="promiseRejection"||this.state.cdp==="none"||this.shouldScriptSkip(e))return!1;let r=this.state.condition;if((i=e.data)!=null&&i.uncaught){if(r.uncaught&&!await this.evalCondition(e,r.uncaught))return!1}else if(r.caught&&!await this.evalCondition(e,r.caught))return!1;return!0}async apply(e){this.cdp=e,this.state.cdp!=="none"&&await this.sendToCdp(e)}async sendToCdp(e){await e.Debugger.setPauseOnExceptions({state:this.state.cdp}),this.blocker.resolve()}async evalCondition(e,r){let i=await r({callFrameId:e.callFrames[0].callFrameId},{error:e.data});return!!(i!=null&&i.result.value)}shouldScriptSkip(e){var i;if((i=e.data)!=null&&i.uncaught||!e.callFrames.length)return!1;let r=this.sourceContainer.getScriptById(e.callFrames[0].location.scriptId);return!!r&&this.scriptSkipper.isScriptSkipped(r.url)}parseBreakpointRequest(e){let r=(e.filterOptions??[]).concat(e.filters.map(a=>({filterId:a}))),i="none",n=[],s=[];for(let{filterId:a,condition:u}of r)a==="all"?(i="all",u&&n.push(a)):a==="uncaught"&&(i==="none"&&(i="uncaught"),u&&s.push(a));let o=a=>{if(a.length===0)return;let u="!!("+r.map(p=>p.condition).filter(Mt).join(") || !!(")+")",c=Ea(u);if(c)throw new re(wa({line:0,condition:u},c.message));let l=this.breakOnError?$E(u):u;return this.evaluator.prepare(l,{hoist:["error"]}).invoke};return i==="none"?{cdp:i}:{cdp:i,condition:{caught:o(n),uncaught:o(s)}}}};ef=$([(0,eu.injectable)(),w(0,(0,eu.inject)(ln)),w(1,(0,eu.inject)(Ba)),w(2,(0,eu.inject)(gi)),w(3,(0,eu.inject)(je)),w(4,(0,eu.inject)(hr))],ef);var a0=I(Y());var s0=class{constructor(){this.didEnable=new WeakSet}async retrieve(e){this.didEnable.has(e)||(this.didEnable.add(e),await e.Performance.enable({}));let r=await e.Performance.getMetrics({});if(!r)return{error:"Error in CDP"};let i={};for(let n of r.metrics)i[n.name]=n.value;return{metrics:i}}};var o0=class{async retrieve(e){let r=await e.Runtime.evaluate({expression:`({
        memory: process.memoryUsage(),
        cpu: process.cpuUsage(),
        timestamp: Date.now(),
        resourceUsage: process.resourceUsage && process.resourceUsage(),
      })${It()}`,returnByValue:!0});return r?r.exceptionDetails?{error:r.exceptionDetails.text}:{metrics:r.result.value}:{error:"No response from CDP"}}};var u0=Symbol("IPerformanceProvider"),Rc=class{constructor(e){this.target=e}create(){return this.target.type()==="node"?new o0:new s0}};Rc=$([(0,a0.injectable)(),w(0,(0,a0.inject)(Gs))],Rc);var dC=I(Se()),bU=require("crypto"),tu=I(Y()),wU=require("os"),_U=require("path");var p0=I(Y());var uC=I(Se()),Mc=I(Y()),c0=require("path");var rf=class{constructor(e){this.sources=e;this.locationIdCounter=0;this.locationsByRef=new Map}getLocationIdFor(e){let r=[e.functionName,e.url,e.scriptId,e.lineNumber,e.columnNumber].join(":"),i=this.locationsByRef.get(r);if(i)return i.id;let n=this.locationIdCounter++;return this.locationsByRef.set(r,{id:n,callFrame:e,locations:(async()=>{var a;let s=await((a=this.sources.getScriptById(e.scriptId))==null?void 0:a.source);if(!s)return[];let o=await this.sources.currentSiblingUiLocations({lineNumber:e.lineNumber+1,columnNumber:e.columnNumber+1,source:s});return Promise.all(o.map(async u=>({...u,source:await u.source.toDapShallow()})))})()}),n}getLocations(){return Promise.all([...this.locationsByRef.values()].sort((e,r)=>e.id-r.id).map(async e=>({callFrame:e.callFrame,locations:await e.locations})))}};var vr=class{constructor(e,r,i,n){this.cdp=e;this.fs=r;this.sources=i;this.launchConfig=n}static canApplyTo(){return!0}async start(e,r){if(!await this.cdp.Profiler.start({}))throw new re(Ql());return new cC(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,r)}async save(e,r){let i=await yU(e,this.sources,this.launchConfig.__workspaceFolder);(0,c0.isAbsolute)(r)||(r=(0,c0.join)(this.launchConfig.__workspaceFolder,r)),await this.fs.writeFile(r,JSON.stringify(i))}};vr.type="cpu",vr.extension=".cpuprofile",vr.label=uC.t("CPU Profile"),vr.description=uC.t("Generates a .cpuprofile file you can open in the Chrome devtools"),vr.editable=!0,vr=$([(0,Mc.injectable)(),w(0,(0,Mc.inject)(St)),w(1,(0,Mc.inject)(Ie)),w(2,(0,Mc.inject)(hr)),w(3,(0,Mc.inject)(je))],vr);var cC=class{constructor(e,r,i,n,s){this.cdp=e;this.fs=r;this.sources=i;this.workspaceFolder=n;this.file=s;this.stopEmitter=new X;this.disposed=!1;this.onUpdate=new X().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,this.stopEmitter.fire())}async stop(){let e=await this.cdp.Profiler.stop({});if(!e)throw new re(Ql());await this.dispose();let r=await yU(e.profile,this.sources,this.workspaceFolder);await this.fs.writeFile(this.file,JSON.stringify(r))}};async function yU(t,e,r){let i=new rf(e),n=t.nodes.map(s=>{var o;return{...s,locationId:i.getLocationIdFor(s.callFrame),positionTicks:(o=s.positionTicks)==null?void 0:o.map(a=>({...a,startLocationId:i.getLocationIdFor({...s.callFrame,lineNumber:a.line-1,columnNumber:0}),endLocationId:i.getLocationIdFor({...s.callFrame,lineNumber:a.line,columnNumber:0})}))}});return{...t,nodes:n,$vscode:{rootPath:r,locations:await i.getLocations()}}}var lC=I(Se()),Oc=I(Y());var qi=class{constructor(e,r,i,n){this.cdp=e;this.fs=r;this.sources=i;this.launchConfig=n}static canApplyTo(){return!0}async start(e,r){if(await this.cdp.HeapProfiler.enable({}),!await this.cdp.HeapProfiler.startSampling({}))throw new re(Ql());return new pC(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,r)}};qi.type="heap",qi.extension=".heapprofile",qi.label=lC.t("Heap Profile"),qi.description=lC.t("Generates a .heapprofile file you can open in the Chrome devtools"),qi.editable=!0,qi=$([(0,Oc.injectable)(),w(0,(0,Oc.inject)(St)),w(1,(0,Oc.inject)(Ie)),w(2,(0,Oc.inject)(hr)),w(3,(0,Oc.inject)(je))],qi);var pC=class{constructor(e,r,i,n,s){this.cdp=e;this.fs=r;this.sources=i;this.workspaceFolder=n;this.file=s;this.stopEmitter=new X;this.disposed=!1;this.onUpdate=new X().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,await this.cdp.HeapProfiler.disable({}),this.stopEmitter.fire())}async stop(){let e=await this.cdp.HeapProfiler.stopSampling({});if(!e)throw new re(Ql());await this.dispose();let r=await this.annotateSources(e.profile);await this.fs.writeFile(this.file,JSON.stringify(r))}async annotateSources(e){let r=new rf(this.sources),i=(s,o)=>{o.locationId=r.getLocationIdFor(s.callFrame);for(let a of s.children){let u={...a,children:[]};o.children.push(u),i(a,u)}},n={...e.head,children:[]};return i(e.head,n),{...e,head:n,$vscode:{rootPath:this.workspaceFolder,locations:await r.getLocations()}}}};var fC=I(Se()),vU=require("fs"),l0=I(Y());var Wi=class{constructor(e){this.cdp=e;this.cdp.HeapProfiler.on("addHeapSnapshotChunk",({chunk:r})=>{var i;return(i=this.currentWriter)==null?void 0:i.stream.write(r)})}static canApplyTo(){return!0}async start(e,r){return{onStop:new X().event,onUpdate:new X().event,dispose:()=>{},stop:async()=>{await this.cdp.HeapProfiler.enable({}),await this.dumpToFile(r),await this.cdp.HeapProfiler.disable({})}}}async dumpToFile(e){let{stream:r,promise:i}=this.currentWriter={stream:(0,vU.createWriteStream)(e),promise:this.cdp.HeapProfiler.takeHeapSnapshot({})};await i,r.end(),this.currentWriter=void 0}};Wi.type="memory",Wi.extension=".heapsnapshot",Wi.label=fC.t("Heap Snapshot"),Wi.description=fC.t("Generates a .heapsnapshot file you can open in the Chrome devtools"),Wi.instant=!0,Wi=$([(0,l0.injectable)(),w(0,(0,l0.inject)(St))],Wi);var f0=Symbol("IProfilerFactory"),d0=()=>{let t=new Date;return["vscode-profile",t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()].map(e=>String(e).padStart(2,"0")).join("-")},Ei=class{constructor(e){this.container=e}get(e){let r=Ei.ctors.find(i=>i.type===e);if(!r)throw new Error(`Invalid profilter type ${e}`);return this.container.get(r)}};Ei.ctors=[vr,qi,Wi],Ei=$([(0,p0.injectable)(),w(0,(0,p0.inject)($p))],Ei);var h0=Symbol("IProfileController"),nf=class{constructor(e,r,i,n,s){this.cdp=e;this.factory=r;this.basicCpuProfiler=i;this.breakpoints=n;this.shutdown=s;this.seenConsoleProfileNames=Object.create(null)}connect(e,r){e.on("startProfile",async i=>(await this.start(e,r,i),{})),e.on("stopProfile",()=>this.stopProfiling(e)),this.cdp.Profiler.on("consoleProfileStarted",()=>{e.output({output:dC.t("Console profile started")+`
`,category:"console"})}),this.cdp.Profiler.on("consoleProfileFinished",async i=>{let n=this.saveConsoleProfile(e,i),s=this.shutdown.register(0,()=>n);await n,s.dispose()}),r.onPaused(()=>this.stopProfiling(e))}async start(e,r,i){if(this.profile)throw new re(cO());this.profile=this.startProfileInner(e,r,i).catch(n=>{throw this.profile=void 0,n}),await this.profile}async saveConsoleProfile(e,r){var n;let i;if(r.title){i=(n=r.title)==null?void 0:n.replace(/[\/\\]/g,"-");let s=this.seenConsoleProfileNames[r.title]||0;this.seenConsoleProfileNames[r.title]=s+1,s>0&&(i+=`-${s}`)}else i=d0();i+=vr.extension,await this.basicCpuProfiler.save(r.profile,i),e.output({output:dC.t('CPU profile saved as "{0}" in your workspace folder',i)+`
`,category:"console"})}async startProfileInner(e,r,i){var l;let n=!1,s;if((l=i.stopAtBreakpoint)!=null&&l.length){let p=new Set(i.stopAtBreakpoint);n=!0,s=f=>!(f instanceof pn)||p.has(f.dapId)}else s=()=>!1;await this.breakpoints.applyEnabledFilter(s);let o=(0,_U.join)((0,wU.tmpdir)(),`vscode-js-profile-${(0,bU.randomBytes)(4).toString("hex")}`),a=await this.factory.get(i.type).start(i,o),u={file:o,profile:a,enableFilter:s,keptDebuggerOn:n};a.onUpdate(p=>e.profilerStateUpdate({label:p,running:!0})),a.onStop(()=>this.disposeProfile(u));let c=!!r.pausedDetails();return n?await r.resume():c&&(await this.cdp.Debugger.disable({}),c&&r.onResumed()),e.profileStarted({file:u.file,type:i.type}),u}async stopProfiling(e){var i;let r=await((i=this.profile)==null?void 0:i.catch(()=>{}));return!r||!this.profile?{}:(this.profile=void 0,await(r==null?void 0:r.profile.stop()),e.profilerStateUpdate({label:"",running:!1}),{})}async disposeProfile({profile:e,enableFilter:r,keptDebuggerOn:i}){i||await this.cdp.Debugger.enable({}),await this.breakpoints.applyEnabledFilter(void 0,r),e.dispose()}};nf=$([(0,tu.injectable)(),w(0,(0,tu.inject)(St)),w(1,(0,tu.inject)(f0)),w(2,(0,tu.inject)(vr)),w(3,(0,tu.inject)(mn)),w(4,(0,tu.inject)(Qa))],nf);var bn=I(Y());var K8=I(IU()),z8=require("dns"),q0=I(G8()),Bc=I(Y());var Hf=Symbol("IRequestOptionsProvider");var ou=class{constructor(e,r){this.fs=e;this.options=r;this.autoLocalhostPortFallbacks={}}async fetch(e,r=gr,i){try{let s=(0,K8.default)(e);return{ok:!0,url:e,body:s.toString("utf-8"),statusCode:200}}catch{}let n=Kr(e)?e:Dt(e);if(n)try{return{ok:!0,url:e,body:await this.fs.readFile(n,"utf-8"),statusCode:200}}catch(s){return{ok:!1,url:e,error:s,statusCode:200}}return this.fetchHttp(e,r,i)}async fetchJson(e,r,i){let n=await this.fetch(e,r,{Accept:"application/json",...i});if(!n.ok)return n;try{return{...n,body:JSON.parse(n.body)}}catch(s){return{...n,ok:!1,url:e,error:s}}}async fetchHttp(e,r,i){var p;let n=new URL(e),s=n.protocol!=="http:",o=Number(n.port)??(s?443:80),a={headers:i,followRedirect:!0};s&&await pp(e)&&(a.rejectUnauthorized=!1),(p=this.options)==null||p.provideOptions(a,e);let u=n.hostname==="localhost";if(u&&this.autoLocalhostPortFallbacks[o]){let f=await this.requestHttp(n.toString(),a,r);return f.statusCode!==503?f:(delete this.autoLocalhostPortFallbacks[o],this.requestHttp(e,a,r))}let l=await this.requestHttp(e,a,r);if(l.statusCode===503&&u){let f;try{f=await z8.promises.lookup(n.hostname)}catch{return l}n.hostname=f.family===6?"127.0.0.1":"[::1]",l=await this.requestHttp(n.toString(),a,r),l.statusCode!==503&&(this.autoLocalhostPortFallbacks[o]=n.hostname)}return l}async requestHttp(e,r,i){var s,o,a;(s=this.options)==null||s.provideOptions(r,e);let n=new De;try{let u=(0,q0.default)(e,r);n.push(i.onCancellationRequested(()=>u.cancel()));let c=await u;return{ok:!0,url:e,body:c.body,statusCode:c.statusCode}}catch(u){if(!(u instanceof q0.RequestError))throw u;let c=u.response?String((o=u.response)==null?void 0:o.body):u.message,l=((a=u.response)==null?void 0:a.statusCode)??503;return{ok:!1,body:c,statusCode:l,url:e,error:new av(l,e,c)}}finally{n.dispose()}}};ou=$([(0,Bc.injectable)(),w(0,(0,Bc.inject)(Ie)),w(1,(0,Bc.optional)()),w(1,(0,Bc.inject)(Hf))],ou);var Uc=class extends ou{constructor(r,i,n,s,o){super(r,o);this.logger=i;this.target=n;this.cdp=s;this.disposables=new De}dispose(){this.disposables.dispose()}async fetchHttp(r,i,n={}){let s=await super.fetchHttp(r,i,n);return s.ok?s:(this.logger.info("runtime","Network load failed, falling back to CDP",{url:r,res:s}),this.fetchOverBrowserNetwork(r,s))}async fetchOverBrowserNetwork(r,i){var u,c;if(!this.cdp)return i;let n=await this.cdp.Network.loadNetworkResource({frameId:(u=this.target)==null?void 0:u.targetInfo.targetId,url:r,options:{includeCredentials:!0,disableCache:!0}});if(!n||!n.resource.success||!n.resource.httpStatusCode||n.resource.httpStatusCode>=400||!n.resource.stream)return i;let s=Number((c=n.resource.headers)==null?void 0:c["Content-Length"]);isNaN(s)&&(s=1/0);let o=[],a=0;for(;;){let l=await this.cdp.IO.read({handle:n.resource.stream,offset:a});if(!l)return this.logger.info("runtime","Stream error encountered in middle, falling back",{url:r}),i;let p=l.base64Encoded?Buffer.from(l.data,"base64").toString():l.data;if(a+=Buffer.byteLength(p,"utf-8"),o.push(p),a>=s){this.cdp.IO.close({handle:n.resource.stream});break}if(l.eof)break}return{ok:!0,body:o.join(""),statusCode:n.resource.httpStatusCode,url:r}}};Uc=$([(0,bn.injectable)(),w(0,(0,bn.inject)(Ie)),w(1,(0,bn.inject)(le)),w(2,(0,bn.optional)()),w(2,(0,bn.inject)(Gs)),w(3,(0,bn.optional)()),w(3,(0,bn.inject)(St)),w(4,(0,bn.optional)()),w(4,(0,bn.inject)(Hf))],Uc);var uu=I(Y()),Y8=I(ym());var au="node:";function J8(t){let e=[];for(let r=0;r<t.length;r++){let i=t[r];if(i.startsWith("!")){let n=X8(i.slice(1));for(let s=0;s<e.length;s++)e[s]=`^(?!${n.slice(1)})${e[s].slice(1)}`}else e.push(X8(i))}return e.map(r=>new RegExp(r,"i"))}function X8(t){let e=t.split("/"),r=[];for(let i=0;i<e.length;i++){let n=e[i];if(n==="**")i===0?r.push("(.+/)?"):i===e.length-1||r.push(".*/");else{if(n.includes("*")){let s=n.split("*");r.push(s.map(o=>ni(o)).join("[^\\/]*"))}else r.push(ni(n));r.push(i<e.length-1?"\\/":"$")}}return`^${r.join("")}`}function wfe(t){let e=/^<node_internals>[\/\\](.*)$/,r=t.map(i=>{i=i.trim();let n=e.exec(i);return n?n[1]:null}).filter(Mt);return r.length>0?r:void 0}function _fe(t,e){return e.filter(i=>!i.includes("<node_internals>")).map(i=>Kr(i)?fp(t.rebaseLocalToRemote(i)):rt(i)).map(kv)}var zs=class{constructor({skipFiles:e},r,i,n,s){this.logger=i;this.cdp=n;this._regexForAuthored=z$(J8);this._scriptsWithSkipping=new Set;this._targetId=s.id(),this._rootTargetId=Q8(s).id(),this._isUrlFromSourceMapSkipped=new Ds(o=>this._normalizeUrl(o)),this._authoredGlobs=_fe(r,e),this._nodeInternalsGlobs=wfe(e),this._initNodeInternals(s),this._updateSkippedDebounce=J$(500,()=>this._updateGeneratedSkippedSources()),e.length&&this._updateGeneratedSkippedSources(),zs.sharedSkipsEmitter.event(o=>{o.rootTargetId===this._rootTargetId&&o.targetId!==this._targetId&&this._toggleSkippingFile(o.params)})}setSourceContainer(e){this._sourceContainer=e}_testSkipNodeInternal(e){return this._nodeInternalsGlobs?(e.startsWith(au)&&(e=e.slice(au.length)),(0,Y8.default)([e],this._nodeInternalsGlobs).length>0):!1}_testSkipAuthored(e){return this._regexForAuthored(this._authoredGlobs).some(r=>r.test(e))}_isNodeInternal(e,r){return e.startsWith(au)?!0:(r==null?void 0:r.has(e))||/^internal\/.+\.js$/.test(e)}async _updateGeneratedSkippedSources(){var i;let e=this._regexForAuthored(this._authoredGlobs).map(n=>n.source),r=(i=this._allNodeInternals)==null?void 0:i.settledValue;if(r){e.push(`^(${au})?internal\\/`);for(let n of r)this._testSkipNodeInternal(n)&&e.push(`^(${au})?${ni(n)}$`)}await this.cdp.Debugger.setBlackboxPatterns({patterns:e})}_normalizeUrl(e){return rt(e.toLowerCase())}isScriptSkipped(e){var r;return this._isNodeInternal(e,(r=this._allNodeInternals)==null?void 0:r.settledValue)?this._testSkipNodeInternal(e):(e=this._normalizeUrl(e),this._isUrlFromSourceMapSkipped.get(e)===!0?!0:this._testSkipAuthored(e))}async _updateSourceWithSkippedSourceMappedSources(e,r){let i=this.isScriptSkipped(e.url),n=[],s=i;for(let a of e.sourceMap.sourceByUrl.values()){let u=this.isScriptSkipped(a.url);if(typeof u>"u"&&(u=i),u!==s){let c=await this._sourceContainer.currentSiblingUiLocations({source:a,lineNumber:1,columnNumber:1},e);c[0]?(n.push({lineNumber:c[0].lineNumber-1,columnNumber:c[0].columnNumber-1}),s=!s):this.logger.error("internal","Could not map script beginning for "+a.sourceReference)}}let o=r;n.length||(o=o.filter(a=>this._scriptsWithSkipping.has(a.scriptId)),o.forEach(a=>this._scriptsWithSkipping.delete(a.scriptId))),await Promise.all(o.map(({scriptId:a})=>this.cdp.Debugger.setBlackboxedRanges({scriptId:a,positions:n})))}initializeSkippingValueForSource(e){this._initializeSkippingValueForSource(e)}_initializeSkippingValueForSource(e,r=e.scripts){let i=e.url,n=this.isScriptSkipped(i);if(!n&&e.absolutePath&&this._testSkipAuthored(Ve(e.absolutePath))&&(this.setIsUrlBlackboxSkipped(i,!0),n=!0,this._updateSkippedDebounce()),si(e)){if(n)for(let s of e.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(s.url,!0);for(let s of e.sourceMap.sourceByUrl.values())this._initializeSkippingValueForSource(s,r);this._updateSourceWithSkippedSourceMappedSources(e,r)}}async _initNodeInternals(e){if(e.type()!=="node"||!this._nodeInternalsGlobs||this._allNodeInternals)return;let r=this._allNodeInternals=We(),i=await this.cdp.Runtime.evaluate({expression:"require('module').builtinModules"+It(),returnByValue:!0,includeCommandLineAPI:!0});i&&!i.exceptionDetails?r.resolve(new Set(i.result.value.map(n=>n+".js"))):r.resolve(new Set),await this._updateGeneratedSkippedSources()}async _toggleSkippingFile(e){let r;e.resource&&Kr(e.resource)&&(r=e.resource);let i={path:r,sourceReference:e.sourceReference},n=this._sourceContainer.source(i);if(!n)return{};let s=!this.isScriptSkipped(n.url);if(n instanceof Ut){this._isUrlFromSourceMapSkipped.set(n.url,s);let o=Array.from(n.compiledToSourceUrl.keys());await Promise.all(o.map(a=>this._updateSourceWithSkippedSourceMappedSources(a,a.scripts)))}else{if(si(n))for(let o of n.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(o.url,s);this.setIsUrlBlackboxSkipped(n.url,s),await this._updateGeneratedSkippedSources()}return{}}setIsUrlBlackboxSkipped(e,r){let i=e,n=`!${i}`,s=this._authoredGlobs.filter(o=>o!==i&&o!==n);this._regexForAuthored(s).some(o=>o.test(e))!==r&&(s.push(r?i:n),this._regexForAuthored.clear()),this._authoredGlobs=s}async toggleSkippingFile(e){let r=await this._toggleSkippingFile(e);return zs.sharedSkipsEmitter.fire({params:e,rootTargetId:this._rootTargetId,targetId:this._targetId}),r}};zs.sharedSkipsEmitter=new X,zs=$([(0,uu.injectable)(),w(0,(0,uu.inject)(je)),w(1,(0,uu.inject)(ut)),w(2,(0,uu.inject)(le)),w(3,(0,uu.inject)(St)),w(4,(0,uu.inject)(Gs))],zs);function Q8(t){let e=t.parent();return e?Q8(e):t}var og=I(Y());var eq=require("path");var Z8=/^webpack:\/{3}([^/]+?\.vue)(\?[0-9a-z]*)?$/i,Afe=/^webpack:\/{3}\.\/.+\.vue\?[0-9a-z]+$/i,vf=Symbol("IVueFileMapper");var yf=class{constructor(e,r){this.files=e;this.search=r;this.getMapping=Ee(async()=>{let e=new Map;return await this.search.streamAllChildren(this.files,r=>e.set((0,eq.basename)(r),r)),e})}async lookup(e){let r=Z8.exec(e);return r?(await this.getMapping()).get(r[1]):void 0}getVueHandling(e){return this.files.empty?0:Z8.test(e)?1:Afe.test(e)?2:0}};yf=$([(0,og.injectable)(),w(0,(0,og.inject)(vo)),w(1,(0,og.inject)(hp))],yf);var Xs=class{constructor(){this.changeEmitter=new X;this.addEmitter=new X;this.removeEmitter=new X;this.targetMap=new Map;this.onChanged=this.changeEmitter.event;this.onAdd=this.addEmitter.event;this.onRemove=this.removeEmitter.event}get size(){return this.targetMap.size}add(e,r){this.targetMap.set(e,r),this.addEmitter.fire([e,r]),this.changeEmitter.fire()}get(e){return this.targetMap.get(e)}remove(e){let r=this.targetMap.get(e);return r===void 0?!1:(this.targetMap.delete(e),this.removeEmitter.fire([e,r]),this.changeEmitter.fire(),!0)}value(){return this.targetMap.values()}};var EW=I(AW()),Y0=I(Y());var IW=require("child_process"),Oo=class extends Error{constructor(r,i,n,s,o){super(`${r} exited with code ${s||-1}: ${i}`);this.command=r;this.stderr=i;this.stdout=n;this.code=s;this.innerError=o}static fromExeca(r){return new Oo(r.command,r.stderr.toString(),r.stdout.toString(),r.exitCode)}};function J0(t,e,r){return new Promise((i,n)=>{let s=(0,IW.spawn)(t,e,{...r,stdio:"pipe"}),o=[],a=[];s.stderr.on("data",c=>o.push(c)),s.stdout.on("data",c=>a.push(c));let u=(c,l)=>n(new Oo(t,Buffer.concat(o).toString(),Buffer.concat(a).toString(),c,l));s.on("error",c=>u(void 0,c)),s.on("close",c=>c?u(c):i({stdout:Buffer.concat(a).toString(),stderr:Buffer.concat(o).toString()}))})}var xde=new Map([["chrome",0],["safari",1],["firefox",2],["msedge",3],["microsoft edge",3],["appxq0fevzme2pys62n3e0fbqa7peapykr8v",4],["ie.http",5]]),SW=t=>{t=t.toLowerCase();for(let[e,r]of xde.entries())if(t.includes(e))return r},Af=Symbol("IDefaultBrowserProvider"),_f=class{constructor(e,r=process.platform){this.execa=e;this.platform=r;this.lookup=Ee(()=>this.platform==="win32"?this.lookupWindows():this.lookupUnix())}async lookupUnix(){let{name:e}=await(0,EW.default)();return SW(e)}async lookupWindows(){let e=await this.execa("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]);if(e.failed)throw Oo.fromExeca(e);let r=/ProgId\s*REG_SZ\s*(\S+)/.exec(e.stdout);if(r)return SW(r[1])}};_f=$([(0,Y0.injectable)(),w(0,(0,Y0.inject)(vm))],_f);var CW=I(Y()),Z0=I(require("os"));var Q0=class{async setup(){}dispose(){}write(e){if(e.level>2)throw new Error(e.message);console.log(JSON.stringify(e))}};var OD=class{constructor(e=512){this.size=e;this.items=[];this.i=0}write(e){this.items[this.i]=e,this.i=(this.i+1)%this.size}read(){return this.items.slice(this.i).concat(this.items.slice(0,this.i))}},wn=class{constructor(){this.logTarget={queue:[]};this.logBuffer=new OD}static async test(){let e=new wn;return e.setup({sinks:[new Q0],showWelcome:!1}),e}info(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:1})}verbose(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:0})}warn(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:2})}error(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:3})}fatal(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:4})}assert(e,r){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",r,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(r);debugger;return!1}return!0}log(e){if(this.logBuffer.write(e),"queue"in this.logTarget){this.logTarget.queue.push(e);return}for(let r of this.logTarget.sinks)r.write(e)}getRecentLogs(){return this.logBuffer.read()}dispose(){if("sinks"in this.logTarget){for(let e of this.logTarget.sinks)e.dispose();this.logTarget={queue:[]}}}forTarget(){return this}async setup(e){if(await Promise.all(e.sinks.map(i=>i.setup())),e.showWelcome!==!1){let i=Cde();for(let n of e.sinks)n.write(i)}let r=this.logTarget;this.logTarget={sinks:e.sinks.slice()},"sinks"in r?r.sinks.forEach(i=>i.dispose()):r.queue.forEach(i=>this.log(i))}};wn.null=(()=>{let e=new wn;return e.setup({sinks:[]}),e})(),wn=$([(0,CW.injectable)()],wn);var Cde=()=>({timestamp:Date.now(),tag:"runtime.welcome",level:1,message:`${zH} v${Ju} started`,metadata:{os:`${Z0.platform()} ${Z0.arch()}`,nodeVersion:process.version,adapterVersion:Ju}});var Hg=Symbol("MutableLaunchConfig"),DW=t=>{let e=new X;return new Proxy({},{ownKeys(){return Object.keys(t)},get(r,i){switch(i){case"update":return n=>{t=n,e.fire()};case"onChange":return e.event;default:return t[i]}}})};var r9=I(e9()),Vw=I(Y());var rl=Symbol("touched"),wu;(u=>{function t(){return{children:{},[rl]:1}}u.root=t;function e(c,l){return c[rl]=1,a(c,o(l),0)}u.getPath=e;function r(c){c[rl]=1}u.touch=r;function i(c){c[rl]=2}u.touchAll=i;function n(c,l){let p=c.children[l]??={children:{}};return p[rl]=1,p}u.getOrMakeChild=n;function s(c){if(c[rl]){for(let[l,p]of Object.entries(c.children))switch(p[rl]){case 1:s(p);break;case 2:break;default:delete c.children[l]}return c}}u.prune=s;function o(c){let l=c.split(/\/|\\/);return l[0]===""&&l.unshift(),l}function a(c,l,p){let f=n(c,l[p]);return p===l.length-1?f:a(f,l,p+1)}})(wu||={});var kL=require("fs"),RL=I(ym()),il=require("path"),t9=I(TL());var Hbe=/\//g,Ww=class{constructor(e){this.stat=ho(e=>kL.promises.lstat(e));this.readdir=ho(e=>kL.promises.readdir(e,{withFileTypes:!0}));this.alreadyProcessedFiles=new Set;this.fileEmitter=new X;this.onFile=this.fileEmitter.event;this.errorEmitter=new X;this.onError=this.errorEmitter.event;this.processor=e.fileProcessor,this.filter=e.filter,this.ignore=e.ignore.map(n=>RL.default.matcher((0,t9.default)(rt(n),{cwd:e.cwd})));let r=(0,il.isAbsolute)(e.pattern)?(0,il.relative)(e.cwd,e.pattern):e.pattern,i=RL.default.parse(rt(r),{ignore:e.ignore,cwd:e.cwd,expand:!0});this.done=Promise.all(i.map(n=>{let s=[];for(let c=1;c<n.tokens.length;){let l=c+1;for(;l<n.tokens.length&&n.tokens[l].type!=="slash";)l++;let p=n.tokens[c];p.type==="globstar"?s.push("**"):l===c+1&&p.type==="text"?s.push(p.value):s.push(new RegExp("^"+n.tokens.slice(c,l).map(f=>f.output||f.value).join("")+"$")),c=l+1}let o=s[0]==="**"?[0,1]:[0],a=wu.getPath(e.cache,e.cwd),u={elements:s,seen:new Set};return Promise.all(o.map(c=>this.readSomething(u,c,e.cwd,[],a)))})).then(()=>{})}async readSomething(e,r,i,n,s){if(this.alreadyProcessedFiles.has(s))return;let o=`${r}:${i}`;if(e.seen.has(o))return;e.seen.add(o);let a;try{a=await this.stat(i)}catch(c){this.errorEmitter.fire({path:i,error:c});return}if(this.alreadyProcessedFiles.has(s))return;let u=s.data;if(u&&a.mtimeMs===u.mtime){if(u.type===0){let c=[],p=Object.entries(s.children).filter(([,f])=>{var h;return((h=f.data)==null?void 0:h.type)!==0}).map(([f])=>f);for(let[f,h]of Object.entries(s.children))c.push(h.data!==void 0?this.handleDirectoryEntry(e,r,i,{name:f,type:h.data.type},p,s):this.stat(i).then(g=>this.handleDirectoryEntry(e,r,i,{name:f,type:g.isFile()?1:0},p,s),()=>{}));await Promise.all(c)}else u.type===1&&(this.alreadyProcessedFiles.add(s),this.fileEmitter.fire(u.extracted));return}a.isDirectory()?await this.handleDir(e,r,a.mtimeMs,i,s):(this.alreadyProcessedFiles.add(s),await this.handleFile(a.mtimeMs,i,n,s))}applyFilterToFile(e,r,i){var o;let n=i.children[e];if(this.alreadyProcessedFiles.has(n))return!1;if(!this.filter)return!0;let s=((o=n.data)==null?void 0:o.type)===1?n.data.extracted:void 0;return wu.touch(n),this.filter(r,s)}handleDirectoryEntry(e,r,i,n,s,o){let a=i+"/"+n.name,u=this.getDirectoryReadDescends(e,r,i,n);if(u===void 0)return;let c=wu.getOrMakeChild(o,n.name);if(!(n.type===1&&!this.applyFilterToFile(n.name,a,o)))return typeof u=="number"?this.readSomething(e,r+u,a,s,c):Promise.all(u.map(l=>this.readSomething(e,r+l,a,s,c)))}getDirectoryReadDescends(e,r,i,n){let s=i+"/"+n.name;if(this.ignore.some(u=>u(s)))return;let o=r===e.elements.length-1,a=e.elements[r];if(a==="**")return n.type===1?o?0:this.getDirectoryReadDescends(e,r+1,i,n):o?0:[0,1];if((a instanceof RegExp&&a.test(n.name)||a===n.name)&&(n.type===0?!o:o))return 1}async handleFile(e,r,i,n){let s=il.sep==="/"?r:r.replace(Hbe,il.sep),o;try{o=await this.processor(s,{siblings:i,mtime:e})}catch(a){this.errorEmitter.fire({path:s,error:a});return}n.data={type:1,mtime:e,extracted:o},this.fileEmitter.fire(o)}async handleDir(e,r,i,n,s){let o;try{o=await this.readdir(n)}catch(c){this.errorEmitter.fire({path:n,error:c});return}let a=[],u=o.filter(c=>c.isFile()).map(c=>c.name);for(let c of o){if(c.name.startsWith("."))continue;let l;if(c.isDirectory())l=0;else if(c.isFile())l=1;else continue;a.push(this.handleDirectoryEntry(e,r,n,{name:c.name,type:l},u,s))}await Promise.all(a),s.data={type:0,mtime:i}}};var Bf=class{constructor(e){this.logger=e}async streamAllChildren(e,r){let i=[];return await this.globForFiles(e,s=>i.push(r(Ft(s.path)))),(await Promise.all(i)).filter(s=>s!==void 0)}async streamChildrenWithSourcemaps(e){let r=[],i=e.lastState||{},n={};return await Promise.all([...e.files.explode()].map(async o=>{let a=JSON.stringify(o),u=i[a]||wu.root();await this._streamChildrenWithSourcemaps(u,e,r,o);let c=wu.prune(u);c&&(n[a]=c)})),this.logger.info("sourcemap.parsing",`turboGlobStream search found ${r.length} files`),{values:(await Promise.all(r)).filter(Mt),state:n}}async _streamChildrenWithSourcemaps(e,r,i,n){let s=new Ww({pattern:n.pattern,ignore:n.negations,cwd:n.cwd,cache:e,filter:r.filter,fileProcessor:(o,a)=>ON(o,a).then(u=>u&&r.processMap(u))});s.onError(({path:o,error:a})=>{this.logger.warn("sourcemap.parsing","Error parsing source map",{error:a,path:o})}),s.onFile(o=>o&&i.push(r.onProcessedMap(o))),await s.done}async globForFiles(e,r){await Promise.all([...e.explode()].map(i=>new Promise((n,s)=>(0,r9.default)([i.pattern,"!**/*.asar/**"],{ignore:i.negations,matchBase:!0,cwd:i.cwd}).on("data",r).on("finish",n).on("error",s))))}};Bf=$([(0,Vw.injectable)(),w(0,(0,Vw.inject)(le))],Bf);var r_=I(Se()),Su=I(Y());var i9=require("url"),n9=I(require("path"));var Gw=class{constructor(){this._onFrameAddedEmitter=new X;this._onFrameRemovedEmitter=new X;this._onFrameNavigatedEmitter=new X;this.onFrameAdded=this._onFrameAddedEmitter.event;this.onFrameRemoved=this._onFrameRemovedEmitter.event;this.onFrameNavigated=this._onFrameNavigatedEmitter.event;this._frames=new Map}attached(e,r){e.Page.enable({}),e.Page.getResourceTree({}).then(i=>{this._processCachedResources(e,i?i.frameTree:void 0,r)})}mainFrame(){return this._mainFrame}_processCachedResources(e,r,i){r&&this._addFramesRecursively(e,r,r.frame.parentId,i),e.Page.on("frameAttached",n=>{this._frameAttached(e,i,n.frameId,n.parentFrameId)}),e.Page.on("frameNavigated",n=>{this._frameNavigated(e,i,n.frame)}),e.Page.on("frameDetached",n=>{this._frameDetached(e,i,n.frameId)})}_addFrame(e,r,i){let n=new OL(this,e,r,i);return this._frames.set(n.id,n),n.isMainFrame()&&(this._mainFrame=n),this._onFrameAddedEmitter.fire(n),n}_frameAttached(e,r,i,n){let s=this._frames.get(i);return s||(s=this._addFrame(e,i,n)),s._ref(r),s}_frameNavigated(e,r,i){let n=this._frames.get(i.id);n||(n=this._frameAttached(e,r,i.id,i.parentId)),n._navigate(i,r),this._onFrameNavigatedEmitter.fire(n)}_frameDetached(e,r,i){let n=this._frames.get(i);n&&n._unref(r)}frameForId(e){return this._frames.get(e)}frames(){return Array.from(this._frames.values())}_addFramesRecursively(e,r,i,n){let s=r.frame,o=this._frames.get(s.id);o?(o._navigate(s,n),this._onFrameNavigatedEmitter.fire(o)):(o=this._addFrame(e,s.id,i),o._navigate(s,n));for(let a=0;r.childFrames&&a<r.childFrames.length;++a)this._addFramesRecursively(e,r.childFrames[a],o.id,n)}},OL=class{constructor(e,r,i,n){this._targets=new Set;this.cdp=r,this.model=e,this._parentFrameId=n,this.id=i,this._url=""}_ref(e){this._targets.add(e)}_navigate(e,r){this._name=e.name,this._url=e.url,this._securityOrigin=e.securityOrigin,this._unreachableUrl=e.unreachableUrl||"",this._ref(r),this._unrefChildFrames(r)}name(){return this._name||""}url(){return this._url}securityOrigin(){return this._securityOrigin}unreachableUrl(){return this._unreachableUrl}isMainFrame(){return!this._parentFrameId}parentFrame(){return this._parentFrameId?this.model.frameForId(this._parentFrameId):void 0}childFrames(){return this.model.frames().filter(e=>e._parentFrameId===this.id)}_unrefChildFrames(e){for(let r of this.childFrames())r._unref(e)}_unref(e){this._targets.delete(e),!this._targets.size&&(this._unrefChildFrames(e),this.model._frames.delete(this.id),this.model._onFrameRemovedEmitter.fire(this))}displayName(){return this._name?this._name:ybe(this._url)||`<iframe ${this.id}>`}};function ML(t,e){return t.length<=e?t:t.substr(0,e-1)+"\u2026"}function ybe(t){let e;try{e=new i9.URL(t)}catch{return ML(t,20)}if(e.protocol==="data")return ML(t,20);if(e.protocol==="blob"||t==="about:blank")return t;let r=n9.basename(e.pathname);return r||(r=(e.host||"")+"/"),r==="/"&&(r=ML(t,20)),r}var s9=require("url"),NL=class{constructor(e){this.versions=new Map;this.id=e.registrationId,this.scopeURL=e.scopeURL}},FL=class{constructor(e,r){this.revisions=[];this.registration=e,this.id=r.versionId,this.scriptURL=r.scriptURL,this._targetId=r.targetId,this._status=r.status,this._runningStatus=r.runningStatus}addRevision(e){this._targetId&&e.targetId&&this._targetId!==e.targetId&&console.error(`${this._targetId} !== ${e.targetId}`),e.targetId&&(this._targetId=e.targetId),this._status=e.status,this._runningStatus=e.runningStatus,this.revisions.unshift(e)}status(){return this._status}runningStatus(){return this._runningStatus}targetId(){return this._targetId}label(){let e=new s9.URL(this.registration.scopeURL),r=e.pathname.substr(1);r.endsWith("/")&&(r=r.substring(0,r.length-1));let i=r||`${e.host}`,n=this._status==="activated"?"":` ${this._status}`,s=this._runningStatus==="running"?"":` ${this._runningStatus}`;return`${i} #${this.id}${n}${s}`}},_u=class{constructor(e){this._registrations=new Map;this._versions=new Map;this._onDidChangeUpdater=new X;this.onDidChange=this._onDidChangeUpdater.event;this._targets=new Set;this._frameModel=e,_u._instances.add(this)}dispose(){_u._instances.delete(this)}attached(e){this._targets.add(e),!this._cdp&&(this._cdp=e,e.ServiceWorker.enable({}),e.ServiceWorker.on("workerRegistrationUpdated",r=>this._workerRegistrationsUpdated(r.registrations)),e.ServiceWorker.on("workerVersionUpdated",r=>this._workerVersionsUpdated(r.versions)),_u._mode!=="normal"&&this.setMode(_u._mode))}async detached(e){this._targets.delete(e)}version(e){return this._versions.get(e)}registrations(){let e=[],r=this._frameModel.frames().map(i=>i.url());for(let i of this._registrations.values())for(let n of r)if(n.startsWith(i.scopeURL)){e.push(i);break}return e}registration(e){return this._registrations.get(e)}_workerVersionsUpdated(e){for(let r of e){let i=this._registrations.get(r.registrationId);if(!i)continue;let n=i.versions.get(r.versionId);n||(n=new FL(i,r),i.versions.set(r.versionId,n)),r.targetId&&this._versions.set(r.targetId,n),n.addRevision(r),n.status()==="redundant"&&n.runningStatus()==="stopped"&&(r.targetId&&this._versions.delete(r.targetId),i.versions.delete(n.id))}this._onDidChangeUpdater.fire()}_workerRegistrationsUpdated(e){for(let r of e)if(r.isDeleted){if(!this._registrations.has(r.registrationId))debugger;this._registrations.delete(r.registrationId)}else{if(this._registrations.has(r.registrationId))return;this._registrations.set(r.registrationId,new NL(r))}this._onDidChangeUpdater.fire()}static setModeForAll(e){_u._mode=e;for(let r of _u._instances)r.setMode(e)}setMode(e){if(this._cdp){this._cdp.ServiceWorker.setForceUpdateOnPageLoad({forceUpdateOnPageLoad:e==="force"});for(let r of this._targets.values())e==="bypass"?(r.Network.enable({}),r.Network.setBypassServiceWorker({bypass:!0})):r.Network.disable({})}}async stopWorker(e){if(!this._cdp)return;let r=this.version(e);r&&await this._cdp.ServiceWorker.stopWorker({versionId:r.id})}},Jg=_u;Jg._instances=new Set;var Au=class{constructor(e,r,i,n,s,o,a,u){this.process=r;this.logger=s;this.telemetry=o;this.launchParams=a;this._targets=new Map;this._detachedTargets=new Set;this.frameModel=new Gw;this.serviceWorkerModel=new Jg(this.frameModel);this._lifecycleQueue=Promise.resolve();this._onTargetAddedEmitter=new X;this._onTargetRemovedEmitter=new X;this.onTargetAdded=this._onTargetAddedEmitter.event;this.onTargetRemoved=this._onTargetRemovedEmitter.event;this._connection=e,this._sourcePathResolver=n,this._browser=i,this._targetOrigin=u,this.serviceWorkerModel.onDidChange(()=>{for(let c of this._targets.values())c.type()==="service_worker"&&c._onNameChangedEmitter.fire()})}static async connect(e,r,i,n,s,o,a){let c=await e.rootSession().Target.attachToBrowserTarget({});if(!c)return;let l=e.createSession(c.sessionId);return new this(e,r,l,i,s,o,n,a)}dispose(){this.serviceWorkerModel.dispose()}targetList(){return Array.from(this._targets.values()).filter(e=>nm.has(e.type()))}async getCandiateInfo(e){let r=await this._browser.Target.getTargets({});return r?e?r.targetInfos.filter(e):r.targetInfos:[]}async closeBrowser(){var e;if(this.launchParams.request==="launch"){if(this.launchParams.cleanUp==="wholeBrowser")await this._browser.Browser.close({}),(e=this.process)==null||e.kill();else for(let r of this._targets.values())await this._browser.Target.closeTarget({targetId:r.targetId}),this._connection.close();this.process=void 0}}waitForMainTarget(e){let r,i=new Promise(s=>r=s),n=async s=>{if([...this._targets.values()].some(u=>u.targetId===s.targetId)||this._detachedTargets.has(s.targetId)||e&&!e(s))return;let o=this._browser.Target.on("targetInfoChanged",u=>{u.targetInfo.targetId===s.targetId&&(s=u.targetInfo)}),a;try{a=await this._browser.Target.attachToTarget({targetId:s.targetId,flatten:!0})}finally{o.dispose()}if(!a){r(void 0);return}r(this.attachedToTarget(s,a.sessionId,!0))};return this._browser.Target.setDiscoverTargets({discover:!0}),this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(s=>n(s.targetInfo))),this._browser.Target.on("targetInfoChanged",s=>this._targetInfoChanged(s.targetInfo,this.enqueueLifecycleFn(n))),this._browser.Target.on("detachedFromTarget",this.enqueueLifecycleFn(async s=>{s.targetId&&await this._detachedFromTarget(s.sessionId,!1)})),i}enqueueLifecycleFn(e){return r=>this._lifecycleQueue=this._lifecycleQueue.then(()=>e(r))}attachedToTarget(e,r,i,n,s=!0){let o=this._targets.get(r);if(o)return o;let a=this._connection.createSession(r),u=new up(this,e,a,n,i,this.launchParams,r,this.logger,()=>{this._connection.disposeSession(r),this._detachedFromTarget(r)});this._targets.set(r,u),n&&n._children.set(e.targetId,u),a.Target.on("attachedToTarget",async l=>{this.attachedToTarget(l.targetInfo,l.sessionId,l.waitingForDebugger,u)}),a.Target.on("detachedFromTarget",async l=>{l.targetId&&this._detachedFromTarget(l.sessionId,!1)}),a.Target.setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:s,flatten:!0}),a.Network.setCacheDisabled({cacheDisabled:this.launchParams.disableNetworkCache}).catch(l=>this.logger.info("runtime.target","Error setting network cache state",l)),n||this.retrieveBrowserTelemetry(a);let c=e.type;return vE.has(c)&&this.frameModel.attached(a,e.targetId),this.serviceWorkerModel.attached(a),this._onTargetAddedEmitter.fire(u),!nm.has(c)||c==="service_worker"?u.runIfWaitingForDebugger():c==="page"&&s&&a.Page.waitForDebugger({}),u}async retrieveBrowserTelemetry(e){try{let r=await e.Browser.getVersion({});if(!r)throw new Error("Undefined return from getVersion()");let i={targetCRDPVersion:r.protocolVersion,targetRevision:r.revision,targetUserAgent:r.userAgent,targetV8:r.jsVersion,targetVersion:"",targetProject:"",targetProduct:""};this.logger.verbose("runtime.target","Retrieved browser information",r);let n=(r.product||"").split("/");n.length===2?(i.targetProject=n[0],i.targetVersion=n[1]):i.targetProduct=r.product,this.telemetry.report("browserVersion",i)}catch(r){this.logger.warn("runtime.target","Error getting browser telemetry",r)}}async _detachedFromTarget(e,r=!0){var n;let i=this._targets.get(e);if(i){this._targets.delete(e),(n=i.parentTarget)==null||n._children.delete(e);try{await i._detached()}catch{}if(this._onTargetRemovedEmitter.fire(i),r&&(this._detachedTargets.add(i.targetId),await this._browser.Target.detachFromTarget({sessionId:e})),!this._targets.size&&this.launchParams.request==="launch")try{this.launchParams.cleanUp==="wholeBrowser"?await this._browser.Browser.close({}):(await this._browser.Target.closeTarget({targetId:i.id()}),this._connection.close())}catch{}}}async _targetInfoChanged(e,r){let i=[...this._targets.values()].filter(n=>n.targetId===e.targetId);if(!e.attached||!i.length)return i.length&&await Promise.all(i.map(n=>this._detachedFromTarget(n.sessionId,!1))),r(e);for(let n of i)n._updateFromInfo(e);for(let n of this._targets.values())n.targetId!==e.targetId&&n._onNameChangedEmitter.fire()}};var w9=I(require("child_process")),_9=require("fs");var vbe=50,ci=class{constructor(e){this.messageEmitter=new X;this.endEmitter=new X;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this._ws=e,this._ws.addEventListener("message",r=>{this.messageEmitter.fire([r.data.toString("utf-8"),new oi])}),this._ws.addEventListener("close",()=>{this.endEmitter.fire(),this._ws=void 0}),this._ws.addEventListener("error",()=>{})}static async create(e,r,i){let n=!e.startsWith("ws://"),s=await pp(e);for(;;){let o=Date.now()+vbe;try{let a={headers:{host:i??"localhost"},perMessageDeflate:!1,maxPayload:268435456,rejectUnauthorized:!(n&&s),followRedirects:!0},u=new X2(e,[],a);return await js(new Promise((c,l)=>{u.addEventListener("open",()=>c(new ci(u))),u.addEventListener("error",p=>{let f=e===u.url?e:u.url.replace(/^http(s?):/,"ws$1:");if(f===e){l(p.error);return}this.create(f,r,i).then(c,l)})}),mr.withTimeout(2e3,r).token,`Could not open ${e}`).catch(c=>{throw u.close(),c})}catch(a){if(r.isCancellationRequested)throw a;let u=o-Date.now();u>0&&await Ne(u)}}}send(e){var r;(r=this._ws)==null||r.send(e)}dispose(){return new Promise(e=>{if(!this._ws)return e();this._ws.addEventListener("close",()=>e()),this._ws.close()})}};var Kw=I(require("path"));function bbe(t){let e=[/^APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL$/i,/^ELECTRON_.+$/i,/^GOOGLE_API_KEY$/i,/^VSCODE_.+$/i,/^SNAP(|_.*)$/i,/^GDK_PIXBUF_.+$/i];return new Lt(t).map((r,i)=>e.some(n=>n.test(r))?void 0:i)}var In=class{constructor(e){this.defined=Ee(()=>Tl(this.value));this.value=e?W$(e):{}}lookup(e){return In.platform==="win32"?K$(this.value,e):this.value[e]}addToPath(e,r="append",i=!1){let n=In.platform==="win32"?"Path":"PATH",s=In.platform==="win32"?Kw.win32.delimiter:Kw.posix.delimiter,o=this.lookup(n);return i&&!o&&(o=`\${env:${n}}`),o?r==="append"?o=o+s+e:o=e+s+o:o=e,this.update(n,o)}addNodeOption(e){let r=this.lookup("NODE_OPTIONS");return this.update("NODE_OPTIONS",r?`${r} ${e}`:e)}update(e,r){return In.merge(this,{[e]:r})}merge(...e){return In.merge(this,...e)}map(e){return new In(fo(this.value,(r,i)=>e(i,r)))}static merge(...e){let r=e.map(n=>n instanceof In?n.value:n),i=In.platform==="win32"?G$(...r):Object.assign({},...r);return new In(i)}},Lt=In;Lt.platform=process.platform,Lt.empty=new In({}),Lt.processEnv=Ee(()=>bbe(process.env));var o9="--remote-debugging-port",a9="--remote-debugging-pipe",u9=t=>{let e={};for(let r of t){let i=r.indexOf("=");i===-1?e[r]=null:e[r.slice(0,i)]=r.slice(i+1)}return e},zw=t=>{let e=[];for(let r of Object.keys(t)){let i=t[r];i!==void 0&&e.push(i===null?r:`${r}=${i}`)}return e},Ko=class{constructor(e=[]){this.args=e;this.argMap=Ee(()=>u9(this.args))}add(e,r=null){return new Ko(zw({...this.argMap(),[e]:r}))}remove(e){return new Ko(zw({...this.argMap(),[e]:void 0}))}merge(e){return new Ko(zw({...this.argMap(),...e instanceof Ko?e.argMap():u9(e)}))}setConnection(e){return new Ko(zw({...this.argMap(),[a9]:e==="pipe"?null:void 0,[o9]:e!=="pipe"?String(e):void 0}))}getSuggestedConnection(){let e=this.argMap();if(e.hasOwnProperty(a9))return"pipe";let r=e[o9];if(r!==void 0)return r&&Number(r)||0}filter(e){let r=this.argMap(),i=[];for(let n of Object.keys(r)){let s=r[n];e(n,s)&&i.push(s===null?n:`${n}=${s}`)}return new Ko(i)}toArray(){return this.args.slice()}},zo=Ko;zo.default=new Ko(["--disable-background-networking","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-default-apps","--disable-dev-shm-usage","--disable-renderer-backgrounding","--disable-sync","--metrics-recording-only","--no-first-run","--no-default-browser-check"]);var BL=require("url");function Xw(t,e,r){let i=ho(o=>{if(o)return new BL.URL(o);throw new Error(`A valid url wasn't supplied: <${o}>`)}),n={"url.hostname":()=>i(e).hostname,"url.port":()=>i(e).port,browserInspectUri:()=>encodeURIComponent(r),browserInspectUriPath:()=>new BL.URL(r).pathname,wsProtocol:()=>i(e).protocol==="https:"?"wss":"ws"};return t.replace(/{([^\}]+)}/g,(o,a)=>n.hasOwnProperty(a)?n[a]():o)}var H9=I(require("readline"));var f9=I(Yw());var Sn=class{constructor(e,r,i){this.logger=e;this.pipeWrite=r;this.pipeRead=i;this.messageEmitter=new X;this.endEmitter=new X;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this.onceEnded=Ee(()=>{var e;this.streams&&(this.beforeClose(),this.streams.read.removeAllListeners(),(e=this.pipeRead)==null||e.destroy(),this.streams.write.removeListener("end",this.onceEnded),this.streams.write.removeListener("error",this.onWriteError),this.streams.write.on("error",()=>{}),this.streams.write.end(),this.streams=void 0,this.endEmitter.fire())});this.onWriteError=e=>{this.logger.error("internal","pipeWrite error",{error:e})};let n=i||r;this.streams={read:n.on("error",s=>this.logger.error("internal","pipeRead error",{error:s})).pipe((0,f9.default)("\0")).on("data",s=>this.messageEmitter.fire([s,new oi])).on("end",this.onceEnded),write:r.on("end",this.onceEnded).on("error",this.onWriteError)}}send(e){var r;(r=this.streams)==null||r.write.write(e+"\0")}dispose(){this.onceEnded()}beforeClose(){}};var Qw=require("child_process"),UL=require("path");function Yn(t,e,r="forceful"){if(r==="none")return!0;if(process.platform==="win32"){let i=process.env.WINDIR||"C:\\Windows",n=(0,UL.join)(i,"System32","taskkill.exe");try{return(0,Qw.execSync)(`${n} ${r==="forceful"?"/F":""} /T /PID ${t}`,{stdio:"pipe"}),!0}catch(s){return e.error("runtime.exception","Error running taskkill.exe",s),!1}}else try{let i=(0,UL.join)(__dirname,"./targets/node/terminateProcess.sh"),n=(0,Qw.spawnSync)("sh",[i,t.toString(),r==="forceful"?"9":"15"]);return n.stderr&&n.status?(e.error("runtime.exception","Error running terminateProcess",n),!1):!0}catch(i){return e.error("runtime.exception","Error running terminateProcess",i),!1}}var m9=require("fs");async function jL(t,e,r,i){let n=new ou(m9.promises),[s,o]=await Promise.all([d9(n,new URL("/json/version",t),e),i?d9(n,new URL("/json/list",t),e):Promise.resolve(void 0)]);if(!s.ok)r.verbose("runtime.launch","Error looking up /json/version",s);else if(s.body.webSocketDebuggerUrl){let a=h9(s.url,s.body.webSocketDebuggerUrl);return r.verbose("runtime.launch","Discovered target URL from /json/version",{url:s.body.webSocketDebuggerUrl,fixed:a}),a}if(o)if(!o.ok)r.verbose("runtime.launch","Error looking up /json/list",o);else{let a=h9(o.url,o.body[0].webSocketDebuggerUrl);return r.verbose("runtime.launch","Discovered target URL from /json/list",{url:o.body[0].webSocketDebuggerUrl,fixed:a}),a}throw new Error("Could not find any debuggable target")}async function d9(t,e,r){if(e.hostname!=="localhost")return t.fetchJson(e.toString(),r,{host:"localhost"});let i=e.toString();e.hostname="127.0.0.1";let n=e.toString(),s=new mr(r);try{let o;return await Cs([i,n].map(async u=>(o=await t.fetchJson(u,s.token),o.ok&&o)))||o}finally{s.cancel()}}var g9=t=>async(e,r,i)=>{for(;;)try{return await jL(e,r,i,t)}catch(n){if(r.isCancellationRequested)throw new Error(`Could not connect to debug target at ${e}: ${n.message}`);await Ne(200)}},Uf=g9(!0),Zw=g9(!1);function h9(t,e){let r=new URL(t),i=new URL(e);return i.host=r.host,i.toString()}var y9=async(t,e,r,i)=>{let n=r.connection===0?await xbe(e,i):await Zw(`http://localhost:${r.connection}`,i,t),s=r.inspectUri?Xw(r.inspectUri,r.url,n):n;for(;;)try{return await ci.create(s,i)}catch(o){if(i.isCancellationRequested)throw o;await Ne(200)}},e_=class{constructor(e){this.logger=e;this.pid=void 0;this.onExit=new X().event;this.onError=new X().event}async transport(e,r){return y9(this.logger,this,e,r)}kill(){}},t_=class{constructor(e,r){this.cp=e;this.logger=r;this.pid=void 0;this.exitEmitter=new X;this.onExit=this.exitEmitter.event;this.errorEmitter=new X;this.onError=this.errorEmitter.event;e.on("exit",i=>this.exitEmitter.fire(i||0)),e.on("error",i=>this.errorEmitter.fire(i))}get stderr(){return this.cp.stderr}get stdio(){return this.cp.stdio}async transport(e,r){return e.connection==="pipe"?new Sn(this.logger,this.cp.stdio[3],this.cp.stdio[4]):y9(this.logger,this,e,r)}kill(){Yn(this.cp.pid,this.logger)}};function xbe(t,e){if(!t.stderr)throw new Error("Cannot wait for a websocket for a target that lacks stderr");return new Promise((r,i)=>{let n=H9.createInterface({input:t.stderr}),s="",o=()=>c();n.on("line",l),n.on("close",o);let a=new De([t.onExit(()=>c()),t.onError(c)]),u=e.onCancellationRequested(()=>{p(),i(new Us(`Timed out after ${u} ms while trying to connect to the browser!`))});function c(f){p(),i(new Error(["Failed to launch browser!"+(f?" "+f.message:""),s,"","TROUBLESHOOTING: https://github.com/GoogleChrome/puppeteer/blob/master/docs/troubleshooting.md",""].join(`
`)))}function l(f){s+=f+`
`;let h=f.match(/^DevTools listening on (ws:\/\/.*)$/);h&&(p(),r(h[1]))}function p(){u.dispose(),n.removeListener("line",l),n.removeListener("close",o),a.dispose()}})}async function v9(t,e,r,i){let n=t.launchUnelevatedRequest({process:e,args:r});await js(n,i,"Could not launch browser unelevated")}var b9=()=>{};async function A9(t,e,r,i,n,s,o={}){var j,F,T,N;let{onStderr:a=b9,onStdout:u=b9,args:c=[],dumpio:l=!1,cwd:p=process.cwd(),env:f=Lt.empty,connection:h="pipe",cleanUp:g="wholeBrowser",url:H,inspectUri:b}=o,_=new zo(c),k=_.getSuggestedConnection();o.includeLaunchArgs!==!1?(_=qL(_,o),k===void 0&&(_=_.setConnection(h),k=h)):k===void 0&&(k="pipe");let U=["pipe","pipe","pipe"];k==="pipe"&&(l?U=["ignore","pipe","pipe","pipe","pipe"]:U=["ignore","ignore","ignore","pipe","pipe"]);let C;if(!!(n.supportsLaunchUnelevatedProcessRequest&&o.launchUnelevated)&&typeof k=="number"&&k!==0)await v9(t,e,_.toArray(),s),C=new e_(r);else{r.info("runtime.launch",`Launching Chrome from ${e}`);let E=w9.spawn(e,_.toArray(),{detached:!0,env:f.defined(),cwd:await tc(_9.promises,p)?p:process.cwd(),stdio:U});if(E.pid===void 0)throw await Promise.race([Ne(1e3).then(()=>new Error("Unable to launch the executable (undefined pid)")),new Promise(M=>E.once("error",M))]);C=new t_(E,r)}l?((j=C.stderr)==null||j.on("data",E=>a(E.toString())),(F=C.stdout)==null||F.on("data",E=>u(E.toString()))):((T=C.stderr)==null||T.resume(),(N=C.stdout)==null||N.resume());let q=()=>{g==="wholeBrowser"&&C.kill()};process.on("exit",q),C.onExit(()=>process.removeListener("exit",q));try{if(o.promisedPort){let O;k=await Promise.race([o.promisedPort,new Promise((z,D)=>{O=C.onExit(P=>{D(new re(HO(P)))})})]).finally(()=>O.dispose())}let E=await C.transport({connection:k,inspectUri:b||void 0,url:H||void 0},s),M=new Xt(E,r,i);return q=async()=>{g==="wholeBrowser"?(await M.rootSession().Browser.close({}),C.kill()):M.close()},{cdp:M,process:C}}catch(E){throw q(),E}}function qL(t,e={}){let{userDataDir:r=null,ignoreDefaultArgs:i=!1}=e,n=i===!0?new zo:zo.default;return i instanceof Array&&(n=n.filter(s=>!i.includes(s))),r&&(n=n.add("--user-data-dir",r)),n=n.merge(t),t.toArray().every(s=>s.startsWith("-"))&&e.hasUserNavigation&&(n=n.add("about:blank")),n}async function I9(t,e,r,i){let{browserWSEndpoint:n,browserURL:s}=t;if(n){let o=await ci.create(n,e);return new Xt(o,r,i)}else if(s){let o=await Zw(s,e,r),a=t.inspectUri?Xw(t.inspectUri,t.pageURL,o):o,u=await ci.create(a,e);return new Xt(u,r,i)}throw new Error("Either browserURL or browserWSEndpoint needs to be specified")}var En=class{constructor(e,r,i){this.logger=e;this.pathResolver=r;this.vscode=i;this._disposables=[];this._onTerminatedEmitter=new X;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new X;this.onTargetListChanged=this._onTargetListChangedEmitter.event}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[],this._attemptTimer&&clearTimeout(this._attemptTimer),this._targetManager&&this._targetManager.dispose()}resolveParams(e){return e.request==="attach"&&(e.type==="pwa-chrome"||e.type==="pwa-msedge"&&typeof e.useWebView!="object")&&e.browserAttachLocation==="workspace"}async launch(e,r){return this.resolveParams(e)?(this._lastLaunchParams={...e,timeout:1/0},await this.attemptToAttach(this._lastLaunchParams,r),{blockSessionTermination:!0}):{blockSessionTermination:!1}}_scheduleAttach(e,r){this._attemptTimer=setTimeout(()=>{this._attemptTimer=void 0,this.attemptToAttach(e,{...r,cancellationToken:gr})},1e3)}createTargetManager(e,r,i){return Au.connect(e,void 0,this.pathResolver,r,this.logger,i.telemetryReporter,i.targetOrigin)}async attemptToAttach(e,r){let i=await this.acquireConnectionForBrowser(r,e);this._connection=i,i.onDisconnected(()=>{this._connection=void 0,this._targetManager&&(this._targetManager.dispose(),this._targetManager=void 0,this._onTargetListChangedEmitter.fire()),this._lastLaunchParams===e&&e.restart?this._scheduleAttach(e,r):this._onTerminatedEmitter.fire({killed:!0,code:0})},void 0,this._disposables);let n=this._targetManager=await this.createTargetManager(i,e,r);if(!n)return;n.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),n.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),n.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),n.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire(),n.targetList().length||this._onTerminatedEmitter.fire({killed:!0,code:0})});let s=await Promise.race([n.waitForMainTarget(await this.getTargetFilter(n,e)),Ne(e.timeout).then(()=>{throw new re(cv())})]);return typeof s=="string"?s:void 0}async getTargetFilter(e,r){let i=La(r),n=dp(i);if(r.targetSelection!=="pick")return n;let s=await e.getCandiateInfo(n);if(s.length===0)return n;if(s.length===1||!this.vscode)return u=>u.targetId===s[0].targetId;let o=r_.t("Select a tab"),a=await this.vscode.window.showQuickPick(s.map(u=>({label:u.title,detail:u.url,targetId:u.targetId})),{matchOnDescription:!0,matchOnDetail:!0,placeHolder:o});return a?u=>u.targetId===a.targetId:n}async acquireConnectionForBrowser({telemetryReporter:e,cancellationToken:r},i){for(;this._lastLaunchParams===i;)try{return await this.acquireConnectionInner(e,i,r)}catch(n){if(r.isCancellationRequested)throw new re(Gh(r_.t("Cannot connect to the target at {0}: {1}",`${i.address}:${i.port}`,n.message)));await Ne(1e3)}throw new re(Gh(r_.t("Cannot connect to the target at {0}: {1}",`${i.address}:${i.port}`,"Cancelled")))}async acquireConnectionInner(e,r,i){let n=`http://${r.address}:${r.port}`;return await I9({browserURL:n,inspectUri:r.inspectUri,pageURL:r.url},i,this.logger,e)}async terminate(){var e;this._lastLaunchParams=void 0,(e=this._connection)==null||e.close()}async restart(){if(this._targetManager)for(let e of this._targetManager.targetList())e.type()==="page"&&!e.name().startsWith("devtools://")&&e.restart()}targetList(){let e=this._targetManager;return e?e.targetList():[]}};En=$([(0,Su.injectable)(),w(0,(0,Su.inject)(le)),w(1,(0,Su.inject)(ut)),w(2,(0,Su.optional)()),w(2,(0,Su.inject)(dn))],En);var Qn=I(Y());var E9=I(CI()),Yg=I(require("fs")),Eu=I(Y()),jf=I(require("path"));var to=class{constructor(e,r,i,n,s){this.storagePath=e;this.logger=r;this.pathResolver=i;this.initializeParams=n;this.fs=s;this._disposables=new De;this._terminated=!1;this._onTerminatedEmitter=new X;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new X;this.onTargetListChanged=this._onTargetListChangedEmitter.event}dispose(){this._disposables.dispose()}async launchBrowser({runtimeExecutable:e,trace:r,includeDefaultArgs:i,includeLaunchArgs:n,runtimeArgs:s,userDataDir:o,env:a,cwd:u,port:c,url:l,file:p,inspectUri:f,webRoot:h,cleanUp:g,launchUnelevated:H},b,_,k,U){let C=await this.findBrowserPath(e||"stable"),L;return typeof o=="string"?L=jf.resolve(o):o&&(L=jf.resolve(jf.join(this.storagePath,s!=null&&s.includes("--headless")?".headless-profile":".profile"))),Yg.mkdirSync(this.storagePath,{recursive:!0}),L&&(Yg.mkdirSync(L,{recursive:!0}),L=Yg.realpathSync(L)),await A9(b,C,this.logger,k,this.initializeParams,_,{onStdout:q=>b.output({category:"stdout",output:q}),onStderr:q=>b.output({category:"stderr",output:q}),dumpio:typeof r=="boolean"?r:r.stdio,cleanUp:g,hasUserNavigation:!!(l||p),cwd:u||h||void 0,env:Lt.merge(Lt.processEnv(),a),args:s||[],userDataDir:L,connection:c||(f?0:"pipe"),launchUnelevated:H,ignoreDefaultArgs:!i,includeLaunchArgs:n,url:l,inspectUri:f,promisedPort:U})}getFilterForTarget(e){return dp(La(e,["about:blank"]))}async prepareLaunch(e,{dap:r,targetOrigin:i,cancellationToken:n,telemetryReporter:s}){let o;try{o=await this.launchBrowser(e,r,n,s)}catch(c){throw new re(pO(c))}if(this._disposables.push(o.cdp.onDisconnected(()=>this.fireTerminatedEvent())),this._connectionForTest=o.cdp,this._launchParams=e,this._targetManager=await Au.connect(o.cdp,o.process,this.pathResolver,this._launchParams,this.logger,s,i),!this._targetManager)throw o.process.kill(),new re(Gh());this._targetManager.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),this._targetManager.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),this._disposables.push(this._targetManager),this._targetManager.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),this._targetManager.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire()});let a=this.getFilterForTarget(e),u=await js(this._targetManager.waitForMainTarget(a),n,"Could not attach to main target");if(!u)throw o.process.kill(),new re(cv());return u}async finishLaunch(e,r){if("skipNavigateForTest"in r)return;let i;if(r.file){let n=jf.resolve(r.webRoot||r.rootPath||"",r.file),s=Math.min(n.includes("#")?n.indexOf("#"):1/0,n.includes("?")?n.indexOf("?"):1/0);isFinite(s)&&!await ki(this.fs,n)?i=Ve(n.slice(0,s))+n.slice(s):i=Ve(n)}else i=r.url;i&&await e.cdp().Page.navigate({url:i})}async launch(e,r){let i=this.resolveParams(e);if(!i)return{blockSessionTermination:!1};let n=await this.prepareLaunch(i,r);return await this.finishLaunch(n,i),{blockSessionTermination:!0}}async terminate(){var e;await((e=this._targetManager)==null?void 0:e.closeBrowser())}async restart(){for(let e of this.targetList())e.type()==="page"&&e.restart()}async findBrowserByExe(e,r){var i;if(r==="*"){let n=await e.findWhere(s=>s.quality==="stable")||(await e.findAll())[0];return n==null?void 0:n.path}else return(0,E9.isQuality)(r)?(i=await e.findWhere(n=>n.quality===r))==null?void 0:i.path:r}targetList(){let e=this._targetManager;return e?e.targetList():[]}connectionForTest(){return this._connectionForTest}fireTerminatedEvent(){this._terminated||(this._terminated=!0,this._onTerminatedEmitter.fire({code:0,killed:!0}))}};to=$([(0,Eu.injectable)(),w(0,(0,Eu.inject)(Fs)),w(1,(0,Eu.inject)(le)),w(2,(0,Eu.inject)(ut)),w(3,(0,Eu.inject)(_i)),w(4,(0,Eu.inject)(Ie))],to);var nl=class extends to{constructor(r,i,n,s,o,a){super(r,i,o,a,s);this.browserFinder=n}resolveParams(r){return r.type==="pwa-chrome"&&r.request==="launch"&&r.browserLaunchLocation==="workspace"?r:void 0}async findBrowserPath(r){let i=await this.findBrowserByExe(this.browserFinder,r);if(!i||!await tc(this.fs,i))throw new re(uv("Chrome",r,(await this.browserFinder.findAll()).map(n=>n.quality)));return i}};nl=$([(0,Qn.injectable)(),w(0,(0,Qn.inject)(Fs)),w(1,(0,Qn.inject)(le)),w(2,(0,Qn.inject)(wc)),w(2,(0,Qn.tagged)("browser","chrome")),w(3,(0,Qn.inject)(Ie)),w(4,(0,Qn.inject)(ut)),w(5,(0,Qn.inject)(_i))],nl);var x9=require("crypto"),Zn=I(Y()),C9=require("net"),D9=require("os"),P9=require("path");var Cbe=["--do-not-de-elevate"],qf=class extends to{constructor(r,i,n,s,o,a){super(r,i,o,a,s);this.browserFinder=n}resolveParams(r){return r.type==="pwa-msedge"&&r.request==="launch"&&r.browserLaunchLocation==="workspace"?r:void 0}launchBrowser(r,i,n,s){return super.launchBrowser({...r,runtimeArgs:r.runtimeArgs??Cbe},i,n,s,r.useWebView?this.getWebviewPort(r,s):void 0)}getFilterForTarget(r){return r.useWebView&&r.urlFilter?dp(La(r)):super.getFilterForTarget(r)}async getWebviewPort(r,i){let n=We();if(!r.runtimeExecutable)return n.resolve(r.port),n.promise;let s=r.runtimeExecutable.split(/\\|\//).pop(),o=`VSCode_${(0,x9.randomBytes)(12).toString("base64")}`,a=`\\\\.\\pipe\\WebView2\\Debugger\\${s}\\${o}`,u=(0,C9.createServer)(c=>{c.on("data",async l=>{let p=JSON.parse(l.toString()),f=p.devtoolsActivePort||"",h=parseInt(f.split(`
`).shift()||""),g=r.port||h;n.resolve(g);let H=`ws://${r.address}:${g}/devtools/${p.type}/${p.id}`,b=await ci.create(H,gr),_=new Xt(b,this.logger,i);await _.rootSession().Runtime.runIfWaitingForDebugger({}),_.close()})});return u.on("error",n.reject),u.on("close",()=>n.resolve(r.port)),u.listen(a),r.userDataDir=r.userDataDir||(0,P9.join)((0,D9.tmpdir)(),`vscode-js-debug-userdatadir_${r.port}`),r.env=r.env||{},r.env.WEBVIEW2_USER_DATA_FOLDER=r.userDataDir.toString(),r.env.WEBVIEW2_ADDITIONAL_BROWSER_ARGUMENTS=`--remote-debugging-port=${r.port}`,r.env.WEBVIEW2_WAIT_FOR_SCRIPT_DEBUGGER="true",r.env.WEBVIEW2_PIPE_FOR_SCRIPT_DEBUGGER=o,n.promise}async findBrowserPath(r){let i=await this.findBrowserByExe(this.browserFinder,r);if(!i||!await tc(this.fs,i))throw new re(uv("Edge",r,(await this.browserFinder.findAll()).map(n=>n.quality)));return i}};qf=$([(0,Zn.injectable)(),w(0,(0,Zn.inject)(Fs)),w(1,(0,Zn.inject)(le)),w(2,(0,Zn.inject)(wc)),w(2,(0,Zn.tagged)("browser","edge")),w(3,(0,Zn.inject)(Ie)),w(4,(0,Zn.inject)(ut)),w(5,(0,Zn.inject)(_i))],qf);var Xo=I(Y());var L9=require("crypto"),i_=I(Y());var Dbe=0,ro=class{constructor(e){this.portLeaseTracker=e;this.teardown=new WeakMap}async launch(e,r,i){this.server&&this.server.close();let n=`/${(0,L9.randomBytes)(20).toString("hex")}`,s=this.server=await Pb(this.portLeaseTracker,{perMessageDeflate:!0,host:"127.0.0.1",path:n}),o=++Dbe;e.launchBrowserInCompanion({...i,serverPort:s.address().port,path:n,launchId:o});let a=await js(new Promise((c,l)=>{s.once("connection",c),s.once("error",l)}),r,"Timed out waiting for browser connection"),u=new ci(a);return this.teardown.set(u,()=>e.killCompanionBrowser({launchId:o})),u}close(e){var r;(r=this.teardown.get(e))==null||r()}dispose(){var e;(e=this.server)==null||e.close(),this.server=void 0}};ro=$([(0,i_.injectable)(),w(0,(0,i_.inject)(Ht))],ro);var Wf=class extends En{constructor(r,i,n,s){super(i,n,s);this.helper=r}resolveParams(r){return r.request==="attach"&&(r.type==="pwa-chrome"||r.type==="pwa-msedge")&&r.browserAttachLocation==="ui"}async acquireConnectionForBrowser(r,i){let n=await this.helper.launch(r.dap,r.cancellationToken,{type:i.type==="pwa-chrome"?"chrome":"edge",params:i,attach:{host:i.address,port:i.port}});return new Xt(n,this.logger,r.telemetryReporter)}};Wf=$([(0,Xo.injectable)(),w(0,(0,Xo.inject)(ro)),w(1,(0,Xo.inject)(le)),w(2,(0,Xo.inject)(ut)),w(3,(0,Xo.optional)()),w(3,(0,Xo.inject)(dn))],Wf);var Jo=I(Y());var Vf=class extends to{constructor(r,i,n,s,o,a){super(r,i,n,s,o);this.helper=a}resolveParams(r){return(r.type==="pwa-chrome"||r.type==="pwa-msedge")&&r.request==="launch"&&r.browserLaunchLocation==="ui"?r:void 0}async launchBrowser(r,i,n,s){let o=await this.helper.launch(i,n,{type:r.type==="pwa-chrome"?"chrome":"edge",browserArgs:qL(new zo(r.runtimeArgs||[]),{hasUserNavigation:!!r.url,ignoreDefaultArgs:!r.includeDefaultArgs}).setConnection(r.port||"pipe").toArray(),params:r});return{cdp:new Xt(o,this.logger,s),process:{onExit:new X().event,onError:new X().event,transport:()=>Promise.resolve(o),kill:()=>this.helper.close(o)}}}async findBrowserPath(){throw new Error("not implemented")}};Vf=$([(0,Jo.injectable)(),w(0,(0,Jo.inject)(Fs)),w(1,(0,Jo.inject)(le)),w(2,(0,Jo.inject)(ut)),w(3,(0,Jo.inject)(_i)),w(4,(0,Jo.inject)(Ie)),w(5,(0,Jo.inject)(ro))],Vf);var xu=I(Y()),N9=require("net");var Gf=class extends En{constructor(e,r,i){super(e,r,i)}resolveParams(e){return e.request==="attach"&&e.type==="pwa-msedge"&&typeof e.useWebView=="object"}async acquireConnectionForBrowser(e,r){let{getAppContainerProcessTokens:i}=await Promise.resolve().then(()=>I(O9())),n=i(r.useWebView.pipeName);if(!n)throw new re(dO());let s=n.map(u=>(0,N9.connect)(u)),o;try{o=await js(Cs(s.map(u=>new Promise(c=>u.on("error",()=>c(void 0)).on("connect",()=>c(u))))),e.cancellationToken)}finally{for(let u of s)u!==o&&u.destroy()}if(!o)throw new re(hO());let a=new Sn(this.logger,o);return new Xt(a,this.logger,e.telemetryReporter)}};Gf=$([(0,xu.injectable)(),w(0,(0,xu.inject)(le)),w(1,(0,xu.inject)(ut)),w(2,(0,xu.optional)()),w(2,(0,xu.inject)(dn))],Gf);var Jf=I(Y()),Q9=require("net");var zi=I(Y());var Qg=Symbol("ILinkedBreakpointLocation");var G9=I(require("path"));var eH=I(Y()),Du=I(require("path")),V9=require("url");var F9=require("fs"),Yo=I(require("path")),WL=require("url");function s_(t,e){return t?(t.endsWith("/")||(t+="/"),t+e):e}async function o_(t,e,r,i,n){e=Dt(e)||e;let s;if(t){if(bi(t))s=Dt(t);else if(Kr(t))s=await i(t,r,n)||t;else if(Yo.isAbsolute(e))s=Mbe(e,t);else{let o=new WL.URL(e).pathname,a=await i(o,r,n),u=Yo.dirname(a);s=Ha(u,t)}n.verbose("sourcemap.parsing","resolved sourceRoot",{sourceRoot:t,absSourceRoot:s})}else if(Yo.isAbsolute(e))s=Yo.dirname(e),n.verbose("sourcemap.parsing","no sourceRoot specified, using script dirname",{absSourceRoot:s});else{let o=new WL.URL(e).pathname||"/placeholder.js",a=await i(o,r,n);s=a?Yo.dirname(a):"",n.verbose("sourcemap.parsing","no sourceRoot specified, using webRoot + script path dirname",{absSourceRoot:s})}return s=$N(s),s=Ft(s),s}var Zg=async(t,e,r)=>{if(!t||!t.startsWith("/"))return"";let i=Object.keys(e).sort((n,s)=>s.length-n.length);for(let n of i){if(!n)continue;let s=e[n];if(n[0]!=="/"&&(r.verbose("sourcemap.parsing",`Keys should be absolute: ${n}`),n="/"+n),kbe(n,t))return Rbe(n,s,t)}return""},B9=(t,e)=>async(r,i,n)=>{if(process.platform==="win32"&&/^[a-z]:/i.test(r))return r;let s=await lp(t,Yo.dirname(e),"package.json");if(!s)return Zg(r,i,n);let o=await Zg(r,V$(i,a=>a.length>=s.length),n);if(process.platform!=="win32"&&r!=="/"&&!o){let a=await F9.promises.stat(r).catch(()=>{});if(a!=null&&a.isDirectory())return r}return o||s};function kbe(t,e){return t===e?!0:(t.endsWith("/")||(t+="/"),e.startsWith(t))}function Rbe(t,e,r){let i=decodeURIComponent(r.substring(t.length));return i?Ha(e,i):e}function Mbe(t,e){return Ri(Yo.dirname(t),e)}var W9=I(ym()),zf=I(require("path"));var c_="*",U9=new RegExp(ni(c_),"g"),a_="?:"+c_,Obe=new RegExp(ni(a_),"g"),VL=(t,e)=>{let r=e.match(t);return t.lastIndex=0,r?r.length:0},j9=new RegExp(`${ni(a_)}|${ni(c_)}`,"g"),u_=class{constructor(e,r){this.logger=r;this.replacers=[];let i=Object.keys(e).sort((n,s)=>s.replace(a_,"*").length-n.replace(a_,"*").length);for(let n of i){let s=e[n];if(!s.includes("*")&&/\$[0-9'`&]/.test(s)){this.replacers.push([new RegExp(`^${n}$`,"i"),s]);continue}let o=rt(n),a=`"${o}": "${s}"`,u=VL(U9,o)-VL(Obe,o);if(u>1){r.warn("runtime.sourcemap",`Warning: only one asterisk allowed in a sourceMapPathOverrides entry - ${a}`);continue}if(VL(U9,s)>u){r.warn("runtime.sourcemap",`The right side of a sourceMapPathOverrides entry must have 0 or 1 asterisks - ${a}}`);continue}let c="^",l=0;for(j9.lastIndex=0;;){let p=j9.exec(o);if(c+=ni(o.slice(l,p==null?void 0:p.index),"/"),!p)break;p[0]===c_?c+="(.*?)":c+=".*?",l=p.index+p[0].length}u===0&&(c+="([\\/\\\\].*)?",s+="*"),this.replacers.push([new RegExp(c+"$","i"),s.replace(/\$/g,"$$$$").replace(/\*/,"$1")])}}apply(e){let r=rt(e);for(let[i,n]of this.replacers){let s=r.replace(i,n);if(s!==r)return this.logger.verbose("runtime.sourcemap",`SourceMap: mapping ${e} => ${s}, via sourceMapPathOverrides entry - ${i.toString()}`),Ha(s)}return e}};var Nbe=/\x00/,q9,Kf=class{constructor(e,r){this.options=e;this.logger=r;this.sourceMapOverrides=new u_(this.options.sourceMapOverrides,this.logger);this.resolvePatterns=(q9=this.options.resolveSourceMapLocations)==null?void 0:q9.map(e=>{let r=e.startsWith("!")?"!":"",i=e.slice(r.length).replace(/\.[a-z0-9]+$/,".*");if(!Kr(i))return rt(e);i=rt(Ri(i));let n=PS(this.options.workspaceFolder),s=PS(i),o=0;for(let a=0;a<n.length&&a<s.length&&s[a].toLowerCase()===n[a].toLowerCase();a++)o+=n[a].length+1;return i=i.slice(0,o).replace(/[\[\]\(\)\{\}\!\*]/g,"\\$&")+i.slice(o),r+i})}shouldResolveSourceMap({sourceMapUrl:e,compiledPath:r}){if(r.startsWith(au)||r==="")return!1;if(!this.resolvePatterns||this.resolvePatterns.length===0)return!0;let i=Dt(e)||Er(e)&&r||e;if(i.startsWith("webpack-internal:///"))return!0;let n=Qy(e)?!1:_E(),s=this.rebaseRemoteToLocal(i);return(0,W9.default)((s!==i?[i,s]:[i]).map(rt),this.resolvePatterns,{dot:!0,nocase:!n}).length>0}rebaseRemoteToLocal(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return zf.resolve(e);let r=Oh(this.options.remoteRoot,e);if(r.startsWith(".."))return"";let i=Ha(this.options.localRoot,r);return i=LS(i),this.logger.verbose("runtime.sourcemap",`Mapped remoteToLocal: ${e} -> ${i}`),Ri(i)}rebaseLocalToRemote(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return e;let r=Oh(this.options.localRoot,e),i=Ha(this.options.remoteRoot,r);return i=Ft(i,!0),this.logger.verbose("runtime.sourcemap",`Mapped localToRemote: ${e} -> ${i}`),i}normalizeSourceMapUrl(e){e=e.replace(Nbe,"");let r=e.lastIndexOf("?");return r!==-1&&e.slice(r-4,r)!==".vue"&&(e=e.slice(0,r)),e}canMapPath(e){return zf.posix.isAbsolute(e)||zf.win32.isAbsolute(e)||bi(e)}};var GL="https?:\\/\\/[^\\/]+\\/",Cu=class extends Kf{constructor(r,i,n,s){super(n,s);this.vueMapper=r;this.fsUtils=i}absolutePathToUrlPath(r){r=Du.normalize(r);let{baseUrl:i,pathMapping:n}=this.options,s=["/",n["/"]],o=Object.entries(n).sort(([c,l],[p,f])=>f.length-l.length||p.length-c.length).find(([,c])=>Yy(c,r))||s;if(!o)return{url:Ve(r),needsWildcard:!1};if(i&&bi(i))return{url:fp(r),needsWildcard:!1};let a=Pa(Du.relative(o[1],r)),u=o[0].replace(/\/$|^\//g,"");return u&&(a=u+"/"+a),!i&&!Ov(a)?{url:a,needsWildcard:!0}:{url:Dv(i,a),needsWildcard:!1}}async urlToAbsolutePath({url:r,map:i}){let n=r.indexOf("?");return n!==-1&&r.slice(n-4,n)!==".vue"&&(r=r.slice(0,n)),i?this.sourceMapSourceToAbsolute(r,i):this.simpleUrlToAbsolute(r)}async simpleUrlToAbsolute(r){if(!r)return;if(bi(r)){let o=Dt(r);if(await this.fsUtils.exists(o))return o;let a=kN(r);if(await this.fsUtils.exists(a))return a}let i;try{let o=new V9.URL(r);if(!o.pathname||o.pathname==="/"?i="index.html":i=o.pathname,o.protocol==="webpack-internal:")return}catch{i=r}let n=Du.extname(i),s=i.replace(/^\//,"").split(/[\/\\]/);for(;s.length>0;){let o="/"+s.join("/"),a=await Zg(o,this.options.pathMapping,this.logger);if(a){if(!n&&await this.fsUtils.exists(a+".html"))return a+".html";if(await this.fsUtils.exists(a))return a}s.shift()}}async sourceMapSourceToAbsolute(r,i){if(!this.shouldResolveSourceMap(i.metadata))return;switch(this.vueMapper.getVueHandling(r)){case 2:return;case 1:let a=await this.vueMapper.lookup(r);if(a)return Ft(a);break;default:}r=this.normalizeSourceMapUrl(r);let{pathMapping:n}=this.options,s=s_(i.sourceRoot,r),o=this.sourceMapOverrides.apply(s);if(o!==s){o=Ft(o);let a=Ri(n["/"],"..","ClientApp",Oh(n["/"],o));return this.options.clientID==="visualstudio"&&s.startsWith("webpack:///")&&!await this.fsUtils.exists(o)&&await this.fsUtils.exists(a)?a:o}return bi(r)?Dt(r):Du.isAbsolute(r)?Ft(r):Ri(await o_(i.sourceRoot,i.metadata.compiledPath,n,Zg,this.logger),r)}absolutePathToUrlRegexp(r){let i=this.absolutePathToUrlPath(r),n=i.url,s=n.length;n.endsWith("index.html")?(s=n.length-10-1,n=n.slice(0,s)+"\\/?($|index(\\.html)?)"):n.endsWith(".html")&&(s=n.length-5,n=n.slice(0,s)+"(\\.html)?");let o=0;i.needsWildcard&&(n=GL+n,o=GL.length,s+=GL.length);let a=un(n,[o,s]);return i.needsWildcard?`${un(Ve(r))}|${a}`:a}};Cu=$([(0,eH.injectable)(),w(0,(0,eH.inject)(vf)),w(1,(0,eH.inject)(Gr))],Cu);var l_=class extends Cu{constructor(r,i,n,s){super(r,i,n,s);this.blazorInCodespacesRegexpSubstitution="$1:\\$2";if(this.options.remoteFilePrefix){let o=`\\${G9.default.sep}`,a=this.options.remoteFilePrefix.replace(new RegExp(o,"g"),o);this.blazorInCodespacesRegexp=new RegExp(`^${a}${o}([A-z])\\$${o}(.*)$`)}else this.blazorInCodespacesRegexp=new RegExp("")}absolutePathToUrlRegexp(r){if(this.options.remoteFilePrefix){let i=r.replace(this.blazorInCodespacesRegexp,this.blazorInCodespacesRegexpSubstitution),s=Pa(i).replace(/^(\w):(.*)$/,"$1$2"),o=un(s);if(o){let a=`dotnet://.*\\.dll/${o}`;return this.logger.verbose("runtime.breakpoints","absolutePathToUrlRegexp.blazor.remoteFs",{absolutePath:r,dotnetUrlRegexp:a}),a}}else{let i=Ve(r),n=un(i),s=super.absolutePathToUrlRegexp(r);return n.includes(s)?n:`${n}|${s}`}return super.absolutePathToUrlRegexp(r)}};var K9=require("url");function z9(t){if("file"in t&&t.file)return fp(t.file);if(t.url)try{let e=new K9.URL(t.url);return e.pathname="/",e.search="",e.hash="",e.protocol==="data:"?void 0:e.href}catch{}}var sl=I(require("path")),J9=require("url");var X9="node:",es=class extends Kf{constructor(r,i,n,s){super(n,s);this.fsUtils=r;this.linkedBp=i;this.options=n;this.logger=s}static shouldWarnAboutSymlinks(r){var i;return"runtimeArgs"in r&&!((i=r.runtimeArgs)!=null&&i.includes("--preserve-symlinks"))}static getOptions(r){return{workspaceFolder:r.__workspaceFolder,resolveSourceMapLocations:r.resolveSourceMapLocations,basePath:r.cwd,sourceMapOverrides:r.sourceMapPathOverrides,remoteRoot:r.remoteRoot,localRoot:r.localRoot}}derive(r){return new es(this.fsUtils,this.linkedBp,{...this.options,...r},this.logger)}get resolutionOptions(){return this.options}async urlToAbsolutePath({url:r,map:i}){if(r=this.normalizeSourceMapUrl(r),r.startsWith(X9)&&this.options.basePath)return r=sl.join(this.options.basePath,"lib",r.slice(X9.length)),r.endsWith(".js")||(r+=".js"),r;if(i)return this.sourceMapSourceToAbsolute(r,i);let n=Dt(r);if(n)return this.rebaseRemoteToLocal(n);if(Ov(r)){let o=this.sourceMapOverrides.apply(r);r=o===r?new J9.URL(r).pathname.slice(1):o}else if(sl.isAbsolute(r))r=this.sourceMapOverrides.apply(r);else return`<node_internals>/${r}`;let s=Ri(this.options.basePath??"",r);return this.rebaseRemoteToLocal(s)}absolutePathToUrl(r){return Ve(this.rebaseLocalToRemote(sl.normalize(r)))}async absolutePathToUrlRegexp(r){var n;let i=r;try{i=await this.fsUtils.realPath(r)}catch{}return Rv(i,r)?un(this.absolutePathToUrl(r)):((n=this.linkedBp)==null||n.warn(),un(this.absolutePathToUrl(r))+"|"+un(this.absolutePathToUrl(i)))}async sourceMapSourceToAbsolute(r,i){if(!this.shouldResolveSourceMap(i.metadata))return;let n=s_(i.sourceRoot,r),s=this.sourceMapOverrides.apply(n);return s!==n?Ft(s):bi(r)?Dt(r):!sl.isAbsolute(r)&&this.options.basePath?Ri(await o_(this.options.remoteRoot&&Kr(i.sourceRoot)&&this.rebaseRemoteToLocal(i.sourceRoot)||i.sourceRoot,i.metadata.compiledPath,{"/":this.options.basePath},B9(this.fsUtils,i.metadata.compiledPath),this.logger),r):this.rebaseRemoteToLocal(r)||r}};var li=Symbol("ISourcePathResolverFactory"),ts=class{constructor(e,r){this.fsUtils=e;this.linkedBp=r}create(e,r){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new es(this.fsUtils,es.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,es.getOptions(e),r);throw new Error(`Not usable for type ${e.type}`)}};ts=$([(0,zi.injectable)(),w(0,(0,zi.inject)(Gr)),w(1,(0,zi.optional)()),w(1,(0,zi.inject)(Qg))],ts);var Xf=class{constructor(e,r,i,n){this.initializeParams=e;this.vueMapper=r;this.fsUtils=i;this.linkedBp=n}create(e,r){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new es(this.fsUtils,es.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,es.getOptions(e),r);{let i=!!e.inspectUri;return new(i?l_:Cu)(this.vueMapper,this.fsUtils,{workspaceFolder:e.__workspaceFolder,resolveSourceMapLocations:e.resolveSourceMapLocations,baseUrl:z9(e),localRoot:null,remoteRoot:null,pathMapping:{"/":e.webRoot,...e.pathMapping},sourceMapOverrides:e.sourceMapPathOverrides,clientID:this.initializeParams.clientID,remoteFilePrefix:e.__remoteFilePrefix},r)}}};Xf=$([(0,zi.injectable)(),w(0,(0,zi.inject)(_i)),w(1,(0,zi.inject)(vf)),w(2,(0,zi.inject)(Gr)),w(3,(0,zi.optional)()),w(3,(0,zi.inject)(Qg))],Xf);var Y9=require("url");var p_=class extends Au{constructor(){super(...arguments);this.baseFilter=La(this.launchParams);this.filter=r=>{let{debugWebWorkerExtHost:i,debugWebviews:n}=this.launchParams;return!!(i&&(r.type==="worker"&&r.title==="DebugWorkerExtensionHost"||r.type==="page"&&r.title.includes("[Extension Development Host]"))||n&&r.type==="iframe"&&this.baseFilter(r))}}static async connectRenderer(r,i,n,s,o,a){let c=await r.rootSession().Target.attachToBrowserTarget({});if(!c)return;let l=r.createSession(c.sessionId);return new this(r,void 0,l,i,s,o,n,a)}waitForMainTarget(r){let i=this.launchParams;return i.debugWebWorkerExtHost&&this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(async({targetInfo:n})=>{if(!n.url.includes(i.__sessionId))return;let s=await this._browser.Target.attachToTarget({targetId:n.targetId,flatten:!0});s&&this.attachedToTarget(n,s.sessionId,!1)})),super.waitForMainTarget(r)}attachedToTarget(r,i,n,s){let o=super.attachedToTarget(r,i,n||this.filter(r),s,!1);return r.type==="iframe"&&o.setComputeNameFn(Fbe),o}},Fbe=t=>{let e;try{e=new Y9.URL(t.targetInfo.url)}catch{return}switch(e.searchParams.get("purpose")){case"customEditor":return`${e.searchParams.get("extensionId")} editor: ${e.host}`;case"notebookRenderer":return`Notebook Renderer: ${e.host}`;default:let r=e.searchParams.get("extensionId");return`Webview: ${r?r+" ":""} ${e.host}`}};var rs=class extends En{constructor(r,i,n){super(r,i);this.pathResolverFactory=n}async launch(r,i){if(r.type!=="pwa-extensionHost"||r.request!=="attach")return{blockSessionTermination:!1};let n=rs.debugIdToRendererDebugPort.get(r.__sessionId);if(!n)return{blockSessionTermination:!1};let s=ha({name:"Webview",type:"pwa-chrome",request:"attach",port:n,__workspaceFolder:r.__workspaceFolder,urlFilter:"",...r.rendererDebugOptions});return s.__sessionId=r.__sessionId,s.debugWebWorkerExtHost=r.debugWebWorkerHost,s.debugWebviews=r.debugWebviews,super.launch(s,i).catch(o=>this.logger.error("runtime.exception","Error in webview attach",{err:o})),{blockSessionTermination:!1}}async acquireConnectionInner(r,i,n){let s=new De,o=await new Promise((a,u)=>{let c=(0,Q9.createConnection)({port:i.port},()=>a(c));c.on("error",u),s.push(n.onCancellationRequested(()=>{c.destroy(),u(new Error("connection timed out"))}))}).finally(()=>s.dispose());return new Xt(new Sn(this.logger,o),this.logger,r)}async getTargetFilter(r){return r.filter}async createTargetManager(r,i,n){return new p_(r,void 0,r.rootSession(),this.pathResolverFactory.create(i,this.logger),this.logger,n.telemetryReporter,i,n.targetOrigin)}};rs.debugIdToRendererDebugPort=new Map,rs=$([(0,Jf.injectable)(),w(0,(0,Jf.inject)(le)),w(1,(0,Jf.inject)(ut)),w(2,(0,Jf.inject)(li))],rs);var io=class{constructor(){this.target={queue:[]}}connectTo(e){this.target={logger:e}}info(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:1})}verbose(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:0})}warn(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:2})}error(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:3})}fatal(e,r,i){this.log({tag:e,timestamp:Date.now(),message:r,metadata:i,level:4})}log(e){this.target&&("queue"in this.target?this.target.queue.push(e):this.target.logger.log(e))}getRecentLogs(){return this.target?"queue"in this.target?this.target.queue:this.target.logger.getRecentLogs():[]}assert(e,r){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",r,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(r);debugger;return!1}return!0}setup(){throw new Error("A ProxyLogger cannot be setup()")}dispose(){this.target=void 0}forTarget(){return new io}};var Z9=Symbol("ITargetOrigin"),f_=class{constructor(e){this.id=e}},Yf=class{constructor(e){this.id=e}};var d_=class{constructor(e,r){this.parentList=e;this.logger=r;this.targets=new Xs;this.onTerminatedEmitter=new X;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;e.onAdd(([,i])=>{i.parent&&this.targets.get(i.parent.id)&&this.targets.add(i.id,i.target)}),e.onRemove(([i])=>{this.targets.remove(i)&&!this.targets.size&&this.onTerminatedEmitter.fire({killed:!0,code:0})})}async launch(e,r){if(e.type!=="node-terminal"||e.request!=="attach")return{blockSessionTermination:!1};let i=this.parentList.get(e.delegateId);if(i===void 0)return setTimeout(()=>this.onTerminatedEmitter.fire({killed:!0,code:0}),1),{blockSessionTermination:!0};let n=i.target.targetOrigin();if(!(n instanceof Yf))throw new Error("Expected delegate session to have a mutable target origin");let s=i.target.logger;if(!(s instanceof io))throw new Error("Expected delegate session to have a proxy logger");return n.id=r.targetOrigin.id,s.connectTo(this.logger),setTimeout(()=>{this.targets.add(e.delegateId,i.target),i.dap.connect(r.dap)},0),{blockSessionTermination:!0}}terminate(){for(let e of this.targets.value())e.stop();return Promise.resolve()}restart(){for(let e of this.targets.value())e.restart();return Promise.resolve()}targetList(){return[...this.targets.value()]}dispose(){this.terminate()}};var eG=I(Y());var Bbe=0,no=class{constructor(){this.delegateSessions=new Xs;this.refsByTarget=new WeakMap}createLauncher(e){return new d_(this.delegateSessions,e)}addDelegate(e,r,i){let n={id:Bbe++,target:e,dap:r,parent:i&&this.refsByTarget.get(i)};return this.refsByTarget.set(e,n),this.delegateSessions.add(n.id,n),n.id}removeDelegate(e){let r=this.refsByTarget.get(e);r&&this.delegateSessions.remove(r.id)}};no=$([(0,eG.injectable)()],no);var hG=I(Y());var et=class{constructor(e,r,i){this.major=e;this.minor=r;this.patch=i}static parse(e){let r=e.split(".").map(Number);if(r.length!==3||r.some(isNaN))throw new SyntaxError(`Input string '${e}' is not a semver`);return new et(r[0],r[1],r[2])}static min(e,r){return e.lt(r)?e:r}compare(e){return this.major-e.major||this.minor-e.minor||this.patch-e.patch}gt(e){return this.compare(e)>0}gte(e){return this.compare(e)>=0}lt(e){return this.compare(e)<0}lte(e){return this.compare(e)<=0}toString(){return`${this.major}.${this.minor}.${this.patch}`}};var lG=I(Y());var uG=I(rG()),oo=I(require("fs")),al=I(Y()),cG=I(require("net")),YL=I(require("os")),QL=I(require("path"));var g_=class{constructor(e,r){this.sessionId=e;this.sink=r;this.onMessageEmitter=new X;this.onEndEmitter=new X;this.disposables=new De;this.onMessage=this.onMessageEmitter.event;this.onEnd=this.onEndEmitter.event;this.disposables.push(r.NodeWorker.on("detachedFromWorker",i=>{i.sessionId===e&&(this.onEndEmitter.fire(),this.dispose())}),r.NodeWorker.on("receivedMessageFromWorker",i=>{i.sessionId===e&&this.onMessageEmitter.fire([i.message,new oi])}))}send(e){this.sink.NodeWorker.sendMessageToWorker({message:e,sessionId:this.sessionId})}dispose(){this.disposables.isDisposed||(this.disposables.dispose(),this.onEndEmitter.fire())}};var zL=":::",H_=class{constructor(e){this.processEnv=e}get nodeOptions(){return this.processEnv.NODE_OPTIONS}set nodeOptions(e){e===void 0?delete this.processEnv.NODE_OPTIONS:this.processEnv.NODE_OPTIONS=e}get inspectorOptions(){let e=this.processEnv.VSCODE_INSPECTOR_OPTIONS;if(!e)return;let r=e.split(zL).find(i=>!!i);if(r)try{return JSON.parse(r)}catch{return}}set inspectorOptions(e){e===void 0?delete this.processEnv.VSCODE_INSPECTOR_OPTIONS:this.processEnv.VSCODE_INSPECTOR_OPTIONS=JSON.stringify(e)}unsetForTree(){delete this.processEnv.VSCODE_INSPECTOR_OPTIONS}updateInspectorOption(e,r){let i=this.inspectorOptions;i&&(this.inspectorOptions={...i,[e]:r})}};var XL=require("path"),iG=(0,XL.join)(__dirname,"watchdog.js"),y_=(0,XL.join)(__dirname,"bootloader.js");var iH=I(Se()),xn=I(Y()),so=require("path");var tH=I(Y()),nG=require("path");var ol=Symbol("IPackageJsonProvider"),v_={getPath:()=>Promise.resolve(void 0),getContents:()=>Promise.resolve(void 0)},Qf=class{constructor(e,r){this.fs=e;this.config=r;this.getPath=Ee(async()=>{if(this.config.type!=="pwa-node"||this.config.request!=="launch")return;let e=await lp(this.fs,this.config.cwd,"package.json");return e?(0,nG.join)(e,"package.json"):void 0});this.getContents=Ee(async()=>{let e=await this.getPath();if(e)try{let r=await this.fs.readFile(e);return JSON.parse(r.toString())}catch{return}})}};Qf=$([(0,tH.injectable)(),w(0,(0,tH.inject)(Gr)),w(1,(0,tH.inject)(je))],Qf);var Cn=Symbol("INodeBinaryProvider");function b_(t,e){return t.has(1)?e.addNodeOption("--inspect-publish-uid=http"):e}var Kbe=new Set(["npm","yarn","pnpm","tnpm","cnpm"]),sG=t=>Kbe.has((0,so.basename)(t,(0,so.extname)(t))),oG=(t,e)=>{if(!(!t||!sG(t)))return e.find(r=>!r.startsWith("-")&&r!=="run"&&r!=="run-script")},JL=new et(12,0,0),zbe=new et(8,0,0),Xbe=[{inclusiveMin:new et(16,0,0),inclusiveMax:new et(16,3,99),message:iH.t("Some breakpoints might not work in your version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes. Details: https://aka.ms/AAcsvqm")},{inclusiveMin:new et(7,0,0),inclusiveMax:new et(8,99,99),message:iH.t("You're running an outdated version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes.")}],kr=class{constructor(e,r){this.path=e;this.version=r;this.capabilities=new Set;r===void 0&&(r=JL),r.gte(new et(12,0,0))&&this.capabilities.add(0),r.gte(new et(12,6,0))&&this.capabilities.add(1)}get isPreciselyKnown(){return this.version!==void 0}get warning(){if(this.version){for(let e of Xbe)if(e.inclusiveMax.gte(this.version)&&e.inclusiveMin.lte(this.version))return e}}has(e,r){return!this.isPreciselyKnown&&r!==void 0?r:this.capabilities.has(e)}},rH=class extends re{constructor(r,i){super(aO(r.toString(),i));this.version=r;this.location=i}},Jbe=["node","node64","electron"],Ybe=new Map([[11,new et(12,0,0)],[10,new et(12,0,0)],[9,new et(12,0,0)],[8,new et(12,0,0)],[7,new et(12,0,0)],[6,new et(12,0,0)],[5,new et(10,0,0)],[4,new et(10,0,0)],[3,new et(10,0,0)],[2,new et(8,0,0)],[1,new et(8,0,0)]]),Qo=class{constructor(e,r,i){this.logger=e;this.fs=r;this.packageJson=i;this.knownGoodMappings=new Map}async resolveAndValidate(e,r="node",i,n){try{return await this.resolveAndValidateInner(e,r,i,n)}catch(s){if(!(s instanceof rH))throw s;if(await this.shouldTryDebuggingAnyway(s))return new kr(s.location,s.version instanceof et?s.version:void 0);throw s}}shouldTryDebuggingAnyway(e){return Promise.resolve(!1)}async resolveAndValidateInner(e,r,i,n){let s=await this.resolveBinaryLocation(r,e);if(this.logger.info("runtime.launch","Using binary at",{location:s,executable:r}),!s)throw new re(JS(r,iH.t("path does not exist")));if(i)return new kr(s,new et(i,0,0));let o=Mv(s);if(!Jbe.includes(o)){if(sG(s)){let H=await this.packageJson.getPath();H&&(e=e.addToPath((0,so.resolve)((0,so.dirname)(H),"node_modules/.bin"),"prepend"))}try{let H=await this.resolveAndValidateInner(e,"node",void 0,n);return new kr(s,H.version)}catch(H){if(gO(H,9230))throw H;return new kr(s,void 0)}}if(s.startsWith("/snap/"))return new kr(s,void 0);let a=this.knownGoodMappings.get(s);if(a)return a;let u=await this.getVersionText(s,n);if(!u)return new kr(s,void 0);this.logger.info("runtime.launch","Discovered version",{version:u});let c=/v([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(u);if(!c)throw new rH(u,s);let[,l,p,f]=c.map(Number),h=new et(l,p,f);if(o==="electron"){let H=await this.resolveAndValidate(e);h=et.min(Ybe.get(h.major)??JL,H.version??JL)}if(h.lt(zbe))throw new rH(h,s);let g=new kr(s,h);return this.knownGoodMappings.set(s,g),g}async resolveBinaryLocation(e,r){return e&&(0,so.isAbsolute)(e)?await AM(this.fs,e,r):await Xy(this.fs,e,r.value)}async getVersionText(e,r){var i;try{let{stdout:n}=await J0(e,["--version"],{env:Lt.processEnv().defined(),cwd:r});return n.trim()}catch(n){throw r&&!((i=await ki(this.fs,r))!=null&&i.isDirectory())?new re(oO(r)):new re(JS(e,n.message))}}};Qo=$([(0,xn.injectable)(),w(0,(0,xn.inject)(le)),w(1,(0,xn.inject)(Ie)),w(2,(0,xn.inject)(ol))],Qo);var Zf=class extends Qo{constructor(r,i,n,s){super(r,i,n);this.vscode=s}async shouldTryDebuggingAnyway({message:r}){if(!this.vscode)return!1;let i=iH.t("Yes");return await this.vscode.window.showErrorMessage(r,i)===i}};Zf=$([w(0,(0,xn.inject)(le)),w(1,(0,xn.inject)(Ie)),w(2,(0,xn.inject)(ol)),w(3,(0,xn.optional)()),w(3,(0,xn.inject)(dn))],Zf);var aG=require("path");var ed=class{constructor(e,r,i,n,s,o,a={},u){this.launchConfig=e;this.targetOriginValue=r;this.connection=i;this.targetInfo=s;this.logger=o;this.lifecycle=a;this._parent=u;this._serialize=Promise.resolve(void 0);this._attached=!1;this._onNameChangedEmitter=new X;this._onDisconnectEmitter=new X;this.entryBreakpoint=void 0;this.onDisconnect=this._onDisconnectEmitter.event;this.onNameChanged=this._onNameChangedEmitter.event;this.connection=i,this._cdp=n,n.pause(),this._waitingForDebugger=s.type==="waitingForDebugger",s.title?this._targetName=`${(0,aG.basename)(s.title)} [${s.processId}]`:this._targetName=`[${s.processId}]`,n.Target.on("targetDestroyed",()=>this.connection.close()),i.onDisconnected(()=>this._disconnected())}id(){return this.targetInfo.targetId}processId(){return this.targetInfo.processId}name(){return this._targetName}fileName(){return this.targetInfo.title}type(){return"node"}targetOrigin(){return this.targetOriginValue}parent(){return this._parent}async initialize(){this.lifecycle.initialized&&(this.entryBreakpoint=await this.lifecycle.initialized(this)||void 0)}waitingForDebugger(){return this._waitingForDebugger}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?Ve(e):e}supportsCustomBreakpoints(){return!1}executionContextName(){return this._targetName}hasParent(){return!!this._parent}async runIfWaitingForDebugger(){await this._cdp.Runtime.runIfWaitingForDebugger({})}async _disconnected(){this._onDisconnectEmitter.fire()}canAttach(){return!this._attached}async attach(){return this._serialize=this._serialize.then(async()=>{if(!this._attached)return this._doAttach()}),this._serialize}async _doAttach(){this._waitingForDebugger=!1,this._attached=!0;let e=await this._cdp.Target.attachToTarget({targetId:this.targetInfo.targetId});if(!e){this.logger.info("runtime.launch","Failed to attach to target",{targetId:this.targetInfo.targetId});return}this._cdp.NodeWorker.enable({waitForDebuggerOnStart:!0}),e&&"__dynamicAttach"in e&&(await this._cdp.Runtime.enable({}),await this._cdp.Debugger.enable({}));let r;return this._cdp.Runtime.on("executionContextCreated",i=>{i.context.auxData&&i.context.auxData.isDefault&&(r=i.context.id)}),this._cdp.Runtime.on("executionContextDestroyed",i=>{i.executionContextId===r&&this.connection.close()}),this._cdp}async afterBind(){this._cdp.resume()}canDetach(){return this._attached}async detach(){this._serialize=this._serialize.then(async()=>{if(this._waitingForDebugger){let e=await this._doAttach();await(e==null?void 0:e.Runtime.runIfWaitingForDebugger({}))}this._attached&&this._doDetach()})}async _doDetach(){await Promise.all([this._cdp.Target.detachFromTarget({targetId:this.targetInfo.targetId}),this._cdp.NodeWorker.disable({})]),this.connection.close(),this._attached=!1}canRestart(){return!1}restart(){}canStop(){return!0}stop(){try{this.lifecycle.close&&this.lifecycle.close(this)}finally{this.connection.close()}}};var Ci=class{constructor(e,r,i,n){this.pathProvider=e;this.logger=r;this.portLeaseTracker=i;this.pathResolverFactory=n;this.serverConnections=new Set;this.targets=new Xs;this.onTerminatedEmitter=new X;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;this.bootloaderFile=Ee(this.getBootloaderFile.bind(this))}async launch(e,r){let i=this.resolveParams(e);if(!i)return{blockSessionTermination:!1};this._stopServer();let{server:n,pipe:s}=await this._startServer(r.telemetryReporter),o=this.logger.forTarget(),a=this.run={server:n,serverAddress:s,params:i,context:r,logger:o,pathResolver:this.pathResolverFactory.create(i,this.logger)};return await this.launchProgram(a),{blockSessionTermination:!0}}async terminate(){this.program?await this.program.stop():this.onProgramTerminated({code:0,killed:!0})}async restart(e){if(!this.run)return;let r=this.program;r&&(this.program=void 0,await r.stop(),await Promise.race([Ne(2e3).then(()=>!1),Promise.all([...this.serverConnections].map(n=>new Promise(s=>n.onDisconnected(s))))])||(this.logger.warn("runtime.launch","Timeout waiting for server connections to close"),this.closeAllConnections())),await this.launchProgram({...this.run,params:e?this.resolveParams(e)??this.run.params:this.run.params,context:{...this.run.context,cancellationToken:this.run.params.timeout>0?mr.withTimeout(this.run.params.timeout).token:gr}})}targetList(){return[...this.targets.value()]}dispose(){this._stopServer()}onProgramTerminated(e){this.onTerminatedEmitter.fire(e),this._stopServer(),this.program=void 0}resolveNodePath(e,r="node"){return this.pathProvider.resolveAndValidate(Lt.merge(Lt.processEnv(),this.getConfiguredEnvironment(e)),r,e.nodeVersionHint,e.cwd)}getConfiguredEnvironment(e){let r=Lt.empty;if(e.envFile)try{r=r.merge(e0e(e.envFile))}catch(i){throw new re(sO(i.message))}return r.merge(e.env)}async resolveEnvironment({params:e,serverAddress:r},i,n){let s=this.getConfiguredEnvironment(e),o=await this.bootloaderFile(e.cwd,i),a={inspectorIpc:r,deferredMode:!1,waitForDebugger:"",execPath:await Xy(oo.promises,"node",process.env),onlyEntrypoint:!e.autoAttachChildProcesses,verbose:e.trace===!0||typeof e.trace=="object"&&e.trace.stdio?!0:void 0,autoAttachMode:"always",mandatePortTracking:this.portLeaseTracker.isMandated?!0:void 0,...n},u={NODE_OPTIONS:` --require ${o.interpolatedPath} `,VSCODE_INSPECTOR_OPTIONS:zL+JSON.stringify(a),ELECTRON_RUN_AS_NODE:null},c=s.lookup("NODE_OPTIONS");c&&(u.NODE_OPTIONS+=` ${c}`);let l=Lt.processEnv().lookup("NODE_OPTIONS");return l&&(u.NODE_OPTIONS+=` ${l}`),s.merge({...u})}createLifecycle(e,r,i){return{}}async _startServer(e){let r=zy(),i=await new Promise((n,s)=>{let o=cG.createServer(a=>this._startSession(a,e)).on("error",s).listen(r,()=>n(o))});return{pipe:r,server:i}}_stopServer(){var e,r;(e=this.run)==null||e.server.close(),this.run=void 0,(r=this.bootloaderFile.value)==null||r.then(i=>i.dispose()),this.bootloaderFile.forget(),this.closeAllConnections()}closeAllConnections(){this.serverConnections.forEach(e=>e.close()),this.serverConnections.clear()}async _startSession(e,r){if(!this.run)return;let{connection:i,cdp:n,targetInfo:s}=await this.acquireTarget(e,r,this.run.logger);if(!this.run){e.destroy();return}s.processId===void 0&&(s.processId=Number(s.targetId));let o=new ed(this.run.params,this.run.context.targetOrigin,i,n,s,this.run.logger,this.createLifecycle(n,this.run,s),s.openerId?this.targets.get(s.openerId):void 0);this.listenToWorkerDomain(n,r,o),this.targets.add(s.targetId,o),o.onDisconnect(()=>this.targets.remove(s.targetId))}async listenToWorkerDomain(e,r,i){e.NodeWorker.on("attachedToWorker",n=>{let s=new g_(n.sessionId,e),o=new Jp(i.launchConfig,{attached:!0,canAccessOpener:!1,type:"node-worker",targetId:`${i.id()}-${n.sessionId}`,title:n.workerInfo.title,url:n.workerInfo.url,openerId:i.id()},i,i.targetOrigin(),new Xt(s,i.logger,r).rootSession(),i.logger),a=new De;a.push(s),a.push(i.onDisconnect(()=>a.dispose())),a.push(s.onEnd(()=>a.dispose())),a.callback(()=>this.targets.remove(o.id())),this.targets.add(o.id(),o)})}async acquireTarget(e,r,i){let n=new Xt(new Sn(i,e),i,r);this.serverConnections.add(n),n.onDisconnected(()=>this.serverConnections.delete(n));let s=n.rootSession(),{targetInfo:o}=await new Promise(c=>s.Target.on("targetCreated",c)),a=o,u=this.portLeaseTracker.register(a.processInspectorPort);return n.onDisconnected(()=>u.dispose()),{targetInfo:a,cdp:s,connection:n,logger:i}}async getBootloaderFile(e,r){let i=rt(y_);if(!i.includes(" "))return{interpolatedPath:i,dispose:()=>{}};if(r.has(0))return{interpolatedPath:`"${i}"`,dispose:()=>{}};let n=`require(${JSON.stringify(i)})`;if(!YL.tmpdir().includes(" ")||!e){let a=QL.join(YL.tmpdir(),"vscode-js-debug-bootloader.js");return await oo.promises.writeFile(a,n),{interpolatedPath:a,dispose:()=>{}}}let s=".vscode-js-debug-bootloader.js",o=QL.join(e,s);return await oo.promises.writeFile(o,n),{interpolatedPath:`./${s}`,dispose:()=>oo.unlinkSync(o)}}async gatherTelemetryFromCdp(e,r){for(let i=0;i<8;i++){let n=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:"typeof process === 'undefined' || process.pid === undefined ? 'process not defined' : ({ processId: process.pid, nodeVersion: process.version, architecture: process.arch })"+It()});if(!this.program)return;if(!n||!n.result.value){this.logger.error("runtime.target","Undefined result getting telemetry");return}if(typeof n.result.value!="object"){this.logger.info("runtime.target","Process not yet defined, will retry"),await Ne(50*2**i);continue}let s=n.result.value;return r.context.telemetryReporter.report("nodeRuntime",{version:s.nodeVersion,arch:s.architecture}),this.program.gotTelemetery(s),s}}};Ci=$([(0,al.injectable)(),w(0,(0,al.inject)(Cn)),w(1,(0,al.inject)(le)),w(2,(0,al.inject)(Ht)),w(3,(0,al.inject)(li))],Ci);function e0e(t){if(!oo.existsSync(t))return{};let e=t0e(oo.readFileSync(t,"utf8"));return uG.parse(Buffer.from(e))}function t0e(t){return t&&t[0]==="\uFEFF"&&(t=t.substr(1)),t}var Pu=class extends Ci{async appendEnvironmentVariables(e,r){let i="typeof process==='undefined'||process.pid===undefined?'process not defined':(()=>{"+Object.entries(r.defined()).map(([n,s])=>{let o=JSON.stringify(n);return`process.env[${o}]=(process.env[${o}]||'')+${JSON.stringify(s)}`}).join(";")+"})()"+It();for(let n=0;n<5;n++){let s=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:i});if(!s){this.logger.error("runtime.target","Undefined result setting child environment vars");return}if(!s.exceptionDetails&&s.result.value!=="process not defined")return;this.logger.error("runtime.target","Error setting child environment vars",s),await Ne(50)}}};Pu=$([(0,lG.injectable)()],Pu);var w_=class{constructor(e,r){this.a=e;this.b=r;this.stopped=Promise.race([this.a.stopped.then(async e=>await this.b.stop()&&e),this.b.stopped.then(async e=>await this.a.stop()&&e)])}gotTelemetery(e){this.a.gotTelemetery(e),this.b.gotTelemetery(e)}async stop(){return(await Promise.all([this.a.stop(),this.b.stop()]))[0]}},__=class{constructor(e,r,i){this.child=e;this.logger=r;this.killBehavior=i;this.killed=!1;this.stopped=new Promise((n,s)=>{e.once("exit",o=>n({killed:this.killed,code:o||0})),e.once("error",o=>s({killed:this.killed,code:1,error:o}))})}gotTelemetery(){}stop(){return this.killed=!0,Yn(this.child.pid,this.logger,this.killBehavior),this.stopped}},Zo=class{constructor(){this.stopped=new Promise(e=>this.stopDefer=e)}gotTelemetery(e){this.telemetry=e}stop(){return this.stopDefer({code:0,killed:!0}),this.stopped}},Tu=class extends Zo{constructor(r){super();this.wd=r;r.onEnd(i=>{this.stopDefer(i),this.wd.dispose()})}stop(){return this.wd.dispose(),this.stopped}},nH=class{constructor(e,r,i){this.terminalResult=e;this.logger=r;this.killBehavior=i;this.didStop=!1;this.stopped=new Promise(e=>this.onStopped=r=>{this.didStop=!0,e({code:0,killed:r})});e.processId&&this.startPollLoop(e.processId)}gotTelemetery({processId:e}){if(this.didStop){Yn(e,this.logger,this.killBehavior);return}this.loop||this.startPollLoop(e)}stop(){return this.didStop?this.stopped:(this.didStop=!0,this.loop?(Yn(this.loop.processId,this.logger,this.killBehavior),this.startPollLoop(this.loop.processId,nH.killConfirmInterval)):this.terminalResult.shellProcessId?(Yn(this.terminalResult.shellProcessId,this.logger,this.killBehavior),this.startPollLoop(this.terminalResult.shellProcessId,nH.killConfirmInterval)):this.onStopped(!0),this.stopped)}startPollLoop(e,r=nH.terminationPollInterval){this.loop&&clearInterval(this.loop.timer);let i={processId:e,timer:setInterval(()=>{r0e(e)||(clearInterval(i.timer),this.onStopped(!0))},r)};this.loop=i}},Lu=nH;Lu.terminationPollInterval=1e3,Lu.killConfirmInterval=200;function r0e(t){try{return process.kill(t,0),!0}catch{return!1}}var dG=I(require("net"));var pG=require("crypto"),fG=()=>(0,pG.randomBytes)(12).toString("hex");var Di=class{constructor(e,r){this.info=e;this.server=r;this.onEndEmitter=new X;this.cts=new mr;this.gracefulExit=!1;this.targetAlive=!1;this.targetInfo={targetId:this.info.ownId??fG(),processId:Number(this.info.pid)||0,type:this.info.waitForDebugger?"waitingForDebugger":"",title:this.info.scriptName,url:"file://"+this.info.scriptName,openerId:this.info.openerId,attached:!0,canAccessOpener:!1,processInspectorPort:Number(new URL(this.info.inspectorURL).port)};this.onEnd=this.onEndEmitter.event;this.listenToServer()}get isTargetAlive(){return this.targetAlive}static async attach(e){let r=await new Promise((n,s)=>{let o=dG.createConnection(e.ipcAddress,()=>n(o));o.on("error",s)}),i=new Sn(wn.null,r);return new Di(e,i)}listenToServer(){let{server:e,targetInfo:r}=this;e.send(JSON.stringify({method:"Target.targetCreated",params:{targetInfo:r}})),e.onMessage(async([i])=>{if(this.target&&!i.includes("Target.attachToTarget")&&!i.includes("Target.detachFromTarget")){this.target.send(i);return}let n=await this.execute(i);n&&e.send(JSON.stringify(n))}),e.onEnd(()=>{this.disposeTarget(),this.onEndEmitter.fire({killed:this.gracefulExit,code:this.gracefulExit?0:1})})}dispose(){this.gracefulExit=!0,this.cts.dispose(!0),this.disposeTarget(),this.server.dispose()}async execute(e){var i;let r=JSON.parse(e);switch(r.method){case"Target.attachToTarget":return this.target&&this.disposeTarget(),this.target=await this.createTarget(),{id:r.id,result:{sessionId:this.targetInfo.targetId,__dynamicAttach:this.info.dynamicAttach?!0:void 0}};case"Target.detachFromTarget":return this.gracefulExit=!0,this.disposeTarget(),{id:r.id,result:{}};default:(i=this.target)==null||i.send(r);return}}async createTarget(){this.gracefulExit=!1;let e=await ci.create(this.info.inspectorURL,this.cts.token,this.info.remoteHostHeader);return e.onMessage(([r])=>this.server.send(r)),e.onEnd(()=>{e&&this.server.send(JSON.stringify({method:"Target.targetDestroyed",params:{targetId:this.targetInfo.targetId,sessionId:this.targetInfo.targetId}})),this.targetAlive=!1,this.server.dispose()}),e}disposeTarget(){this.target&&(this.target.dispose(),this.target=void 0)}};var ZL=class extends Tu{constructor(r,i){super(r);this.logger=i;this.stopped.then(()=>{this.telemetry&&Yn(this.telemetry.processId,this.logger,"polite")})}},td=class extends Pu{constructor(){super(...arguments);this.restarting=!1}async restart(){var r;this.restarting=!0,this.onProgramTerminated({code:0,killed:!0,restart:!0}),(r=this.program)==null||r.stop()}resolveParams(r){return r.type==="pwa-extensionHost"&&r.request==="attach"?r:void 0}async launchProgram(r){let i=await Uf(`http://localhost:${r.params.port}`,r.context.cancellationToken,this.logger),n=await Di.attach({ipcAddress:r.serverAddress,scriptName:"Extension Host",inspectorURL:i,waitForDebugger:!0,dynamicAttach:!0}),s=this.program=new ZL(n,this.logger);this.program.stopped.then(o=>{s===this.program&&this.onProgramTerminated(o)})}createLifecycle(r,i,n){return n.openerId?{}:{initialized:()=>this.onFirstInitialize(r,i,n)}}async onFirstInitialize(r,i,n){this.setEnvironmentVariables(r,i,n.targetId);let s=await this.gatherTelemetryFromCdp(r,i),o=this.program;if(s&&o){let a=new Lu({processId:s.processId},this.logger,"forceful");a.stopped.then(()=>o.stop()),o.stopped.then(()=>{this.restarting||a.stop()})}}async setEnvironmentVariables(r,i,n){if(!i.params.autoAttachChildProcesses)return;let s=await this.resolveEnvironment(i,new kr("node",et.parse(process.versions.node)),{openerId:n});return this.appendEnvironmentVariables(r,s.update("ELECTRON_RUN_AS_NODE",null))}};td=$([(0,hG.injectable)()],td);var sH=require("fs"),mG=I(Y());var rd=class extends Ci{resolveParams(e){return e.type==="pwa-extensionHost"&&e.request==="launch"?e:void 0}async launchProgram(e){let r=e.params.port||await Wa(),i=await e.context.dap.launchVSCodeRequest({args:i0e(e.params,r),env:this.getConfiguredEnvironment(e.params).defined(),debugRenderer:e.params.debugWebviews||e.params.debugWebWorkerHost});i.rendererDebugPort&&rs.debugIdToRendererDebugPort.set(e.params.__sessionId,i.rendererDebugPort),this.program=new Zo,this.program.stop()}};rd=$([(0,mG.injectable)()],rd);var i0e=(t,e)=>{let r=t.args.map(i=>{if(i.startsWith("-")){let n=i.split("=",2);return n.length===2&&((0,sH.existsSync)(n[1])||(0,sH.existsSync)(n[1]+".js"))?{prefix:n[0]+"=",path:n[1]}:{prefix:i}}else{try{let n=(0,sH.lstatSync)(i);if(n.isDirectory())return{prefix:"--folder-uri=",path:i};if(n.isFile())return{prefix:"--file-uri=",path:i}}catch{}return{path:i}}});return t.noDebug||r.unshift({prefix:`--inspect-brk-extensions=${e}`}),r.unshift({prefix:`--debugId=${t.__sessionId}`}),r};var xG=I(Se()),cl=I(Y());var gG=require("crypto"),oH=require("fs"),HG=require("os"),yG=I(require("path")),A_=class{constructor(){this.disposed=!1;this.path=yG.join((0,HG.tmpdir)(),`node-debug-callback-${(0,gG.randomBytes)(8).toString("hex")}`);this.file=oH.promises.open(this.path,"w")}static isValid(e){try{let r=(0,oH.readFileSync)(e);return r.length?r.readDoubleBE()>Date.now()-A_.recencyDeadline:!1}catch{return!1}}async startTouchLoop(){await this.touch(),this.disposed||(this.updateInterval=setInterval(()=>this.touch(),A_.updateInterval))}async touch(e=()=>Date.now()){let r=await this.file,i=Buffer.alloc(8);i.writeDoubleBE(e()),await r.write(i,0,i.length,0)}async dispose(){if(!this.disposed){this.disposed=!0,this.updateInterval&&clearInterval(this.updateInterval);try{await(await this.file).close(),await oH.promises.unlink(this.path)}catch{}}}},id=A_;id.updateInterval=1e3,id.recencyDeadline=2e3;var IG=require("fs");var wG=require("path");var vG=require("child_process"),bG=I(Yw()),nd=class{constructor(e=vG.spawn){this.spawn=e}lookup(e,r){return new Promise((i,n)=>{let s=this.createProcess(),o=this.createParser();s.on("error",n),s.stderr.on("error",a=>n(`Error finding processes: ${a.toString()}`)),s.stdout.pipe((0,bG.default)(/\r?\n/)).on("data",a=>{let u=o(a);u&&(r=e(u,r))}),s.on("close",(a,u)=>{a===0?i(r):u?n(new Error(`process terminated with signal: ${u}`)):a&&n(new Error(`process terminated with exit code: ${a}`))})})}};var sd=class extends nd{constructor(r){super();this.fsUtils=r}async getWorkingDirectory(r){try{let{stdout:i}=await J0("lsof",["-a","-dcwd","-Fn",`-p${r}`]),n=i.trim().split(`
`).pop().slice(1);return n&&(0,wG.isAbsolute)(n)&&await this.fsUtils.exists(n)?n:void 0}catch(i){if(i instanceof Oo)return;throw i}}createProcess(){return this.spawn("ps",["-xo",`pid=PID,ppid=PPID,comm=${"a".repeat(256)},command=COMMAND`])}createParser(){let r;return i=>{if(!r){r=i.indexOf("COMMAND");return}let n=/^\W*([0-9]+)\W*([0-9]+)\W*/.exec(i);if(n)return{pid:Number(n[1]),ppid:Number(n[2]),command:i.slice(n[0].length,r).trim(),args:i.slice(r).trim()}}}};var I_=class extends sd{createProcess(){return this.spawn("ps",["-axo","pid=PID,ppid=PPID,comm:30,command=COMMAND"])}createParser(){let e=super.createParser();return r=>{let i=e(r);if(!i)return;let n=i.args.indexOf(i.command);if(n===-1)return i;for(n=n+i.command.length;n<i.args.length&&i.args[n]!==" ";)n++;return i.command=i.args.substr(0,n),i.args=i.args.substr(n+1),i}}};var _G=require("path");var S_=class extends nd{async getWorkingDirectory(){}createProcess(){let e=(0,_G.join)(process.env.WINDIR||"C:\\Windows","System32","wbem","WMIC.exe");return this.spawn(e,["process","get","CommandLine,CreationDate,ParentProcessId,ProcessId"])}createParser(){let e=/^(.*)\s+([0-9]+)\.[0-9]+[+-][0-9]+\s+([0-9]+)\s+([0-9]+)$/;return r=>{let i=e.exec(r.trim());if(!i||i.length!==5)return;let n=Number(i[4]),s=Number(i[3]),o=Number(i[2]),a=i[1].trim();if(!isNaN(n)&&!isNaN(s)&&a){let u=a;if(a[0]==='"'){let c=a.indexOf('"',1);c>0&&(u=a.substr(1,c-1),a=a.substr(c+2))}else{let c=a.indexOf(" ");c>0?(u=a.substr(0,c),a=a.substr(c+1)):a=""}return{pid:n,ppid:s,command:u,args:a,date:o}}}}};var AG=new $i(IG.promises),aH=process.platform==="win32"?new S_:process.platform==="darwin"?new sd(AG):new I_(AG);function E_(t){let e=/--inspect(-brk)?(=((\[[0-9a-fA-F:]*\]|[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+|[a-zA-Z0-9\.]*):)?(\d+))?/,r=/--inspect-port=(\d+)/,i,n,s=e.exec(t);return s&&s.length>=1&&(s.length>=5&&s[4]&&(i=s[4]),s.length>=6&&s[5]&&(n=parseInt(s[5]))),s=r.exec(t),s&&s.length===2&&(n=parseInt(s[1])),{address:i,port:n}}async function SG(t,e,r,i=gr){let n=await n0e(t.pid,r);if(!n)return[];let s=[],o=n.children.slice();for(;o.length;){let a=o.pop();o=o.concat(a.children);let{port:u}=E_(a.args);u&&s.push(jL(`http://${t.hostname}:${u}`,i,r,!0).then(c=>Di.attach({ipcAddress:t.ipcAddress,scriptName:"Child Process",inspectorURL:c,waitForDebugger:!0,dynamicAttach:!0,pid:String(a.pid),openerId:e})).catch(c=>r.info("internal","Could not spawn WD for child process",{err:c,port:u,child:a})))}return(await Promise.all(s)).filter(a=>!!a)}async function n0e(t,e){let r=new Map;r.set(0,{children:[],pid:0,ppid:0,command:"",args:""});try{await aH.lookup(({pid:n,ppid:s,command:o,args:a})=>(n!==s&&r.set(n,{pid:n,ppid:s,command:o,args:a,children:[]}),r),null)}catch(n){e.warn("internal","Error getting child process tree",n);return}let i=r.values();for(let n of i){let s=r.get(n.ppid);s&&s!==n&&s.children.push(n)}return!isNaN(t)&&t>0?r.get(t):r.get(0)}var EG=I(Y());var ao=class{create(e){return e===!1?new eT:e===!0?new ul({maxAttempts:1/0,delay:1e3}):new ul({maxAttempts:e.maxAttempts??1/0,delay:e.delay??1e3})}};ao=$([(0,EG.injectable)()],ao);var ul=class{constructor(e,r=0){this.options=e;this.attempt=r}get delay(){return this.options.delay}next(){return this.attempt===this.options.maxAttempts?void 0:new ul(this.options,this.attempt+1)}reset(){return this.attempt?new ul(this.options):this}},eT=class{constructor(){this.delay=-1}next(){}reset(){return this}};var od=class extends Pu{constructor(r,i,n,s,o=new ao){super(r,i,s,n);this.restarters=o}resolveParams(r){return r.type==="pwa-node"&&r.request==="attach"?r:void 0}async launchProgram(r){let i=async(s,o)=>{let a=this.program,u;try{r.params.websocketAddress?u=r.params.websocketAddress:u=await Uf(`http://${r.params.address}:${r.params.port}`,o&&r.params.timeout>0?mr.withTimeout(r.params.timeout).token:r.context.cancellationToken,this.logger)}catch(p){if(a&&a===o)return n(s,a,{killed:!1,code:1});throw p}let c=await Di.attach({ipcAddress:r.serverAddress,scriptName:"Remote Process",inspectorURL:u,remoteHostHeader:r.params.remoteHostHeader,waitForDebugger:!0,dynamicAttach:!0}),l=this.program=new Tu(c);l.stopped.then(p=>n(s.reset(),l,p))},n=async(s,o,a)=>{if(this.program!==o)return;if(a.killed){this.onProgramTerminated(a);return}let u=s.next();if(!u){this.onProgramTerminated(a);return}r.context.dap.output({output:xG.t(`Lost connection to debugee, reconnecting in {0}ms\r
`,u.delay)});let c=new Zo;this.program=c;let l=await Promise.race([Ne(u.delay),c.stopped]);this.program===c&&(l?this.onProgramTerminated(a):i(u,c))};return i(this.restarters.create(r.params.restart))}async terminate(r){await super.terminate(),r&&this.telemetry&&Yn(this.telemetry.processId,this.logger)}createLifecycle(r,i,n){if(n.openerId)return{};let s;return{initialized:async()=>{s=this.onFirstInitialize(r,i,n),await s},close:()=>{var o;this.targetList().length&&((o=this.program)==null||o.stop()),s==null||s.then(a=>a.dispose())}}}async onFirstInitialize(r,i,n){let s=new id;await s.startTouchLoop();let o=new kr("node",void 0);try{o=await this.resolveNodePath(i.params)}catch{}let[a]=await Promise.all([this.gatherTelemetryFromCdp(r,i),this.setEnvironmentVariables(r,i,s.path,n.targetId,o)]);return this.telemetry=a,a&&i.params.attachExistingChildren&&SG({pid:a.processId,nodePath:o.path,hostname:i.params.address,ipcAddress:i.serverAddress},n.targetId,this.logger).catch(u=>this.logger.warn("internal","Error watching child processes",{err:u})),s}async setEnvironmentVariables(r,i,n,s,o){if(!i.params.autoAttachChildProcesses)return;if(!await pp(i.params.address)){this.logger.warn("runtime.target","Cannot attach to children of remote process");return}let a=await this.resolveEnvironment(i,o,{requireLease:n,openerId:s});return this.appendEnvironmentVariables(r,a)}};od=$([(0,cl.injectable)(),w(0,(0,cl.inject)(Cn)),w(1,(0,cl.inject)(le)),w(2,(0,cl.inject)(li)),w(3,(0,cl.inject)(Ht))],od);var Xi=I(Y()),cd=require("path");function x_(t){if(!t.runtimeArgs||t.attachSimplePort)return;let e=[];for(let r of t.runtimeArgs)/^--inspect-brk(=|$)/.test(r)?t.stopOnEntry=t.stopOnEntry||!0:e.push(r);t.runtimeArgs=e}var CG=require("os"),DG=I(require("path")),PG=require("crypto"),ad=require("fs"),tT=class{constructor(){this.path=DG.join((0,CG.tmpdir)(),`node-debug-callback-${(0,PG.randomBytes)(8).toString("hex")}`);this.disposed=!1}read(e=tT.pollInterval){return this.readPromise?this.readPromise:(this.readPromise=new Promise((r,i)=>{let n=setInterval(()=>{if(this.disposed){clearInterval(n),r(void 0);return}if((0,ad.existsSync)(this.path)){try{r(JSON.parse((0,ad.readFileSync)(this.path,"utf-8")))}catch(s){i(s)}finally{this.dispose()}clearInterval(n)}},e)}),this.readPromise)}dispose(){if(!this.disposed){this.disposed=!0;try{(0,ad.unlinkSync)(this.path)}catch{}}}},uH=tT;uH.pollInterval=200;var ll=I(require("path"));var cH=Symbol("IProgramLauncher"),C_=t=>{let e=t.program;if(e&&ll.isAbsolute(e)){let r=ll.relative(t.cwd,e);e=ll.isAbsolute(r)?r:`.${ll.sep}${r}`}return e?[...t.runtimeArgs,e,...sm(t.args)]:[...t.runtimeArgs,...sm(t.args)]};var s0e=async(t,e)=>{if(typeof e.stopOnEntry=="string")return(0,cd.resolve)(e.cwd,e.stopOnEntry);if(e.program)return(0,cd.resolve)(e.cwd,e.program);for(let r of sm(e.args)){if(r.startsWith("-"))continue;let i=(0,cd.resolve)(e.cwd,r);if(await t.exists(i))return i}},ud=class extends Ci{constructor(r,i,n,s,o,a,u,c,l){super(r,i,l,c);this.bpPredictor=n;this.launchers=s;this.restarters=o;this.fsUtils=a;this.packageJson=u}resolveParams(r){let i;if(r.type==="pwa-node"&&r.request==="launch"?i={...r}:"server"in r&&r.server&&"program"in r.server&&(i={...r.server}),!!i)return x_(i),i}async launchProgram(r){r.params.program&&(r.params.program=await this.tryGetCompiledFile(r.params.program)),this.attachSimplePort=await this.getSimpleAttachPortIfAny(r.params);let i=async n=>{this.program&&this.program.stop();let s=await this.resolveNodePath(r.params,r.params.runtimeExecutable||void 0),o=s.warning;o&&r.context.dap.output({category:"stderr",output:o.message});let a=new uH,u=await this.resolveEnvironment(r,s,{fileCallback:a.path});this.attachSimplePort?(r.params.attachSimplePort||r.context.dap.output({category:"stderr",output:"Using legacy attach mode for --inspect-brk in npm scripts. We recommend removing --inspect-brk, and using `stopOnEntry` in your launch.json if you need it."}),u=u.merge({NODE_OPTIONS:null})):u=b_(s,u);let c={...r.params,env:u.value},l=this.launchers.find(f=>f.canLaunch(c));if(!l)throw new Error("Cannot find an appropriate launcher for the given set of options");let p=await l.launchProgram(s.path,c,r.context);if(this.attachSimplePort){let f=await Di.attach({ipcAddress:r.serverAddress,scriptName:"Remote Process",inspectorURL:await Uf(`http://127.0.0.1:${this.attachSimplePort}`,r.context.cancellationToken,this.logger),waitForDebugger:!0,dynamicAttach:!0});p=new w_(p,new Tu(f))}else a.read().then(f=>{f&&p.gotTelemetery(f)});this.program=p,p.stopped.then(async f=>{if(a.dispose(),this.program!==p)return;if(f.killed||f.code===0){this.onProgramTerminated(f);return}let h=n.next();if(!h){this.onProgramTerminated(f);return}await Ne(h.delay),this.program===p&&i(h)})};return i(this.restarters.create(r.params.restart))}async getSimpleAttachPortIfAny(r){var s,o;if(r.attachSimplePort)return r.attachSimplePort;let i=oG(r.runtimeExecutable,r.runtimeArgs);if(!i)return;let n=await this.packageJson.getContents();if((o=(s=n==null?void 0:n.scripts)==null?void 0:s[i])!=null&&o.includes("--inspect-brk"))return r.port??9229}createLifecycle(r,i,{targetId:n}){return{initialized:async()=>{if(this.attachSimplePort&&await this.gatherTelemetryFromCdp(r,i),!i.params.stopOnEntry)return;let s=await s0e(this.fsUtils,i.params);if(!s){this.logger.warn("runtime","Could not resolve program entrypointfrom args");return}let o="(?:entryBreakpoint){0}",a=Ve(s),u=un(a)+o,c=await r.Debugger.setBreakpointByUrl({urlRegex:u,lineNumber:0,columnNumber:0});return c!=null&&c.breakpointId?{cdpId:c==null?void 0:c.breakpointId,path:a}:void 0},close:()=>{let s=Number(n);if(s>0)try{process.kill(s)}catch{}}}}async tryGetCompiledFile(r){r=Ft(r);let i=(0,cd.extname)(r);if(!i||i===".js")return r;let n=await this.bpPredictor.getPredictionForSource(r);if(!n||n.size===0)return r;let s=Ca(n.values());return s?(this.logger.info("runtime.launch","Updating entrypoint to compiled file",{from:r,to:s.compiledPath,candidates:n.size}),s.compiledPath):r}};ud=$([(0,Xi.injectable)(),w(0,(0,Xi.inject)(Cn)),w(1,(0,Xi.inject)(le)),w(2,(0,Xi.inject)(hc)),w(3,(0,Xi.multiInject)(cH)),w(4,(0,Xi.inject)(ao)),w(5,(0,Xi.inject)(Gr)),w(6,(0,Xi.inject)(ol)),w(7,(0,Xi.inject)(li)),w(8,(0,Xi.inject)(Ht))],ud);var pd=I(require("fs")),LG=require("fs"),D_=I(Y()),TG=I(require("os")),Zt=I(require("path"));var P_=Symbol("INvmResolver");var ld=class{constructor(e=new $i(LG.promises),r=process.env,i=process.arch,n=process.platform,s=TG.homedir()){this.fsUtils=e;this.env=r;this.arch=i;this.platform=n;this.homedir=s}async resolveNvmVersionPath(e){let r,i=[],n=this.parseVersionString(e),s=this.env["NVS_HOME"];if(!s){let o=this.platform==="win32"?Zt.join(this.env.LOCALAPPDATA||"","nvs"):Zt.join(this.env.HOME||"",".nvs");pd.existsSync(o)&&(s=o)}if(n.nvsFormat||s){if(r=await this.resolveNvs(s,n),!r&&n.nvsFormat)throw new re(XS(e,"nvs"));i.push("nvs")}if(!r)if(this.platform==="win32")this.env["NVM_HOME"]&&(r=await this.resolveWindowsNvm(e),i.push("nvm-windows"));else{let o=this.env["NVM_DIR"]||Zt.join(this.homedir,".nvm");await this.fsUtils.exists(o)&&(r=await this.resolveUnixNvm(e),i.push("nvm"))}if(!r){let o=this.platform==="win32"?this.env["FNM_DIR"]||Zt.join(this.env.APPDATA||"","fnm"):this.env["FNM_DIR"]||Zt.join(this.homedir,".fnm");await this.fsUtils.exists(o)&&(r=await this.resolveFnm(e,o),i.push("fnm"))}if(!i.length)throw new re(zS());if(!r||!await this.fsUtils.exists(r))throw new re(XS(e,i.join("/")));return{directory:r,binary:await this.getBinaryInFolder(r)}}async getBinaryInFolder(e){return await Cs(["node64.exe","node64"].map(r=>this.fsUtils.exists(Zt.join(e,r))))?"node64":"node"}async resolveNvs(e,{remoteName:r,semanticVersion:i,arch:n}){if(!e)throw new re(rO());let s=this.findBinFolderForVersion(Zt.join(e,r),i,o=>pd.existsSync(Zt.join(o,n)));if(s)return this.platform!=="win32"?Zt.join(s,n,"bin"):Zt.join(s,n)}async resolveUnixNvm(e){let r=this.env["NVM_DIR"];if(!r){let n=Zt.join(this.env.HOME||"",".nvm");await this.fsUtils.exists(n)&&(r=n)}if(!r)throw new re(zS());let i=this.findBinFolderForVersion(Zt.join(r,"versions","node"),`v${e}`);return i?Zt.join(i,"bin"):void 0}async resolveWindowsNvm(e){let r=this.env["NVM_HOME"];if(!r)throw new re(iO());return this.findBinFolderForVersion(r,`v${e}`)}async resolveFnm(e,r){let i=this.findBinFolderForVersion(Zt.join(r,"node-versions"),`v${e}`);if(i)return this.platform==="win32"?Zt.join(i,"installation"):Zt.join(i,"installation","bin")}findBinFolderForVersion(e,r,i){if(!pd.existsSync(e))return;let n=pd.readdirSync(e);if(n.includes(r))return Zt.join(e,r);let s=n.filter(o=>o.startsWith(`${r}.`)).sort(o0e).filter(o=>i?i(Zt.join(e,o)):!0).pop();return s?Zt.join(e,s):void 0}parseVersionString(e){let i=/^(([\w-]+)\/)?(v?(\d+(\.\d+(\.\d+)?)?))(\/((x86)|(32)|((x)?64)|(arm\w*)|(ppc\w*)))?$/i.exec(e);if(!i)throw new Error("Invalid version string: "+e);let n=!!(i[2]||i[8]),s=i[2]||"node",o=i[4]||"",a=a0e(i[8]||this.arch);return{nvsFormat:n,remoteName:s,semanticVersion:o,arch:a}}};ld=$([(0,D_.injectable)(),w(0,(0,D_.inject)(Gr))],ld);var o0e=(t,e)=>{let r=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(t),i=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(e);if(!r||!i)return(i?-1:0)+(r?1:0);let[,n,s,o]=r,[,a,u,c]=i;return Number(n)-Number(a)||Number(s)-Number(u)||Number(o)-Number(c)};function a0e(t){switch(t){case"32":case"x86":case"ia32":return"x86";case"64":case"x64":case"amd64":return"x64";case"arm":let e=process.config.variables.arm_version;return e?"armv"+e+"l":"arm";default:return t}}var $G=require("child_process"),L_=I(Y()),kG=I(Yw());var fd=class{constructor(e){this.logger=e}canLaunch(e){return e.console==="internalConsole"}async launchProgram(e,r,i){let{executable:n,args:s,shell:o,cwd:a}=u0e(e,C_(r),r.cwd);i.dap.output({category:"console",output:[n,...s].join(" ")+`
`});let u=(0,$G.spawn)(n,s,{shell:o,cwd:a,env:Lt.merge(Lt.processEnv(),r.env).defined()});return r.outputCapture==="console"?this.discardStdio(i.dap,u):this.captureStdio(i.dap,u),new __(u,this.logger,r.killBehavior)}captureStdio(e,r){r.stdout.pipe(dd.stream()).on("data",i=>e.output({category:"stdout",output:i})).resume(),r.stderr.pipe(dd.stream()).on("data",i=>e.output({category:"stderr",output:i})).resume()}discardStdio(e,r){let i=[],n=()=>{i&&e.output({category:"stderr",output:Buffer.concat(i).toString()})},s=Buffer.from("Debugger attached."),o=a=>{a.includes(s)?(i=void 0,r.stderr.removeListener("data",o)):i&&i.push(a)};r.stderr.on("data",o),r.on("error",a=>{n(),e.output({category:"stderr",output:a.stack||a.message})}),r.on("exit",a=>{a!==null&&a>0&&(n(),e.output({category:"stderr",output:`Process exited with code ${a}\r
`}))}),r.stdout.resume(),r.stderr.resume()}};fd=$([(0,L_.injectable)(),w(0,(0,L_.inject)(le))],fd);var u0e=(t,e,r)=>{if(process.platform==="win32"&&(t=Un(t),r=Un(r),t.endsWith(".ps1")&&(e=["-File",t,...e],t="powershell.exe")),process.platform!=="win32"||!t.includes(" "))return{executable:t,args:e,shell:!1,cwd:r};let i=!1,n=[];for(let s of e)s.includes(" ")?(n.push(`"${s}"`),i=!0):n.push(s);return i?{executable:`"${t}"`,args:n,shell:!0,cwd:r}:{executable:t,args:e,shell:!1,cwd:r}};var dd=class{constructor(){this.etxSpotted=!1}static stream(){return(0,kG.default)(new dd)}[Symbol.split](e){if(this.etxSpotted||=e.includes(""),!this.etxSpotted)return[e,""];let r=e.split("");return r.length>1?r.map((i,n)=>n<r.length-1?`${i}
`:i):r}};var T_=I(Y());var hd=class{constructor(e){this.logger=e}canLaunch(e){return e.internalConsoleOptions,e.console!=="internalConsole"}async launchProgram(e,r,i){let n={kind:r.console==="integratedTerminal"?"integrated":"external",title:r.name,cwd:r.cwd,args:[e,...C_(r)],env:Tl(r.env),argsCanBeInterpretedByShell:!Array.isArray(r.args)},s;try{s=await this.sendLaunchRequest(n,i)}catch(o){throw new re(nO(o.message))}return new Lu(s,this.logger,r.killBehavior)}sendLaunchRequest(e,r){return r.dap.runInTerminalRequest(e)}};hd=$([(0,T_.injectable)(),w(0,(0,T_.inject)(le))],hd);var RG=I(Y());var md=class{getTreatment(e,r){return Promise.resolve(r)}};md=$([(0,RG.injectable)()],md);var MG=I(Y());var pl=class{constructor(){this.flushEmitter=new X;this.onFlush=this.flushEmitter.event}report(){}reportOperation(){}attachDap(){}flush(){this.flushEmitter.fire()}dispose(){}};pl=$([(0,MG.injectable)()],pl);var OG=require("crypto"),$u=I(Y()),NG=require("os"),FG=I(require("path")),lH=I(require("vscode"));var rT=class{constructor(e){this.terminal=e;this.stopped=new Promise(r=>{let i=lH.window.onDidCloseTerminal(n=>{n===e&&(r({code:0,killed:!0}),i.dispose())})})}gotTelemetery(){}stop(){return this.terminal.sendText(""),setTimeout(()=>this.terminal.dispose(),1),this.stopped}},ea=class extends Ci{constructor(r,i,n,s,o){super(r,i,o,s);this.fs=n;this.terminalCreatedEmitter=new X;this.callbackFile=FG.join((0,NG.tmpdir)(),`node-debug-callback-${(0,OG.randomBytes)(8).toString("hex")}`);this.onTerminalCreated=this.terminalCreatedEmitter.event}async getProcessTelemetry(){try{return JSON.parse(await this.fs.readFile(this.callbackFile,"utf-8"))}catch{return}}resolveParams(r){if(r.type==="node-terminal"&&r.request==="launch")return r;if(r.type==="pwa-chrome"&&r.server&&"command"in r.server)return r.server}async launchProgram(r){let i;try{i=await this.resolveNodePath(r.params)}catch(a){if(a instanceof re&&a.cause.id===9230)throw a;i=new kr("node",void 0)}let n=await this.resolveEnvironment(r,i,{fileCallback:this.callbackFile}),s=await this.createTerminal({name:r.params.name,cwd:r.params.cwd,iconPath:new lH.ThemeIcon("debug"),env:b_(i,n).defined(),isTransient:!0});this.terminalCreatedEmitter.fire(s),s.show();let o=this.program=new rT(s);r.params.command&&(await Promise.race([s.processId,Ne(1e3)]),s.sendText(r.params.command,!0)),o.stopped.then(a=>{o===this.program&&this.onProgramTerminated(a)})}createTerminal(r){return Promise.resolve(lH.window.createTerminal(r))}dispose(){super.dispose(),this.fs.unlink(this.callbackFile).catch(()=>{})}};ea=$([(0,$u.injectable)(),w(0,(0,$u.inject)(Cn)),w(1,(0,$u.inject)(le)),w(2,(0,$u.inject)(Ie)),w(3,(0,$u.inject)(li)),w(4,(0,$u.inject)(Ht))],ea);var gl=I(Y()),mH=I(kK());var Ed=class{constructor(e,r){r&&e instanceof Ii&&(this.service=(0,mH.getExperimentationService)("ms-vscode.js-debug",Ju,XH?mH.TargetPopulation.Insiders:mH.TargetPopulation.Public,{setSharedProperty(i,n){e.setGlobalMetric(i,n)},postEvent(i,n){e.pushOutput({category:"telemetry",output:i,data:n})}},r.globalState))}async getTreatment(e,r){if(!this.service)return r;try{return await this.service.getTreatmentVariableAsync("vscode",e,!0)}catch{return r}}};Ed=$([(0,gl.injectable)(),w(0,(0,gl.inject)(ir)),w(1,(0,gl.optional)()),w(1,(0,gl.inject)(ht))],Ed);var tA=I(Y()),MK=I(require("vscode"));var RK=I(Y()),Or=I(require("vscode"));var nt=class{constructor(){this._onSessionAddedEmitter=new Or.EventEmitter;this._onSessionEndedEmitter=new Or.EventEmitter;this._disposables=[];this.sessions=new Map;this.onSessionAdded=this._onSessionAddedEmitter.event;this.onSessionEnded=this._onSessionEndedEmitter.event}static isConcreteSession(e){return!!e.configuration.__pendingTargetId}static pickSession(e,r){if(e.length<2)return e[0];let i=Or.window.createQuickPick();return i.title=r,i.items=e.map(n=>({label:n.name,id:n.id})),i.ignoreFocusOut=!0,new Promise(n=>{i.onDidAccept(()=>n(e.find(s=>{var o;return s.id===((o=i.selectedItems[0])==null?void 0:o.id)}))),i.onDidHide(()=>n(void 0)),i.show()}).finally(()=>i.dispose())}get isDebugging(){return this.sessions.size>0}getById(e){return this.sessions.get(e)}isRunning(e){return[...this.sessions.values()].includes(e)}getByName(e){return[...this.sessions.values()].filter(r=>r.name===e)}getConcreteSessions(){return[...this.sessions.values()].filter(nt.isConcreteSession)}getChildren(e){return[...this.sessions.values()].filter(r=>r.configuration.__parentId===e.id)}attach(){Or.debug.onDidStartDebugSession(e=>{da(e.type)&&(this.sessions.set(e.id,e),this._onSessionAddedEmitter.fire(e))},void 0,this._disposables),Or.debug.onDidTerminateDebugSession(e=>{da(e.type)&&(this.sessions.delete(e.id),this._onSessionEndedEmitter.fire(e))},void 0,this._disposables),Or.debug.onDidReceiveDebugSessionCustomEvent(e=>{if(da(e.session.type)){if(e.event==="revealLocationRequested"){let r=e.body,i=Or.debug.asDebugSourceUri(e.body.source),n={};if(r.line){let s=new Or.Position((r.line||1)-1,(r.column||1)-1);n.selection=new Or.Range(s,s)}Or.window.showTextDocument(i,n);return}if(e.event==="copyRequested"){let r=e.body;Or.env.clipboard.writeText(r.text);return}}},void 0,this._disposables)}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};nt=$([(0,RK.injectable)()],nt);var xd=class{constructor(e){this.tracker=e}register(e){e.subscriptions.push(this.tracker.onSessionEnded(r=>{let i=r.configuration.cascadeTerminateToConfigurations;if(!(!i||!(i instanceof Array)))for(let n of i)for(let s of this.tracker.getByName(n))MK.debug.stopDebugging(s)}))}};xd=$([(0,tA.injectable)(),w(0,(0,tA.inject)(nt))],xd);var rA=Symbol("IDebugConfigurationResolver"),iA=Symbol("IDebugConfigurationProvider");var $d=I(Se()),sa=I(Y()),JK=require("os"),kd=require("path"),HH=I(require("vscode"));var OK=I(Y()),NK=I(require("vscode"));var ra=class{get type(){return this.getType()}get triggerKind(){return this.getTriggerKind()}async provideDebugConfigurations(e,r){try{let i=await this.provide(e,r);if(!i)return[];let n=i instanceof Array?i:[i],s=vh.get(this.type);if(s)for(let o of n)o.type===this.type&&(o.type=s);return n}catch(i){return NK.window.showErrorMessage(i.message,{modal:!0}),[]}}};ra=$([(0,OK.injectable)()],ra);var oA=I(Y()),UK=require("path"),ia=I(require("vscode"));var gH=I(Y()),YT=I(require("vscode"));var FK=I(require("vscode")),Cd=class{constructor(e){this.key=e}set value(e){e!==this._value&&(this._value=e,FK.commands.executeCommand("setContext",this.key,e))}get value(){return this._value}};var BK=Symbol("Uninitialized"),nA=class{constructor(e,r){this.key=e;this.defaultValue=r;this._value=BK}write(e,r){r!==this.read(e)&&(this._value=r,e.update(this.key,r))}read(e){return this._value===BK&&(this._value=e.get(this.key)??this.defaultValue),this._value}};var sA=new nA("sourceSteppingEnabled",!0),Dd=class{constructor(e,r){this.context=e;this.tracker=r}register(e){let r=new Cd("jsDebugIsMapSteppingDisabled");sA.read(this.context.workspaceState)===!1&&(r.value=!0);let i=n=>{r.value=!n,sA.write(this.context.workspaceState,n);for(let s of this.tracker.getConcreteSessions())s.customRequest("setSourceMapStepping",{enabled:n})};e.subscriptions.push(ke(YT.commands,"extension.js-debug.enableSourceMapStepping",async()=>{i(!0)}),ke(YT.commands,"extension.js-debug.disableSourceMapStepping",async()=>{i(!1)}))}};Dd=$([(0,gH.injectable)(),w(0,(0,gH.inject)(ht)),w(1,(0,gH.inject)(nt))],Dd);var Dn=class{constructor(e){this.extensionContext=e}get type(){return this.getType()}async resolveDebugConfiguration(e,r,i){if(r.type&&(r.type=this.getType()),"__pendingTargetId"in r)return r;let n=r;n.sourceMaps??=sA.read(this.extensionContext.workspaceState);try{let s=await this.resolveDebugConfigurationAsync(e,n,i);return s&&this.commonResolution(s,e)}catch(s){ia.window.showErrorMessage(s.message,{modal:!0})}}applyDefaultRuntimeExecutable(e){if(e.runtimeExecutable)return;let r=Rt(ia.workspace,"debug.javascript.defaultRuntimeExecutable"),i=r?r[e.type]:void 0;i&&(e.runtimeExecutable=i)}commonResolution(e,r){var i,n;return e.trace=$S(e.trace,this.extensionContext.logPath),e.__workspaceCachePath=this.extensionContext.storagePath,e.__breakOnConditionalError=Rt(ia.workspace,"debug.javascript.breakOnConditionalError",r)??!1,r?e.__workspaceFolder=r.uri.fsPath:(e.__workspaceFolder||=this.getSuggestedWorkspaceFolders(e).filter(Mt).filter(s=>!s.includes("${workspaceFolder}")).map(s=>{var o;return(0,UK.isAbsolute)(s)?(o=ia.workspace.getWorkspaceFolder(ia.Uri.file(s)))==null?void 0:o.uri.fsPath:s}).find(Mt)||((n=(i=ia.workspace.workspaceFolders)==null?void 0:i[0])==null?void 0:n.uri.fsPath)||"",e.__workspaceFolder?e=gI(e):e=mI(e)),e}getSuggestedWorkspaceFolders(e){return[]}};Dn=$([(0,oA.injectable)(),w(0,(0,oA.inject)(ht))],Dn);var Ru=I(Se()),Ld=require("fs"),Pd=I(Y()),Tt=I(require("path")),Zi=I(require("vscode"));var jK=I(require("vscode"));function aA(t){jK.debug.activeDebugConsole.appendLine(t)}var Hl=I(Se()),qK=require("child_process"),WK=require("fs"),VK=require("path"),Pi=I(require("vscode"));var f_e=9229;async function GK(){let t=await e$();if(!t)return;let e=Rt(Pi.workspace,"debug.javascript.pickAndAttachOptions"),r={...pI,...e,name:"process",processId:t};await ZT(new $i(WK.promises),r,!0),await Pi.debug.startDebugging(r.cwd?Pi.workspace.getWorkspaceFolder(Pi.Uri.file(r.cwd)):void 0,r)}async function ZT(t,e,r=!1){var s;let i=(s=e.processId)==null?void 0:s.trim(),n=i&&m_e(i);if(!n||isNaN(n.pid))throw new Error(Hl.t("Attach to process: '{0}' doesn't look like a process id.",i||"<unknown>"));if(n.port||H_e(n.pid),e.port=n.port||f_e,delete e.processId,r){let o=await d_e(t,n.pid);o&&(e.cwd=o)}}async function d_e(t,e){var s;let r=e&&await aH.getWorkingDirectory(e);if(!r)return(s=Pi.workspace.workspaceFolders)==null?void 0:s[0].uri.fsPath;let i=await lp(t,r,"package.json");if(!i)return r;let n=Pi.workspace.getWorkspaceFolder(Pi.Uri.file(r));return!n||Jy(n.uri.fsPath,i)?i:n.uri.fsPath}async function e$(){try{let t=await g_e();return t?t.pidAndPort:null}catch(t){return await Pi.window.showErrorMessage(Hl.t("Process picker failed ({0})",t.message),{modal:!0}),null}}var h_e=(t,e)=>`${t}:${e??""}`,m_e=t=>{let[e,r]=t.split(":");return{pid:Number(e),port:r?Number(r):void 0}};async function g_e(){let t=/^(?:node|iojs)(?:$|\b)/i,e=0,r=Pi.window.createQuickPick();r.placeholder=Hl.t("Pick the node.js process to attach to"),r.matchOnDescription=!0,r.matchOnDetail=!0,r.busy=!0,r.show();let i=!1,n=new Promise(o=>{r.onDidAccept(()=>o(r.selectedItems[0])),r.onDidHide(()=>o(void 0))});aH.lookup((o,a)=>{if(i)return a;process.platform==="win32"&&o.command.indexOf("\\??\\")===0&&(o.command=o.command.replace("\\??\\",""));let u=(0,VK.basename)(o.command,".exe"),{port:c}=E_(o.args);if(!c&&!t.test(u))return a;let l={label:u,description:o.args,pidAndPort:h_e(o.pid,c),sortKey:o.date?o.date:e++,detail:c?Hl.t("process id: {0}, debug port: {1} ({2})",o.pid,c,"SIGUSR1"):Hl.t("process id: {0} ({1})",o.pid,"SIGUSR1")},p=a.findIndex(f=>f.sortKey<l.sortKey);return a.splice(p===-1?a.length:p,0,l),r.items=a,a},[]).then(()=>r.busy=!1).catch(o=>{Pi.window.showErrorMessage(`Error listing processes: ${o.message}`),r.dispose()});let s=await n;return i=!0,r.dispose(),s}function H_e(t){try{if(process.platform==="win32"){let e=`node -e process._debugProcess(${t})`;(0,qK.execSync)(e)}else process.kill(t,"SIGUSR1")}catch(e){throw new Error(Hl.t("Attach to process: cannot enable debug mode for process '{0}' ({1}).",t,e))}}var Mu=class extends Dn{constructor(r,i,n){super(r);this.nvmResolver=i;this.fsUtils=n}async resolveDebugConfigurationWithSubstitutedVariables(r,i){let n=i;if(n.type==="pwa-node"&&n.request==="attach"&&typeof n.processId=="string"&&await ZT(this.fsUtils,n),n.cwd){let s=await ki(Ld.promises,n.cwd);if(!s){Zi.window.showErrorMessage(Ru.t("The configured `cwd` {0} does not exist.",n.cwd),{modal:!0});return}if(!s.isDirectory()){Zi.window.showErrorMessage(Ru.t("The configured `cwd` {0} is not a folder.",n.cwd),{modal:!0});return}}return n}async resolveDebugConfigurationAsync(r,i,n){if(!i.name&&!i.type&&!i.request&&(i=await r$(r,!0,i),i.request==="launch"&&!i.program)){Zi.window.showErrorMessage(Ru.t("Cannot find a program to debug"),{modal:!0});return}if(i.cwd||(i.cwd=i.localRoot||t$(i.request==="launch"?i.program:void 0,r)),i.remoteRoot&&!i.localRoot&&(i.localRoot="${workspaceFolder}"),i.request==="launch"){if(this.applyDefaultRuntimeExecutable(i),i.runtimeExecutable&&Mv(i.runtimeExecutable)==="deno"&&!i.attachSimplePort){let o=await Wa();i.attachSimplePort=o,i.continueOnAttach??=!0;let a=[`--inspect-brk=127.0.0.1:${o}`,"--allow-all"];i.runtimeArgs?i.runtimeArgs.includes("run")?i.runtimeArgs=[...i.runtimeArgs,...a]:i.runtimeArgs=["run",...a,...i.runtimeArgs]:i.runtimeArgs=["run",...a]}let s=i.runtimeVersion;if(typeof s=="string"&&s!=="default"){let{directory:o,binary:a}=await this.nvmResolver.resolveNvmVersionPath(s);i.env=new Lt(i.env).addToPath(o,"prepend",!0).value,i.runtimeExecutable=!i.runtimeExecutable||i.runtimeExecutable==="node"?a:i.runtimeExecutable}if(i.console==="integratedTerminal"&&!i.internalConsoleOptions&&(i.internalConsoleOptions="neverOpen"),i.attachSimplePort===null||i.attachSimplePort===void 0)x_(i);else{if(i.attachSimplePort===0){i.attachSimplePort=await Wa(void 0,n);let o=`--inspect-brk=${i.attachSimplePort}`;i.runtimeArgs=i.runtimeArgs?[...i.runtimeArgs,o]:[o]}i.continueOnAttach=!i.stopOnEntry,i.stopOnEntry=!1}await y_e(this.fsUtils,r,i)}return dI(i)}getType(){return"pwa-node"}getSuggestedWorkspaceFolders(r){return[r.rootPath,r.cwd]}};Mu=$([(0,Pd.injectable)(),w(0,(0,Pd.inject)(ht)),w(1,(0,Pd.inject)(P_)),w(2,(0,Pd.inject)(Gr))],Mu);function t$(t,e){if(e)return e.uri.fsPath;if(Zi.workspace.workspaceFolders&&Zi.workspace.workspaceFolders.length>0)return Zi.workspace.workspaceFolders[0].uri.fsPath;if(t){if(t==="${file}")return"${fileDirname}";if(Tt.isAbsolute(t))return Tt.dirname(t)}return"${workspaceFolder}"}function KK(t,e){var r;if(t&&(e=us(e,"workspaceFolder",t.uri.fsPath)),(r=Zi.workspace.workspaceFolders)!=null&&r.length&&(e=us(e,"workspaceRoot",Zi.workspace.workspaceFolders[0].uri.fsPath)),Tt.isAbsolute(e))return e;if(t)return Tt.join(t.uri.fsPath,e)}async function y_e(t,e,r){if(r.outFiles||!e)return;let i;if(r.program?(i=KK(e,r.program),i&&(i=Tt.dirname(i))):r.cwd&&(i=KK(e,r.cwd)),!i||Yy(e.uri.fsPath,i))return;let n=await AE(i,async s=>!s.includes("node_modules")&&await t.exists(Tt.join(s,"package.json")));if(n){let s=rt(Tt.relative(e.uri.fsPath,n));s.length&&(r.outFiles=[...qH.outFiles,`\${workspaceFolder}/${s}/**/*.js`,`!\${workspaceFolder}/${s}/**/node_modules/**`])}}var v_e=["index.js","main.js"];async function r$(t,e,r){var a;let i={type:"pwa-node",request:"launch",name:Ru.t("Launch Program"),skipFiles:["<node_internals>/**"]};r&&r.noDebug&&(i.noDebug=!0);let n=await zK(t,"package.json"),s,o=!1;if(n&&n.name==="mern-starter")return e&&aA(Ru.t("Launch configuration for '{0}' project created.","Mern Starter")),w_e(i),i;if(n&&(s=await A_e(t,n,e),s&&e&&aA(Ru.t("Launch configuration created based on 'package.json'."))),!s){let u=Zi.window.activeTextEditor;u&&KH.includes(u.document.languageId)&&(o=u.document.languageId!=="javascript",s=t?Tt.relative(t.uri.fsPath,u.document.uri.fsPath):u.document.uri.fsPath,Tt.isAbsolute(s)||(s="${workspaceFolder}"+Tt.sep+s))}if(!s&&t){let u=t.uri.fsPath;s=await Cs(v_e.map(async c=>await ki(Ld.promises,Tt.join(u,c))&&"${workspaceFolder}"+Tt.sep+c))}if(s||(s="${file}"),s&&(i.program=s,t||(i.__workspaceFolder=Tt.dirname(s))),o||Zi.workspace.textDocuments.some(u=>__e(u.languageId))){e&&aA(Ru.t("Adjust glob pattern(s) in the 'outFiles' attribute so that they cover the generated JavaScript."));let u="",c=await zK(t,"tsconfig.json");if((a=c==null?void 0:c.compilerOptions)!=null&&a.outDir&&b_e()){let l=c.compilerOptions.outDir;Tt.isAbsolute(l)||(u=l,u.indexOf("./")===0&&(u=u.substr(2)),u[u.length-1]!=="/"&&(u+="/")),i.preLaunchTask="tsc: build - tsconfig.json"}i.outFiles=["${workspaceFolder}/"+u+"**/*.js"]}return i}function b_e(){let t=Zi.workspace.getConfiguration().get("typescript.tsc.autoDetect");return t!=="off"&&t!=="watch"}function w_e(t){t.request==="launch"&&(t.runtimeExecutable="nodemon",t.program="${workspaceFolder}/index.js",t.restart=!0,t.env={BABEL_DISABLE_CACHE:"1",NODE_ENV:"development"},t.console="integratedTerminal",t.internalConsoleOptions="neverOpen")}function __e(t){return t==="typescript"||t==="coffeescript"}async function zK(t,e){if(t)try{let r=await Ld.promises.readFile(Tt.join(t.uri.fsPath,e),"utf8");return JSON.parse(r)}catch{}}async function A_e(t,e,r){let i;try{if(e.main?i=e.main:e.scripts&&typeof e.scripts.start=="string"&&(i=e.scripts.start.split(" ").pop()),i){let n;if(Tt.isAbsolute(i)?n=i:(n=t?Tt.join(t.uri.fsPath,i):void 0,i=Tt.join("${workspaceFolder}",i)),r&&n&&!await ki(Ld.promises,n)&&!await ki(Ld.promises,n+".js"))return}}catch{}return i}var XK=I(require("vscode"));var Td=class extends Dn{async resolveDebugConfigurationAsync(e,r){if(r.cwd||(r.cwd=t$(void 0,e)),r.request==="launch"&&!r.command){await FH(XK.commands,"extension.js-debug.createDebuggerTerminal",void 0,e);return}return r.remoteRoot&&!r.localRoot&&(r.localRoot="${workspaceFolder}"),hI(r)}getType(){return"node-terminal"}};var I_e=t=>t.request==="launch",S_e=t=>t.request==="attach",Ou=class extends Dn{constructor(r,i,n,s,o){super(r);this.nodeProvider=i;this.terminalProvider=n;this.location=s;this.fs=o}async resolveBrowserCommon(r,i){if(i.request,i.server&&"program"in i.server){let s={...i.server,type:"pwa-node",request:"launch",name:`${i.name}: Server`};i.server=await this.nodeProvider.resolveDebugConfiguration(r,s)}else i.server&&"command"in i.server&&(i.server=await this.terminalProvider.resolveDebugConfiguration(r,{...i.server,type:"node-terminal",request:"launch",name:`${i.name}: Server`}));let n=this.location==="remote"?"ui":"workspace";if(I_e(i)&&!i.browserLaunchLocation&&(i.browserLaunchLocation=n),S_e(i)&&!i.browserAttachLocation&&(i.browserAttachLocation=n),i.request==="launch"){let s=i;this.applyDefaultRuntimeExecutable(s)}}getSuggestedWorkspaceFolders(r){return[r.rootPath,r.webRoot]}async resolveDebugConfigurationWithSubstitutedVariables(r,i){if("__pendingTargetId"in i)return i;let n=i;if(n.request==="launch"){let s=await this.ensureNoLockfile(n);if(s===void 0)return;n=s}return n}async ensureNoLockfile(r){var a;if(r.request!=="launch")return r;let i=r;if(i.userDataDir===!1||i.port&&!await Y2(i.port))return r;let n=typeof i.userDataDir=="string"?i.userDataDir:(0,kd.join)(this.extensionContext.storagePath??(0,JK.tmpdir)(),(a=i.runtimeArgs)!=null&&a.includes("--headless")?".headless-profile":".profile"),s=(0,kd.join)(n,process.platform==="win32"?"lockfile":"SingletonLock");if(await Cs([yM(this.fs,s),this.isVsCodeLocked((0,kd.join)(n,"code.lock"))])){let u=$d.t("Debug Anyway");if(await HH.window.showErrorMessage($d.t("It looks like a browser is already running from {0}. Please close it before trying to debug, otherwise VS Code may not be able to connect to it.",i.userDataDir===!0?$d.t("an old debug session"):$d.t("the configured userDataDir")),{modal:!0},u)!==u)return}return{...r,userDataDir:n}}async isVsCodeLocked(r){try{let i=Number(await this.fs.readFile(r,"utf-8"));return process.kill(i,0),!0}catch{return!1}}};Ou=$([(0,sa.injectable)(),w(0,(0,sa.inject)(ht)),w(1,(0,sa.inject)(Mu)),w(2,(0,sa.inject)(Td)),w(3,(0,sa.inject)(Co)),w(4,(0,sa.inject)(Ie))],Ou);var Nu=class extends ra{provide(){return this.createLaunchConfigFromContext()||this.getDefaultLaunch()}getTriggerKind(){return HH.DebugConfigurationProviderTriggerKind.Initial}createLaunchConfigFromContext(){let e=HH.window.activeTextEditor;if(e&&e.document.languageId==="html")return{type:this.getType(),request:"launch",name:`Open ${(0,kd.basename)(e.document.uri.fsPath)}`,file:e.document.uri.fsPath}}getDefaultLaunch(){return{type:this.getType(),request:"launch",name:$d.t("Launch Chrome against localhost"),url:"http://localhost:8080",webRoot:"${workspaceFolder}"}}};Nu=$([(0,sa.injectable)()],Nu);var i$=I(Y());var Rd=class extends Ou{async resolveDebugConfigurationAsync(e,r){if(!r.name&&!r.type&&!r.request){let i=new yl().createLaunchConfigFromContext();if(!i)return null;r=i}return await this.resolveBrowserCommon(e,r),r.request==="attach"?{..._h,...r}:{...VH,...r}}getType(){return"pwa-chrome"}};Rd=$([(0,i$.injectable)()],Rd);var yl=class extends Nu{getType(){return"pwa-chrome"}};yl=$([(0,i$.injectable)()],yl);var YK=I(Se()),n$=I(Y());var Md=class extends Ou{async resolveDebugConfigurationAsync(e,r){if(!r.name&&!r.type&&!r.request){let i=new vl().createLaunchConfigFromContext();if(!i)return;r=i}return await this.resolveBrowserCommon(e,r),r.useWebView&&(r.timeout=r.timeout??0),r.request==="attach"?{...cI,...r}:{...lI,...r}}getType(){return"pwa-msedge"}};Md=$([(0,n$.injectable)()],Md);var vl=class extends Nu{getType(){return"pwa-msedge"}getDefaultLaunch(){return{...super.getDefaultLaunch(),name:YK.t("Launch Edge against localhost")}}};vl=$([(0,n$.injectable)()],vl);var ZK=require("fs"),ez=I(Y()),tz=require("path");var Od=class extends Dn{async resolveDebugConfigurationAsync(e,r){if(r.debugWebWorkerHost===void 0){let i=await E_e(e,r);r={...r,debugWebWorkerHost:i.length===1&&i[0]==="web"}}return r.debugWebWorkerHost&&(r.outFiles=[]),GH(r),Promise.resolve({...uI,...r})}getType(){return"pwa-extensionHost"}};Od=$([(0,ez.injectable)()],Od);var QK="--extensionDevelopmentPath=",E_e=async(t,e)=>{var s;let r=(s=e.args)==null?void 0:s.find(o=>o.startsWith(QK));if(!r)return["workspace"];let i=us(r.slice(QK.length),"workspaceFolder",(t==null?void 0:t.uri.fsPath)??e.__workspaceFolder??""),n;try{let o=await ZK.promises.readFile((0,tz.join)(i,"package.json"),"utf-8");n=JSON.parse(o).extensionKind??"workspace"}catch{return["workspace"]}return n instanceof Array?n:[n]};var cA=I(Se()),u$=I(Y()),Ud=I(require("path")),yH=I(require("vscode"));var Nd=I(Se()),sz=I(require("fs")),uA=I(require("path")),ft=I(require("vscode"));var rz=require("vscode"),s$=async t=>{try{return await rz.commands.executeCommand("npm.packageManager",t==null?void 0:t.uri)}catch{return"npm"}},iz=async(t,e)=>`${await s$(e)} run ${t}`;async function oz(t){let e=await a$(t?[t]:void 0);if(!e)return;let r=async a=>{let u=ft.workspace.getWorkspaceFolder(ft.Uri.file(a.directory));FH(ft.commands,"extension.js-debug.createDebuggerTerminal",await iz(a.name,u),u,{cwd:a.directory})};if(e.length===1)return r(e[0]);let i=e.some(a=>a.directory!==e[0].directory),n=ft.window.createQuickPick(),s,o=[];for(let a of e)a.directory!==s&&i&&(o.push({label:uA.basename(a.directory),kind:ft.QuickPickItemKind.Separator}),s=a.directory),o.push({script:a,label:a.name,description:a.command});n.items=o,n.onDidAccept(async()=>{r(n.selectedItems[0].script),n.dispose()}),n.show()}var o$=(t,e)=>t.score>e.score?t:e;async function a$(t,e=!1){let r=t??ft.workspace.workspaceFolders??[];if(!r||r.length===0){e||ft.window.showErrorMessage(Nd.t("You need to open a workspace folder to debug npm scripts."));return}let i=(await Promise.all(r.map(o=>ft.workspace.findFiles(new ft.RelativePattern(o,"**/package.json"),"**/{node_modules,.vscode-test}/**")))).flat();if(i.length===0){e||ft.window.showErrorMessage(Nd.t("No package.json files found in your workspace."));return}let n=[],s={path:i[0].fsPath,score:0};for(let{fsPath:o}of new Set(i)){s=o$(s,{path:o,score:1});let a;try{a=JSON.parse(await Ky(o))}catch(u){e||nz("showWarningMessage",Nd.t("Could not read {0}: {1}",o,u.message),o),s=o$(s,{path:void 0,score:3});continue}if(s=o$(s,{path:void 0,score:2}),!!a.scripts)for(let u of Object.keys(a.scripts))n.push({directory:uA.dirname(o),name:u,command:a.scripts[u]})}if(n.length===0){s.path&&!e&&nz("showErrorMessage",Nd.t("No npm scripts found in your package.json"),s.path);return}return n.sort((o,a)=>(o.name==="start"?-1:0)+(a.name==="start"?1:0)),n}var x_e=`{
  "scripts": {
    
  }
}
`;async function nz(t,e,r){let i=Nd.t("Edit package.json");if(await ft.window[t](e,i)!==i)return;if(sz.existsSync(r)){let a=await ft.workspace.openTextDocument(r);await ft.window.showTextDocument(a);return}let n=await ft.workspace.openTextDocument(ft.Uri.file(r).with({scheme:"untitled"})),s=await ft.window.showTextDocument(n);await s.edit(a=>a.insert(new ft.Position(0,0),x_e));let o=new ft.Position(2,5);s.selection=new ft.Selection(o,o)}var Fd=class extends ra{provide(e){return r$(e,!0)}getType(){return"pwa-node"}getTriggerKind(){return yH.DebugConfigurationProviderTriggerKind.Initial}};Fd=$([(0,u$.injectable)()],Fd);var C_e=["cwd","program"],Bd=class extends ra{async provide(e){let r=mo(await Promise.all([this.getFromNpmScripts(e),this.getFromActiveFile()]));if(e)for(let i of r){let n=i;for(let s of C_e){let o=n[s];o&&Ud.isAbsolute(o)&&(n[s]=Ud.join("${workspaceFolder}",Ud.relative(e.uri.fsPath,o)))}}return r}getType(){return"pwa-node"}getTriggerKind(){return yH.DebugConfigurationProviderTriggerKind.Dynamic}async getFromNpmScripts(e){let r={type:Ll("node-terminal"),name:cA.t("JavaScript Debug Terminal"),request:"launch",cwd:e==null?void 0:e.uri.fsPath};if(!e)return[r];let i=await a$([e],!0);if(!i)return[r];let n=await s$(e);return i.map(s=>({type:Ll("node-terminal"),name:cA.t("Run Script: {0}",s.name),request:"launch",command:`${n} run ${s.name}`,cwd:s.directory})).concat(r)}getFromActiveFile(){let e=yH.window.activeTextEditor;return!e||!KH.includes(e.document.languageId)||e.document.uri.scheme!=="file"?[]:[{type:Ll("pwa-node"),name:cA.t("Run Current File"),request:"launch",program:e.document.uri.fsPath}]}};Bd=$([(0,u$.injectable)()],Bd);var az=[Rd,Md,Od,Mu,Td],uz=[yl,vl,Fd,Bd];var jd=I(Se()),vH=I(Y()),l$=require("url"),Li=I(require("vscode"));function c$(t,e){if(t){try{if(new l$.URL(t).hostname)return t}catch{}try{let r=`http://${t}`,i=new l$.URL(r);if(!e||i.port)return r}catch{}}}var qd=class{constructor(e,r){this.defaultBrowser=e;this.context=r}register(e){e.subscriptions.push(Li.commands.registerCommand("extension.js-debug.debugLink",r=>this.handle(r)))}async handle(e){var s;if(e=e??await this.getLinkFromTextEditor()??await this.getLinkFromQuickInput(),!e)return;let r="pwa-chrome";try{await this.defaultBrowser.lookup()===3&&(r="pwa-msedge")}catch{}let i=Rt(Li.workspace,"debug.javascript.debugByLinkOptions")??{},n={...typeof i=="string"?{}:i,type:Ll(r),name:e,request:"launch",url:e};Li.debug.startDebugging((s=Li.workspace.workspaceFolders)==null?void 0:s[0],n),this.persistConfig(n)}getLinkFromTextEditor(){let e=Li.window.activeTextEditor;if(e)return c$(e.document.getText(e.selection),!0)}async getLinkFromQuickInput(){let e=await Li.env.clipboard.readText(),r=await Li.window.showInputBox({value:c$(e,!1)||this.mostRecentLink,placeHolder:"https://localhost:8080",validateInput:i=>{if(i&&!c$(i,!1))return jd.t("The URL provided is invalid")}});if(r)return this.mostRecentLink=r,r}async persistConfig(e){if(this.context.globalState.get("saveDebugLinks")===!1)return;let r=Li.workspace.getConfiguration("launch"),i=r.get("configurations")??[];if(i.some(a=>a.url===e.url))return;let n=jd.t("Yes"),s=jd.t("Never"),o=await Li.window.showInformationMessage(jd.t("Would you like to save a configuration in your launch.json for easy access later?"),n,jd.t("No"),s);o===s&&this.context.globalState.update("saveDebugLinks",!1),o===n&&await r.update("configurations",[...i,e])}};qd=$([(0,vH.injectable)(),w(0,(0,vH.inject)(Af)),w(1,(0,vH.inject)(ht))],qd);var Wd=I(Se()),Gd=I(Y()),en=I(require("vscode"));var cz="neverRemind",Vd=class{constructor(e,r,i){this.fs=e;this.context=r;this.tracker=i;this.dismissedForSession=!1;this.isPrompting=!1}register(e){e.subscriptions.push(ke(en.commands,"extension.js-debug.getDiagnosticLogs",async()=>{let r=await this.getTargetSession();if(!r)return;let i=await en.window.showSaveDialog({filters:{JSON:["json"]}});i&&r.customRequest("saveDiagnosticLogs",{toFile:i.fsPath})}),ke(en.commands,"extension.js-debug.createDiagnostics",async()=>this.getDiagnosticInfo(await this.getTargetSession())),en.debug.onDidReceiveDebugSessionCustomEvent(async r=>{if(r.event==="openDiagnosticTool")return this.openDiagnosticTool(r.body.file);if(r.event!=="suggestDiagnosticTool"||this.dismissedForSession||this.context.workspaceState.get(cz)||this.isPrompting)return;this.isPrompting=!0;let i=Wd.t("Yes"),n=Wd.t("Not Now"),s=Wd.t("Never"),o=await en.window.showInformationMessage("It looks like you might be having trouble with breakpoints. Would you like to open our diagnostic tool?",i,n,s);switch(this.isPrompting=!1,o){case i:this.getDiagnosticInfo(await this.getTargetSession(),!0);break;case s:e.workspaceState.update(cz,!0);break;case n:this.dismissedForSession=!0;break}}))}getTargetSession(){let e=en.debug.activeDebugSession;if(!e||!da(e==null?void 0:e.type))return this.pickSession();if(nt.isConcreteSession(e))return e;let r=this.tracker.getChildren(e);return r.length===1?r[0]:this.pickSession()}pickSession(){return nt.pickSession(this.tracker.getConcreteSessions(),Wd.t("Select the session you want to inspect:"))}async getDiagnosticInfo(e,r=!1){if(!e||!this.tracker.isRunning(e)){en.window.showErrorMessage(Wd.t('It looks like your debug session has already ended. Try debugging again, then run the "Debug: Diagnose Breakpoint Problems" command.'));return}let{file:i}=await e.customRequest("createDiagnostics",{fromSuggestion:r});await this.openDiagnosticTool(i)}async openDiagnosticTool(e){let r=en.window.createWebviewPanel("jsDebugDiagnostics","Debug Diagnostics",en.ViewColumn.Active,{enableScripts:!0});r.webview.html=await this.fs.readFile(e,"utf-8")}};Vd=$([(0,Gd.injectable)(),w(0,(0,Gd.inject)(Ie)),w(1,(0,Gd.inject)(ht)),w(2,(0,Gd.inject)(nt))],Vd);var Kd=I(Se()),lz=I(Y()),Pn=I(require("vscode"));var bl=class{register(e){e.subscriptions.push(Pn.debug.onDidReceiveDebugSessionCustomEvent(r=>{if(r.event!=="suggestDisableSourcemap"||!da(r.session.type))return;let i=r.body;this.unmap(r.session,i.source).catch(n=>Pn.window.showErrorMessage(n.message))}))}async unmap(e,r){(Rt(Pn.workspace,"debug.javascript.unmapMissingSources")||await this.prompt())&&await e.customRequest("disableSourcemap",{source:r})}async prompt(){let e=Kd.t("Always"),r=Kd.t("Always in this Workspace"),i=Kd.t("Yes");switch(await Pn.window.showInformationMessage(Kd.t("This is a missing file path referenced by a sourcemap. Would you like to debug the compiled version instead?"),e,r,Kd.t("No"),i)){case e:return oI(Pn.workspace,"debug.javascript.unmapMissingSources",!0,Pn.ConfigurationTarget.Global),!0;case r:return oI(Pn.workspace,"debug.javascript.unmapMissingSources",!0,Pn.ConfigurationTarget.Workspace),!0;case i:return!0;default:return!1}}};bl=$([(0,lz.injectable)()],bl);var wl=I(Se()),lA=I(Y()),ns=I(require("vscode"));var pz="ms-vscode.wasm-dwarf-debugging",fz="dwarf.neverRemind",zd=class{constructor(e){this.context=e;this.didPromptForSession=this.context.workspaceState.get(fz,!1)}async load(){try{return await import("@vscode/dwarf-debugging")}catch{}let e=ns.extensions.getExtension(pz);if(e)return e.isActive||await e.activate(),e.exports}async prompt(){if(this.didPromptForSession)return;this.didPromptForSession=!0;let e=wl.t("Yes"),r=wl.t("Never"),i=await ns.window.showInformationMessage(wl.t({message:'VS Code can provide better debugging experience for WebAssembly via "DWARF Debugging" extension. Would you like to install it?',comment:'"DWARF Debugging" is the extension name and should not be localized.'}),e,wl.t("Not Now"),r);i===e?this.install():i===r&&this.context.workspaceState.update(fz,!0)}async install(){await ns.window.withProgress({location:ns.ProgressLocation.Notification,title:wl.t("Installing the DWARF debugger...")},async()=>{try{await ns.commands.executeCommand("workbench.extensions.installExtension",pz),ns.window.showInformationMessage(wl.t("Installation complete! The extension will be used after you restart your debug session."))}catch(e){ns.window.showErrorMessage(e.message||String(e))}})}};zd=$([(0,lA.injectable)(),w(0,(0,lA.inject)(ht))],zd);var hz=I(Se()),pA=I(Y()),Fu=I(require("vscode"));var dz=t=>{if((t==null?void 0:t.type)!=="pwa-msedge")return!1;let e=t.configuration.__browserTargetType;return e==="iframe"||e==="page"},P_e="ms-edgedevtools.vscode-edge-devtools",L_e="vscode-edge-devtools.attachToCurrentDebugTarget";function T_e(t){let e=t;for(;e.parentSession;)e=e.parentSession;return e}var Xd=class{constructor(e){this.tracker=e}register(e){e.subscriptions.push(ke(Fu.commands,"extension.js-debug.openEdgeDevTools",async()=>{let r=Fu.debug.activeDebugSession&&dz(Fu.debug.activeDebugSession)?Fu.debug.activeDebugSession:await nt.pickSession(this.tracker.getConcreteSessions().filter(dz),hz.t("Select the page where you want to open the devtools"));if(!r)return;let i=T_e(r);try{return await Fu.commands.executeCommand(L_e,r.id,i.configuration)}catch(n){if(n instanceof Error&&/command .+ not found/.test(n.message))return Fu.commands.executeCommand("workbench.extensions.action.showExtensionsWithIds",[P_e]);throw n}}))}};Xd=$([(0,pA.injectable)(),w(0,(0,pA.inject)(nt))],Xd);var yz=require("crypto"),fA=I(Y()),vz=require("path"),mt=I(require("vscode"));var mz=({name:t,line:e,column:r,source:i})=>`${t} (${(0,vz.basename)(String(i.path))}:${e}:${r})`,gz=({name:t,line:e,column:r,source:i})=>`${t} (${i.path}:${e}:${r})`,Hz=async({line:t,column:e,source:r})=>{if(r.sourceReference!==0||!r.path)return;let i=mt.Uri.file(r.path),n=await mt.workspace.openTextDocument(i),s=await mt.window.showTextDocument(n),o=new mt.Position(t-1,e-1);s.revealRange(new mt.Range(o,o)),s.selection=new mt.Selection(o,o)},p$=class{constructor(e,r){this.caller=e;this.target=r;this.treeItem=new mt.TreeItem(`${mz(e)} \u2192 ${mz(r)}`,mt.TreeItemCollapsibleState.None),this.treeItem.tooltip=`Breaks at ${gz(r)} containing ${gz(e)} will be skipped`,this.id=this.treeItem.id=(0,yz.createHash)("sha1").update(JSON.stringify([e,r])).digest("base64")}toDap(){return{caller:this.caller,target:this.target}}},Jd=class{constructor(e){this.sessionTracker=e;this._onDidChangeTreeData=new mt.EventEmitter;this.allCallers=new Map;this.lastHadCallers=!1;this.onDidChangeTreeData=this._onDidChangeTreeData.event}register(e){e.subscriptions.push(mt.window.createTreeView("jsExcludedCallers",{treeDataProvider:this}),ke(mt.commands,"extension.js-debug.callers.add",async(r,i)=>{var a;let n=await((a=this.sessionTracker.getById(i.sessionId))==null?void 0:a.customRequest("stackTrace",{threadId:0,startFrame:0,levels:1}));if(!(n!=null&&n.stackFrames.length))return;let s=n.stackFrames[0],o=new p$({name:i.frameName,column:i.frameLocation.range.startColumn,line:i.frameLocation.range.startLineNumber,source:i.frameLocation.source},{name:s.name,column:s.column,line:s.line,source:s.source});this.allCallers.set(o.id,o),this.triggerUpdate()}),ke(mt.commands,"extension.js-debug.callers.goToCaller",r=>Hz(r.caller)),ke(mt.commands,"extension.js-debug.callers.gotToTarget",r=>Hz(r.target)),ke(mt.commands,"extension.js-debug.callers.remove",async r=>{this.allCallers.delete(r.id),this.triggerUpdate()}),ke(mt.commands,"extension.js-debug.callers.removeAll",async()=>{this.allCallers.clear(),this.triggerUpdate()}),this.sessionTracker.onSessionAdded(r=>{this.allCallers.size>0&&this.sendCallersToSession(r)}))}getTreeItem(e){return e.treeItem}getChildren(e){return e?[]:[...this.allCallers.values()]}sendCallersToSession(e){e.customRequest("setExcludedCallers",{callers:[...this.allCallers.values()].map(r=>r.toDap())})}triggerUpdate(){this._onDidChangeTreeData.fire(void 0);for(let r of this.sessionTracker.getConcreteSessions())this.sendCallersToSession(r);let e=this.allCallers.size>0;e!==this.lastHadCallers&&(bh(mt.commands,"jsDebugHasExcludedCallers",e),this.lastHadCallers=e)}};Jd=$([(0,fA.injectable)(),w(0,(0,fA.inject)(nt))],Jd);var f$=I(Se()),bH=I(Y());var bz="linkBpWarnIgnored",k_e="https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_can-i-debug-if-im-using-symlinks",Yd=class{constructor(e,r){this.vscode=e;this.context=r;this.didWarn=this.context.workspaceState.get(bz,!1)}async warn(){if(this.didWarn)return;this.didWarn=!0;let e=f$.t("Read More"),r=f$.t("Ignore"),i=await this.vscode.window.showWarningMessage("It looks like you have symlinked files. You might need to update your configuration to make this work as expected.",r,e);i===r?this.context.workspaceState.update(bz,!0):i===e&&this.vscode.env.openExternal(this.vscode.Uri.parse(k_e))}};Yd=$([(0,bH.injectable)(),w(0,(0,bH.inject)(dn)),w(1,(0,bH.inject)(ht))],Yd);var wH=I(Se()),dA=I(Y()),_z=require("path"),oa=I(require("vscode"));var wz="omitLongPredictions",Qd=class{constructor(e){this.context=e}register(e){e.subscriptions.push(oa.debug.onDidReceiveDebugSessionCustomEvent(r=>{r.event==="longPrediction"&&this.promptLongBreakpoint(r.session.workspaceFolder)}))}async promptLongBreakpoint(e){if(this.context.workspaceState.get(wz))return;let r=wH.t("It's taking a while to configure your breakpoints. You can speed this up by updating the 'outFiles' in your launch.json."),i=wH.t("Open launch.json"),n=wH.t("Don't show again"),s=await oa.window.showWarningMessage(r,n,i);if(s===n){this.context.workspaceState.update(wz,!0);return}if(s!==i)return;if(e||(e=await oa.window.showWorkspaceFolderPick()),!e){await oa.window.showWarningMessage(wH.t("No workspace folder open."));return}let o=await oa.workspace.openTextDocument((0,_z.join)(e.uri.fsPath,".vscode","launch.json"));await oa.window.showTextDocument(o)}};Qd=$([(0,dA.injectable)(),w(0,(0,dA.inject)(ht))],Qd);var hA=I(Y()),eh=require("vscode");var Zd=class{constructor(e){this.leaseTracker=e;this.cachedResolutions=new Array(16).fill("");this.cachedResolutionIndex=0}register(e){typeof eh.workspace.registerPortAttributesProvider=="function"&&e.subscriptions.push(eh.workspace.registerPortAttributesProvider({portRange:[53e3,54e3]},this))}async providePortAttributes({port:e,pid:r}){if(r&&this.cachedResolutions.includes(`${e}:${r}`))return{port:e,autoForwardAction:eh.PortAutoForwardAction.Ignore};if(await this.leaseTracker.isRegistered(e)){if(r){let i=this.cachedResolutionIndex++%this.cachedResolutions.length;this.cachedResolutions[i]=`${e}:${r}`}return{port:e,autoForwardAction:eh.PortAutoForwardAction.Ignore}}}};Zd=$([(0,hA.injectable)(),w(0,(0,hA.inject)(Ht))],Zd);var mA=I(Y()),Iz=I(require("querystring")),_l=I(require("vscode"));var th=class{constructor(e){this.tracker=e;this.canPrettyPrintKey=new Cd("jsDebugCanPrettyPrint")}register(e){e.subscriptions.push(ke(_l.commands,"extension.js-debug.prettyPrint",()=>this.prettifyActive()),_l.window.onDidChangeActiveTextEditor(r=>this.updateEditorState(r)),this.tracker.onSessionAdded(()=>this.updateEditorState(_l.window.activeTextEditor)),this.tracker.onSessionEnded(()=>this.updateEditorState(_l.window.activeTextEditor)))}async prettifyActive(){let e=_l.window.activeTextEditor;if(!e||!this.canPrettyPrint(e))return;let{sessionId:r,source:i}=R_e(e.document.uri),n=r&&this.tracker.getById(r);if(n)Az(n,i,e.selection.start);else for(let s of this.tracker.getConcreteSessions())Az(s,i,e.selection.start)}canPrettyPrint(e){return this.tracker.isDebugging&&e.document.languageId==="javascript"&&!e.document.fileName.endsWith("-pretty.js")}updateEditorState(e){var r;if(!this.tracker.isDebugging){this.canPrettyPrintKey.value=void 0;return}e&&this.canPrettyPrint(e)&&e.document.uri.toString()!==((r=this.canPrettyPrintKey.value)==null?void 0:r[0])&&(this.canPrettyPrintKey.value=[e.document.uri.toString()])}};th=$([(0,mA.injectable)(),w(0,(0,mA.inject)(nt))],th);var Az=(t,e,r)=>t.customRequest("prettyPrintSource",{source:e,line:r.line,column:r.character}),R_e=t=>{let e=Iz.parse(t.query),r=e.session,i={path:t.fsPath,sourceReference:Number(e.ref)||0};return{sessionId:r,source:i}};var _H=I(Se()),AH=I(Y()),Ez=I(require("path")),ss=I(require("vscode"));var Sz="breakpointTerminationWarnedSlow",rh=class{constructor(e,r){this.fs=e;this.context=r;this.sortOrder=2;this.id="breakpoint";this.label=_H.t("Pick Breakpoint");this.description=_H.t("Run until a specific breakpoint is hit")}async onPick(e,r){if(r)return new gA(r);let i=ss.window.createQuickPick();i.canSelectMany=!0,i.matchOnDescription=!0,i.busy=!0;let n=await new Promise(s=>{i.onDidAccept(()=>s(i.selectedItems)),i.onDidHide(()=>s(void 0)),i.onDidChangeActive(async o=>{if(!o.length)return;let a=o[0].location,u=await ss.workspace.openTextDocument(a.uri);ss.window.showTextDocument(u,{selection:a.range,preview:!0,preserveFocus:!0})}),i.show(),(async()=>{let o=ss.debug.breakpoints.filter(c=>c.enabled&&c instanceof ss.SourceBreakpoint),a=await Promise.all(o.map(c=>e.getDebugProtocolBreakpoint(c))),u=await this.getCandidates(a,o);i.items=u,i.selectedItems=u,i.busy=!1})()});if(i.dispose(),!!n)return await this.warnSlowCode(),new gA(n.map(s=>Number(s.id)))}async warnSlowCode(){this.context.workspaceState.get(Sz)||(ss.window.showWarningMessage(_H.t('Profiling with breakpoints enabled can change the performance of your code. It can be useful to validate your findings with the "duration" or "manual" termination conditions.'),_H.t("Got it!")),await this.context.workspaceState.update(Sz,!0))}async getCandidates(e,r){if(e.length!==r.length)throw new Error("Mismatched breakpoint array lengths");let i=ho(s=>this.getFileLines(s));return(await Promise.all(r.map(async(s,o)=>{var f;let a=e[o];if(!a||!a.id)return;let u=s.location,c=ss.workspace.getWorkspaceFolder(u.uri),l=c?Ez.relative(c.uri.fsPath,u.uri.fsPath):u.uri.fsPath,p=await i(u.uri.fsPath);return{id:a.id,label:`${l}:${u.range.start.line}:${u.range.start.character}`,location:u,description:(f=p==null?void 0:p[u.range.start.line])==null?void 0:f.trim()}}))).filter(Mt)}async getFileLines(e){try{return(await this.fs.readFile(e,"utf-8")).split(`
`)}catch{return}}};rh=$([(0,AH.injectable)(),w(0,(0,AH.inject)(Ie)),w(1,(0,AH.inject)(ht))],rh);var gA=class{constructor(e){this.breakpointIds=e}get customData(){return{stopAtBreakpoint:this.breakpointIds.slice()}}dispose(){}};var Al=I(Se()),xz=I(Y()),Cz=I(require("vscode"));var HA=I(Se()),co=I(require("vscode"));var IH=class{constructor(e,r,i){this.session=e;this.impl=r;this.termination=i;this.statusChangeEmitter=new X;this.stopEmitter=new X;this._innerStatus=[];this.disposables=new De;this.state=0;this.onStatusChange=this.statusChangeEmitter.event;this.onStop=this.stopEmitter.event;var n;this.disposables.push(co.debug.onDidReceiveDebugSessionCustomEvent(s=>{s.session===e&&s.event==="profilerStateUpdate"&&this.onStateUpdate(s.body)}),co.debug.onDidTerminateDebugSession(s=>{s===e&&this.stopEmitter.fire(void 0)})),i&&(this.disposables.push(i),(n=i.attachTo)==null||n.call(i,this))}get status(){return this._innerStatus.filter(e=>!!e).join(", ")||void 0}async start(){try{await co.window.withProgress({location:co.ProgressLocation.Window,title:HA.t("Starting profile...")},()=>{var e;return this.session.customRequest("startProfile",{type:this.impl.type,...(e=this.termination)==null?void 0:e.customData})})}catch(e){co.window.showErrorMessage(e.message),this.stopEmitter.fire(void 0)}}dispose(){this.state=2,this.disposables.dispose()}setFile(e){this.file=e}async stop(){this.state===0&&(this.setStatus(-1,HA.t("Saving")),this.state=1,await co.window.withProgress({location:co.ProgressLocation.Window,title:HA.t("Stopping profile...")},()=>this.session.customRequest("stopProfile",{})))}onStateUpdate(e){if(e.running){this.setStatus(0,e.label);return}this.state=2,this.stopEmitter.fire(this.file),this.dispose()}setStatus(e,r){this.state===0&&(e===-1?this._innerStatus=[r]:this._innerStatus[e]=r,this.statusChangeEmitter.fire(this.status))}};var ih=class{constructor(){this.sortOrder=1;this.id="duration";this.label=Al.t("Duration");this.description=Al.t("Run for a specific amount of time")}async onPick(e,r){if(r)return new yA(r*1e3);let i=Cz.window.createInputBox();i.title=Al.t("Duration of Profile"),i.placeholder=Al.t('Profile duration in seconds, e.g "5"'),this.lastDuration&&(i.value=String(this.lastDuration)),i.onDidChangeValue(s=>{/^[0-9]+$/.test(s)?Number(s)<1?i.validationMessage=Al.t("Please enter a number greater than 1"):i.validationMessage=void 0:i.validationMessage=Al.t("Please enter a number")});let n=await new Promise(s=>{i.onDidAccept(()=>{if(i.validationMessage)return s(void 0);this.lastDuration=Number(i.value),s(new yA(this.lastDuration*1e3))}),i.onDidHide(()=>s(void 0)),i.show()});return i.dispose(),n}};ih=$([(0,xz.injectable)()],ih);var yA=class{constructor(e){this.duration=e;this.disposable=new De}attachTo(e){let r=Date.now()+this.duration,i=()=>e.setStatus(1,`${Math.round((r-Date.now())/1e3)}s`),n=setTimeout(()=>e.stop(),this.duration),s=setInterval(i,1e3);i(),this.disposable.callback(()=>{clearTimeout(n),clearInterval(s)})}dispose(){this.disposable.dispose()}};var d$=I(Se()),Dz=I(Y());var nh=class{constructor(){this.sortOrder=0;this.id="manual";this.label=d$.t("Manual");this.description=d$.t("Run until manually stopped")}async onPick(){return new SH}};nh=$([(0,Dz.injectable)()],nh);var SH=class{dispose(){}};var sh=Symbol("ITerminationConditionFactory");var lo=I(Se()),Uu=I(Y()),Pz=require("os"),vA=require("path"),br=I(require("vscode"));var M_e=t=>"__pendingTargetId"in t.configuration,Bu=class{constructor(e,r,i,n){this.tracker=e;this.fs=r;this.sessionStates=i;this.terminationConditions=n;this.activeSessions=new Map;this.disposables=new De;this.disposables.push(br.debug.onDidReceiveDebugSessionCustomEvent(s=>{if(s.event!=="profileStarted")return;let o=s.body,a=this.activeSessions.get(s.session.id);a||(a=new IH(s.session,Ei.ctors.find(u=>u.type===o.type)||Ei.ctors[0],new SH),this.registerSession(a)),a.setFile(o.file)}))}async start(e){let r,i=[...this.tracker.getConcreteSessions()].filter(M_e);if(e.sessionId?r=i.find(c=>c.id===e.sessionId):r=await this.pickSession(i),!r)return;let n=r,s=this.activeSessions.get(n.id);if(s&&!await this.alreadyRunningSession(s))return;let o=await this.pickType(n,e.type);if(!o)return;let a;if(!o.instant&&(a=await this.pickTermination(n,e.termination),!a))return;let u=new IH(n,o,a);u&&(this.registerSession(u,e.onCompleteCommand),await u.start(),o.instant&&await u.stop())}async stop(e){let r;if(e)r=this.activeSessions.get(e);else{let i=await this.pickSession([...this.activeSessions.values()].map(n=>n.session));r=i&&this.activeSessions.get(i.id)}r&&(this.sessionStates.remove(r.session.id),await r.stop())}dispose(){for(let e of this.activeSessions.values())e.dispose();this.activeSessions.clear(),this.disposables.dispose()}registerSession(e,r){this.activeSessions.set(e.session.id,e),this.sessionStates.add(e.session.id,lo.t("Profiling")),e.onStatusChange(()=>this.updateStatusBar()),e.onStop(i=>{i&&this.openProfileFile(e,r,e.session,i),this.activeSessions.delete(e.session.id),e.dispose(),this.updateStatusBar()}),this.updateStatusBar()}async openProfileFile(e,r,i,n){var u,c;if(r)return Promise.all([br.commands.executeCommand(r,{contents:await this.fs.readFile(n,"utf-8"),basename:(0,vA.basename)(n)+e.impl.extension}),this.fs.unlink(n)]);let s=((u=i.workspaceFolder)==null?void 0:u.uri.fsPath)??((c=br.workspace.workspaceFolders)==null?void 0:c[0].uri.fsPath)??(0,Pz.homedir)(),o=d0()+e.impl.extension,a=br.Uri.file((0,vA.join)(s,o));await vM(this.fs,n,a.fsPath),await br.commands.executeCommand(e.impl.editable?"vscode.open":"revealInExplorer",a)}updateStatusBar(){var r;if(this.activeSessions.size===0){(r=this.statusBarItem)==null||r.hide(),bh(br.commands,"jsDebugIsProfiling",!1);return}this.statusBarItem||(this.statusBarItem=br.window.createStatusBarItem(br.StatusBarAlignment.Right,500),this.statusBarItem.command="extension.js-debug.stopProfile"),bh(br.commands,"jsDebugIsProfiling",!0);let e=Ca(this.activeSessions.values());e&&this.activeSessions.size===1?this.statusBarItem.text=e.status?lo.t("{0} Click to Stop Profiling ({1})","$(loading~spin)",e.status):lo.t("{0} Click to Stop Profiling","$(loading~spin)"):this.statusBarItem.text=lo.t("{0} Click to Stop Profiling ({1} sessions)","$(loading~spin)",this.activeSessions.size),this.statusBarItem.show()}async alreadyRunningSession(e){let r=lo.t("Yes"),i=lo.t("No");return await br.window.showErrorMessage(lo.t("A profiling session is already running, would you like to stop it and start a new session?"),r,i)!==r?!1:(await this.stop(e.session.id),!0)}async pickSession(e){if(e.length===0)return;if(e.length===1)return e[0];let r=await br.window.showQuickPick(e.map(i=>({label:i.name,id:i.id})));return r&&e.find(i=>i.id===r.id)}async pickType(e,r){let i=e.configuration;if(r)return Ei.ctors.find(s=>s.type===r&&s.canApplyTo(i));let n=await this.pickWithLastDefault(lo.t("Type of profile:"),Ei.ctors.filter(s=>s.canApplyTo(i)),this.lastChosenType);return n&&(this.lastChosenType=n.label),n}async pickTermination(e,r){var n;if(r){let s=typeof r=="string"?{type:r}:r;return(n=this.terminationConditions.find(o=>o.id===s.type))==null?void 0:n.onPick(e,...s.args??[])}let i=await this.pickWithLastDefault(lo.t("How long to run the profile:"),this.terminationConditions,this.lastChosenTermination);return i&&(this.lastChosenTermination=i.label),i==null?void 0:i.onPick(e)}async pickWithLastDefault(e,r,i){if(r.length<=1)return r[0];let n=br.window.createQuickPick();n.title=e,n.items=r.slice().sort((o,a)=>o.label===i||a.label===i?o.label===i?-1:1:(o.sortOrder??0)-(a.sortOrder??0)).map(o=>({label:o.label,description:o.description,alwaysShow:!0}));let s=await new Promise(o=>{n.onDidAccept(()=>{var a;return o((a=n.selectedItems[0])==null?void 0:a.label)}),n.onDidHide(()=>o(void 0)),n.show()});if(n.dispose(),!!s)return r.find(o=>o.label===s)}};Bu=$([(0,Uu.injectable)(),w(0,(0,Uu.inject)(nt)),w(1,(0,Uu.inject)(Ie)),w(2,(0,Uu.inject)(Rp)),w(3,(0,Uu.multiInject)(sh))],Bu);var Tz=I(Y()),$z=require("vscode");var Lz=(t,e)=>{let r=t;for(let[i,n]of Object.entries(e))typeof n=="object"&&n?r[i]=Object.assign(r[i]||{},n):r[i]=n};var oh=class{constructor(){this.read=Ee(()=>Rt($z.workspace,"debug.javascript.resourceRequestOptions"))}provideOptions(e){Lz(e,this.read()||{})}};oh=$([(0,Tz.injectable)()],oh);var kz=I(Y()),h$=require("vscode");var ah=class{register(e){e.subscriptions.push(ke(h$.commands,"extension.node-debug.startWithStopOnEntry",()=>h$.commands.executeCommand("workbench.action.debug.start",{config:{stopOnEntry:!0}})))}};ah=$([(0,kz.injectable)()],ah);var C$=I(Se()),BA=I(Y()),Vz=I(Wz()),Gz=require("url"),_r=I(require("vscode"));var Wu=class{constructor(e){this.defaultBrowser=e;this.enabledTerminals=new WeakSet;this.disposable=new De;this.notifiedCantOpenOnWeb=!1;this.baseConfiguration=this.readConfig();this.disposable.push(_r.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration("debug.javascript.debugByLinkOptions")&&(this.baseConfiguration=this.readConfig())}))}enableHandlingInTerminal(e){this.enabledTerminals.add(e)}dispose(){this.disposable.dispose()}provideTerminalLinks(e){var n;switch(this.baseConfiguration.enabled){case"off":return[];case"always":break;case"on":default:if(!this.enabledTerminals.has(e.terminal))return[]}let r=[],i=Ee(()=>{var s;if("cwd"in e.terminal.creationOptions&&e.terminal.creationOptions.cwd){let o=_r.workspace.getWorkspaceFolder(typeof e.terminal.creationOptions.cwd=="string"?_r.Uri.file(e.terminal.creationOptions.cwd):e.terminal.creationOptions.cwd);if(o)return o}return(s=_r.workspace.workspaceFolders)==null?void 0:s[0]});for(let s of(0,Vz.find)(e.line,"url")){let o=-1;for(;(o=e.line.indexOf(s.value,o+1))!==-1;){let a;try{a=new Gz.URL(s.href)}catch{continue}a.protocol==="http:"&&!s.value.startsWith("http:")&&!Tv(a.hostname)&&(a.protocol="https:"),!(a.protocol!=="http:"&&a.protocol!=="https:")&&r.push({startIndex:o,length:s.value.length,tooltip:C$.t("Debug URL"),target:a,workspaceFolder:(n=i())==null?void 0:n.index})}}return r}async handleTerminalLink(e){await this.handleTerminalLinkInner(e)||_r.env.openExternal(_r.Uri.parse(e.target.toString()))}async handleTerminalLinkInner(e){var s;if(!e.target)return!1;let r=e.target;if(_r.env.uiKind===_r.UIKind.Web)return this.notifiedCantOpenOnWeb||(_r.window.showInformationMessage(C$.t("We can't launch a browser in debug mode from here. If you want to debug this webpage, open this workspace from VS Code on your desktop.")),this.notifiedCantOpenOnWeb=!0),!1;TN(r.hostname)&&(r.hostname="localhost");let i="pwa-chrome";try{await this.defaultBrowser.lookup()===3&&(i="pwa-msedge")}catch{}let n=e.workspaceFolder!==void 0?(s=_r.workspace.workspaceFolders)==null?void 0:s[e.workspaceFolder]:void 0;return _r.debug.startDebugging(n,{...this.baseConfiguration,type:i,name:r.toString(),request:"launch",url:r.toString()}),!0}readConfig(){let e=Rt(_r.workspace,"debug.javascript.debugByLinkOptions");return typeof e=="boolean"&&(e=e?"on":"off"),typeof e=="string"?{enabled:e}:{enabled:"on",...e}}};Wu=$([(0,BA.injectable)(),w(0,(0,BA.inject)(Af))],Wu);var Kz=t=>{t.bind(dn).toConstantValue(require("vscode")),az.forEach(e=>{t.bind(e).toSelf().inSingletonScope(),t.bind(rA).to(e)}),uz.forEach(e=>t.bind(iA).to(e).inSingletonScope()),t.bind(Ai).to(Qd).inSingletonScope(),t.bind(Ai).to(qd).inSingletonScope(),t.bind(Ai).to(xd).inSingletonScope(),t.bind(Ai).to(bl).inSingletonScope(),t.bind(Ai).to(Vd).inSingletonScope(),t.bind(Ai).to(ah).inSingletonScope(),t.bind(Ai).to(Zd).inSingletonScope(),t.bind(Ai).to(Xd).inSingletonScope(),t.bind(Ai).to(Jd).inSingletonScope(),t.bind(Ai).to(th).inSingletonScope(),t.bind(Ai).to(Dd).inSingletonScope(),t.bind(Qg).to(Yd).inSingletonScope(),t.bind(nt).toSelf().inSingletonScope().onActivation(Pt),t.bind(Bu).toSelf().inSingletonScope().onActivation(Pt),t.bind(Wu).toSelf().inSingletonScope(),t.bind(bl).toSelf().inSingletonScope(),t.bind(_c).to(zd).inSingletonScope(),t.bind(sh).to(ih).inSingletonScope(),t.bind(sh).to(nh).inSingletonScope(),t.bind(sh).to(rh).inSingletonScope()},zz=t=>{t.bind(Cr).to(ea).onActivation(Pt),t.bind(Hf).to(oh).inSingletonScope(),t.bind(Dp).to(Ed).inSingletonScope()};var Jz=I(Se()),UA=I(Y());var Xz="@vscode/dwarf-debugging",hh=class{constructor(e){this.dap=e;this.didPrompt=!1}async load(){try{return await import(Xz)}catch{return}}prompt(){this.didPrompt||(this.didPrompt=!0,this.dap.output({output:Jz.t("You may install the `{}` module via npm for enhanced WebAssembly debugging",Xz),category:"console"}))}};hh=$([(0,UA.injectable)(),w(0,(0,UA.inject)(gi))],hh);var Qz=(t,e,r,i)=>{let n=new WA.Container;return n.parent=t,n.bind(je).toConstantValue(e.launchConfig),n.bind($p).toConstantValue(n),n.bind(gi).toConstantValue(r),n.bind(St).toConstantValue(i),n.bind(Gs).toConstantValue(e),n.bind(Z9).toConstantValue(e.targetOrigin()),n.bind(nc).to(Uc).inSingletonScope(),n.bind(ks).to(pc).inSingletonScope(),n.bind(Zv).to(_p).inSingletonScope(),n.bind(Na).toSelf().inSingletonScope(),e.sourcePathResolver&&n.bind(ut).toConstantValue(e.sourcePathResolver),n.bind(Rc).toSelf(),n.bind(u0).toDynamicValue(s=>s.container.get(Rc).create()).inSingletonScope(),e.parent()&&(n.bind(hc).to(dc).inSingletonScope(),n.bind(Rs).to(gp).inSingletonScope()),n.bind(ir).to(process.env.DA_TEST_DISABLE_TELEMETRY?pl:Ii).inSingletonScope().onActivation(Pt),n.bind(mn).toSelf().inSingletonScope(),n.bind(hr).toSelf().inSingletonScope(),n.bind(Za).toSelf().inSingletonScope(),n.bind(Ba).to(zs).inSingletonScope(),n.bind(Ka).toSelf().inSingletonScope(),n.bind(tf).to(ef).inSingletonScope(),n.bind(Tb).to(Vp).inSingletonScope(),n.bind(ln).to(vp).inSingletonScope(),n.bind(r0).to(Zp).inSingletonScope(),n.bind(Qa).to(Qp).inSingletonScope(),n.bind(gb).to(Mp).inSingletonScope(),n.bind(vr).toSelf(),n.bind(qi).toSelf(),n.bind(Wi).toSelf(),n.bind(f0).to(Ei).inSingletonScope(),n.bind(h0).to(nf).inSingletonScope(),n.bind(Lb).to(qp).inSingletonScope().onActivation(Pt),n},Zz=t=>{let e=new WA.Container;e.parent=t,e.bind($p).toConstantValue(e),e.bind(le).to(wn).inSingletonScope().onActivation(Pt),e.bind(nc).to(Uc).inSingletonScope(),e.bind(ir).to(process.env.DA_TEST_DISABLE_TELEMETRY?pl:Ii).inSingletonScope().onActivation(Pt),e.bind(Es).to(Es).inSingletonScope(),e.bind(vo).to(vo).inSingletonScope(),e.bind(vf).to(yf).inSingletonScope(),e.bind(hp).to(Bf).inSingletonScope(),e.bind(Cn).to(Zf),e.bind(ro).toSelf().inSingletonScope().onActivation(Pt),e.bind(ao).toSelf(),e.bind(Cr).to(rs).onActivation(Pt),e.bind(Cr).to(td).onActivation(Pt),e.bind(Cr).to(rd).onActivation(Pt),e.bind(Cr).to(ud).onActivation(Pt),e.bind(cH).to(fd),e.bind(cH).to(hd),e.bind(ol).to(Qf).inSingletonScope(),zz(e),e.bind(Cr).to(od).onActivation(Pt),e.bind(nl).toSelf().inSingletonScope().onActivation(Pt),e.bind(Cr).toService(nl),e.bind(Cr).to(qf).inSingletonScope().onActivation(Pt),e.bind(Cr).to(Vf).inSingletonScope().onActivation(Pt),e.bind(Cr).to(Wf).inSingletonScope().onActivation(Pt),e.bind(Cr).to(Gf).inSingletonScope().onActivation(Pt),e.bind(Cr).to(En).onActivation(Pt),e.bind(Cr).toDynamicValue(()=>t.get(no).createLauncher(e.get(le))).inSingletonScope(),e.isBound(_c)||e.bind(_c).to(hh).inSingletonScope();let r=i=>n=>new i(n.container.get(QE),n.container.get(Ie),n.container.get(vm));return e.bind(wc).toDynamicValue(r(qA.ChromeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","chrome"),e.bind(wc).toDynamicValue(r(qA.EdgeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","edge"),e},eX=t=>{let e=new WA.Container;return e.bind($p).toConstantValue(e),e.bind(no).toSelf().inSingletonScope(),e.bind(ts).toSelf().inSingletonScope(),e.bind(Dp).to(md).inSingletonScope(),e.bind(Rp).toConstantValue(new Xs),e.bind(Af).to(_f).inSingletonScope(),e.bind(Fs).toConstantValue(t.storagePath),e.bind(kp).toConstantValue(t.isVsCode),e.bind(P_).to(ld),e.bind(Ht).to(jp).inSingletonScope(),e.bind(QE).toConstantValue(process.env),e.bind(vm).toConstantValue(Yz.default),e.bind(Ie).toConstantValue(jA.promises),e.bind(Gr).toConstantValue(new $i(jA.promises)),e.bind(Co).toConstantValue(t.isRemote?"remote":"local"),t.context&&e.bind(ht).toConstantValue(t.context),Kz(e),e},tX=(t,e,r)=>{t.bind(Hg).toConstantValue(DW(e)),t.bind(je).toService(Hg),t.bind(li).to(Xf).inSingletonScope(),t.bind(ep).toConstantValue(r),t.bind(ut).toDynamicValue(i=>i.container.get(li).create(e,i.container.get(le))).inSingletonScope(),t.bind(Gr).toConstantValue(Gy.create(e.__remoteFilePrefix,jA.promises,r)),t.bind(SE).to(Ta).inSingletonScope().onActivation(Pt),t.bind(Ma).to(yp).inSingletonScope(),t.bind(xt).toSelf().inSingletonScope().onActivation(Pt),t.bind(ks).to(pc).inSingletonScope(),t.bind(fc).toSelf().inSingletonScope(),t.bind(hc).to(dc).inSingletonScope(),t.bind(Rs).to(mp).inSingletonScope()};var cX=I(Se()),Ar=I(require("vscode"));var rX=I(Se()),ca=I(Y()),D$=I(require("path")),Vu=I(require("vscode"));var xl=class extends Ci{constructor(r,i,n,s,o,a){super(r,i,a,o);this.extensionContext=n;this.fs=s;this.telemetryItems=new Map}get deferredSocketName(){var n;let r=this.extensionContext.environmentVariableCollection.get("VSCODE_INSPECTOR_OPTIONS");return r?(n=new H_({VSCODE_INSPECTOR_OPTIONS:r.value}).inspectorOptions)==null?void 0:n.inspectorIpc:void 0}getProcessTelemetry(r){return Promise.resolve(r instanceof ed?this.telemetryItems.get(r.processId()):void 0)}resolveParams(r){if(r.type==="node-terminal"&&r.request==="launch")return r}async launchProgram(r){await this.applyInspectorOptions(this.extensionContext.environmentVariableCollection,r),this.program=new Zo,this.program.stopped.then(i=>this.onProgramTerminated(i))}async refreshVariables(){this.run&&await this.applyInspectorOptions(this.extensionContext.environmentVariableCollection,this.run)}async applyInspectorOptions(r,i){let n;try{n=await this.resolveNodePath(i.params)}catch(u){if(u instanceof re&&u.cause.id===9229)n=new kr("node",void 0);else throw u}let s=Rt(Vu.workspace,"debug.javascript.autoAttachFilter"),a=(await this.resolveEnvironment(i,n,{deferredMode:!0,inspectorIpc:this.deferredSocketName??i.serverAddress+".deferred",autoAttachMode:s,aaPatterns:s==="smart"?this.readSmartPatterns():void 0})).defined();r.persistent=!0,r.description=new Vu.MarkdownString(rX.t({message:'Enables Node.js [auto attach]({0}) debugging in "{1}" mode',comment:["{Locked='[auto attach]({0})'}","the 2nd placeholder is the setting value"],args:["https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_auto-attach",s]})),r.prepend("NODE_OPTIONS",a.NODE_OPTIONS),r.append("VSCODE_INSPECTOR_OPTIONS",a.VSCODE_INSPECTOR_OPTIONS)}readSmartPatterns(){var n,s;let r=Rt(Vu.workspace,"debug.javascript.autoAttachSmartPattern"),i=((n=Vu.workspace.workspaceFolders)==null?void 0:n.length)===1?Vu.workspace.workspaceFolders[0].uri.fsPath:`{${(s=Vu.workspace.workspaceFolders)==null?void 0:s.map(o=>o.uri.fsPath).join(",")}}`;return r==null?void 0:r.map(o=>o.replace("${workspaceFolder}",i)).map(rt)}async getBootloaderFile(r,i){var a;let n=this.extensionContext.storagePath||this.extensionContext.globalStoragePath;if(n.includes(" ")&&i.isPreciselyKnown&&!i.has(0))throw new kH(`The \`node\` version on your PATH is too old (${(a=i.version)==null?void 0:a.major}), so we cannot enable auto-attach in your environment`,"https://github.com/microsoft/vscode-js-debug/issues/708");let s=D$.join(n,"bootloader.js");try{await this.fs.mkdir(n)}catch{}await Promise.all([DS(this.fs,y_,s),DS(this.fs,iG,D$.join(n,"watchdog.js"))]);let o=rt(s);return{interpolatedPath:o.includes(" ")?`"${o}"`:o,dispose:()=>{}}}async spawnForChild(r){if(!this.run)return;let i=Number(r.pid??"0");this.telemetryItems.set(i,r.telemetry);let n=await Di.attach({...r,ipcAddress:this.run.serverAddress});n.onEnd(()=>{this.telemetryItems.delete(i),n.dispose()})}static clearVariables(r){r.environmentVariableCollection.clear()}};xl=$([(0,ca.injectable)(),w(0,(0,ca.inject)(Cn)),w(1,(0,ca.inject)(le)),w(2,(0,ca.inject)(ht)),w(3,(0,ca.inject)(Ie)),w(4,(0,ca.inject)(li)),w(5,(0,ca.inject)(Ht))],xl);var kH=class extends Error{constructor(r,i){super(r);this.helpLink=i}};var sX=I(Se()),oX=require("os"),kt=I(require("vscode"));var iX=()=>{let t,e=We(),r=(i,n)=>n==="connect"?s=>{e.resolve(s),t=s}:n==="disconnect"?()=>{e=We(),t=void 0}:async(...s)=>(t||await e.promise)[n](...s);return new Proxy({},{get:r})};var L$=(t,e,r={},i=()=>!0)=>{let n=new Ii,s={...Rt(kt.workspace,"debug.javascript.terminalOptions"),internalConsoleOptions:"neverOpen"},o=iX();n.attachDap(o);let a=new Set,u=async c=>{var h;let l=await e.getProcessTelemetry(c),p=l&&kt.Uri.file(l.cwd),f=p&&kt.workspace.getWorkspaceFolder(p);return f?f.uri:r.__workspaceFolder?kt.Uri.file(r.__workspaceFolder):((h=kt.workspace.workspaceFolders)==null?void 0:h[0].uri)??p};return e.onTargetListChanged(async()=>{let c=await kt.workspace.requestWorkspaceTrust(),l=new Set;for(let p of e.targetList()){if(l.add(p),a.has(p)){a.delete(p);continue}let f=t.addDelegate(p,o,p.parent());if(!i(p)){p.detach();return}if(p.targetInfo.openerId&&!p.parent()){p.detach();return}if(!c){p.detach();return}if(!p.parent()){let h=await u(p);kt.debug.startDebugging(h&&kt.workspace.getWorkspaceFolder(h),{...s,type:"node-terminal",name:"Node.js Process",request:"attach",delegateId:f,cwd:h==null?void 0:h.fsPath,__workspaceFolder:h})}}for(let p of a)t.removeDelegate(p);a=l}),e.launch(ha({...s,type:"node-terminal",name:WH.name,request:"launch",...r}),{dap:o,telemetryReporter:n,cancellationToken:gr,get targetOrigin(){return new Yf("<unset>")}})},aX=Symbol("Abort"),nX=(0,oX.homedir)(),Q_e=process.platform==="win32"?t=>t:t=>t.startsWith(nX)?`~${t.slice(nX.length)}`:t;async function Z_e(){let t=kt.workspace.workspaceFolders;if(!t||t.length<2)return t==null?void 0:t[0];let e=await kt.window.showQuickPick(t.map(r=>({label:r.name,description:Q_e(r.uri.fsPath),folder:r})),{placeHolder:sX.t("Select current working directory for new terminal")});return(e==null?void 0:e.folder)??aX}var P$=class extends ea{constructor(){super(...arguments);this.optionsReadyEmitter=new X;this.onOptionsReady=this.optionsReadyEmitter.event}createTerminal(r){return this.optionsReadyEmitter.fire(r),new Promise(i=>{let n=kt.window.onDidOpenTerminal(s=>{n.dispose(),i(s)})})}};function uX(t,e,r,i){var a,u;let n=new Map,s=(c,l)=>new ea(l,c,i.get(Ie),i.get(ts),i.get(Ht));async function o(c,l,p,f,h=s){if(!p){let b=await Z_e();if(b===aX)return;p=b}if(l){for(let[b,_]of n)if(_.folder===p&&_.cwd===(f==null?void 0:f.cwd)&&!_.launcher.targetList().length){b.show(!0),b.sendText(l);return}}let g=new io,H=h(g,new Qo(g,i.get(Ie),v_));H.onTerminalCreated(b=>{n.set(b,{launcher:H,folder:p,cwd:f==null?void 0:f.cwd}),r.enableHandlingInTerminal(b)});try{await L$(c,H,{command:l,...f,__workspaceFolder:p==null?void 0:p.uri.fsPath},()=>{for(let[b,_]of n)if(_.launcher===H&&b.state.isInteractedWith)return!0;return!1})}catch(b){kt.window.showErrorMessage(b.message)}}t.subscriptions.push(kt.window.onDidCloseTerminal(c=>{n.delete(c)}),ke(kt.commands,"extension.js-debug.createDebuggerTerminal",(c,l,p)=>o(e,c,l,p)),kt.window.registerTerminalProfileProvider("extension.js-debug.debugTerminal",{provideTerminalProfile:()=>new Promise(c=>o(e,void 0,void 0,void 0,(l,p)=>{let f=new P$(p,l,i.get(Ie),i.get(ts),i.get(Ht));return f.onOptionsReady(h=>c(new kt.TerminalProfile(h))),f}))}),(u=(a=kt.window).registerTerminalLinkProvider)==null?void 0:u.call(a,r))}function lX(t,e,r){let i=new Map,n,s=o=>{let a=i.get(o);if(a)return a;let u=(async()=>{let c=new io,l=new xl(new Qo(c,r.get(Ie),v_),c,t,r.get(Ie),r.get(ts),r.get(Ht)),p=Rt(Ar.workspace,"debug.javascript.terminalOptions");if(o){let f=o==null?void 0:o.uri.fsPath;p={...p,cwd:f,__workspaceFolder:f}}return await L$(e,l,p),l.onTargetListChanged(()=>{l.targetList().length===0&&!n?n=setTimeout(()=>{i.delete(o),l.terminate()},5*60*1e3):n&&(clearTimeout(n),n=void 0)}),l})();return i.set(o,u),u};t.subscriptions.push(ke(Ar.commands,"extension.js-debug.setAutoAttachVariables",async()=>{var o;try{return{ipcAddress:(await s((o=Ar.workspace.workspaceFolders)==null?void 0:o[0])).deferredSocketName}}catch(a){if(a instanceof kH&&a.helpLink){let u=cX.t("Details");await Ar.window.showErrorMessage(a.message,u)===u&&Ar.env.openExternal(Ar.Uri.parse(a.helpLink))}else await Ar.window.showErrorMessage(a.message)}}),ke(Ar.commands,"extension.js-debug.autoAttachToProcess",async o=>{var a;try{let u=o.scriptName&&Ar.workspace.getWorkspaceFolder(Ar.Uri.file(o.scriptName));(await s(u||((a=Ar.workspace.workspaceFolders)==null?void 0:a[0]))).spawnForChild(o)}catch(u){console.error(u),Ar.window.showErrorMessage(`Error activating auto attach: ${u.stack||u}`)}}),ke(Ar.commands,"extension.js-debug.clearAutoAttachVariables",async()=>{xl.clearVariables(t);for(let[o,a]of i.entries())i.delete(o),a.then(u=>u.terminate())}))}var pX=I(Se()),fX=require("url"),Fr=I(require("vscode"));var VA=I(require("vscode"));var mh=class{constructor(){this.tunnels=new Map;this.disposable=new De;this.disposable.push(VA.debug.onDidTerminateDebugSession(e=>this.destroySession(e.id)))}dispose(){return this.disposable.dispose()}destroySession(e){let r=this.tunnels.get(e);r&&(r.dispose(),this.tunnels.delete(e))}async request(e,r){let i=this.tunnels.get(e);i||(i=await VA.workspace.openTunnel({remoteAddress:{port:r.remotePort,host:"localhost"},localAddressPort:r.localPort??r.remotePort,label:r.label}),this.tunnels.set(e,i));let n;if(typeof i.localAddress=="string"){let[s,o]=i.localAddress.split(":");n={host:s,port:Number(o)}}else n=i.localAddress;return{remoteAddress:i.remoteAddress,localAddress:n}}};var eAe=t=>e=>typeof e.localAddress=="string"?e.localAddress.endsWith(`:${t}`):e.localAddress.port===t,tAe=async t=>{let e=t.params.url;if(!e)return;let r;try{r=new fX.URL(e)}catch{return}if(!Rt(Fr.workspace,"debug.javascript.automaticallyTunnelRemoteServer"))return;let i=Number(r.port)||80;if(!(await Fr.workspace.tunnels).some(eAe(i)))try{await Fr.workspace.openTunnel({remoteAddress:{port:i,host:"localhost"},localAddressPort:i})}catch{}},rAe=async(t,e,r)=>{if(Fr.env.uiKind===Fr.UIKind.Web)return Fr.debug.stopDebugging(t),Fr.window.showErrorMessage(pX.t("We can't launch a browser in debug mode from here. Open this workspace in VS Code on your desktop to enable debugging."));try{let[,i]=await Promise.all([tAe(r),e.request(t.id,{remotePort:r.serverPort,label:"Browser Debug Tunnel"}).catch(()=>{})]);await Fr.commands.executeCommand("js-debug-companion.launchAndAttach",{proxyUri:i?`127.0.0.1:${i.localAddress.port}`:`127.0.0.1:${r.serverPort}`,wslInfo:process.env.WSL_DISTRO_NAME&&{execPath:process.execPath,distro:process.env.WSL_DISTRO_NAME,user:process.env.USER},...r})}catch(i){Fr.window.showErrorMessage(`Error launching browser: ${i.message||i.stack}`)}},iAe=async(t,e,{launchId:r})=>{await Fr.commands.executeCommand("js-debug-companion.kill",{launchId:r}),e.destroySession(t.id)};function dX(t){let e=new mh;t.subscriptions.push(e,Fr.debug.onDidReceiveDebugSessionCustomEvent(async r=>{switch(r.event){case"launchBrowserInCompanion":return rAe(r.session,e,r.body);case"killCompanionBrowser":return iAe(r.session,e,r.body);default:}}))}var la=I(require("vscode"));var GA=class{constructor(e,r){this.id=e.id,this.enabled=r,this.label=`${e.group}: ${e.title}`,this.treeItem=new la.TreeItem(this.label),this.treeItem.id=e.id}static compare(e,r){return e.label.localeCompare(r.label)}},T$=class{constructor(e){this._onDidChangeTreeData=new X;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.breakpoints=[];for(let r of Um().values())this.breakpoints.push(new GA(r,!1));this._debugSessionTracker=e,e.onSessionAdded(r=>{nt.isConcreteSession(r)&&r.customRequest("enableCustomBreakpoints",{ids:this.breakpoints.filter(i=>i.enabled).map(i=>i.id)})})}getTreeItem(e){return e.treeItem}async getChildren(e){return e?[]:this.breakpoints.filter(r=>r.enabled).sort(GA.compare)}async getParent(){}addBreakpoints(e){for(let i of e)i.enabled=!0;let r=e.map(i=>i.id);for(let i of this._debugSessionTracker.getConcreteSessions())i.customRequest("enableCustomBreakpoints",{ids:r});this._onDidChangeTreeData.fire(void 0)}removeBreakpoints(e){let r=new Set(e);for(let i of this.breakpoints)r.has(i.id)&&(i.enabled=!1);for(let i of this._debugSessionTracker.getConcreteSessions())i.customRequest("disableCustomBreakpoints",{ids:e});this._onDidChangeTreeData.fire(void 0)}};function hX(t,e){let r=new T$(e);la.window.createTreeView("jsBrowserBreakpoints",{treeDataProvider:r}),t.subscriptions.push(la.commands.registerCommand("extension.js-debug.addCustomBreakpoints",()=>{let i=la.window.createQuickPick(),n=r.breakpoints.filter(s=>!s.enabled);i.items=n,i.onDidAccept(()=>{r.addBreakpoints(i.selectedItems),i.dispose()}),i.show()})),t.subscriptions.push(la.commands.registerCommand("extension.js-debug.removeAllCustomBreakpoints",()=>{r.removeBreakpoints(r.breakpoints.filter(i=>i.enabled).map(i=>i.id))})),t.subscriptions.push(la.commands.registerCommand("extension.js-debug.removeCustomBreakpoint",i=>{r.removeBreakpoints([i.id])}))}var $$=I(require("vscode"));var mX=(t,e)=>{let r=e.get(Bu);t.subscriptions.push(ke($$.commands,"extension.js-debug.startProfile",i=>r.start(typeof i=="string"?{sessionId:i}:i??{})),ke($$.commands,"extension.js-debug.stopProfile",i=>r.stop(i)))};var KA=I(require("vscode"));var gX=(t,e)=>{let r=new mh;t.subscriptions.push(r,ke(KA.commands,"extension.js-debug.requestCDPProxy",async(i,n)=>{let s=e.getById(i);if(!s)return;let o=await s.customRequest("requestCDPProxy");if(!n)return o;try{if(KA.env.remoteName!==void 0){let a=await r.request(i,{label:"Edge Devtools Tunnel",remotePort:o.port});return{host:a.localAddress.host,port:a.localAddress.port,path:o.path}}}catch{}return o}))};var HX=I(require("vscode"));var yX=(t,e)=>{t.subscriptions.push(ke(HX.commands,"extension.js-debug.revealPage",async r=>{let i=e.getById(r);await(i==null?void 0:i.customRequest("revealPage"))}))};var RH=I(require("vscode")),vX=require("url");async function bX(t){if(!t){let e=RH.window.activeTextEditor;if(!e)return;t=e&&e.document.fileName}if(t&&RH.debug.activeDebugSession){let e;typeof t=="string"?bi(t)?e={resource:(0,vX.fileURLToPath)(t)}:e={resource:t}:e={sourceReference:t},await RH.debug.activeDebugSession.customRequest("toggleSkipFileStatus",e)}}var Ku=I(require("vscode"));var $X=require("fs"),kX=I(require("net"));var wX=`\r
\r
`,nAe=0,MH=class{constructor(e,r,i){this.inputStream=e;this.outputStream=r;this._contentLength=-1;this._connectionId=nAe++;this.msgEmitter=new X;this.messageReceived=this.msgEmitter.event;this.endedEmitter=new X;this.closed=this.endedEmitter.event;this._handleData=e=>{var i;let r=new oi;for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let n=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,n.length>0)try{let s=JSON.parse(n);(i=this.logger)==null||i.verbose("dap.receive",void 0,{connectionId:this._connectionId,message:s}),this.msgEmitter.fire({message:s,receivedTime:r})}catch(s){console.error("Error handling data: "+(s&&s.message))}continue}}else{let n=this._rawData.indexOf(wX);if(n!==-1){let o=this._rawData.toString("utf8",0,n).split(`\r
`);for(let a=0;a<o.length;a++){let u=o[a].split(/: +/);u[0]==="Content-Length"&&(this._contentLength=+u[1])}this._rawData=this._rawData.slice(n+wX.length);continue}}break}};this.logger=i,this._rawData=Buffer.alloc(0),e.on("end",()=>this.endedEmitter.fire()),e.on("data",this._handleData)}send(e,r=!0,i){var o,a;let n=JSON.stringify(e);if(r){let u=e;e.type==="response"&&e.command==="source"&&(u={...e,body:{...e.body,content:"<script source>"}}),(o=this.logger)==null||o.verbose("dap.send",void 0,{connectionId:this._connectionId,message:u})}let s=`Content-Length: ${Buffer.byteLength(n,"utf8")}\r
\r
${n}`;if(this.outputStream.destroyed){(a=this.logger)==null||a.warn("dap.send","Message not sent. Connection was closed."),i==null||i();return}this.outputStream.write(s,"utf8",u=>{var c;i==null||i(),u&&(console.log(e),(c=this.logger)==null||c.error("dap.send","Error while writing to output stream",u),this.close())})}close(){this.inputStream.destroy(),this.outputStream.destroy()}setLogger(e){return this.logger=e,this}};var LX=I(Se()),YA=I(require("os"));var sAe={connect:async()=>Cp},AX=t=>({async connect(e){return await e.Debugger.setAsyncCallStackDepth({maxDepth:t}),Cp}}),oAe=t=>{let e=new X,r=!1,i=()=>{r||(r=!0,e.fire())};return{async connect(n){if(r)return await n.Debugger.setAsyncCallStackDepth({maxDepth:t}),Cp;let s=new De;return s.push(e.event(()=>{s.dispose(),n.Debugger.setAsyncCallStackDepth({maxDepth:t})}),n.Debugger.on("breakpointResolved",i),n.Debugger.on("paused",o=>{o.reason!=="instrumentation"&&i()})),s}}},_X=AX(32),IX=t=>t===!1?sAe:t===!0?_X:"onAttach"in t?AX(t.onAttach):"onceBreakpointResolved"in t?oAe(t.onceBreakpointResolved):_X;var Tn=I(Se());var Cl=class{constructor(e,r,i,n){this.asyncStackPolicy=r;this.launchConfig=i;this._services=n;this._disposables=new De;this._customBreakpoints=new Set;this._threadDeferred=We();this.breakpointIdCounter=jH();this._cdpProxyProvider=this._services.get(Lb);this._configurationDoneDeferred=We(),this.sourceContainer=n.get(hr),this.breakpointManager=n.get(mn);let s=n.get(u0),o=n.get(ir);o.onFlush(()=>{o.report("breakpointStats",this.breakpointManager.statisticsForTelemetry()),o.report("statistics",this.sourceContainer.statistics())}),this.dap=e,this.dap.on("initialize",a=>this.onInitialize(a)),this.dap.on("setBreakpoints",a=>this._onSetBreakpoints(a)),this.dap.on("setExceptionBreakpoints",a=>this.setExceptionBreakpoints(a)),this.dap.on("configurationDone",()=>this.configurationDone()),this.dap.on("loadedSources",()=>this._onLoadedSources()),this.dap.on("disableSourcemap",a=>this._onDisableSourcemap(a)),this.dap.on("source",a=>this._onSource(a)),this.dap.on("threads",()=>this._onThreads()),this.dap.on("stackTrace",a=>this._withThread(u=>u.stackTrace(a))),this.dap.on("variables",a=>this._onVariables(a)),this.dap.on("readMemory",a=>this._onReadMemory(a)),this.dap.on("writeMemory",a=>this._onWriteMemory(a)),this.dap.on("setVariable",a=>this._onSetVariable(a)),this.dap.on("setExpression",a=>this._onSetExpression(a)),this.dap.on("continue",()=>this._withThread(a=>a.resume())),this.dap.on("pause",()=>this._withThread(a=>a.pause())),this.dap.on("next",()=>this._withThread(a=>a.stepOver())),this.dap.on("stepIn",a=>this._withThread(u=>u.stepInto(a.targetId))),this.dap.on("stepOut",()=>this._withThread(a=>a.stepOut())),this.dap.on("restartFrame",a=>this._withThread(u=>u.restartFrame(a))),this.dap.on("scopes",a=>this._withThread(u=>u.scopes(a))),this.dap.on("evaluate",a=>this.onEvaluate(a)),this.dap.on("completions",a=>this._withThread(u=>u.completions(a))),this.dap.on("exceptionInfo",()=>this._withThread(a=>a.exceptionInfo())),this.dap.on("enableCustomBreakpoints",a=>this.enableCustomBreakpoints(a)),this.dap.on("toggleSkipFileStatus",a=>this._toggleSkipFileStatus(a)),this.dap.on("disableCustomBreakpoints",a=>this._disableCustomBreakpoints(a)),this.dap.on("prettyPrintSource",a=>this._prettyPrintSource(a)),this.dap.on("revealPage",()=>this._withThread(a=>a.revealPage())),this.dap.on("getPerformance",()=>this._withThread(a=>s.retrieve(a.cdp()))),this.dap.on("breakpointLocations",a=>this._breakpointLocations(a)),this.dap.on("createDiagnostics",a=>this._dumpDiagnostics(a)),this.dap.on("requestCDPProxy",()=>this._requestCDPProxy()),this.dap.on("setExcludedCallers",a=>this._onSetExcludedCallers(a)),this.dap.on("saveDiagnosticLogs",({toFile:a})=>this._saveDiagnosticLogs(a)),this.dap.on("setSourceMapStepping",a=>this._setSourceMapStepping(a)),this.dap.on("stepInTargets",a=>this._stepInTargets(a)),this.dap.on("setDebuggerProperty",a=>this._setDebuggerProperty(a)),this.dap.on("setSymbolOptions",a=>this._setSymbolOptions(a))}_setDebuggerProperty(e){var r;return(r=this._thread)==null||r.cdp().DotnetDebugger.setDebuggerProperty(e),Promise.resolve({})}_setSymbolOptions(e){var r;return(r=this._thread)==null||r.cdp().DotnetDebugger.setSymbolOptions(e),Promise.resolve({})}_breakpointLocations(e){return this._withThread(async r=>{let i=this.sourceContainer.source(e.source);return i?{breakpoints:(await this.breakpointManager.getBreakpointLocations(r,i,new rr(e.line,e.column||1),new rr(e.endLine||e.line+1,e.endColumn||e.column||1))).map(s=>s.uiLocations.find(o=>o.source===i)).filter(Mt).map(s=>({line:s.lineNumber,column:s.columnNumber}))}:{breakpoints:[]}})}_stepInTargets(e){return this._withThread(async r=>({targets:await r.getStepInTargets(e.frameId)}))}_setSourceMapStepping({enabled:e}){return this.sourceContainer.doSourceMappedStepping=e,Promise.resolve({})}async _saveDiagnosticLogs(e){let r=this._services.get(le).getRecentLogs();return await this._services.get(Ie).writeFile(e,r.map(i=>JSON.stringify(i)).join(`
`)),{}}async launchBlocker(){await this._configurationDoneDeferred.promise,await this._services.get(tf).launchBlocker,await this.breakpointManager.launchBlocker()}async _onSetExcludedCallers({callers:e}){return(await this._threadDeferred.promise).setExcludedCallers(e),{}}async onInitialize(e){console.assert(e.linesStartAt1),console.assert(e.columnsStartAt1);let r=Cl.capabilities(!0);return setTimeout(()=>this.dap.initialized({}),0),setTimeout(()=>{var i;return(i=this._thread)==null?void 0:i.dapInitialized()},0),r}static capabilities(e=!1){return{supportsConfigurationDoneRequest:!0,supportsFunctionBreakpoints:!1,supportsConditionalBreakpoints:!0,supportsHitConditionalBreakpoints:!0,supportsEvaluateForHovers:!0,supportsReadMemoryRequest:!0,supportsWriteMemoryRequest:!0,exceptionBreakpointFilters:[{filter:"all",label:Tn.t("Caught Exceptions"),default:!1,supportsCondition:!0,description:Tn.t("Breaks on all throw errors, even if they're caught later."),conditionDescription:'error.name == "MyError"'},{filter:"uncaught",label:Tn.t("Uncaught Exceptions"),default:!1,supportsCondition:!0,description:Tn.t("Breaks only on errors or promise rejections that are not handled."),conditionDescription:'error.name == "MyError"'}],supportsStepBack:!1,supportsSetVariable:!0,supportsRestartFrame:!0,supportsGotoTargetsRequest:!1,supportsStepInTargetsRequest:!0,supportsCompletionsRequest:!0,supportsModulesRequest:!1,additionalModuleColumns:[],supportedChecksumAlgorithms:[],supportsRestartRequest:!0,supportsExceptionOptions:!1,supportsValueFormattingOptions:!0,supportsExceptionInfoRequest:!0,supportTerminateDebuggee:!0,supportsDelayedStackTraceLoading:!0,supportsLoadedSourcesRequest:!0,supportsLogPoints:!0,supportsTerminateThreadsRequest:!1,supportsSetExpression:!0,supportsTerminateRequest:!1,completionTriggerCharacters:[".","[",'"',"'"],supportsBreakpointLocationsRequest:!0,supportsClipboardContext:!0,supportsExceptionFilterOptions:!0,supportsEvaluationOptions:!!e,supportsDebuggerProperties:!!e,supportsSetSymbolOptions:!!e}}async _onSetBreakpoints(e){var r;return this.breakpointManager.setBreakpoints(e,((r=e.breakpoints)==null?void 0:r.map(()=>this.breakpointIdCounter()))??[])}async setExceptionBreakpoints(e){return await this._services.get(tf).setBreakpoints(e),{}}async configurationDone(){return this._configurationDoneDeferred.resolve(),{}}async _onLoadedSources(){return{sources:await this.sourceContainer.loadedSources()}}async _onDisableSourcemap(e){var i;let r=this.sourceContainer.source(e.source);if(!r)return it(Tn.t("Source not found"));if(!(r instanceof Ut))return it(Tn.t("Source not a source map"));for(let n of r.compiledToSourceUrl.keys())this.sourceContainer.disableSourceMapForSource(n,!0);return await((i=this._thread)==null?void 0:i.refreshStackTrace()),{}}async _onSource(e){e.source||(e.source={sourceReference:e.sourceReference}),e.source.path=Un(e.source.path);let r=this.sourceContainer.source(e.source);if(!r)return it(Tn.t("Source not found"));let i=await r.content();return i===void 0?(r instanceof Ut&&this.dap.suggestDisableSourcemap({source:e.source}),it(Tn.t("Unable to retrieve source content"))):{content:i,mimeType:r.getSuggestedMimeType}}async _onThreads(){let e=[];return this._thread&&e.push({id:this._thread.id,name:this._thread.name()}),{threads:e}}findVariableStore(e){if(!this._thread)return;let r=this._thread.pausedVariables();if(r&&e(r))return r;if(e(this._thread.replVariables))return this._thread.replVariables}async _onVariables(e){let r=this.findVariableStore(i=>i.hasVariable(e.variablesReference));return{variables:await(r==null?void 0:r.getVariables(e))??[]}}async _onReadMemory(e){var n;let r=e.memoryReference,i=await((n=this.findVariableStore(s=>s.hasMemory(r)))==null?void 0:n.readMemory(r,e.offset??0,e.count));return i?{address:"0",data:i.toString("base64"),unreadableBytes:e.count-i.length}:{address:"0",unreadableBytes:e.count}}async _onWriteMemory(e){var n;let r=e.memoryReference;return{bytesWritten:await((n=this.findVariableStore(s=>s.hasMemory(r)))==null?void 0:n.writeMemory(r,e.offset??0,Buffer.from(e.data,"base64")))}}async _onSetExpression(e){if(!this._thread)throw new re(YS());let r=await this._thread.evaluate({expression:`${e.expression} = ${rm(e.value)}`,context:"repl",frameId:e.frameId});return{value:r.result,variablesReference:r.variablesReference,indexedVariables:r.indexedVariables,namedVariables:r.namedVariables,presentationHint:r.presentationHint,type:r.type}}async _onSetVariable(e){let r=this.findVariableStore(i=>i.hasVariable(e.variablesReference));return r?(e.value=rm(e.value.trim()),r.setVariable(e)):it(Tn.t("Variable not found"))}_withThread(e){if(!this._thread)throw new re(YS());return e(this._thread)}async _refreshStackTrace(){if(!this._thread)return;this._thread.pausedDetails()&&await this._thread.refreshStackTrace()}createThread(e,r){this._thread=new Ja(this.sourceContainer,e,this.dap,r,this._services.get(Ma),this._services.get(le),this._services.get(ln),this._services.get(Tb),this.launchConfig,this.breakpointManager,this._services.get(r0),this._services.get(tf),this._services.get(Ka),this._services.get(Qa));let i=this._services.get(h0);i.connect(this.dap,this._thread),"profileStartup"in this.launchConfig&&this.launchConfig.profileStartup&&i.start(this.dap,this._thread,{type:vr.type});for(let n of this._customBreakpoints)this._thread.updateCustomBreakpoint(n,!0);return this.asyncStackPolicy.connect(e).then(n=>this._disposables.push(n)).catch(n=>this._services.get(le).error("internal","Error enabling async stacks",n)),this.breakpointManager.setThread(this._thread),this._services.get(xt).attach(e),this._threadDeferred.resolve(this._thread),this._thread}async enableCustomBreakpoints(e){let r=[];for(let i of e.ids)this._customBreakpoints.add(i),this._thread&&r.push(this._thread.updateCustomBreakpoint(i,!0));return await Promise.all(r),{}}async _disableCustomBreakpoints(e){let r=[];for(let i of e.ids)this._customBreakpoints.delete(i),this._thread&&r.push(this._thread.updateCustomBreakpoint(i,!1));return await Promise.all(r),{}}async _toggleSkipFileStatus(e){return await this._services.get(Ba).toggleSkippingFile(e),await this._refreshStackTrace(),{}}async _prettyPrintSource(e){if(!e.source||!this._thread)return{canPrettyPrint:!1};e.source.path=Un(e.source.path);let r=this.sourceContainer.source(e.source);if(!r)return it(Tn.t("Source not found"));let i=await r.prettyPrint();if(!i)return it(Tn.t("Unable to pretty print"));let{map:n,source:s}=i;return await this.breakpointManager.moveBreakpoints(this._thread,r,n,s),this.sourceContainer.clearDisabledSourceMaps(r),await this._refreshStackTrace(),{}}onEvaluate(e){return e.expression===".scripts"?this._dumpDiagnostics({fromSuggestion:!1}).then(this.dap.openDiagnosticTool).then(()=>({result:"Opening diagnostic tool...",variablesReference:0})):this._withThread(r=>r.evaluate(e))}async _dumpDiagnostics(e){let r={file:await this._services.get(Za).generateHtml()};return e.fromSuggestion&&this._services.get(ir).report("diagnosticPrompt",{event:"opened"}),r}async _requestCDPProxy(){return await this._cdpProxyProvider.proxy()}dispose(){this._disposables.dispose(),fb(this._services)}};var SX=require("inspector"),EX=require("fs"),zA=class{constructor(e){this.file=e;this.session=new SX.Session;this.session.connect()}async start(){try{await this.post("Profiler.enable")}catch{}await this.post("Profiler.start")}async stop(){let{profile:e}=await this.post("Profiler.stop");await EX.promises.writeFile(this.file,JSON.stringify(e))}dispose(){this.session.disconnect()}post(e,r){return new Promise((i,n)=>this.session.post(e,r,(s,o)=>{s?n(s):i(o)}))}};var XA=I(require("path"));function CX(t,e,r){let i=xX(t,e,"uncaughtException",r),n=xX(t,e,"unhandledRejection",r);return process.addListener("uncaughtException",i),process.addListener("unhandledRejection",n),{dispose:()=>{process.removeListener("uncaughtException",i),process.removeListener("unhandledRejection",n)}}}var xX=(t,e,r,i=!0)=>n=>{cAe(n)&&(e.report("error",{"!error":n,error:i?void 0:n,exceptionType:r}),t.error("runtime.exception","Unhandled error in debug adapter",n))},aAe=t=>typeof t=="object"&&!!t&&"stack"in t,uAe=XA.dirname(XA.dirname(XA.dirname(__dirname)));function cAe(t){var e;return!DX||aAe(t)&&!!((e=t.stack)!=null&&e.includes(uAe))}var DX=!1;function PX(){DX=!0}var JA=class{constructor(e,r,i,n){this._delegate=e;this._rootServices=i;this._disposables=new De;this._serviceTree=new WeakMap;this._root=new Gu(void 0);this.getLaunchers=Ee(()=>{let e=new Set(this._rootServices.getAll(Cr));for(let r of e)this._disposables.push(r.onTargetListChanged(()=>{let i=this.targetList();this._attachToNewTargets(i,r),this._terminateOrphanThreads(i)}));return e});this._dap=r.dap(),this._targetOrigin=n,this._disposables.callback(()=>fb(i)),this._disposables.push(CX(i.get(le),i.get(ir),i.get(kp))),r.attachTelemetry(i.get(ir));let s=this._dap,o=0,a;s.on("initialize",async u=>{this._rootServices.bind(_i).toConstantValue(u);let c=Cl.capabilities();return u.clientID==="vscode"&&PX(),setTimeout(()=>s.initialized({}),0),c}),s.on("setExceptionBreakpoints",async()=>({})),s.on("setBreakpoints",async u=>{var c,l;return(c=u.breakpoints)!=null&&c.length&&i.get(xt).notifyHadBreakpoint(),{breakpoints:((l=u.breakpoints)==null?void 0:l.map(()=>({id:++o,verified:!1,message:LX.t("Unbound breakpoint")})))??[]}}),s.on("configurationDone",async()=>({})),s.on("threads",async()=>({threads:[]})),s.on("loadedSources",async()=>({sources:[]})),s.on("breakpointLocations",()=>Promise.resolve({breakpoints:[]})),s.on("attach",async u=>(await this.boot(u,s),{})),s.on("launch",async u=>(await this.boot(u,s),{})),s.on("pause",async()=>({})),s.on("terminate",()=>this._terminateRoot(!0)),s.on("disconnect",u=>this._disconnectRoot(u)),s.on("restart",async({arguments:u})=>(await this._restart(u),{})),s.on("startSelfProfile",async({file:u})=>(a==null||a.dispose(),a=new zA(u),await a.start(),{})),s.on("stopSelfProfile",async()=>(a&&(await a.stop(),a.dispose(),a=void 0),{}))}async _terminateRoot(e){return this._root.state=1,await Promise.all([...this.getLaunchers()].map(r=>r.terminate(e))),await this._root.waitUntilChildrenAre(2),this._root.state=2,{}}async _disconnectRoot(e){return this._root.state<1&&await this._terminateRoot(e.terminateDebuggee),this._rootServices.get(ir).flush(),await this._root.waitUntilChildrenAre(3),this._root.state=3,{}}async boot(e,r){return this._boot(ha(e,this._rootServices.get(Co)),r)}async _boot(e,r){lAe(r),this.reportBootTelemetry(e),tX(this._rootServices,e,r),this._rootServices.get(le).setup(PM(r,e.trace));let i=e.timeout>0?mr.withTimeout(e.timeout):new mr;e.rootPath&&(e.rootPath=Un(e.rootPath)),this._launchParams=e;let n=await Promise.all([...this.getLaunchers()].map(s=>this._launch(s,e,i.token)));return Promise.all(n.map(s=>s.terminated)).then(s=>{let o=s.find(Mt);this._markTargetAsTerminated(this._root,{restart:!!(o!=null&&o.restart)})}),{}}reportBootTelemetry(e){let r=ha({type:e.type,request:e.request,name:"<string>",__workspaceFolder:"<workspace>"}),i=(n,s)=>typeof n=="string"?s&&r[s]===n?n:"<string>":n instanceof Array?n.map(o=>i(o)):n&&typeof n=="object"?fo(n,o=>i(o)):n;this._rootServices.get(ir).report("launch",{type:e.type,request:e.request,os:`${YA.platform()} ${YA.arch()}`,nodeVersion:process.version,adapterVersion:Ju,parameters:fo(e,i)})}async _restart(e){let r;if(e){let i=this._rootServices.get(Hg);r=ha({__workspaceFolder:i.__workspaceFolder,...e},this._rootServices.get(Co)),i.update(r)}await Promise.all([...this.getLaunchers()].map(i=>i.restart(r)))}async _launch(e,r,i){return(await this.captureLaunch(e,r,i)).blockSessionTermination?{terminated:new Promise(s=>{let o=this._disposables.push(e.onTerminated(a=>{o.dispose(),s(a)}))})}:{terminated:Promise.resolve(void 0)}}async captureLaunch(e,r,i){let n=e.constructor.name,s;try{s=await e.launch(r,{telemetryReporter:this._rootServices.get(ir),cancellationToken:i,targetOrigin:this._targetOrigin,dap:this._dap})}catch(o){throw this._rootServices.get(le).warn("runtime.launch","Launch returned error",{error:o,wasCancelled:i.isCancellationRequested,name:n}),o}return s.blockSessionTermination&&this._rootServices.get(le).info("runtime.launch","Launched successfully",{name:n}),s}dispose(){this._disposables.dispose(),this._terminateOrphanThreads([])}targetList(){let e=[];for(let r of this.getLaunchers())e.push(...r.targetList());return e}async attach(e,r){if(!this._launchParams)throw new Error("Cannot launch before params have been set");let i=e.value;if(!i.canAttach())return;let n=await i.attach();if(!n)return;let s=await this._delegate.acquireDap(i),o=s.dap(),a=this._launchParams;this._asyncStackPolicy||(this._asyncStackPolicy=IX(a.showAsyncStacks));let u=i.parent(),c=u&&this._serviceTree.get(u)||this._rootServices,l=Qz(c,i,o,n);s.attachTelemetry(l.get(ir)),this._serviceTree.set(i,c);let p=new Cl(o,this._asyncStackPolicy,a,l),f=p.createThread(n,i),h=async()=>(await p.launchBlocker(),i.runIfWaitingForDebugger(),e.threadData.resolve({thread:f,debugAdapter:p}),{});o.on("disconnect",g=>this._disconnectTarget(e,g)),o.on("terminate",()=>this._terminateTarget(e)),o.on("restart",async()=>(i.canRestart()?i.restart():await this._restart(),Promise.resolve({}))),await this._delegate.initAdapter(p,i,r)?h():(o.on("attach",h),o.on("launch",h)),await i.afterBind()}_attachToNewTargets(e,r){for(let i of e.values()){if(!i.waitingForDebugger()||Gu.targetNodes.has(i))continue;let n=i.parent(),s=n?Gu.targetNodes.get(n):this._root;if(!s)throw new Error(`Got target with unknown parent: ${i.name()}`);let o=new Gu(i);s.add(o),this.attach(o,r)}}async _terminateOrphanThreads(e,r){let i=[...this._root.all()].filter(n=>!e.includes(n.value));return Promise.all(i.map(n=>this._markTargetAsTerminated(n,r)))}async _markTargetAsTerminated(e,r={}){if(e.state>=1)return await e.waitUntil(2),{};if(e.state=1,TX(e)){let i=await e.threadData.promise;await i.thread.dispose(),i.debugAdapter.dap.terminated(r),i.debugAdapter.dispose()}else this._dap.terminated(r);return await e.waitUntilChildrenAre(2),e.state=2,{}}async _terminateTarget(e){return e.state>=3?{}:(e.value.canStop()?e.value.stop():this._terminateRoot(!0),await e.waitUntil(2),{})}async _disconnectTarget(e,r){if(e.state>=3)return{};e.state<1&&(r.terminateDebuggee!==!0&&e.value.canDetach()?await e.value.detach():e.value.canStop()?e.value.stop():this._terminateRoot(r.terminateDebuggee)),await e.waitUntil(2),await e.waitUntilChildrenAre(3),e.state=3,queueMicrotask(()=>this._delegate.releaseDap(e.value));let i=e.value.parent(),n=i?Gu.targetNodes.get(i):this._root;return n==null||n.remove(e),{}}};function lAe(t){XH&&t.output({category:"console",output:`Note: Using the "preview" debug extension
`})}var TX=t=>!!t.value,k$=class{constructor(e){this.value=e;this.threadData=We();this._state=0;this._children=new Set;this._stateChangeEmitter=new X;e&&k$.targetNodes.set(e,this)}get state(){return this._state}set state(e){e>this._state&&(this._state=e,this._stateChangeEmitter.fire(e))}add(e){this._children.add(e)}remove(e){this._children.delete(e)}async waitUntil(e){return this._state>=e?Promise.resolve():new Promise(r=>{let i=this._stateChangeEmitter.event(n=>{n>=e&&(i.dispose(),r())})})}async waitUntilChildrenAre(e){await Promise.all([...this._children].map(r=>r.waitUntil(e)))}*all(){TX(this)&&(yield this);for(let e of this._children)yield*e.all()}},Gu=k$;Gu.targetNodes=new WeakMap;var QA=class{constructor(e,r,i,n,s){this.debugSession=e;this.logger=i;this.sessionStates=n;this.parent=s;this.subscriptions=new De;r instanceof Zl?this.connection=r:(r.setLogger(i),this.connection=new Zl(r,this.logger))}listenToTarget(e){this.subscriptions.push(e.onNameChanged(()=>this.setName(e)),this.sessionStates.onAdd(([r])=>r===this.debugSession.id&&this.setName(e)),this.sessionStates.onRemove(([r])=>r===this.debugSession.id&&this.setName(e))),this.setName(e)}dispose(){this.subscriptions.dispose()}setName(e){let r=this.sessionStates.get(this.debugSession.id),i=e.name();this.parent instanceof gh&&(i=`${this.parent.debugSession.name}: ${i}`),this.debugSession.name=r?`${i} (${r})`:i}},gh=class extends QA{constructor(r,i,n){super(r,i,n.get(le),n.get(Rp));this.debugSession=r;this.services=n;this.connection.attachTelemetry(n.get(ir))}get binder(){return this._binder}createBinder(r){this._binder=new JA(r,this.connection,this.services,new f_(this.debugSession.id))}dispose(){var r,i;super.dispose(),(i=(r=this._binder)==null?void 0:r.dispose)==null||i.call(r)}},ZA=class{constructor(e,r){this.globalContainer=e;this.sessionLauncher=r;this._disposables=[];this._sessions=new Map;this._pendingTarget=new Map;this._sessionForTarget=new Map;this._sessionForTargetCallbacks=new Map}terminate(e){let r=this._sessions.get(e.id);this._sessions.delete(e.id),r&&r.dispose()}hasPendingTargetId(e){return this._pendingTarget.has(e)}createNewRootSession(e,r){let i=new gh(e,r,Zz(this.globalContainer));return i.createBinder(this),this._sessions.set(e.id,i),i}createNewChildSession(e,r,i){var c;let n=this._pendingTarget.get(r);if(!n)throw new Error(`Cannot find target ${r}`);let{target:s,parent:o}=n,a=new QA(e,i,o.logger,o.sessionStates,o);this._pendingTarget.delete(r),a.debugSession.name=s.name(),a.listenToTarget(s);let u=this._sessionForTargetCallbacks.get(s);return this._sessionForTargetCallbacks.delete(s),(c=u==null?void 0:u.fulfill)==null||c.call(u,a),this._sessions.set(e.id,a),a}async acquireDap(e){return(await this.getOrLaunchSession(e)).connection}getOrLaunchSession(e){let r=this._sessionForTarget.get(e);if(r)return r;let i=new Promise(async(n,s)=>{let o,a=e.parent();if(a?o=await this.getOrLaunchSession(a):o=this._sessions.get(e.targetOrigin().id),!o)throw new Error("Expected to get a parent debug session for target");this._pendingTarget.set(e.id(),{target:e,parent:o}),this._sessionForTargetCallbacks.set(e,{fulfill:n,reject:s});let u=o.debugSession.configuration,c={type:u.type==="pwa-extensionHost"?"pwa-chrome":u.type,name:e.name(),request:o.debugSession.configuration.request,__pendingTargetId:e.id(),preRestartTask:u.preRestartTask??u.postDebugTask,postRestartTask:u.postRestartTask??u.preLaunchTask};this.sessionLauncher.launch(o,e,c)});return this._sessionForTarget.set(e,i),i}initAdapter(e,r,i){return Promise.resolve(!1)}releaseDap(e){this._sessionForTarget.delete(e);let r=this._sessionForTargetCallbacks.get(e);r&&r.reject(new Error("Target gone")),this._sessionForTargetCallbacks.delete(e)}dispose(){for(let e of this._sessions.values())e.dispose();this._sessions.clear(),this._pendingTarget.clear(),this._sessionForTarget.clear(),this._sessionForTargetCallbacks.clear();for(let e of this._disposables)e.dispose();this._disposables=[]}};var eI=class{constructor(e,r,i="127.0.0.1"){this.host=i;this.disposables=[];this.servers=new Map;this.sessionManager=new ZA(e,r),this.portLeaseTracker=e.get(Ht),this.disposables.push(this.sessionManager)}createDebugServer(e,r){return e.configuration.__pendingTargetId?this.createChildDebugServer(e):this.createRootDebugServer(e,r)}createRootDebugServer(e,r){return this.innerCreateServer(e,i=>this.sessionManager.createNewRootSession(e,i),r)}createRootDebugSessionFromStreams(e,r,i){let n=new MH(r,i);return this.sessionManager.createNewRootSession(e,n)}createChildDebugServer(e,r){return this.innerCreateServer(e,i=>this.sessionManager.createNewChildSession(e,e.configuration.__pendingTargetId,i),r)}async innerCreateServer(e,r,i){let n=We(),s=a=>{let u=new MH(a,a),c=r(u);n.resolve(c.connection)},o=i===void 0?await new Promise((a,u)=>{let c=zy(),l=kX.createServer(s).on("error",u).on("close",()=>$X.promises.unlink(c).catch(()=>{})).listen(c,()=>a(l))}):await r3(this.portLeaseTracker,s,i,this.host);return this.servers.set(e.id,o),{server:o,connectionPromise:n.promise}}terminate(e){var r;this.sessionManager.terminate(e),(r=this.servers.get(e.id))==null||r.close(),this.servers.delete(e.id)}dispose(){this.sessionManager.dispose()}};var R$=class{launch(e,r,i){Ku.debug.startDebugging(e.debugSession.workspaceFolder,{...i,...r.supplementalConfig,serverReadyAction:e.debugSession.configuration.serverReadyAction,__parentId:e.debugSession.id},{parentSession:e.debugSession,consoleMode:Ku.DebugConsoleMode.MergeWithParent,noDebug:e.debugSession.configuration.noDebug,compact:e instanceof gh,lifecycleManagedByParent:!r.independentLifeycle})}},tI=class{constructor(e){this.sessionServerManager=new eI(e,new R$)}async createDebugAdapterDescriptor(e){let r=process.env.JS_DEBUG_USE_LOCAL_DAP_PORT;if(r)return new Ku.DebugAdapterServer(+r);let i=await this.sessionServerManager.createDebugServer(e);return new Ku.DebugAdapterNamedPipeServer(i.server.address())}terminate(e){this.sessionServerManager.terminate(e)}dispose(){this.sessionServerManager.dispose()}};function pAe(t){var o;er.l10n.bundle&&RX.config({contents:er.l10n.bundle});let e=eX({storagePath:process.platform==="win32"?(0,MX.tmpdir)():t.storagePath||t.extensionPath,isVsCode:!0,isRemote:!!process.env.JS_DEBUG_USE_COMPANION||((o=er.extensions.getExtension(Q$))==null?void 0:o.extensionKind)===er.ExtensionKind.Workspace,context:t});t.subscriptions.push(ke(er.commands,"extension.js-debug.npmScript",oz),ke(er.commands,"extension.js-debug.pickNodeProcess",e$),ke(er.commands,"extension.pwa-node-debug.attachNodeProcess",GK),ke(er.commands,"extension.js-debug.toggleSkippingFile",bX));let r=e.getAll(rA);for(let a of r){let u=a;t.subscriptions.push(er.debug.registerDebugConfigurationProvider(a.type,u));let c=vh.get(a.type);c&&t.subscriptions.push(er.debug.registerDebugConfigurationProvider(c,u))}let i=e.getAll(iA);for(let a of i)er.debug.registerDebugConfigurationProvider(a.type,a,er.DebugConfigurationProviderTriggerKind!==void 0?a.triggerKind:void 0);let n=new tI(e);t.subscriptions.push(...[...sI].map(a=>er.debug.registerDebugAdapterDescriptorFactory(a,n))),t.subscriptions.push(er.debug.onDidTerminateDebugSession(a=>n.terminate(a))),t.subscriptions.push(n);let s=e.get(nt);s.attach(),dX(t),hX(t,s),uX(t,e.get(no),e.get(Wu),e),mX(t,e),lX(t,e.get(no),e),yX(t,s),gX(t,s),e.getAll(Ai).forEach(a=>a.register(t))}function fAe(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-windows/index.js:
  (*!
   * is-windows <https://github.com/jonschlinkert/is-windows>
   *
   * Copyright © 2015-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
//# sourceMappingURL=extension.js.map
